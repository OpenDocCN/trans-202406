# 目录（真实内容）

1.  如何使用本书：简介

    **你的大脑对 Java 的反应。** 在*这里*，你试图*学习*一些东西，而*在这里*，你的*大脑*却帮你确保这些学习不会*固定*下来。你的大脑在思考，“最好为了更重要的事情留出空间，比如避开哪些野生动物以及裸体滑雪是否是个坏主意。” 那么，你如何让你的大脑认为你的生活取决于了解 Java 呢？

    1.  “这本书适合谁？”

    1.  “我们知道你在想什么”

    1.  “元认知：思考思维”

    1.  “这是我们做的事情：”

    1.  “这是你可以做的事情，来弯曲你的大脑”

    1.  “为了阅读本书，你需要准备什么：”

    1.  “你需要知道的最后时刻的事情：”

1.  第一章

    **Java 带你去新的地方。** 从它作为（软弱的）1.02 版本向公众发布开始，Java 以其友好的语法、面向对象的特性、内存管理以及最重要的——可移植性，吸引了程序员。我们将快速涉足并编写一些代码，编译并运行它。我们会讨论语法、循环、分支以及 Java 的魅力所在。赶紧开始吧。

    1.  “Java 的工作原理”

    1.  “你将在 Java 中做什么”

    1.  “Java 的简史”

    1.  “Java 中的代码结构”

    1.  “编写带有`main()`的类”

    1.  “简单的布尔测试”

    1.  “条件分支”

    1.  “编写严肃商业应用程序”

    1.  “短语生成器”

    1.  “练习”

    1.  “练习解答”

1.  第二章

    **我听说会涉及对象。** 在第一章中，我们把所有的代码都放在了 main()方法中。这并不完全是面向对象的。所以现在我们必须离开那个过程化的世界，开始创建一些属于我们自己的对象。我们将看看是什么让 Java 中的面向对象（OO）开发如此有趣。我们将探讨类和对象之间的区别。我们将看看对象如何改善你的生活。

    1.  “椅子大战”

    1.  “制作你的第一个对象”

    1.  “制作和测试电影对象”

    1.  “快！离开 main 方法！”

    1.  “运行猜谜游戏”

    1.  “练习”

    1.  “练习解答”

1.  第三章

    **变量有两种类型：基本类型和引用类型。** 生活中不仅仅只有整数、字符串和数组。如果你有一个 PetOwner 对象和一个 Dog 实例变量呢？或者一个 Car 和一个 Engine 呢？在这一章中，我们将揭开 Java 类型的神秘面纱，看看你可以*声明*什么样的变量，你可以*放入*什么样的变量，以及你可以*对*变量做什么。最后，我们将看到在可回收堆上生活的真实面貌。

    1.  “声明一个变量”

    1.  ““我想要一杯摩卡，不，改成浓缩。””

    1.  “远离那个关键字！”

    1.  “控制你的 Dog 对象”

    1.  “对象引用只是另一个变量值”

    1.  “在可回收堆上的生活”

    1.  “数组就像一盘杯子”

    1.  “一个狗的例子”

    1.  “练习”

    1.  “练习解答”

1.  第四章

    **状态影响行为，行为影响状态。** 我们知道对象有**状态**和**行为**，由**实例变量**和**方法**表示。现在我们将看看状态和行为是如何*相关*的。对象的行为使用对象的独特状态。换句话说，***方法使用实例变量的值。*** 比如，“如果狗的体重小于 14 磅，发出尖叫声，否则...” ***让我们去改变一些状态！***

    1.  “记住：类描述了对象知道什么和做什么”

    1.  “大小影响吠声”

    1.  “你可以向方法发送参数”

    1.  “你可以从方法中获取返回值”

    1.  “你可以向方法发送多个参数”

    1.  “参数和返回类型的酷炫用法”

    1.  “封装”

    1.  “数组中的对象如何行为？”

    1.  “声明和初始化实例变量”

    1.  “比较变量（基本类型或引用类型）”

    1.  “练习”

    1.  “习题解答”

1.  第五章

    **让我们的方法变得更强大吧。** 你已经涉足变量，玩过几个对象，并写了一些代码。但你需要更多的工具。像**操作符**。和**循环**。也许学习如何**生成随机数**会很有用。还有把**字符串转换为整数**，嗯，那会很酷。为什么不通过*构建*一个真实的东西来学习所有这些，看看从头开始编写（和测试）程序是什么感觉呢。 **也许是一个游戏**，像沉没一家初创公司（类似于战舰）。

    1.  “让我们构建类似战舰的游戏：“沉没一家初创公司””

    1.  “编写类”

    1.  “编写方法实现”

    1.  “为 SimpleStartup 类编写测试代码”

    1.  “checkYourself() 方法”

    1.  “准备 SimpleStartupGame 类的代码，一切发生在 main() 方法中”

    1.  “游戏的主方法”

    1.  “让我们玩吧”

    1.  “更多关于 for 循环的内容”

    1.  “增强型 for 循环”

    1.  “基本类型转换”

    1.  “练习”

    1.  “习题解答”

1.  第六章

    **Java 自带数百个预建类。** 如果你知道如何从 Java 库（通常称为**Java API**）中找到所需内容，就无需重复造轮子。 *你有更重要的事情要做。* 如果你要编写代码，最好只编写对你的应用程序定制的部分。 Java 核心库是一堆类，等待你像搭积木一样使用。

    1.  “在上一章中，我们留下了一个悬而未决的问题：一个错误”

    1.  “清醒一下，闻到图书馆的香味”

    1.  “ArrayList 的一些用法”

    1.  “比较 ArrayList 和普通数组”

    1.  “让我们打造真正的游戏：“沉没一家初创公司””

    1.  “准备真实的 StartupBust 类的代码”

    1.  “Startup 类的最终版本”

    1.  “超强大的布尔表达式”

    1.  “使用库（Java API）”

    1.  “练习”

    1.  “练习解答”

1.  第七章

    **未来规划你的程序。** 如果你能编写出别人*轻松*扩展的代码会怎样？如果你能编写出灵活的代码，以适应那些烦人的临时规格变更会怎样？当你进入多态规划时，你将学习到更好的类设计的 5 个步骤，多态性的 3 个技巧，制作灵活代码的 8 种方法，而且如果你现在行动——额外附赠一课关于利用继承的 4 个技巧。

    1.  “椅子大战再探……”

    1.  “理解继承”

    1.  “让我们为动物模拟程序设计继承树”

    1.  “寻找更多继承机会”

    1.  “使用 IS-A 和 HAS-A”

    1.  “你怎么知道你的继承做得对吗？”

    1.  “在设计继承时，你是在使用还是滥用？”

    1.  “遵守契约：覆盖规则”

    1.  “方法重载”

    1.  “练习”

    1.  “练习解答”

1.  第八章

    **继承只是开始。** 要利用多态性，我们需要接口。我们需要超越简单的继承，通过设计和编码接口获得的灵活性。什么是接口？一个 100%的抽象类。什么是抽象类？不能被实例化的类。这有什么好处？阅读本章内容……

    1.  “我们在设计时有遗漏吗？”

    1.  “编译器不允许你实例化抽象类”

    1.  “抽象 vs. 具体”

    1.  “你必须实现所有抽象方法”

    1.  “多态性实例”

    1.  “非动物呢？为什么不设计一个足够通用的类来接受任何东西？”

    1.  “当狗不像狗那样行动时”

    1.  “让我们探索一些设计选项，以便在宠物店程序中重用我们现有的一些类”

    1.  “制作和实现 Pet 接口”

    1.  “调用方法的超类版本”

    1.  “练习”

    1.  “练习解答”

1.  第九章

    **对象出生和死亡。** 你有控制权。你决定何时以及如何*构造*它们。你决定何时*丢弃*它们。**垃圾收集器（gc）**回收内存。我们将看看对象如何创建，它们居住在哪里，以及如何高效地保留或丢弃它们。这意味着我们将讨论堆、栈、作用域、构造函数、超类构造函数、空引用以及 gc 的资格。

    1.  “栈与堆：事物居住的地方”

    1.  “方法被堆叠”

    1.  “本地对象变量怎么样？”

    1.  “对象创建的奇迹”

    1.  “构造一个鸭子”

    1.  “编译器总是为你创建无参数构造函数吗？不！”

    1.  “构造函数四要素微观观察”

    1.  “超类构造函数在对象生命周期中的角色”

    1.  “子类是否可以在父类之前存在？”

    1.  “引用变量怎么样？”

    1.  图示

    1.  “练习”

    1.  “练习解答”

1.  第十章

    **做数学计算。** Java API 提供了求绝对值、四舍五入、最小/最大值等方法。但是格式化呢？你可能希望数字精确到小数点后两位，或者在正确的位置使用逗号。你可能还想打印和操作日期。还有将字符串解析为数字？或者将数字转换为字符串？我们将首先学习变量或方法被*静态*修饰意味着什么。

    1.  “MATH 方法：离全局方法最近的一种”

    1.  “常规（非静态）与静态方法的区别”

    1.  “初始化静态变量”

    1.  “数学方法”

    1.  “包装原始类型”

    1.  “自动装箱几乎适用于所有地方”

    1.  “现在反过来…将原始数转换为字符串”

    1.  “数字格式化”

    1.  “格式化说明符”

    1.  “练习”

    1.  “练习解答”

1.  第十一章

    **在 Java 中排序非常简单。** 您拥有收集和操作数据的所有工具，而无需编写自己的排序算法。 Java 集合框架具有一种数据结构，几乎可以处理您可能需要执行的任何操作。 想要保持可以轻松添加内容的列表？ 想要通过名称查找内容？ 想要创建一个自动删除所有重复项的列表？ 将同事按照他们背后背刺你的次数进行排序？

    1.  “探索 java.util API，List 和 Collections”

    1.  “泛型意味着更多的类型安全性”

    1.  “重新审视 sort()方法”

    1.  “新的、改进的可比较 Song 类”

    1.  “仅使用 Comparators 进行排序”

    1.  “使用 Lambda 更新 Jukebox 代码”

    1.  “使用 HashSet 而不是 ArrayList”

    1.  “关于 TreeSet 你必须知道的…”

    1.  “我们已经看到了列表和集合，现在我们将使用 Map”

    1.  “最后，回到泛型”

    1.  “练习解答”

1.  第十二章

    **如果……你不需要告诉计算机如何做某事会怎样？** 在这一章中，我们将看看 Streams API。 您将看到在使用流时 Lambda 表达式可以提供多大的帮助，以及如何使用 Streams API 来查询和转换集合中的数据。

    1.  “告诉计算机你想要什么”

    1.  “当 for 循环出错时”

    1.  “介绍 Streams API”

    1.  “从流中获取结果”

    1.  “使用流的工作指南”

    1.  “你好 Lambda，我的（并不那么）老朋友”

    1.  “识别功能接口”

    1.  “Lou 的挑战 #1：查找所有‘rock’歌曲”

    1.  “Lou 的挑战 #2：列出所有流派”

    1.  “练习”

    1.  “练习解答”

1.  第十三章

    **事情总是会发生。** 文件不在那里。服务器挂了。无论你是多么优秀的程序员，你也无法控制*一切*。当你编写一个风险方法时，你需要编写代码来处理可能发生的不良情况。但是，你如何*知道*一个方法是否存在风险？在哪里放置代码来*处理****异常***情况？在*本*章中，我们将构建一个使用风险 JavaSound API 的 MIDI 音乐播放器，所以我们最好先弄清楚。

    1.  “让我们制作一个音乐机”

    1.  “首先我们需要一个 Sequencer”

    1.  “异常是一个对象……类型为 Exception”

    1.  “在 try/catch 块中的流控制”

    1.  “我们是否提到一个方法可以抛出多个异常？”

    1.  “多个 catch 块必须从小到大排序”

    1.  “通过声明躲避（只是）推迟了不可避免的”

    1.  “代码厨房”

    1.  “版本 1：你的第一个声音播放器应用”

    1.  “版本 2：使用命令行参数来尝试不同的声音”

    1.  “练习”

    1.  “练习解答”

1.  第十四章

    **面对现实吧，你需要制作 GUI。** 即使你相信在余生中你只会编写服务器端代码，迟早你也需要编写工具，并且你会想要一个图形界面。我们将花两章内容来学习 GUI，并学习更多语言特性，包括**事件处理**和**内部类**。我们将在屏幕上放置一个按钮，我们会在屏幕上绘制，我们会显示 JPEG 图像，甚至还会做一些动画。

    1.  “一切从一个窗口开始”

    1.  “获取用户事件”

    1.  “监听器、源和事件”

    1.  “制作你自己的绘图小部件”

    1.  “在 paintComponent() 中做有趣的事情”

    1.  “GUI 布局：在一个窗口上放置多个小部件”

    1.  “内部类来拯救！”

    1.  “Lambda 再次拯救！”

    1.  “使用内部类进行动画”

    1.  “一个更简单的制作消息/事件的方法”

    1.  “练习”

    1.  “练习解答”

1.  第十五章

    **Swing 很简单。** 除非你真的在乎每样东西放在哪里。Swing 代码*看起来*简单，但编译它，运行它，看它，然后想，“嘿，*那*不应该放在*那里。”* 让它*易*于*编码*的东西也是让它*难*于*控制*的东西——**布局管理器。** 但稍加努力，你可以让布局管理器听从你的意愿。在这一章中，我们将继续学习 Swing，并更多地了解小部件。

    1.  “Swing 组件”

    1.  “布局管理器”

    1.  “三大布局管理器：border、flow 和 box”

    1.  “与 Swing 组件玩耍”

    1.  “代码厨房”

    1.  “制作 BeatBox”

    1.  “练习”

    1.  “练习解答”

1.  第十六章

    -   对象可以被扁平化和膨胀。对象有状态和行为。行为存在于类中，但*状态*存在于每个个体*对象*中。如果你的程序需要保存状态，*你可以用艰难的方式*，询问每个对象，费力地写入每个实例变量的值。或者，**你可以用简单的面向对象方式**——你只需冷冻干燥对象（序列化它），然后再恢复（反序列化）它即可。

    1.  “将序列化对象写入文件”

    1.  “如果你想让你的类可序列化，请实现 Serializable”

    1.  “反序列化：恢复对象”

    1.  “版本标识：一个重要的序列化陷阱”

    1.  “将字符串写入文本文件”

    1.  “从文本文件读取”

    1.  “问答卡玩家（代码概述）”

    1.  “路径、Paths 和文件（与目录搞乱）”

    1.  “最后，仔细看看 `finally`”

    1.  “保存 BeatBox 模式”

    1.  “练习”

    1.  “练习解答”

1.  第十七章

    **与外界连接。** 很容易。所有底层网络细节都由 java.net 库中的类处理。Java 的一个最好的特性是通过网络发送和接收数据实际上只是稍微不同的 I/O 操作。在本章中，我们将创建客户端套接字。我们将创建服务器套接字。我们将创建客户端和服务器。在本章结束前，您将拥有一个完全功能的、多线程的聊天客户端。我们刚刚说过*多线程吗？*

    1.  “连接、发送和接收”

    1.  “DailyAdviceClient”

    1.  “编写简单的服务器应用程序”

    1.  “Java 有多个线程但只有一个 Thread 类”

    1.  “新线程的三个状态”

    1.  “让线程休眠”

    1.  “创建并启动两个（或更多！）线程”

    1.  “线程池的关闭时间”

    1.  “新的和改进的 SimpleChatClient”

    1.  “练习”

    1.  “练习解决方案”

1.  第十八章

    **同时做两件或更多的事情很难。** 编写多线程代码很简单。编写符合您期望的多线程代码可能会更加困难。在本章中，我们将向您展示当两个或更多线程同时工作时可能出现的问题。您将了解一些 java.util.concurrent 中的工具，这些工具可以帮助您编写正确工作的多线程代码。您将学习如何创建不变对象（不会更改的对象），这些对象对于多个线程使用是安全的。到本章结束时，您将拥有许多处理并发的工具。

    1.  “Ryan 和 Monica 问题，在代码中”

    1.  “使用对象的锁”

    1.  “可怕的“丢失更新”问题”

    1.  “使 increment()方法变为原子操作。同步它！”

    1.  “死锁，同步的致命副作用”

    1.  “使用原子变量进行比较和交换”

    1.  “使用不可变对象”

    1.  “共享数据的更多问题”

    1.  “使用线程安全的数据结构”

    1.  “练习”

    1.  “练习解决方案”

1.  附录 A

    **最终的代码厨房**。全面的客户端-服务器聊天 BeatBox 的所有代码。你成为摇滚明星的机会。

    1.  “最终的 BeatBox 客户端程序”

    1.  “最终的 BeatBox 服务器程序”

1.  附录 B

    **未包含在本书其余部分中的前十个话题**。我们还不能就这样把你送出世界。我们还有一些东西要告诉你，但*这真的是*书的结尾。这一次我们是认真的。

    1.  “#11 JShell (Java REPL)”

    1.  “#10 包（Packages）”

    1.  “#9 字符串和包装类的不可变性”

    1.  “#8 访问级别和访问修饰符（谁能看到什么）”

    1.  “#7 可变参数”

    1.  “#6 注解（Annotations）”

    1.  “#5 Lambdas 和 Maps”

    1.  “#4 并行流”

    1.  “#3 枚举（也称为枚举类型或 enums）”

    1.  “#2 本地变量类型推断（var）”

    1.  “#1 记录（Records）”
