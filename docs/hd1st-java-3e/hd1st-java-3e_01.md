# 第二章：目录（真实内容）

1.  如何使用本书：介绍

    **Java 对你的大脑来说就像这样。** 在这里*你正在*尝试*学习*一些东西，而你的*大脑*则正在帮你确保这种学习不会*留下*痕迹。你的大脑在思考，“最好为更重要的事情留出空间，比如避开哪些野生动物以及裸体滑雪是否是个坏主意。”那么，你如何欺骗你的大脑，让它觉得你的生活依赖于了解 Java 呢？

    1.  “这本书是为谁准备的？”

    1.  “我们知道你在想什么”

    1.  “元认知：思考思维”

    1.  “这就是我们做的事情：”

    1.  “这里是你可以做的事情，弯曲你的大脑以顺从”

    1.  “你需要准备什么来阅读这本书：”

    1.  “最后需要了解的事项：”

1.  第一章

    **Java 将带你去新的地方。** 从其作为（软弱）版本 1.02 发布给公众以来，Java 以其友好的语法、面向对象的特性、内存管理，以及最重要的是——可移植性的承诺，吸引了程序员。我们将快速浏览并编写一些代码，编译并运行它们。我们讨论语法、循环、分支以及使 Java 如此酷的因素。立即开始。

    1.  “Java 的工作原理”

    1.  “你将在 Java 中做什么”

    1.  “Java 的一个非常简短的历史”

    1.  “Java 中的代码结构”

    1.  “编写带有`main()`方法的类”

    1.  “简单的布尔测试”

    1.  “条件分支”

    1.  “编写一个严肃的商业应用程序”

    1.  “短句-生成器”

    1.  “练习”

    1.  “练习解决方案”

1.  第二章

    **我听说这里会有对象。** 在第一章中，我们将所有代码放在 main()方法中。这并不完全是面向对象的。所以现在我们必须离开那个过程化的世界，开始制作一些属于我们自己的对象。我们将探讨什么使得 Java 中的面向对象（OO）开发如此有趣。我们将看看类和对象之间的区别。我们将看看对象如何改善你的生活。

    1.  “椅子大战”

    1.  “制作你的第一个对象”

    1.  “创建和测试电影对象”

    1.  “快！离开主函数！”

    1.  “运行猜谜游戏”

    1.  “练习”

    1.  “练习解答”

1.  第三章

    **变量有两种类型：原始类型和引用类型。** 生活中肯定不止整数、字符串和数组这些。如果你有一个 PetOwner 对象和一个 Dog 实例变量呢？或者一个 Car 对象和一个 Engine 实例变量呢？本章将揭开 Java 类型的神秘面纱，探讨你可以 *声明* 为变量的内容，可以 *放置* 在变量中的内容，以及你可以对变量 *执行* 什么操作。最后，我们将真正了解垃圾回收堆上的生活是怎样的。

    1.  “声明一个变量”

    1.  ““我想要一杯双倍摩卡，不对，改成整数。””

    1.  “远离那个关键词！”

    1.  “控制你的狗对象”

    1.  “对象引用只是另一个变量值”

    1.  “在可回收垃圾堆上的生活”

    1.  “数组就像一盘杯子”

    1.  “一个狗的例子”

    1.  “练习”

    1.  “练习解答”

1.  第四章

    **状态影响行为，行为影响状态。** 我们知道对象具有 **状态** 和 **行为**，由 **实例变量** 和 **方法** 表示。现在我们来看看状态和行为如何 *相关*。对象的行为使用对象的独特状态。换句话说，***方法使用实例变量的值***。比如，“如果狗的体重小于 14 磅，发出吠声，否则...” ***让我们去改变一些状态吧！***

    1.  “记住：一个类描述对象知道什么和做什么”

    1.  “大小会影响叫声”

    1.  “可以将事物送到一个方法中”

    1.  “可以从一个方法中获取事物回来”

    1.  “可以向方法发送多个参数”

    1.  “使用参数和返回类型进行的酷炫操作”

    1.  “封装”

    1.  “数组中的对象如何运作？”

    1.  “声明和初始化实例变量”

    1.  “比较变量（原始类型或引用）”

    1.  “练习”

    1.  “练习解决方案”

1.  第五章

    **让我们在我们的方法中加入一些实力。** 你曾经涉猎过变量，玩过一些对象，并写了一点代码。但你需要更多的工具。就像**运算符。** 和 **循环。** 或许生成随机数也是有用的。还有把 **String 转换为 int**，是的，那将很酷。我们为什么不通过*构建*一些真实的东西来学习所有这些，看看从头开始编写（和测试）程序是什么感觉。**也许是一个游戏**，像“击沉一家初创公司”（类似于战舰）。

    1.  “让我们建立一个类似于战舰的游戏：“击沉一个初创公司””

    1.  “开发一个类”

    1.  “编写方法实现”

    1.  “为 SimpleStartup 类编写测试代码”

    1.  “检查方法 checkYourself()”

    1.  “SimpleStartupGame 类的准备代码，所有事情都发生在 main() 中”

    1.  “游戏的 main() 方法”

    1.  “让我们玩吧”

    1.  “关于 for 循环的更多内容”

    1.  “增强型 for 循环”

    1.  “基本类型的转换”

    1.  “练习”

    1.  “练习解决方案”

1.  第六章

    **Java 自带数百个预建类。** 如果你知道如何从 Java 库（通常称为 **Java API**）中找到所需的内容，你就无需重复发明轮子。*你有更重要的事情要做。* 如果你要写代码，最好只写你的应用程序中定制的部分。核心 Java 库就像一个等待你使用的巨大的类积木堆。

    1.  “在上一章中，我们留下了一个悬念：一个 bug”

    1.  “醒来，闻闻图书馆的味道”

    1.  “ArrayList 的一些用法”

    1.  “比较 ArrayList 和常规数组”

    1.  “让我们建立真正的游戏：“击沉一个初创公司””

    1.  “真实的 StartupBust 类的准备代码”

    1.  “初创公司类的最终版本”

    1.  “超强大的布尔表达式”

    1.  “使用库（Java API）”

    1.  “练习”

    1.  “练习解答”

1.  第七章

    **计划你的程序，考虑未来。** 如果您能编写其他人可以轻松扩展的代码，那该有多好？如果您能编写灵活的代码，以应对那些令人讨厌的最后一分钟规格更改？当您进入多态性计划时，您将学习更好的类设计的 5 个步骤，多态性的 3 个技巧，灵活编码的 8 种方式，如果现在行动——还有一个关于利用继承的 4 个提示的奖励课程。

    1.  “再谈椅子大战……”

    1.  “理解继承”

    1.  “让我们为动物模拟程序设计继承树”

    1.  “寻找更多继承机会”

    1.  “使用 IS-A 和 HAS-A”

    1.  “你怎么知道你的继承是正确的？”

    1.  “在设计中使用继承时，您是在使用还是滥用？”

    1.  “遵守契约：覆盖规则”

    1.  “重载方法”

    1.  “练习”

    1.  “练习解答”

1.  第八章

    **继承只是一个开始。** 要利用多态性，我们需要接口。我们需要超越简单的继承，去追求只有通过设计和编码接口才能实现的灵活性。什么是接口？一个完全抽象的类。什么是抽象类？一个不能被实例化的类。那有什么好处？请阅读本章……

    1.  “在设计这个时，我们是否忘了什么？”

    1.  “编译器不允许您实例化抽象类”

    1.  “抽象 vs. 具体”

    1.  “您必须实现所有抽象方法”

    1.  “在动作中的多态性”

    1.  “那些非动物呢？为什么不制作一个足够通用以接受任何东西的类？”

    1.  “当一只狗不像一只狗时”

    1.  “让我们探索一些设计选项，以在 PetShop 程序中重用我们现有的一些类”

    1.  “制作和实现 Pet 接口”

    1.  “调用方法的超类版本”

    1.  “练习”

    1.  “练习解答”

1.  第九章

    **对象的诞生和消亡。** 你有主导权。你决定何时以及如何*构造*它们。你决定何时*放弃*它们。**垃圾收集器（gc）**回收内存。我们将看看对象是如何创建的，它们住在哪里，以及如何高效地保留或放弃它们。这意味着我们将讨论堆、栈、作用域、构造函数、超类构造函数、空引用和 gc 资格。

    1.  “栈和堆：事物存放的地方”

    1.  “方法堆叠”

    1.  “关于是对象的局部变量怎么办？”

    1.  “对象创建的奇迹”

    1.  “构造一只鸭子”

    1.  “编译器总是为你创建无参构造函数吗？不！”

    1.  “构造函数四要素的微观回顾”

    1.  “超类构造函数在对象生命周期中的作用”

    1.  “子类能在父类之前存在吗？”

    1.  “关于引用变量呢？”

    1.  图表 

    1.  “练习”

    1.  “练习解答”

1.  第十章

    **做数学。** Java API 中有绝对值、四舍五入、最小/最大值等方法。但是格式化呢？你可能希望数字打印出精确的两位小数，或者在所有正确的位置加上逗号。你可能还想打印和操作日期。那么将字符串解析为数字呢？或者将数字转换为字符串呢？我们将从学习变量或方法*静态*的含义开始。

    1.  “MATH 方法：你能接近的*全局*方法”

    1.  “常规（非静态）和静态方法之间的区别”

    1.  “初始化静态变量”

    1.  “数学方法”

    1.  “包装一个原始类型”

    1.  “自动装箱几乎适用于所有地方”

    1.  “现在反过来…将原始数字转换为字符串”

    1.  “数字格式化”

    1.  “格式说明符”

    1.  “练习”

    1.  “练习解答”

1.  第十一章

    **在 Java 中排序非常简单。** 您拥有所有收集和操作数据的工具，而无需编写自己的排序算法。Java 集合框架具有适用于几乎任何您需要执行的操作的数据结构。想要保持可以轻松添加的列表？想要按名称查找某些内容？想要创建一个自动删除所有重复项的列表？将您的同事按背后捅你的次数排序？

    1.  “探索 java.util API，List 和 Collections”

    1.  “泛型意味着更多的类型安全”

    1.  “重新审视 sort() 方法”

    1.  “全新、改进的可比较 Song 类”

    1.  “仅使用比较器进行排序”

    1.  “使用 lambda 更新点播器代码”

    1.  “使用 HashSet 而不是 ArrayList”

    1.  “关于 TreeSet 必须知道的内容…”

    1.  “我们已经见过列表和集合，现在我们将使用映射”

    1.  “最后，回到泛型”

    1.  “练习解答”

1.  第十二章

    **如果……您不需要告诉计算机如何做某事呢？** 在本章中，我们将探讨流 API。您将看到在使用流时，Lambda 表达式可以提供多么有帮助，并学习如何使用流 API 查询和转换集合中的数据。

    1.  “告诉计算机你想要什么”

    1.  “当 for 循环出错时”

    1.  “介绍 Streams API”

    1.  “从流中获取结果”

    1.  “使用流的工作指南”

    1.  “你好 Lambda，我的（不那么）老朋友”

    1.  “识别函数接口”

    1.  “Lou 的挑战 #1：找出所有“rock”歌曲”

    1.  “Lou 的挑战 #2：列出所有流派”

    1.  “练习”

    1.  “练习解答”

1.  第十三章

    **发生了什么。** 文件不在那里。服务器宕机了。无论你是多么优秀的程序员，你也无法控制*一切*。当你编写一个风险方法时，你需要编写代码来处理可能发生的问题。但是，你如何*知道*一个方法是有风险的？在哪里放置代码来*处理****异常***情况？在*这*一章中，我们将建立一个使用风险 JavaSound API 的 MIDI 音乐播放器，所以我们最好了解一下。

    1.  “让我们制作一个音乐机”

    1.  “首先，我们需要一个 Sequencer”

    1.  “异常是 Exception 类型的对象……”

    1.  “在 try/soliduscatch 块中的流控制”

    1.  “我们是否提到过一个方法可以抛出多个异常？”

    1.  “多个捕获块必须按从小到大的顺序排列”

    1.  “只有通过声明才能拖延（Ducking）必然发生的事情”

    1.  “代码厨房”

    1.  “版本 1：你的第一个声音播放器应用程序”

    1.  “版本 2：使用命令行参数来尝试声音”

    1.  “练习”

    1.  “练习解答”

1.  第十四章

    **面对它，你需要制作 GUI。** 即使你相信在余生中只会编写服务器端代码，迟早你也会需要编写工具，并且你会想要一个图形界面。我们将花两章的时间来学习 GUI，并了解更多语言特性，包括**事件处理**和**内部类**。我们将在屏幕上放置一个按钮，我们将在屏幕上绘制，我们将显示 JPEG 图像，甚至做一些动画。

    1.  “一切从一个窗口开始”

    1.  “获取用户事件”

    1.  “监听器、源和事件”

    1.  “制作自己的绘图小部件”

    1.  “在 paintComponent() 中玩耍的有趣事情”

    1.  “GUI 布局：在框架上放置多个小部件”

    1.  “内部类来拯救！”

    1.  “再次，lambda 来拯救！”

    1.  “使用内部类进行动画”

    1.  “制作消息/事件的更简单方法”

    1.  “练习”

    1.  “练习解答”

1.  第十五章

    **Swing 很简单。** 除非你真的在乎每样东西放在哪里。 Swing 代码*看起来*简单，但是编译它，运行它，看它，然后想，“嘿，*这不应该放在那里。”* 让编码*变得容易*的东西也是让控制*变得困难*的东西——**布局管理器**。但是稍加努力，你可以让布局管理器服从你的意愿。在这一章中，我们将继续学习 Swing 并了解更多的小部件。

    1.  “Swing 组件”

    1.  “布局管理器”

    1.  “三大布局管理器：边框、流式和盒状”

    1.  “玩转 Swing 组件”

    1.  “代码厨房”

    1.  “制作 BeatBox”

    1.  “练习”

    1.  “练习解答”

1.  第十六章

    对象可以被展平和充气。对象有状态和行为。行为存在于类中，但*状态*存在于每个单独的*对象*中。如果你的程序需要保存状态，*你可以走一条艰难的路*，询问每个对象，费力地写下每个实例变量的值。或者，**你可以以简单的面向对象方式做**——你只需冷冻对象（序列化它），然后重新组成（反序列化）它就可以恢复状态。

    1.  “将对象序列化到文件”

    1.  “如果你希望你的类可序列化，实现 Serializable 接口”

    1.  “反序列化：恢复对象”

    1.  “版本 ID：一个大的序列化陷阱”

    1.  “将字符串写入文本文件”

    1.  “从文本文件读取”

    1.  “Quiz Card Player（代码大纲）”

    1.  “路径、路径和文件（搞乱目录）”

    1.  “最后，仔细看看 `finally`”

    1.  “保存 BeatBox 模式”

    1.  “练习”

    1.  “练习解答”

1.  第十七章

    **连接到外部世界。** 这很容易。所有底层网络细节都由 java.net 库中的类处理。Java 的一个最佳特性是，在网络上传输和接收数据实际上就是使用稍微不同的连接流进行 I/O。在本章中，我们将创建客户端套接字。我们将创建服务器套接字。我们将创建客户端和服务器。在本章结束前，您将拥有一个完全功能的、多线程聊天客户端。我们刚刚说过*多线程*？

    1.  “连接、发送和接收”

    1.  “每日建议客户端”

    1.  “编写简单的服务器应用程序”

    1.  “Java 有多个线程但只有一个 Thread 类”

    1.  “新线程的三种状态”

    1.  “让线程休眠”

    1.  “创建和启动两个（或更多！）线程”

    1.  “线程池的关闭时间”

    1.  “全新改进的 SimpleChatClient”

    1.  “练习”

    1.  “练习解答”

1.  第十八章

    **同时做两件或更多事情是困难的。** 编写多线程代码很容易。编写符合预期工作方式的多线程代码可能要困难得多。在本章的最后，我们将展示当两个或更多线程同时工作时可能出现的问题。您将了解 java.util.concurrent 中的一些工具，这些工具可以帮助您编写正确工作的多线程代码。您将学会如何创建不可变对象（不会改变的对象），这些对象对多个线程使用是安全的。到本章结束时，您将拥有许多不同的工具，用于处理并发问题。

    1.  “The Ryan and Monica problem, in code”

    1.  “使用对象的锁”

    1.  “可怕的“丢失更新”问题”

    1.  “使 increment()方法变为原子操作。同步它！”

    1.  “死锁，同步的致命副作用”

    1.  “使用原子变量进行比较和交换”

    1.  “使用不可变对象”

    1.  “共享数据的更多问题”

    1.  “使用线程安全的数据结构”

    1.  “练习”

    1.  “练习解答”

1.  附录 A

    **Final Code Kitchen.** 所有完整客户端-服务器聊天 Beat Box 的代码。你成为摇滚明星的机会。

    1.  “最终 BeatBox 客户端程序”

    1.  “最终 BeatBox 服务器程序”

1.  附录 B

    **未能进入本书其余部分的前十个主题。** 我们还不能就这样把你送出去。还有一些东西要告诉你，但这确实是书的结尾。而且这一次我们是认真的。

    1.  “#11 JShell (Java REPL)”

    1.  “#10 包”

    1.  “#9 字符串和包装类中的不可变性”

    1.  “#8 访问级别和访问修饰符 (谁可以看见什么)”

    1.  “#7 可变参数”

    1.  “#6 注解”

    1.  “#5 Lambdas and Maps”

    1.  “#4 并行流”

    1.  “#3 枚举 (也称为枚举类型或 enums)”

    1.  “#2 本地变量类型推断 (var)”

    1.  “#1 Records”
