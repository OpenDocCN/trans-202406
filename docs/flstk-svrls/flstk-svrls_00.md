# 前言

# 为什么我要写这本书

当我第一次学编程时，根本不知道软件开发的范围有多广。我只想做一个应用程序。哦，我一开始就发现自己是多么的天真，一旦开始深入挖掘和拼凑完成我想要做的事情所需要的所有东西。

我学到的其中一件主要的事情是，应用程序通常由两个主要部分组成：前端（或客户端代码）和后端 API 及服务。当时，云技术还处于起步阶段，学习如何构建全栈应用程序简直让人不知所措！这更加困难，因为我想要开发原生移动应用程序，而我发现，开发移动应用程序的门槛比开发 Web 应用程序要高得多。

快进到十年后，环境开始大不相同。曾经需要一大团队的开发人员才能完成的事情，现在有时只需要一个开发人员就能完成。像 React Native、Flutter 和 Cordova 这样的工具使开发者能够使用单一代码库构建和发布跨平台移动应用程序。像 AWS Amplify、Firebase 和其他云技术也使得同样的开发者能够更快地利用云来构建后端。

我认为我们正进入一个新范式，现在比以往任何时候都更容易成为一名全栈开发者，全栈开发者的定义也开始发生变化。我写这本书是为了阐述我对这一新范式在实践中是什么样子的愿景，并展示一种专门利用最前沿的前端和云技术的技术。我在这本书中描述的，是我认为软件工程的未来。

# 本书适合谁

本书适合任何想要构建全栈应用程序的软件工程师，特别是对云计算感兴趣的工程师。它还针对前端开发人员，旨在教他们如何利用现有技能集，使用云技术构建全栈应用程序。

它也是 CTO 和创业公司的创始人们的好资源，旨在最大限度提高效率，并在使用最少资源的同时，尽可能提高开发速度。本书中概述的技术非常适合快速原型设计和快速实验，使开发者和创始人能够迅速将他们的想法推向市场，并拥有一个在成功的情况下也具有可扩展性和耐用性的产品。

# 本书的组织结构

本书的目标是向你介绍构建使用 React 和无服务器技术的真实世界和可扩展全栈应用程序所需的所有组成部分。它逐步介绍了特性（如身份验证、API 和数据库）和一些实现这些特性的技术，无论是在前端还是后端，通过在每一章中构建不同的应用程序。

您创建的每个应用程序将基于前一章节学到的知识。在最后一章中，您将构建一个复杂的应用程序，利用许多在工作或创业中构建实际应用程序所需的云服务。完成本书学习后，您应该具备在使用 React 和 AWS 云技术构建自己的无服务器应用程序时所需的知识和理解。

第一章，*无服务器计算时代的全栈开发*

在本章中，我将描述无服务器哲学，介绍无服务器应用程序的特性和优势，并向您介绍 AWS 和 AWS Amplify CLI。

第二章，*使用 AWS Amplify 入门*

在本章中，我们将使用 AWS Amplify 创建和部署一个无服务器函数。我们将创建函数，然后添加 API 并与之交互。

第三章，*创建您的第一个应用程序*

在这里，我们将通过构建一个笔记应用程序，从头开始介绍创建新的全栈应用程序的基本过程。我们将创建一个新的 React 应用程序，初始化一个新的 Amplify 项目，添加一个 GraphQL API，然后从客户端（React 应用程序）连接到并与 API 进行交互。

第四章，*认证简介*

在本章中，我们将演示如何向应用程序添加认证。我们将从创建一个新的 React 应用程序开始，并使用 AWS Amplify React 库中的 `withAuthenticator` 高阶组件（HOC）添加基本的认证。我们将读取用户的元数据，并创建一个个人资料屏幕，让用户查看其信息。

第五章，*自定义认证策略*

在本章中，我们将通过使用 React、React Router 和 AWS Amplify 创建自定义认证流程来更仔细地研究认证。该应用程序将包括注册界面、登录界面和忘记密码界面。登录后，将显示一个主菜单，用户可以导航到其个人资料页面、地图页面和欢迎界面，这将作为应用程序的主视图。

第六章，*深入探讨无服务器函数：第一部分* 和 第七章，*深入探讨无服务器函数：第二部分*

在这里，我们将介绍无服务器函数以及如何在 React 应用程序中与其交互。我们将演示如何通过创建一个应用程序从一个受 CORS 保护的 API 获取柴犬图片，使用我们的代码存储在 AWS Lambda 函数中，并使用 AWS Amplify CLI 创建和配置该函数。

第八章，*深入了解 AWS AppSync*

在本章中，我们将基于我们在 第三章 中学到的内容构建一个更复杂的 API，该 API 包括多对多关系和多种授权类型。我们将构建一个允许管理员创建舞台和表演的事件应用程序。我们将允许所有用户能够阅读事件信息，无论他们是否已登录，但我们将只允许已登录的管理员用户创建、更新或删除事件和舞台。

第九章，*使用 Amplify DataStore 构建离线应用*

在本章中，我们将介绍如何使用 Amplify DataStore 添加离线功能。

第十章，*处理图像和存储*

在这里，我们将学习如何创建一个照片分享应用程序，允许用户上传和查看图像。

第十一章，*主机：使用 CI 和 CD 将您的应用程序部署到 Amplify Console*

在这一最后一章中，我们将把我们在 第十章 创建的照片分享应用程序部署到一个真实域上，使用 Amplify Console。我们将学习如何通过在更新合并到主分支时启动新的构建来添加持续集成（CI）和持续部署（CD）。最后，我们将学习如何添加自定义域，使您的应用程序可以在您拥有的真实 URL 上运行。

# 本书使用的约定

本书中使用了以下排版约定：

*斜体*

指示新术语、网址、电子邮件地址、文件名和文件扩展名。

`等宽`

用于程序清单，以及段落中用来指代程序元素，如变量或函数名，数据库，数据类型，环境变量，语句和关键字。

**`等宽粗体`**

显示用户应按字面意义键入的命令或其他文本。

*`等宽斜体`*

显示应替换为用户提供的值或上下文确定的值的文本。

###### 提示

此元素表示提示或建议。

###### 注意

此元素表示一般注释。

# 使用代码示例

补充材料（例如代码示例、练习等）可在 [*https://github.com/dabit3/full-stack-serverless-code*](https://github.com/dabit3/full-stack-serverless-code) 下载。

如果您有技术问题或在使用代码示例时遇到问题，请发送电子邮件至 *bookquestions@oreilly.com*。

本书旨在帮助您完成工作。一般情况下，如果本书提供示例代码，您可以在您的程序和文档中使用它。除非您复制了代码的大部分内容，否则您无需联系我们以获取许可。例如，编写一个使用本书多个代码片段的程序不需要许可。出售或分发 O’Reilly 书籍中的示例需要许可。引用本书并引用示例代码来回答问题不需要许可。将本书大量示例代码整合到您产品的文档中需要许可。

我们感谢您，但通常不需要署名。署名通常包括标题、作者、出版商和 ISBN。例如：“*Full Stack Serverless* by Nader Dabit (O’Reilly)。2020 年版权所有 Nader Dabit，978-1-492-05989-9。”

如果您认为您对示例代码的使用超出了合理使用范围或上述许可，请随时联系我们：*permissions@oreilly.com*。

# O’Reilly 在线学习

###### 注

超过 40 年以来，[*O’Reilly Media*](http://oreilly.com) 提供技术和业务培训、知识和见解，帮助公司取得成功。

我们独特的专家和创新者网络通过书籍、文章和我们的在线学习平台分享他们的知识和专业知识。O’Reilly 的在线学习平台提供即时访问实时培训课程、深度学习路径、交互式编码环境，以及来自 O’Reilly 和其他 200 多家出版商的广泛文本和视频。欲了解更多信息，请访问：[*http://oreilly.com*](http://oreilly.com)。

# 如何联系我们

请将有关本书的评论和问题发送至出版社：

+   O’Reilly Media, Inc.

+   1005 Gravenstein Highway North

+   加利福尼亚州塞巴斯托波尔，95472

+   800-998-9938（美国或加拿大）

+   707-829-0515（国际或本地）

+   707-829-0104（传真）

我们为这本书准备了一个网页，上面列出了勘误、示例和任何额外信息。您可以访问这个页面：[*https://oreil.ly/Full_Stack_Serverless*](https://oreil.ly/Full_Stack_Serverless)。

发送电子邮件至 *bookquestions@oreilly.com* 提出对本书的评论或技术问题。

欲了解有关我们的书籍和课程的新闻和信息，请访问：[*http://oreilly.com*](http://oreilly.com)。

在 Facebook 上找到我们：[*http://facebook.com/oreilly*](http://facebook.com/oreilly)

在 Twitter 上关注我们：[*http://twitter.com/oreillymedia*](http://twitter.com/oreillymedia)

在 YouTube 上观看我们：[*http://www.youtube.com/oreillymedia*](http://www.youtube.com/oreillymedia)

# 致谢

感谢我的妻子莉莉，她在我职业生涯中始终支持我，并且在我在办公室和家里加班写书时，超越了一切来维护我们的生活秩序。

感谢我的孩子们维克多和伊莱，你们太棒了，是我的灵感之源；我非常爱你们两个。感谢我的父母，让我有机会学习和在生活中得到第二、第三、第四次的机会。

感谢许多团队和个人：感谢整个 AWS 移动团队，他们在我刚结束动荡的咨询生涯时给了我一个机会加入他们的团队，并让我有机会与我所见过的最聪明的人一起工作。感谢迈克尔·帕里斯、莫希特·斯里瓦斯塔瓦、丹尼斯·希尔斯、阿德里安·霍尔、理查德·瑟雷克尔德、迈克尔·拉比埃尼克、罗汉·德什潘德、阿米特·帕特尔以及所有其他教会我门道、帮助我学会一切必要技能以开始新工作的队友们。感谢 Russ Davis、Lee Johnson 和 SchoolStatus 给予我在工作中学习最前沿技术的机会，这最终推动了我进入咨询行业的职业生涯。感谢 Brian Noah、Nate Lubeck 以及我在 Egood 的团队，那是我第一个“真正”的技术工作，他们让我接触到 meetup 和会议的世界，以及成为优秀开发者所需的一切。
