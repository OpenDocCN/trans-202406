<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Basic SQL"><div class="chapter" id="CH3_BASICS">
<h1><span class="label">Chapter 3. </span>Basic SQL</h1>


<p>As mentioned in <a data-type="xref" href="ch02.xhtml#CH2_DESIGN">Chapter 2</a>, Dr. Edgar F. Codd <a data-type="indexterm" data-primary="Codd, Edgar F." id="idm46177498683864"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="about SQL" id="idm46177498683160"/>conceived the relational database model and its normal forms in the early 1970s. In 1974, researchers at IBM’s San Jose lab began work on a major project intended to prove the relational model’s viability, called System R. <a data-type="indexterm" data-primary="Chamberlin, Donald" id="idm46177498681848"/><a data-type="indexterm" data-primary="Structured English Query Language (SEQUEL)" id="idm46177498681176"/><a data-type="indexterm" data-primary="SEQUEL (Structured English Query Language)" id="idm46177498680536"/><a data-type="indexterm" data-primary="Structured Query Language (SQL)" data-seealso="basic SQL; specific commands" id="idm46177498679896"/><a data-type="indexterm" data-primary="SQL (Structured Query Language)" data-seealso="basic SQL; specific commands" id="idm46177498678968"/><a data-type="indexterm" data-primary="MySQL" data-secondary="about SQL" id="idm46177498677992"/>At the same time, Dr. Donald Chamberlin and his colleagues were also working to define a database language. They developed the Structured English Query Language (SEQUEL), which allowed users to query a relational database using clearly defined English-style sentences. This was later renamed Structured Query Language (SQL), for legal reasons.</p>

<p>The first database management systems based on SQL became available commercially by the end of the ’70s. With the growing activity surrounding the development of database languages, standardization emerged to simplify things, and the community settled on SQL. Both the American and international standards organizations (ANSI and ISO) took part in the standardization process, and in 1986 the first SQL standard was approved. The standard was later revised several times, with the names (SQL:1999, SQL:2003, SQL:2008, etc.) indicating the versions released in the corresponding years. We will use the phrase <em>the SQL standard</em> or <em>standard SQL</em> to mean the current version of the SQL standard at any time.</p>

<p>MySQL extends the standard SQL, <a data-type="indexterm" data-primary="MySQL" data-secondary="about" id="idm46177498674408"/>providing extra features. For example, MySQL implements the <a href="https://oreil.ly/rAHrZ"><code>STRAIGHT_JOIN</code></a>, which is syntax not recognized by other DBMSs.</p>

<p>This chapter introduces MySQL’s SQL implementation, <a data-type="indexterm" data-primary="CRUD (create, read, update, delete)" data-seealso="basic SQL" id="idm46177498671960"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="CRUD operations" id="idm46177498670648"/>which we often refer to as the <em>CRUD</em> operations: <code>create</code>, <code>read</code>, <code>update</code>, and <code>delete</code>. We will show you how to read data from a database with the <code>SELECT</code> statement and choose what data to retrieve and in which order it is displayed. We’ll also show you the basics of modifying your databases with the <code>INSERT</code> statement to add data, <code>UPDATE</code> to change data, and <code>DELETE</code> to remove data. Finally, we’ll explain how to use the nonstandard <code>SHOW TABLES</code> and <code>SHOW COLUMNS</code> statements to explore your database.</p>






<section data-type="sect1" data-pdf-bookmark="Using the sakila Database"><div class="sect1" id="BAS-SEC-SAKILACREATE">
<h1>Using the sakila Database</h1>

<p>In <a data-type="xref" href="ch02.xhtml#CH2_DESIGN">Chapter 2</a>, we showed you the principles of how to build a database diagram using the ER model. We also introduced the steps you take to convert an ER model to a format that makes sense for constructing a relational database. This section will show you the structure of the MySQL <code>sakila</code> database so you can start to get familiar with different database relational models. We won’t explain the SQL statements used to create the database here; that’s the subject of <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>.</p>

<p>If you haven’t imported the database yet, follow the steps in <a data-type="xref" href="ch02.xhtml#BAS-SEC-MODELING-EXAMPLES">“Entity Relationship Modeling Examples”</a> to perform the task.</p>

<p>To choose the <code>sakila</code> database as our current database, we<a data-type="indexterm" data-primary="USE database" id="idm46177498657544"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="USE database" id="idm46177498656840"/> will use the <code>USE</code> statement. Type the following command:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">USE</code><code> </code><code class="n">sakila</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Database changed
mysql&gt;</pre>

<p>You can check which is the active database by typing the <strong><code>SELECT DATABASE();</code></strong> 
<span class="keep-together">command:</span><a data-type="indexterm" data-primary="SELECT" data-secondary="DATABASE();" id="idm46177498645816"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT DATABASE();" id="idm46177498644840"/></p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="k">DATABASE</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------+
| DATABASE() |
+------------+
| sakila     |
+------------+
1 row in set (0.00 sec)</pre>

<p>Now, let’s explore what tables make up the <code>sakila</code> database<a data-type="indexterm" data-primary="SHOW" data-secondary="TABLES" id="idm46177498614648"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW TABLES" id="idm46177498613704"/> using the <code>SHOW TABLES</code> statement:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="kp">TABLES</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------------------+
| Tables_in_sakila           |
+----------------------------+
| actor                      |
| actor_info                 |
| ...                        |
| customer                   |
| customer_list              |
| film                       |
| film_actor                 |
| film_category              |
| film_list                  |
| film_text                  |
| inventory                  |
| language                   |
| nicer_but_slower_film_list |
| payment                    |
| rental                     |
| sales_by_film_category     |
| sales_by_store             |
| staff                      |
| staff_list                 |
| store                      |
+----------------------------+
23 rows in set (0.00 sec)</pre>

<p>So far, there have been no surprises. Let’s find out more about each of the tables that make up the <code>sakila</code> database. <a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW COLUMNS" id="idm46177498584712"/><a data-type="indexterm" data-primary="SHOW" data-secondary="COLUMNS" id="idm46177498583704"/>First, let’s use the <code>SHOW COLUMNS</code> statement to explore the <code>actor</code> table (note that the output has been wrapped to fit with the page margins):</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="n">COLUMNS</code><code> </code><code class="k">FROM</code><code> </code><code class="n">actor</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+-------------------+------+-----+-------------------+...
| Field       | Type              | Null | Key | Default           |...
+-------------+-------------------+------+-----+-------------------+...
| actor_id    | smallint unsigned | NO   | PRI | NULL              |...
| first_name  | varchar(45)       | NO   |     | NULL              |...
| last_name   | varchar(45)       | NO   | MUL | NULL              |...
| last_update | timestamp         | NO   |     | CURRENT_TIMESTAMP |...
+-------------+-------------------+------+-----+-------------------+...
 ...+-----------------------------------------------+
 ...| Extra                                         |
 ...+-----------------------------------------------+
 ...| auto_increment                                |
 ...|                                               |
 ...|                                               |
 ...| DEFAULT_GENERATED on update CURRENT_TIMESTAMP |
 ...+-----------------------------------------------+
4 rows in set (0.01 sec)</pre>

<p>The <code>DESCRIBE</code> keyword is identical to <code>SHOW COLUMNS FROM</code>, <a data-type="indexterm" data-primary="basic SQL" data-secondary="DESCRIBE (DESC)" id="idm46177498550632"/><a data-type="indexterm" data-primary="DESCRIBE (DESC)" id="idm46177498549624"/>and we can abbreviate it to just <code>DESC</code>, so we can write the previous query as follows:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DESC</code><code> </code><code class="n">actor</code><code class="p">;</code></strong></pre>

<p>The output produced is identical. Let’s examine the table structure more closely. The <code>actor</code> table contains four columns, <code>actor_id</code>, <code>first_name</code>, <code>last_name</code>, and <code>last_update</code>. We can also extract the types of the columns: a <code>smallint</code> for <code>actor_id</code>, <code>varchar(45)</code> for <code>first_name</code> and <code>last_name</code>, and <code>timestamp</code> for <code>last_update</code>. <a data-type="indexterm" data-primary="primary key" data-secondary="DESCRIBE output" id="idm46177498516728"/>None of the columns accepts <code>NULL</code> (empty) value, <code>actor_id</code> is the primary key (<code>PRI</code>), and <code>last_name</code> is the first column of a nonunique index (<code>MUL</code>). Don’t worry about the details; all that’s important right now are the column names we will use for the SQL commands.</p>

<p>Next let’s explore the <code>city</code> table by executing the <code>DESC</code> statement:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DESC</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+-------------------+------+-----+-------------------+...
| Field       | Type              | Null | Key | Default           |...
+-------------+-------------------+------+-----+-------------------+...
| city_id     | smallint unsigned | NO   | PRI | NULL              |...
| city        | varchar(50)       | NO   |     | NULL              |...
| country_id  | smallint unsigned | NO   | MUL | NULL              |...
| last_update | timestamp         | NO   |     | CURRENT_TIMESTAMP |...
+-------------+-------------------+------+-----+-------------------+...
...+-----------------------------------------------+
...| Extra                                         |
...+-----------------------------------------------+
...| auto_increment                                |
...|                                               |
...|                                               |
...| DEFAULT_GENERATED on update CURRENT_TIMESTAMP |
...+-----------------------------------------------+
4 rows in set (0.01 sec)</pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The DEFAULT_GENERATED that you see in the Extra column indicates that this particular column uses a default value. This information is a MySQL 8.0 notation particularity, and it is not present in MySQL 5.7 or MariaDB 10.5.</p>
</div>

<p>Again, what’s important is getting familiar with the columns in each table, as we’ll make frequent use of these later when we discuss querying.</p>

<p>The next section shows you how to explore the data that MySQL stores in the <code>sakila</code> database and its tables.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="The SELECT Statement and Basic Querying Techniques"><div class="sect1" id="BAS-SEC-SELECT">
<h1>The SELECT Statement and Basic Querying Techniques</h1>

<p>The previous chapters showed you how to install and configure MySQL and use the MySQL command line, and introduced the ER model. Now you’re ready to start learning the SQL language that all MySQL clients use to explore and manipulate data. This section introduces the most commonly used SQL keyword: the <code>SELECT</code> keyword. We explain the fundamental elements of style and syntax and the features of the <code>WHERE</code> clause, Boolean operators, and sorting (much of this also applies to our later discussions of <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code>). This isn’t the end of our discussion of <code>SELECT</code>; you’ll find more in <a data-type="xref" href="ch05.xhtml#CH5_ADV1">Chapter 5</a>, where we show you how to use its advanced features.</p>








<section data-type="sect2" class="less_space pagebreak-before" data-pdf-bookmark="Single-Table SELECTs"><div class="sect2" id="BAS-SEC-SELECT1">
<h2>Single-Table SELECTs</h2>

<p>The most basic form of <code>SELECT</code> reads the data<a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT" data-tertiary="single-table SELECT" id="idm46177498455960"/><a data-type="indexterm" data-primary="SELECT" data-secondary="single-table SELECT" id="idm46177498454680"/> in all rows and columns from a table. Connect to MySQL using the command line and choose the <code>sakila</code> database:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">USE</code><code> </code><code class="n">sakila</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Database changed</pre>

<p>Let’s retrieve all of the data in the <code>language</code> table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+----------+---------------------+
| language_id | name     | last_update         |
+-------------+----------+---------------------+
|           1 | English  | 2006-02-15 05:02:19 |
|           2 | Italian  | 2006-02-15 05:02:19 |
|           3 | Japanese | 2006-02-15 05:02:19 |
|           4 | Mandarin | 2006-02-15 05:02:19 |
|           5 | French   | 2006-02-15 05:02:19 |
|           6 | German   | 2006-02-15 05:02:19 |
+-------------+----------+---------------------+
6 rows in set (0.00 sec)</pre>

<p>The output has six rows, and each row contains the values for all the columns present in the table. We now know that there are six languages, and we can see the languages, their identifiers, and the last time each language was updated.</p>

<p>A simple <code>SELECT</code> statement has four components:</p>
<ol>
<li>
<p>The keyword <code>SELECT</code>.</p>
</li>
<li>
<p>The columns to be displayed. The asterisk (<code>*</code>) symbol is a wildcard character meaning all columns.</p>
</li>
<li>
<p>The keyword <code>FROM</code>.</p>
</li>
<li>
<p>The table name.</p>
</li>

</ol>

<p>So in this example, we’ve asked for all columns from the <code>language</code> table, and that’s what MySQL has returned to us.</p>

<p>Let’s try another simple <code>SELECT</code>. This time, we’ll retrieve all columns from the <code>city</code> table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting" class="less_space pagebreak-before">+---------+------------------------+------------+---------------------+
| city_id | city                   | country_id | last_update         |
+---------+------------------------+------------+---------------------+
|       1 | A Corua (La Corua)     |         87 | 2006-02-15 04:45:25 |
|       2 | Abha                   |         82 | 2006-02-15 04:45:25 |
|       3 | Abu Dhabi              |        101 | 2006-02-15 04:45:25 |
|     ...                                                             |
|     599 | Zhoushan               |         23 | 2006-02-15 04:45:25 |
|     600 | Ziguinchor             |         83 | 2006-02-15 04:45:25 |
+---------+------------------------+------------+---------------------+
600 rows in set (0.00 sec)</pre>

<p>There are 600 cities, and the output has the same basic structure as in our first 
<span class="keep-together">example.</span></p>

<p>This example provides some insight into how the relationships between the tables work. Consider the first row of the results. In the column <code>country_id</code>, you will see the value 87. As you’ll see later, we can check the <code>country</code> table to find out that the country with code 87 is Spain. We’ll discuss how to write queries on relationships between tables in <a data-type="xref" href="#BAS-SEC-JOINS">“Joining Two Tables”</a>.</p>

<p>If you look at the complete output, you’ll also see that there are several different cities with the same <code>country_id</code>. Having repeated <code>country_id</code> values isn’t a problem since we expect a country to have many cities (a one-to-many relationship).</p>

<p>You should now feel comfortable choosing a database, listing its tables, and retrieving all of the data from a table using the <code>SELECT</code> statement. To practice, you might want to experiment with the other tables in the <code>sakila</code> database. Remember that you can use the <code>SHOW TABLES</code> statement to find out the table names.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Choosing Columns"><div class="sect2" id="BAS-SEC-COLUMNS">
<h2>Choosing Columns</h2>

<p>Earlier, we used the <code>*</code> wildcard character to <a data-type="indexterm" data-primary="columns" data-secondary="SELECT" id="idm46177498348152"/><a data-type="indexterm" data-primary="SELECT" data-secondary="columns chosen" id="idm46177498347144"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT" data-tertiary="columns chosen" id="idm46177498346200"/>retrieve all the columns in a table. If you don’t want to display all the columns, it’s easy to be more specific by listing the columns you want, in the order you want them, separated by commas. For example, if you want only the <code>city</code> column from the <code>city</code> table, you’d type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------+
| city               |
+--------------------+
| A Corua (La Corua) |
| Abha               |
| Abu Dhabi          |
| Acua               |
| Adana              |
+--------------------+
5 rows in set (0.00 sec)</pre>

<p>If you want both the <code>city</code> and <code>city_id</code> columns, in that order, you’d use:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code class="p">,</code><code> </code><code class="n">city_id</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------+---------+
| city               | city_id |
+--------------------+---------+
| A Corua (La Corua) |       1 |
| Abha               |       2 |
| Abu Dhabi          |       3 |
| Acua               |       4 |
| Adana              |       5 |
+--------------------+---------+
5 rows in set (0.01 sec)</pre>

<p>You can even list columns more than once:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code class="p">,</code><code> </code><code class="n">city</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------+--------------------+
| city               | city               |
+--------------------+--------------------+
| A Corua (La Corua) | A Corua (La Corua) |
| Abha               | Abha               |
| Abu Dhabi          | Abu Dhabi          |
| Acua               | Acua               |
| Adana              | Adana              |
+--------------------+--------------------+
5 rows in set (0.00 sec)</pre>

<p>Although this may seem pointless, it can be useful when combined with aliases in more advanced queries, as you’ll see in <a data-type="xref" href="ch05.xhtml#CH5_ADV1">Chapter 5</a>.</p>

<p>You can specify database, table, and column names in a <code>SELECT</code> statement. This allows you to avoid the <code>USE</code> command and work with any database and table directly with <code>SELECT</code>; it also helps resolve ambiguities, as we’ll show in <a data-type="xref" href="#BAS-SEC-JOINS">“Joining Two Tables”</a>. For example, suppose you want to retrieve the <code>name</code> column from the <code>language</code> table in the <code>sakila</code> database. You can do this with the following command:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">.</code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------+
| name     |
+----------+
| English  |
| Italian  |
| Japanese |
| Mandarin |
| French   |
| German   |
+----------+
6 rows in set (0.01 sec)</pre>

<p>The <code>sakila.language</code> component after the <code>FROM</code> keyword<a data-type="indexterm" data-primary="basic SQL" data-secondary="USE database" data-tertiary="USE not needed" id="idm46177498229784"/><a data-type="indexterm" data-primary="USE database" data-secondary="USE not needed" id="idm46177498228504"/> specifies the <code>sakila</code> database and its <code>language</code> table. There’s no need to enter <strong><code>USE sakila;</code></strong> before running this query. This syntax can also be used with other SQL statements, including the <code>UPDATE</code>, <code>DELETE</code>, <code>INSERT</code>, and <code>SHOW</code> statements we discuss later in this chapter.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Selecting Rows with the WHERE Clause"><div class="sect2" id="BAS-SEC-WHERE">
<h2>Selecting Rows with the WHERE Clause</h2>

<p>This section introduces the <code>WHERE</code> clause and<a data-type="indexterm" data-primary="WHERE clause" data-secondary="SELECT" id="idm46177498203032"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT row with WHERE" id="ch03-row2"/><a data-type="indexterm" data-primary="SELECT" data-secondary="row with WHERE" id="ch03-row3"/><a data-type="indexterm" data-primary="rows" data-secondary="WHERE clause" id="ch03-row4"/> explains how to use operators to write expressions. You’ll see these in <code>SELECT</code> statements and other statements such as <code>UPDATE</code> and <code>DELETE</code>; we’ll show you examples later in this chapter.</p>










<section data-type="sect3" data-pdf-bookmark="WHERE basics"><div class="sect3" id="idm46177498197000">
<h3>WHERE basics</h3>

<p>The <code>WHERE</code> clause is a powerful tool that allows you to filter<a data-type="indexterm" data-primary="rows" data-secondary="WHERE clause" data-tertiary="basics" id="ch03-whe4"/><a data-type="indexterm" data-primary="SELECT" data-secondary="row with WHERE" data-tertiary="WHERE basics" id="ch03-whe"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT row with WHERE" data-tertiary="WHERE basics" id="ch03-whe2"/><a data-type="indexterm" data-primary="WHERE clause" data-secondary="basics" id="ch03-whe3"/> which rows are returned from a <code>SELECT</code> statement. You use it to return rows that match a condition, such as having a column value that exactly matches a string, a number greater or less than a value, or a string that is a prefix of another. Almost all our examples in this and later chapters contain <code>WHERE</code> clauses, and you’ll become very familiar with them.</p>

<p>The simplest <code>WHERE</code> clause is one that exactly matches a value. Consider an example where you want to find out the English language’s details in the <code>language</code> table. Here’s what you’d type:<a data-type="indexterm" data-primary="= (equal)" data-primary-sortas="#equal" id="idm46177498186072"/><a data-type="indexterm" data-primary="equal (=)" id="idm46177498185096"/></p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">.</code><code class="n">language</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s1">'English'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+---------+---------------------+
| language_id | name    | last_update         |
+-------------+---------+---------------------+
|           1 | English | 2006-02-15 05:02:19 |
+-------------+---------+---------------------+
1 row in set (0.00 sec)</pre>

<p>MySQL returns all rows that match your search criteria—in this case, just the one row and all its columns.</p>

<p>Let’s try another exact match example. Suppose you want to find out the first name of the actor with an <code>actor_id</code> value of 4 in the <code>actor</code> table. You would type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">first_name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">actor</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">actor_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------+
| first_name |
+------------+
| JENNIFER   |
+------------+
1 row in set (0.00 sec)</pre>

<p>Here you provide a column and a row, including the column <code>first_name</code> after the <code>SELECT</code> keyword and specifying the <code>WHERE actor_id = 4</code>.</p>

<p>If a value matches more than one row, the results will contain all the matches. Suppose you want to see all the cities belonging to Brazil, which has a <code>country_id</code> of 15. You would type in:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">country_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">15</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------------+
| city                 |
+----------------------+
| Alvorada             |
| Angra dos Reis       |
| Anpolis              |
| Aparecida de Goinia  |
| Araatuba             |
| Bag                  |
| Belm                 |
| Blumenau             |
| Boa Vista            |
| Braslia              |               |
| ...                  |
+----------------------+
28 rows in set (0.00 sec)</pre>

<p>The results show the names of the 28 cities that belong to Brazil. If we could join the information we get from the <code>city</code> table with information we get from the <code>country</code> table, we could display the cities’ names with their respective countries. We’ll see how to perform this type of query in <a data-type="xref" href="#BAS-SEC-JOINS">“Joining Two Tables”</a>.</p>

<p>Now let’s retrieve values that belong to a range. Retrieving multiple values is simple for numeric ranges, <a data-type="indexterm" data-primary="&lt; (less than)" data-primary-sortas="#less than" id="idm46177498076792"/><a data-type="indexterm" data-primary="less than (&lt;)" id="idm46177498075816"/>so let’s start by finding all cities’ names with a <code>city_id</code> less than 5. To do this, execute the following statement:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">city_id</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">5</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------+
| city               |
+--------------------+
| A Corua (La Corua) |
| Abha               |
| Abu Dhabi          |
| Acua               |
+--------------------+
4 rows in set (0.00 sec)</pre>

<p>For numbers, the frequently used operators are<a data-type="indexterm" data-primary="= (equal)" data-primary-sortas="#equal" id="idm46177498045432"/><a data-type="indexterm" data-primary="equal (=)" id="idm46177498044056"/><a data-type="indexterm" data-primary="&gt; (greater than)" data-primary-sortas="#greater than" id="idm46177498043384"/><a data-type="indexterm" data-primary="greater than (&gt;)" id="idm46177498042440"/><a data-type="indexterm" data-primary="&lt;= (less than or equal)" data-primary-sortas="#less than or equal" id="idm46177498041768"/><a data-type="indexterm" data-primary="less than or equal (&lt;=)" id="idm46177498040824"/><a data-type="indexterm" data-primary="greater than or equal (&gt;=)" id="idm46177498040152"/><a data-type="indexterm" data-primary="&gt;= (greater than or equal)" data-primary-sortas="#greater than or equal" id="idm46177498039512"/> equal (<code>=</code>), greater than (<code>&gt;</code>), less than (<code>&lt;</code>), less than or equal (<code>&lt;=</code>), greater than or equal (<code>&gt;=</code>), and not equal (<code>&lt;&gt;</code> or <code>!=</code>).</p>

<p>Consider one more example. If you want to find all languages that don’t have a <span class="keep-together"><code>language_id</code></span> of 2, you’d type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">language_id</code><code class="p">,</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">.</code><code class="n">language</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">language_id</code><code> </code><code class="o">&lt;</code><code class="o">&gt;</code><code> </code><code class="mi">2</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+----------+
| language_id | name     |
+-------------+----------+
|           1 | English  |
|           3 | Japanese |
|           4 | Mandarin |
|           5 | French   |
|           6 | German   |
+-------------+----------+
5 rows in set (0.00 sec)</pre>

<p>The previous output shows the first, third, and all subsequent languages in the table. <a data-type="indexterm" data-primary="&lt;&gt; (not equal)" data-primary-sortas="#not equal" id="idm46177497981096"/><a data-type="indexterm" data-primary="not equal (&lt;&gt; or !=)" id="idm46177497980264"/><a data-type="indexterm" data-primary="!= (not equal)" data-primary-sortas="#not equal" id="idm46177497979592"/>Note that you can use either the <code>&lt;&gt;</code> or <code>!=</code> operator for the <em>not-equal</em> condition.</p>

<p>You can use the same operators for strings. By default, string<a data-type="indexterm" data-primary="strings" data-secondary="case sensitivity" data-tertiary="comparisons" id="idm46177497976920"/><a data-type="indexterm" data-primary="strings" data-secondary="comparisons" data-tertiary="not case-sensitive" id="idm46177497975672"/><a data-type="indexterm" data-primary="strings" data-secondary="comparisons" data-tertiary="operators same as numeric" id="idm46177497961384"/><a data-type="indexterm" data-primary="case sensitivity" data-secondary="string comparisons" id="idm46177497960200"/> comparisons are not case-sensitive and use the current character set. For example:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">first_name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">actor</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">first_name</code><code> </code><code class="o">&lt;</code><code> </code><code class="s1">'B'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------+
| first_name |
+------------+
| ALEC       |
| AUDREY     |
| ANNE       |
| ANGELA     |
| ADAM       |
| ANGELINA   |
| ALBERT     |
| ADAM       |
| ANGELA     |
| ALBERT     |
| AL         |
| ALAN       |
| AUDREY     |
+------------+
13 rows in set (0.00 sec)</pre>

<p>By “not case-sensitive” we mean that <code>B</code> and <code>b</code> will be considered the same filter, so this query will provide the same result:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">first_name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">actor</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">first_name</code><code> </code><code class="o">&lt;</code><code> </code><code class="s1">'b'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------+
| first_name |
+------------+
| ALEC       |
| AUDREY     |
| ANNE       |
| ANGELA     |
| ADAM       |
| ANGELINA   |
| ALBERT     |
| ADAM       |
| ANGELA     |
| ALBERT     |
| AL         |
| ALAN       |
| AUDREY     |
+------------+
13 rows in set (0.00 sec)</pre>

<p>Another common task to perform with strings is to find matches<a data-type="indexterm" data-primary="strings" data-secondary="matches" data-tertiary="LIKE clause" id="idm46177497905176"/><a data-type="indexterm" data-primary="LIKE clause" id="idm46177497903960"/> that begin with a prefix, contain a string, or end in a suffix. For example, we might want to find all album names beginning with the word “Retro.” We can do this with the <code>LIKE</code> operator in a <code>WHERE</code> clause. Let’s see an example where we are searching for a film with a title that contains the word <code>family</code>:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">title</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'%family%'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------+
| title          |
+----------------+
| CYCLONE FAMILY |
| DOGMA FAMILY   |
| FAMILY SWEET   |
+----------------+
3 rows in set (0.00 sec)</pre>

<p>Let’s take a look at how this works. The <code>LIKE</code> clause is used with strings and means that a match must meet the pattern in the string that follows. <a data-type="indexterm" data-primary="strings" data-secondary="matches" data-tertiary="% wildcard character" data-tertiary-sortas="#wildcard char" id="idm46177497857912"/><a data-type="indexterm" data-primary="% (wildcard)" data-primary-sortas="#wildcard" id="idm46177497856424"/><a data-type="indexterm" data-primary="wildcard (%)" id="idm46177497855480"/><a data-type="indexterm" data-primary="LIKE clause" data-secondary="% wildcard" data-secondary-sortas="#wildcard" id="idm46177497854808"/>In our example, we’ve used <code>LIKE '%family%'</code>, which means the string must contain <code>family</code>, and it can be preceded or followed by zero or more characters. Most strings used with <code>LIKE</code> contain the percentage character (<code>%</code>) as a wildcard character that matches all possible strings. You can use it to define a string that ends in a suffix—such as <code>"%ing"</code>—or a string that starts with a particular substring, such as <code>"Corruption%"</code>.</p>

<p>For example, <code>"John%"</code> would match all strings starting with <code>John</code>, such as <code>John Smith</code> and <code>John Paul Getty</code>. The pattern <code>"%Paul"</code> matches all strings that have <code>Paul</code> at the end. Finally, the pattern <code>"%Paul%"</code> matches all strings that have <code>Paul</code> in them, including at the start or at the end.</p>

<p>If you want to match exactly one wildcard character in a <code>LIKE</code> clause,<a data-type="indexterm" data-primary="_ (wildcard for single character)" data-primary-sortas="#wildcard for" id="idm46177497833736"/><a data-type="indexterm" data-primary="wildcard for single character (_)" id="idm46177497832664"/><a data-type="indexterm" data-primary="LIKE clause" data-secondary="_ wildcard for single character" data-secondary-sortas="#wildcard for" id="idm46177497831976"/><a data-type="indexterm" data-primary="strings" data-secondary="matches" data-tertiary="_ wildcard for single character" data-tertiary-sortas="#wildcard for" id="idm46177497830744"/> you use the underscore character (<code>_</code>). For example, if you want the titles of all movies starring an actor whose name begins with the three letters NAT, you use:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film_list</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">actors</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'NAT_%'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------------+
| title                |
+----------------------+
| FANTASY TROOPERS     |
| FOOL MOCKINGBIRD     |
| HOLES BRANNIGAN      |
| KWAI HOMEWARD        |
| LICENSE WEEKEND      |
| NETWORK PEAK         |
| NUTS TIES            |
| TWISTED PIRATES      |
| UNFORGIVEN ZOOLANDER |
+----------------------+
9 rows in set (0.04 sec)</pre>
<div data-type="tip"><h6>Tip</h6>
<p>In general, you should avoid using the percentage (<code>%</code>) wildcard at the beginning of the pattern, like in the following example:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">title</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'%day%'</code><code class="p">;</code></strong></pre>

<p>You will get the results, but MySQL will not use the index under this condition. Using the wildcard will force MySQL to read the entire table to retrieve the results, which can cause a severe performance impact if the table has millions of rows.<a data-type="indexterm" data-startref="ch03-whe" id="idm46177497774744"/><a data-type="indexterm" data-startref="ch03-whe2" id="idm46177497774248"/><a data-type="indexterm" data-startref="ch03-whe3" id="idm46177497773608"/><a data-type="indexterm" data-startref="ch03-whe4" id="idm46177497772936"/></p>
</div>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Combining conditions with AND, OR, NOT, and XOR"><div class="sect3" id="idm46177498196056">
<h3>Combining conditions with AND, OR, NOT, and XOR</h3>

<p>So far, we’ve used the <code>WHERE</code> clause to test one <a data-type="indexterm" data-primary="SELECT" data-secondary="row with WHERE" data-tertiary="AND, OR, NOT, XOR" id="ch03-xor7"/><a data-type="indexterm" data-primary="WHERE clause" data-secondary="AND, OR, NOT, XOR" id="ch03-xor"/><a data-type="indexterm" data-primary="rows" data-secondary="WHERE clause" data-tertiary="AND, OR, NOT, XOR" id="ch03-xor2"/><a data-type="indexterm" data-primary="AND operator" id="ch03-xor3"/><a data-type="indexterm" data-primary="OR operator" id="ch03-xor4"/><a data-type="indexterm" data-primary="NOT operator" id="ch03-xor5"/><a data-type="indexterm" data-primary="XOR operator" id="ch03-xor6"/><a data-type="indexterm" data-primary="Boolean operators" data-secondary="AND, OR, NOT, XOR" id="ch03-xor8"/>condition, returning all rows that meet it. You can combine two or more conditions using the Boolean operators <code>AND</code>, <code>OR</code>, <code>NOT</code>, and <code>XOR</code>.</p>

<p>Let’s start with an example. Suppose you want to find the titles of sci-fi movies that are rated PG. This is straightforward with the <code>AND</code> operator:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film_list</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Sci-Fi'</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="n">rating</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'PG'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------------+
| title                |
+----------------------+
| CHAINSAW UPTOWN      |
| CHARADE DUFFEL       |
| FRISCO FORREST       |
| GOODFELLAS SALUTE    |
| GRAFFITI LOVE        |
| MOURNING PURPLE      |
| OPEN AFRICAN         |
| SILVERADO GOLDFINGER |
| TITANS JERK          |
| TROJAN TOMORROW      |
| UNFORGIVEN ZOOLANDER |
| WONDERLAND CHRISTMAS |
+----------------------+
12 rows in set (0.07 sec)</pre>

<p>The <code>AND</code> operation in the <code>WHERE</code> clause restricts the results to those rows that meet both conditions.</p>

<p>The <code>OR</code> operator is used to find rows that meet at least one of several conditions. To illustrate, imagine now that you want a list of movies in the Children or Family categories. You can do this with <code>OR</code> and two <code>LIKE</code> clauses:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film_list</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Children'</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">OR</code><code> </code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Family'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------------------+
| title                  |
+------------------------+
| AFRICAN EGG            |
| APACHE DIVINE          |
| ATLANTIS CAUSE         |
...
| WRONG BEHAVIOR         |
| ZOOLANDER FICTION      |
+------------------------+
129 rows in set (0.04 sec)</pre>

<p>The <code>OR</code> operation in the <code>WHERE</code> clause restricts the answers to those that meet either of the two conditions. As an aside, we can observe that the results are ordered. This is merely a coincidence; in this case, they’re reported in the order they were added to the database. We’ll return to sorting output in <a data-type="xref" href="#BAS-SEC-ORDERBY">“The ORDER BY Clause”</a>.</p>

<p>You can combine <code>AND</code> and <code>OR</code>, but you need to make it clear whether you want to first <code>AND</code> the conditions or <code>OR</code> them. <a data-type="indexterm" data-primary="parentheses for evaluation order" id="idm46177497652328"/><a data-type="indexterm" data-primary="evaluation order via parentheses" id="idm46177497651624"/>Parentheses cluster parts of a statement together and help make expressions readable; you can use them just as you would in basic math. Let’s say that now you want sci-fi or family movies that are rated PG. You can write this query as follows:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film_list</code><code> </code><code class="k">WHERE</code><code> </code><code class="p">(</code><code class="n">category</code><code> </code><code class="k">like</code><code> </code><code class="s1">'Sci-Fi'</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">OR</code><code> </code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Family'</code><code class="p">)</code><code> </code><code class="k">AND</code><code> </code><code class="n">rating</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'PG'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------------------+
| title                  |
+------------------------+
| BEDAZZLED MARRIED      |
| CHAINSAW UPTOWN        |
| CHARADE DUFFEL         |
| CHASING FIGHT          |
| EFFECT GLADIATOR       |
...
| UNFORGIVEN ZOOLANDER   |
| WONDERLAND CHRISTMAS   |
+------------------------+
30 rows in set (0.07 sec)</pre>

<p>The parentheses make the evaluation order clear: you want movies from  either the Sci-Fi or the Family category, but all of them need to be PG-rated.</p>

<p>With the use of parentheses, it is possible to change the evaluation order. The easiest way to see how this works is by playing around with calculations:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="p">(</code><code class="mi">2</code><code class="o">+</code><code class="mi">2</code><code class="p">)</code><code class="o">*</code><code class="mi">3</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+---------+
| (2+2)*3 |
+---------+
|      12 |
+---------+
1 row in set (0.00 sec)</pre>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="mi">2</code><code class="o">+</code><code class="mi">2</code><code class="o">*</code><code class="mi">3</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------+
| 2+2*3 |
+-------+
|     8 |
+-------+
1 row in set (0.00 sec)</pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>One of the most difficult problems to diagnose is a query that is running with no syntax errors, but it is returning values different from those expected. While the parentheses do not affect the <code>AND</code> operator, the <code>OR</code> operator is significantly impacted by them. For example, consider the result of this statement:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">.</code><code class="n">city</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">city_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">3</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">OR</code><code> </code><code class="n">city_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code> </code><code class="k">AND</code><code> </code><code class="n">country_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">60</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+---------+-----------+------------+---------------------+
| city_id | city      | country_id | last_update         |
+---------+-----------+------------+---------------------+
|       3 | Abu Dhabi |        101 | 2006-02-15 04:45:25 |
|       4 | Acua      |         60 | 2006-02-15 04:45:25 |
+---------+-----------+------------+---------------------+
2 rows in set (0.00 sec)</pre>

<p>If we change the ordering of the operators, we will obtain a different result:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">.</code><code class="n">city</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">country_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">60</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="n">city_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">3</code><code> </code><code class="k">OR</code><code> </code><code class="n">city_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+---------+------+------------+---------------------+
| city_id | city | country_id | last_update         |
+---------+------+------------+---------------------+
|       4 | Acua |         60 | 2006-02-15 04:45:25 |
+---------+------+------------+---------------------+
1 row in set (0.00 sec)</pre>

<p>Using parentheses makes the queries much easier to understand and increases the likelihood that you’ll get the results you’re expecting. We recommend that you use parentheses whenever there’s a chance MySQL could misinterpret your intention; there’s no good reason to rely on MySQL’s implicit evaluation order.</p>
</div>

<p>The unary <code>NOT</code> operator negates a Boolean statement.<a data-type="indexterm" data-primary="Boolean operators" data-secondary="NOT negating" id="idm46177497420552"/> Earlier we gave the example of listing all languages with a <code>language_id</code> not equal to 2. You can also write this query with the <code>NOT</code> operator:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">language_id</code><code class="p">,</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">.</code><code class="n">language</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="k">NOT</code><code> </code><code class="p">(</code><code class="n">language_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+----------+
| language_id | name     |
+-------------+----------+
|           1 | English  |
|           3 | Japanese |
|           4 | Mandarin |
|           5 | French   |
|           6 | German   |
+-------------+----------+
5 rows in set (0.01 sec)</pre>

<p>The expression in parentheses, <code>(language_id = 2)</code>, gives the condition to match, and the <code>NOT</code> operation negates it, so you get everything but those results that match the condition. There are several other ways you can write a <code>WHERE</code> clause with the same idea. In <a data-type="xref" href="ch05.xhtml#CH5_ADV1">Chapter 5</a>, you will see that some have better performance than others.</p>

<p>Consider another example using <code>NOT</code> and parentheses. Suppose you want to get a list of all movie titles with an <code>FID</code> less than 7, but not those numbered 4 or 6. You can do this with the following query:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">fid</code><code class="p">,</code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film_list</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">FID</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">7</code><code> </code><code class="k">AND</code><code> </code><code class="k">NOT</code><code> </code><code class="p">(</code><code class="n">FID</code><code> </code><code class="o">=</code><code> </code><code class="mi">4</code><code> </code><code class="k">OR</code><code> </code><code class="n">FID</code><code> </code><code class="o">=</code><code> </code><code class="mi">6</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------+------------------+
| fid  | title            |
+------+------------------+
|    1 | ACADEMY DINOSAUR |
|    2 | ACE GOLDFINGER   |
|    3 | ADAPTATION HOLES |
|    5 | AFRICAN EGG      |
+------+------------------+
4 rows in set (0.06 sec)</pre>

<p>Understanding operator precedence can be a little tricky, <a data-type="indexterm" data-primary="operator precedence" id="idm46177497297688"/><a data-type="indexterm" data-primary="parentheses for evaluation order" data-secondary="operator precedence" id="idm46177497297080"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT row with WHERE" data-tertiary="operator precedence" id="idm46177497296232"/><a data-type="indexterm" data-primary="WHERE clause" data-secondary="operator precedence" id="idm46177497295144"/><a data-type="indexterm" data-primary="evaluation order via parentheses" data-secondary="operator precedence" id="idm46177497294200"/>and sometimes it takes DBAs a long time to debug a query and identify why it is not returning the requested values. The following list shows the available operators in order from the highest priority to the lowest. Operators that are shown together on a line have the same 
<span class="keep-together">priority:</span></p>

<ul>
<li>
<p><code>INTERVAL</code></p>
</li>
<li>
<p><code>BINARY</code>, <code>COLLATE</code></p>
</li>
<li>
<p><code>!</code></p>
</li>
<li>
<p><code>-</code> (unary minus), <code>~</code> (unary bit inversion)</p>
</li>
<li>
<p>^</p>
</li>
<li>
<p><code>*</code>, <code>/</code>, <code>DIV</code>, <code>%</code>, <code>MOD</code></p>
</li>
<li>
<p><code>-</code>,<code>+</code></p>
</li>
<li>
<p><code>&lt;&lt;</code>, <code>&gt;&gt;</code></p>
</li>
<li>
<p><code>&amp;</code></p>
</li>
<li>
<p><code>\</code>|</p>
</li>
<li>
<p><code>=</code> (comparison), <code>&lt;=&gt;</code>, <code>&gt;=</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&lt;</code>, <code>&lt;&gt;</code>, <code>!=</code>, <code>IS</code>, <code>LIKE</code>, <code>REGEXP</code>, <code>IN</code>, <code>MEMBER OF</code></p>
</li>
<li>
<p><code>BETWEEN</code>, <code>CASE</code>, <code>WHEN</code>, <code>THEN</code>, <code>ELSE</code></p>
</li>
<li>
<p><code>NOT</code></p>
</li>
<li>
<p><code>AND</code>, <code>&amp;&amp;</code></p>
</li>
<li>
<p><code>XOR</code></p>
</li>
<li>
<p><code>OR</code>, <code>\|\|</code></p>
</li>
<li>
<p><code>=</code> (assignment), <code>:=</code></p>
</li>
</ul>

<p>It is possible to combine these operators in diverse ways to get the desired results. For example, you can write a query to get the titles of any movies that have a price range between $2 and $4, belong to the Documentary or Horror category, and have an actor named Bob:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">FROM</code><code> </code><code class="n">film_list</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">price</code><code> </code><code class="k">BETWEEN</code><code> </code><code class="mi">2</code><code> </code><code class="k">AND</code><code> </code><code class="mi">4</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="p">(</code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Documentary'</code><code> </code><code class="k">OR</code><code> </code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Horror'</code><code class="p">)</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="n">actors</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'%BOB%'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------------+
| title            |
+------------------+
| ADAPTATION HOLES |
+------------------+
1 row in set (0.08 sec)</pre>

<p>Finally, before we move on to sorting, note that it is possible to execute queries that do not match any results. In this case, the query will return an empty set:<a data-type="indexterm" data-startref="ch03-row2" id="idm46177497189672"/><a data-type="indexterm" data-startref="ch03-row3" id="idm46177497200936"/><a data-type="indexterm" data-startref="ch03-row4" id="idm46177497200328"/><a data-type="indexterm" data-startref="ch03-xor" id="idm46177497199720"/><a data-type="indexterm" data-startref="ch03-xor2" id="idm46177497199080"/><a data-type="indexterm" data-startref="ch03-xor3" id="idm46177497198408"/><a data-type="indexterm" data-startref="ch03-xor4" id="idm46177497197736"/><a data-type="indexterm" data-startref="ch03-xor5" id="idm46177497197064"/><a data-type="indexterm" data-startref="ch03-xor6" id="idm46177497196392"/><a data-type="indexterm" data-startref="ch03-xor7" id="idm46177497195720"/><a data-type="indexterm" data-startref="ch03-xor8" id="idm46177497195048"/></p>
<pre data-type="programlisting" data-code-language="mysql">
<code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">title</code><code> </code><code class="k">FROM</code><code> </code><code class="n">film_list</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">price</code><code> </code><code class="k">BETWEEN</code><code> </code><code class="mi">2</code><code> </code><code class="k">AND</code><code> </code><code class="mi">4</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="p">(</code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Documentary'</code><code> </code><code class="k">OR</code><code> </code><code class="n">category</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'Horror'</code><code class="p">)</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="n">actors</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'%GRIPPA%'</code><code class="p">;</code></strong><code>
</code></pre>

<pre data-type="programlisting">Empty set (0.04 sec)</pre>
</div></section>



</div></section>













<section data-type="sect2" class="less_space pagebreak-before" data-pdf-bookmark="The ORDER BY Clause"><div class="sect2" id="BAS-SEC-ORDERBY">
<h2>The ORDER BY Clause</h2>

<p>We’ve discussed how to choose the columns and which rows<a data-type="indexterm" data-primary="basic SQL" data-secondary="ORDER BY" id="ch03-ob"/><a data-type="indexterm" data-primary="ORDER BY" id="ch03-ob2"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT" data-tertiary="ORDER BY" id="ch03-ob4"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW COLUMNS" data-tertiary="ORDER BY" id="ch03-ob5"/><a data-type="indexterm" data-primary="columns" data-secondary="SELECT" data-tertiary="ORDER BY" id="ch03-ob6"/><a data-type="indexterm" data-primary="SELECT" data-secondary="ORDER BY" id="ch03-ob8"/><a data-type="indexterm" data-primary="SHOW" data-secondary="COLUMNS" data-tertiary="ORDER BY" id="ch03-ob9"/><a data-type="indexterm" data-primary="rows" data-secondary="ORDER BY" id="ch03-oba"/><a data-type="indexterm" data-primary="sorting with ORDER BY" id="ch03-obb"/><a data-type="indexterm" data-primary="strings" data-secondary="sorting via ORDER BY" id="ch03-obc"/> are returned as part of the query result, but not how to control how the result is displayed. In a relational database, the rows in a table form a set; there is no intrinsic order between the rows, so we have to ask MySQL to sort the results if we want them in a particular order. This section explains how to use the <code>ORDER BY</code> clause to do this. Sorting does not affect <em>what</em> is returned; it only affects <em>what order</em> the results are returned in.</p>
<div data-type="tip"><h6>Tip</h6>
<p>InnoDB tables in MySQL have a special index <a data-type="indexterm" data-primary="indexes" data-secondary="InnoDB clustered index" id="idm46177497079080"/><a data-type="indexterm" data-primary="InnoDB" data-secondary="clustered index" id="idm46177497078104"/><a data-type="indexterm" data-primary="rows" data-secondary="ORDER BY" data-tertiary="InnoDB tables" id="idm46177497077160"/><a data-type="indexterm" data-primary="clustered index of InnoDB tables" id="idm46177497075944"/><a data-type="indexterm" data-primary="clustered index of InnoDB tables" data-secondary="primary key as" id="idm46177497075304"/><a data-type="indexterm" data-primary="primary key" data-secondary="InnoDB clustered index" id="idm46177497074392"/><a data-type="indexterm" data-primary="InnoDB" data-secondary="clustered index" data-tertiary="primary key as" id="idm46177497073448"/>called the <em>clustered index</em> that stores row data. When you define a primary key on a table, InnoDB uses it as the clustered index. Suppose you are executing queries based on the primary key. In that case, the rows will be returned ordered in ascending order by the primary key. However, we always recommending using the <code>ORDER BY</code> clause if you want to enforce a particular order.</p>
</div>

<p>Suppose you want to return a list of the first 10 customers in the <code>sakila</code> database, sorted alphabetically by <code>name</code>. Here’s what you’d type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">customer_list</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">name</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">LIMIT</code><code> </code><code class="mi">10</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------------+
| name              |
+-------------------+
| AARON SELBY       |
| ADAM GOOCH        |
| ADRIAN CLARY      |
| AGNES BISHOP      |
| ALAN KAHN         |
| ALBERT CROUSE     |
| ALBERTO HENNING   |
| ALEX GRESHAM      |
| ALEXANDER FENNELL |
| ALFRED CASILLAS   |
+-------------------+
10 rows in set (0.01 sec)</pre>

<p>The <code>ORDER</code> <code>BY</code> clause indicates that sorting is required, followed by the column that should be used as the sort key. In this example, you’re sorting by name in alphabetically ascending order—the<a data-type="indexterm" data-primary="case sensitivity" data-secondary="ORDER BY default sort" id="idm46177497036792"/><a data-type="indexterm" data-primary="strings" data-secondary="case sensitivity" data-tertiary="ORDER BY default sort" id="idm46177497035816"/><a data-type="indexterm" data-primary="ORDER BY" data-secondary="default sort" id="idm46177497034600"/> default sort is case-insensitive and in ascending order, and MySQL automatically sorts alphabetically because the columns are character strings. The way strings are sorted is determined by the character set and collation order that are being used. We discuss these in <a data-type="xref" href="ch04.xhtml#SEC-COLLATIONS">“Collation and Character Sets”</a>. For most of this book, we assume that you’re using the default settings.</p>

<p>Let’s look at another example. This time, you’ll sort the output from the <code>address</code> table in ascending order based on  the <code>last_update</code> column and show just the first five results:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">address</code><code class="p">,</code><code> </code><code class="n">last_update</code><code> </code><code class="k">FROM</code><code> </code><code class="n">address</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">last_update</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">5</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-----------------------------+---------------------+
| address                     | last_update         |
+-----------------------------+---------------------+
| 1168 Najafabad Parkway      | 2014-09-25 22:29:59 |
| 1031 Daugavpils Parkway     | 2014-09-25 22:29:59 |
| 1924 Shimonoseki Drive      | 2014-09-25 22:29:59 |
| 757 Rustenburg Avenue       | 2014-09-25 22:30:01 |
| 1892 Nabereznyje Telny Lane | 2014-09-25 22:30:02 |
+-----------------------------+---------------------+
5 rows in set (0.00 sec)</pre>

<p>As you can see, it is possible to sort different types of columns. Moreover, we can compound the sorting with two or more columns. For example, let’s say you want to sort the addresses alphabetically, but grouped by district:<a data-type="indexterm" data-primary="grouping in ORDER BY" id="idm46177496987656"/></p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">address</code><code class="p">,</code><code> </code><code class="n">district</code><code> </code><code class="k">FROM</code><code> </code><code class="n">address</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">district</code><code class="p">,</code><code> </code><code class="n">address</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------------------------------+----------------------+
| address                                | district             |
+----------------------------------------+----------------------+
| 1368 Maracabo Boulevard                |                      |
| 18 Duisburg Boulevard                  |                      |
| 962 Tama Loop                          |                      |
| 535 Ahmadnagar Manor                   | Abu Dhabi            |
| 669 Firozabad Loop                     | Abu Dhabi            |
| 1078 Stara Zagora Drive                | Aceh                 |
| 663 Baha Blanca Parkway                | Adana                |
| 842 Salzburg Lane                      | Adana                |
| 614 Pak Kret Street                    | Addis Abeba          |
| 751 Lima Loop                          | Aden                 |
| 1157 Nyeri Loop                        | Adygea               |
| 387 Mwene-Ditu Drive                   | Ahal                 |
| 775 ostka Drive                        | al-Daqahliya         |
| ...                                                           |
| 1416 San Juan Bautista Tuxtepec Avenue | Zufar                |
| 138 Caracas Boulevard                  | Zulia                |
+----------------------------------------+----------------------+
603 rows in set (0.00 sec)</pre>

<p>You can also sort in descending order, and you can control this behavior for each sort key. Suppose you want to sort the addresses by descending alphabetical order and the districts in ascending order. You would type this:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">address</code><code class="p">,</code><code class="n">district</code><code> </code><code class="k">FROM</code><code> </code><code class="n">address</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">district</code><code> </code><code class="k">ASC</code><code class="p">,</code><code> </code><code class="n">address</code><code> </code><code class="k">DESC</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">LIMIT</code><code> </code><code class="mi">10</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------------------+-------------+
| address                 | district    |
+-------------------------+-------------+
| 962 Tama Loop           |             |
| 18 Duisburg Boulevard   |             |
| 1368 Maracabo Boulevard |             |
| 669 Firozabad Loop      | Abu Dhabi   |
| 535 Ahmadnagar Manor    | Abu Dhabi   |
| 1078 Stara Zagora Drive | Aceh        |
| 842 Salzburg Lane       | Adana       |
| 663 Baha Blanca Parkway | Adana       |
| 614 Pak Kret Street     | Addis Abeba |
| 751 Lima Loop           | Aden        |
+-------------------------+-------------+
10 rows in set (0.01 sec)</pre>

<p>If a collision of values occurs and you don’t specify another sort key, the sort order is undefined. This may not be important for you; you may not care about the order in which two customers with the identical name “John A. Smith” appear. If you want to enforce a certain order in this case, you need to add more columns to the ORDER BY clause, as demonstrated in the previous example.<a data-type="indexterm" data-startref="ch03-ob" id="idm46177496889608"/><a data-type="indexterm" data-startref="ch03-ob2" id="idm46177496888936"/><a data-type="indexterm" data-startref="ch03-ob4" id="idm46177496888264"/><a data-type="indexterm" data-startref="ch03-ob5" id="idm46177496887592"/><a data-type="indexterm" data-startref="ch03-ob6" id="idm46177496886920"/><a data-type="indexterm" data-startref="ch03-ob8" id="idm46177496886248"/><a data-type="indexterm" data-startref="ch03-ob9" id="idm46177496885576"/><a data-type="indexterm" data-startref="ch03-oba" id="idm46177496884904"/><a data-type="indexterm" data-startref="ch03-obb" id="idm46177496884232"/><a data-type="indexterm" data-startref="ch03-obc" id="idm46177496883560"/></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="The LIMIT Clause"><div class="sect2" id="BAS-SEC-LIMIT">
<h2>The LIMIT Clause</h2>

<p>As you may have noted, a few of the previous queries used<a data-type="indexterm" data-primary="LIMIT clause" id="idm46177496868344"/><a data-type="indexterm" data-primary="SELECT" data-secondary="LIMIT clause" id="idm46177496867640"/><a data-type="indexterm" data-primary="rows" data-secondary="LIMIT clause" id="idm46177496866696"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SELECT" data-tertiary="LIMIT clause" id="idm46177496865752"/> the <code>LIMIT</code> clause. This is a useful nonstandard SQL statement that allows you to control how many rows are output. Its basic form allows you to limit the number of rows returned from a <code>SELECT</code> statement, which is useful when you want to restrict the amount of data communicated over a network or output to the screen. You might use it, for example, to get a sample of the data from a table, as shown here:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">customer_list</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">10</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------------+
| name             |
+------------------+
| VERA MCCOY       |
| MARIO CHEATHAM   |
| JUDY GRAY        |
| JUNE CARROLL     |
| ANTHONY SCHWAB   |
| CLAUDE HERZOG    |
| MARTIN BALES     |
| BOBBY BOUDREAU   |
| WILLIE MARKHAM   |
| JORDAN ARCHULETA |
+------------------+</pre>

<p>The <code>LIMIT</code> clause can have two arguments. In this case, the first argument specifies the first row to return, and the second specifies the maximum number of rows to return. <a data-type="indexterm" data-primary="offset for LIMIT clause" id="idm46177496848904"/>The first argument is known as the <em>offset</em>. Suppose you want five rows, but you want to skip the first five rows, which means the result will start at the sixth row. Record offsets for <code>LIMIT</code> start at 0, so you can do this as follows:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">customer_list</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">5</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------------+
| name             |
+------------------+
| CLAUDE HERZOG    |
| MARTIN BALES     |
| BOBBY BOUDREAU   |
| WILLIE MARKHAM   |
| JORDAN ARCHULETA |
+------------------+
5 rows in set (0.00 sec)</pre>

<p>The output is rows 6 to 10 from the <code>SELECT</code> query.</p>

<p>There’s an alternative syntax that you might see for the <code>LIMIT</code> keyword: instead of writing <code>LIMIT 10, 5</code>, you can write <code>LIMIT 10 OFFSET 5</code>. The <code>OFFSET</code> syntax discards the <em>N</em> values specified in it.</p>

<p>Here’s an example with no offset:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">id</code><code class="p">,</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">customer_list</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">id</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">10</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----+------------------+
| ID | name             |
+----+------------------+
|  1 | MARY SMITH       |
|  2 | PATRICIA JOHNSON |
|  3 | LINDA WILLIAMS   |
|  4 | BARBARA JONES    |
|  5 | ELIZABETH BROWN  |
|  6 | JENNIFER DAVIS   |
|  7 | MARIA MILLER     |
|  8 | SUSAN WILSON     |
|  9 | MARGARET MOORE   |
| 10 | DOROTHY TAYLOR   |
+----+------------------+
10 rows in set (0.00 sec)</pre>

<p>And here are the results with an offset of 5:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">id</code><code class="p">,</code><code> </code><code class="n">name</code><code> </code><code class="k">FROM</code><code> </code><code class="n">customer_list</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">id</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">10</code><code> </code><code class="n">OFFSET</code><code> </code><code class="mi">5</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting" class="less_space pagebreak-before">+----+----------------+
| ID | name           |
+----+----------------+
|  6 | JENNIFER DAVIS |
|  7 | MARIA MILLER   |
|  8 | SUSAN WILSON   |
|  9 | MARGARET MOORE |
| 10 | DOROTHY TAYLOR |
| 11 | LISA ANDERSON  |
| 12 | NANCY THOMAS   |
| 13 | KAREN JACKSON  |
| 14 | BETTY WHITE    |
| 15 | HELEN HARRIS   |
+----+----------------+
10 rows in set (0.01 sec)</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Joining Two Tables"><div class="sect2" id="BAS-SEC-JOINS">
<h2>Joining Two Tables</h2>

<p>So far we’ve only been working with one table in our <code>SELECT</code> queries.<a data-type="indexterm" data-primary="joins" data-secondary="inner joins" data-see="INNER JOIN" id="idm46177496708088"/><a data-type="indexterm" data-primary="SELECT" data-secondary="INNER JOIN" id="idm46177496706808"/><a data-type="indexterm" data-primary="INNER JOIN" id="idm46177496705864"/> However, the majority of cases will require information from more than one table at once. As we’ve explored the tables in the <code>sakila</code> database, it’s become obvious that by using relationships, we can answer more interesting queries. For example, it’d be useful to know the country each city is in. This section shows you how to answer queries like that by joining two tables. We’ll return to this issue as part of a longer, more advanced discussion of joins in <a data-type="xref" href="ch05.xhtml#CH5_ADV1">Chapter 5</a>.</p>

<p>We use only one join syntax in this chapter. There are two more (<code>LEFT</code> and <code>RIGHT JOIN</code>), and each gives you a different way to bring together data from two or more tables. The syntax we use here is the <code>INNER JOIN</code>, which is the most commonly used in daily activities. Let’s look at an example, and then we’ll explain more about how it works:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code class="p">,</code><code> </code><code class="n">country</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code> </code><code class="k">INNER</code><code> </code><code class="k">JOIN</code><code> </code><code class="n">country</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ON</code><code> </code><code class="n">city</code><code class="p">.</code><code class="n">country_id</code><code> </code><code class="o">=</code><code> </code><code class="n">country</code><code class="p">.</code><code class="n">country_id</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">country</code><code class="p">.</code><code class="n">country_id</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">5</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">country</code><code class="p">,</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------+----------------+
| city     | country        |
+----------+----------------+
| Kabul    | Afghanistan    |
| Batna    | Algeria        |
| Bchar    | Algeria        |
| Skikda   | Algeria        |
| Tafuna   | American Samoa |
| Benguela | Angola         |
| Namibe   | Angola         |
+----------+----------------+
7 rows in set (0.00 sec)</pre>

<p>The output shows the cities in each country with a <code>country_id</code> lower than 5. You can see for the first time which cities are in each country.</p>

<p>How does the <code>INNER JOIN</code> work? The statement has two parts: first, two table names separated by the <code>INNER JOIN</code> keywords; and second, <a data-type="indexterm" data-primary="joins" data-secondary="ON or using" id="idm46177496640184"/><a data-type="indexterm" data-primary="columns" data-secondary="SELECT" data-tertiary="column names and joins" id="idm46177496639240"/>the <code>ON</code> keyword that specifies the required columns to compose the condition. In this example, the two tables to be joined are <code>city</code> and <code>country</code>, expressed as <code>city INNER JOIN country</code> (for the basic <code>INNER JOIN</code>, it doesn’t matter what order you list the tables in, so using <code>country INNER JOIN city</code> would have the same effect). The <code>ON</code> clause (<code>ON city.country_id = country.country_id</code>) is where we tell MySQL the columns that hold the relationship between the tables; you should recall this from our design and our previous discussion in <a data-type="xref" href="ch02.xhtml#CH2_DESIGN">Chapter 2</a>.</p>

<p>If in the join condition the column names in both tables used for matching are the same, you can use the <code>USING</code> clause instead:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">city</code><code class="p">,</code><code> </code><code class="n">country</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">INNER</code><code> </code><code class="k">JOIN</code><code> </code><code class="n">country</code><code> </code><code class="k">using</code><code> </code><code class="p">(</code><code class="n">country_id</code><code class="p">)</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">country</code><code class="p">.</code><code class="n">country_id</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">5</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">country</code><code class="p">,</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------+----------------+
| city     | country        |
+----------+----------------+
| Kabul    | Afghanistan    |
| Batna    | Algeria        |
| Bchar    | Algeria        |
| Skikda   | Algeria        |
| Tafuna   | American Samoa |
| Benguela | Angola         |
| Namibe   | Angola         |
+----------+----------------+
7 rows in set (0.01 sec)</pre>

<p>The Venn diagram in <a data-type="xref" href="#FIG-VENN-INNER-JOIN">Figure 3-1</a> illustrates the inner join.</p>

<p>Before we leave <code>SELECT</code>, we’ll give you a taste of one of the functions you can use to aggregate values. <a data-type="indexterm" data-primary="INNER JOIN" data-secondary="COUNT() with" id="idm46177496561240"/><a data-type="indexterm" data-primary="COUNT()" data-secondary="INNER JOIN with" id="idm46177496560264"/><a data-type="indexterm" data-primary="aggregating data" data-secondary="aggregate functions" data-tertiary="COUNT()" id="idm46177496559320"/><a data-type="indexterm" data-primary="SELECT" data-secondary="aggregate functions" data-see="aggregating data" id="idm46177496558104"/>Suppose you want to count how many cities Italy has in our database. You can do this by joining the two tables and counting the number of rows with that <code>country_id</code>. Here’s how it works:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="nf">COUNT</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code> </code><code class="k">INNER</code><code> </code><code class="k">JOIN</code><code> </code><code class="n">country</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ON</code><code> </code><code class="n">city</code><code class="p">.</code><code class="n">country_id</code><code> </code><code class="o">=</code><code> </code><code class="n">country</code><code class="p">.</code><code class="n">country_id</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">country</code><code class="p">.</code><code class="n">country_id</code><code> </code><code class="o">=</code><code> </code><code class="mi">49</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">country</code><code class="p">,</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting" class="less_space pagebreak-before">+----------+
| count(1) |
+----------+
|        7 |
+----------+
1 row in set (0.00 sec)</pre>

<p>We explain more features of <code>SELECT</code> and aggregate functions in <a data-type="xref" href="ch05.xhtml#CH5_ADV1">Chapter 5</a>. For more on the <code>COUNT()</code> function, see <a data-type="xref" href="ch05.xhtml#ADV1-AGGREGATE-FUNCTIONS">“Aggregate functions”</a>.</p>

<figure><div id="FIG-VENN-INNER-JOIN" class="figure">
<img src="Images/lm2e_0301.png" alt="lm2e 0301" width="875" height="552"/>
<h6><span class="label">Figure 3-1. </span>The Venn diagram representation of the INNER JOIN</h6>
</div></figure>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="The INSERT Statement"><div class="sect1" id="BAS-SEC-INSERT">
<h1>The INSERT Statement</h1>

<p>The <code>INSERT</code> statement is used to add new data to tables.<a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" id="ch03-ins2"/><a data-type="indexterm" data-primary="INSERT" id="ch03-ins3"/> This section explains its basic syntax and walks through some simple examples that add new rows to the <code>sakila</code> database. In <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>, we’ll discuss how to load data from existing tables or external data sources.</p>








<section data-type="sect2" data-pdf-bookmark="INSERT Basics"><div class="sect2" id="BAS-SEC-INSERT1">
<h2>INSERT Basics</h2>

<p>Inserting data typically occurs in two situations: <a data-type="indexterm" data-primary="INSERT" data-secondary="basics" id="ch03-insb"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="basics" id="ch03-insb2"/>when you bulk-load in a large batch as you create your database, and when you add data on an ad hoc basis as you use the database. In MySQL, different optimizations are built into the server for each situation. Importantly, different SQL syntaxes are available to make it easy for you to work with the server in both cases. We’ll explain the basic <code>INSERT</code> syntax in this section and show you examples of using it for bulk and single-record insertion.</p>

<p>Let’s start with the basic task of inserting one new row into the <code>language</code> table. To do this, you need to understand the table’s structure. As we explained in <a data-type="xref" href="#BAS-SEC-SAKILACREATE">“Using the sakila Database”</a>, you can discover this with the <code>SHOW COLUMNS</code> statement:<a data-type="indexterm" data-primary="SHOW" data-secondary="COLUMNS" data-tertiary="language example database" id="idm46177496437784"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW COLUMNS" data-tertiary="language database" id="idm46177496436536"/></p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="n">COLUMNS</code><code> </code><code class="k">FROM</code><code> </code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+-------------------+------+-----+-------------------+...
| Field       | Type             | Null | Key | Default            |...
+-------------+-------------------+------+-----+-------------------+...
| language_id | tinyint unsigned | NO   | PRI | NULL               |...
| name        | char(20)         | NO   |     | NULL               |...
| last_update | timestamp        | NO   |     | CURRENT_TIMESTAMP  |...
+-------------+-------------------+------+-----+-------------------+...
...+-----------------------------------------------+
...| Extra                                         |
...+-----------------------------------------------+
...| auto_increment                                |
...|                                               |
...| DEFAULT_GENERATED on update CURRENT_TIMESTAMP |
...+-----------------------------------------------+
3 rows in set (0.00 sec)</pre>

<p>This tells you that the <code>language_id</code> column is auto-generated,<a data-type="indexterm" data-primary="AUTO_INCREMENT" data-secondary="primary key" id="idm46177496423560"/><a data-type="indexterm" data-primary="ON UPDATE" data-secondary="example table" id="idm46177496422584"/><a data-type="indexterm" data-primary="CURRENT_TIMESTAMP" data-secondary="example table" id="idm46177496421640"/><a data-type="indexterm" data-primary="defaults" data-secondary="DEFAULT_GENERATED example table" id="idm46177496420696"/> and the <code>last_update</code> column is updated every time an <code>UPDATE</code> operation happens. You’ll learn more about the <code>AUTO_INCREMENT</code> shortcut to automatically assign the next available identifier in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>.</p>

<p>Let’s add a new row for the language Portuguese.<a data-type="indexterm" data-primary="INSERT" data-secondary="row inserted" id="idm46177496398312"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="row inserted" id="idm46177496397336"/><a data-type="indexterm" data-primary="INSERT" data-secondary="VALUES() parameter" id="idm46177496396120"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496395176"/><a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496393960"/> There are two ways to do this. The most common is to let MySQL fill in the default value for the <code>language_id</code>, like this:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="n">language</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="no">NULL</code><code class="p">,</code><code> </code><code class="s1">'Portuguese'</code><code class="p">,</code><code> </code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.10 sec)</pre>

<p>If you we execute a <code>SELECT</code> on the table now, we’ll see that MySQL inserted the row:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+------------+---------------------+
| language_id | name       | last_update         |
+-------------+------------+---------------------+
|           1 | English    | 2006-02-15 05:02:19 |
|           2 | Italian    | 2006-02-15 05:02:19 |
|           3 | Japanese   | 2006-02-15 05:02:19 |
|           4 | Mandarin   | 2006-02-15 05:02:19 |
|           5 | French     | 2006-02-15 05:02:19 |
|           6 | German     | 2006-02-15 05:02:19 |
|           7 | Portuguese | 2020-09-26 09:11:36 |
+-------------+------------+---------------------+
7 rows in set (0.00 sec)</pre>

<p>Note that we used the function <a href="https://oreil.ly/5YBth"><code>NOW()</code></a> in the <code>last_update</code> column. <a data-type="indexterm" data-primary="NOW()" id="idm46177496338520"/><a data-type="indexterm" data-primary="date and time columns" data-secondary="NOW()" id="idm46177496337784"/><a data-type="indexterm" data-primary="time and date columns" data-secondary="NOW()" id="idm46177496336840"/>The <code>NOW()</code> function returns the current date and time of the MySQL server.</p>

<p>The second option is to insert the value of the <code>language_id</code> column manually. Now that we already have seven languages, we should use 8 for the next value of the <code>language_id</code>. We can verify that with this SQL instruction:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="nf">MAX</code><code class="p">(</code><code class="n">language_id</code><code class="p">)</code><code> </code><code class="k">FROM</code><code> </code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------------+
| max(language_id) |
+------------------+
|                7 |
+------------------+
1 row in set (0.00 sec)</pre>

<p>The <code>MAX()</code> function tells you the maximum value<a data-type="indexterm" data-primary="MAX()" id="idm46177496301400"/><a data-type="indexterm" data-primary="columns" data-secondary="SELECT" data-tertiary="MAX()" id="idm46177496300696"/><a data-type="indexterm" data-primary="SELECT" data-secondary="MAX()" id="idm46177496299480"/> for the column supplied as a parameter. This is cleaner than using <code>SELECT language_id FROM language</code>, which prints out all the rows and requires you to inspect them to find the maximum value. Adding an <code>ORDER BY</code> and a <code>LIMIT</code> clause makes this easier, but using <code>MAX()</code> is much simpler than <code>SELECT language_id FROM language ORDER BY language_id DESC LIMIT 1</code>, which returns the same answer.</p>

<p>We’re now ready to insert the row. In this <code>INSERT</code>, we are going to insert the <code>last_update</code> value manually too. Here’s the needed command:<a data-type="indexterm" data-primary="INSERT" data-secondary="VALUES() parameter" id="idm46177496295128"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496274744"/><a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496273528"/></p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="n">language</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="s1">'Russian'</code><code class="p">,</code><code> </code><code class="s1">'2020-09-26 10:35:00'</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.02 sec)</pre>

<p>MySQL reports that one row has been affected (added, in this case), which we can confirm by checking the contents of the table again:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+------------+---------------------+
| language_id | name       | last_update         |
+-------------+------------+---------------------+
|           1 | English    | 2006-02-15 05:02:19 |
|           2 | Italian    | 2006-02-15 05:02:19 |
|           3 | Japanese   | 2006-02-15 05:02:19 |
|           4 | Mandarin   | 2006-02-15 05:02:19 |
|           5 | French     | 2006-02-15 05:02:19 |
|           6 | German     | 2006-02-15 05:02:19 |
|           7 | Portuguese | 2020-09-26 09:11:36 |
|           8 | Russian    | 2020-09-26 10:35:00 |
+-------------+------------+---------------------+
8 rows in set (0.00 sec)</pre>

<p>The single-row <code>INSERT</code> style detects primary key duplicates<a data-type="indexterm" data-primary="primary key" data-secondary="INSERT detecting duplicates" id="idm46177496221656"/><a data-type="indexterm" data-primary="INSERT" data-secondary="primary key" id="idm46177496220712"/><a data-type="indexterm" data-primary="INSERT" data-secondary="VALUES() parameter" data-tertiary="primary key" id="idm46177496219768"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="primary key" id="idm46177496218552"/><a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496217336"/> and stops as soon as it finds one. For example, suppose we try to insert another row with the same <code>language_id</code>:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="n">language</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="s1">'Arabic'</code><code class="p">,</code><code> </code><code class="s1">'2020-09-26 10:35:00'</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">ERROR 1062 (23000): Duplicate entry '8' for key 'language.PRIMARY'</pre>

<p>The <code>INSERT</code> operation stops when it detects the duplicate key. <a data-type="indexterm" data-primary="IGNORE" id="idm46177496177240"/><a data-type="indexterm" data-primary="INSERT" data-secondary="IGNORE" id="idm46177496176536"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="IGNORE" id="idm46177496175592"/>You can add an <code>IGNORE</code> clause to prevent the error if you want, but note that the row still will not be inserted:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">IGNORE</code><code> </code><code class="k">INTO</code><code> </code><code class="n">language</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="mi">8</code><code class="p">,</code><code> </code><code class="s1">'Arabic'</code><code class="p">,</code><code> </code><code class="s1">'2020-09-26 10:35:00'</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 0 rows affected, 1 warning (0.00 sec)</pre>

<p>In most cases you’ll want to know about possible problems, though (after all, primary keys are supposed to be unique), so this <code>IGNORE</code> syntax is rarely used.</p>

<p>It is also possible to insert multiple values at once:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="n">language</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="no">NULL</code><code class="p">,</code><code> </code><code class="s1">'Spanish'</code><code class="p">,</code><code> </code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">,</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="p">(</code><code class="no">NULL</code><code class="p">,</code><code> </code><code class="s1">'Hebrew'</code><code class="p">,</code><code> </code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 2 rows affected (0.02 sec)
Records: 2  Duplicates: 0  Warnings: 0</pre>

<p>Note that MySQL reports the results of bulk insertion differently from single 
<span class="keep-together">insertion.</span></p>

<p>The first line tells you how many rows were inserted, while the first entry in the second line tells you how many rows (or records) were actually processed. If you use <code>INSERT IGNORE</code> and try to insert a duplicate record (one for which the primary key matches that of an existing row), MySQL will quietly skip inserting it and report it as a duplicate in the second entry on the second line:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">IGNORE</code><code> </code><code class="k">INTO</code><code> </code><code class="n">language</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="mi">9</code><code class="p">,</code><code> </code><code class="s1">'Portuguese'</code><code class="p">,</code><code> </code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">,</code><code>
    </code><code class="p">(</code><code class="mi">11</code><code class="p">,</code><code> </code><code class="s1">'Hebrew'</code><code class="p">,</code><code> </code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected, 1 warning (0.01 sec)
Records: 2  Duplicates: 1  Warnings: 1</pre>

<p>We discuss the causes of warnings, shown as the third entry on the second line of output, in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>.<a data-type="indexterm" data-startref="ch03-insb" id="idm46177496010680"/><a data-type="indexterm" data-startref="ch03-insb2" id="idm46177496009976"/></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Alternative Syntaxes"><div class="sect2" id="BAS-SEC-INSERT2">
<h2>Alternative Syntaxes</h2>

<p>There are several alternatives to the <code>VALUES</code> syntax<a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496006648"/><a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="VALUES() parameter" id="idm46177496005368"/><a data-type="indexterm" data-primary="INSERT" data-secondary="VALUES() parameter" id="idm46177496004152"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="row inserted" id="idm46177496003208"/><a data-type="indexterm" data-primary="INSERT" data-secondary="row inserted" id="idm46177495989608"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="alternative syntaxes" id="ch03-alt"/><a data-type="indexterm" data-primary="INSERT" data-secondary="alternative syntaxes" id="ch03-alt2"/> demonstrated in the previous section. This section walks through them and explains the advantages and drawbacks of each. If you’re happy with the basic syntax we’ve described so far and want to move on to a new topic, feel free to skip ahead to <a data-type="xref" href="#BAS-SEC-DELETE">“The DELETE Statement”</a>.</p>

<p>There are some advantages to the <code>VALUES</code> syntax we’ve been using: it works for both single and bulk inserts, you get an error message if you forget to supply values for all the columns, and you don’t have to type in the column names. However, it also has some disadvantages: you need to remember the order of the columns, you need to provide a value for each column, and the syntax is closely tied to the underlying table structure. That is, if you change the table’s structure, you need to change the <code>INSERT</code> statements. Fortunately, we can avoid these disadvantages by varying the syntax.</p>

<p>Suppose you know that the <code>actor</code> table has four columns,<a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="names known, not order" id="idm46177495982328"/> and you recall their names, but you’ve forgotten their order. You can insert a row using the following approach:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="nf">actor</code><code> </code><code class="p">(</code><code class="n">actor_id</code><code class="p">,</code><code> </code><code class="n">first_name</code><code class="p">,</code><code> </code><code class="n">last_name</code><code class="p">,</code><code> </code><code class="n">last_update</code><code class="p">)</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="no">NULL</code><code class="p">,</code><code> </code><code class="s1">'Vinicius'</code><code class="p">,</code><code> </code><code class="s1">'Grippa'</code><code class="p">,</code><code> </code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.03 sec)</pre>

<p>The column names are included in parentheses after the table name, and the values stored in those columns are listed in parentheses after the <code>VALUES</code> keyword. So, in this example, a new row is created, and the value <code>201</code> is stored as the <code>actor_id</code> (remember, <code>actor_id</code> has the <code>auto_increment</code> property), <code>Vinicius</code> is stored as the <code>first_name</code>, <code>Grippa</code> is stored as the <code>last_name</code>, and the <code>last_update</code> column is populated with the current timestamp. This syntax’s advantages are that it’s readable and flexible (addressing the third disadvantage we described) and order-independent (addressing the first disadvantage). The burden is that you need to know the column names and type them in.</p>

<p>This new syntax can also address the second disadvantage of the simpler approach—that is, it can allow you to<a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="values in some columns" id="idm46177495940968"/> insert values for only some columns. To understand how this might be useful, let’s explore the <code>city</code> table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DESC</code><code> </code><code class="n">city</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+-------------+----------------------+------+-----+-------------------+...
| Field       | Type                 | Null | Key | Default           |...
+-------------+----------------------+------+-----+-------------------+...
| city_id     | smallint(5) unsigned | NO   | PRI | NULL              |...
| city        | varchar(50)          | NO   |     | NULL              |...
| country_id  | smallint(5) unsigned | NO   | MUL | NULL              |...
| last_update | timestamp            | NO   |     | CURRENT_TIMESTAMP |...
+-------------+----------------------+------+-----+-------------------+...
...+-----------------------------------------------+
...| Extra                                         |
...+-----------------------------------------------+
...| auto_increment                                |
...|                                               |
...|                                               |
...| on update CURRENT_TIMESTAMP                   |
...|-----------------------------------------------+

4 rows in set (0.00 sec)</pre>

<p>Notice that the <code>last_update</code> column has a default value of <code>CURRENT_TIMESTAMP</code>. This means that if you don’t insert a value for the <code>last_update</code> column, MySQL will insert the current date and time by default. This is just what we want: when we store a record, we don’t want to bother checking the date and time and typing it in. Let’s try inserting an incomplete entry:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="nf">city</code><code> </code><code class="p">(</code><code class="n">city</code><code class="p">,</code><code> </code><code class="n">country_id</code><code class="p">)</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="s1">'Bebedouro'</code><code class="p">,</code><code> </code><code class="mi">19</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.00 sec)</pre>

<p>We didn’t set a value for the <code>city_id</code> column, so MySQL defaults it to the next available value (because of the <code>auto_increment</code> property), and <code>last_update</code> stores the current date and time. You can check this with a query:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">city</code><code> </code><code class="k">where</code><code> </code><code class="n">city</code><code> </code><code class="k">like</code><code> </code><code class="s1">'Bebedouro'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+---------+-----------+------------+---------------------+
| city_id | city      | country_id | last_update         |
+---------+-----------+------------+---------------------+
|     601 | Bebedouro |         19 | 2021-02-27 21:34:08 |
+---------+-----------+------------+---------------------+
1 row in set (0.01 sec)</pre>

<p>You can also use this approach for bulk insertion, as follows:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="nf">city</code><code> </code><code class="p">(</code><code class="n">city</code><code class="p">,</code><code class="n">country_id</code><code class="p">)</code><code> </code><code class="k">VALUES</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="p">(</code><code class="s1">'Sao Carlos'</code><code class="p">,</code><code class="mi">19</code><code class="p">)</code><code class="p">,</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="p">(</code><code class="s1">'Araraquara'</code><code class="p">,</code><code class="mi">19</code><code class="p">)</code><code class="p">,</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="p">(</code><code class="s1">'Ribeirao Preto'</code><code class="p">,</code><code class="mi">19</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0</pre>

<p>In addition to needing to remember and type in column names, a disadvantage of this approach is that you can accidentally omit values for columns. MySQL will set the omitted columns to the default values. <a data-type="indexterm" data-primary="NULL" data-secondary="column default value" id="idm46177495757000"/><a data-type="indexterm" data-primary="columns" data-secondary="INSERT" data-tertiary="NULL default value" id="idm46177495766696"/><a data-type="indexterm" data-primary="INSERT" data-secondary="NULL default value" id="idm46177495765480"/>All columns in a MySQL table have a default value of <code>NULL</code>, unless another default value is explicitly assigned when the table is created or modified.</p>

<p>When you need to use default values for the table columns, you might want to use the<a data-type="indexterm" data-primary="INSERT" data-secondary="DEFAULT value" id="idm46177495763272"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="INSERT" data-tertiary="DEFAULT value" id="idm46177495762296"/><a data-type="indexterm" data-primary="defaults" data-secondary="DEFAULT value" data-tertiary="INSERT" id="idm46177495761080"/> <code>DEFAULT</code> keyword (supported by MySQL 5.7 and later). Here’s an example that adds a row to the <code>country</code> table using <code>DEFAULT</code>:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="n">country</code><code> </code><code class="k">VALUES</code><code> </code><code class="p">(</code><code class="no">NULL</code><code class="p">,</code><code> </code><code class="s1">'Uruguay'</code><code class="p">,</code><code> </code><code class="k">DEFAULT</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.01 sec)</pre>

<p>The keyword <code>DEFAULT</code> tells MySQL to use the default value for that column, so the current date and time are inserted in our example. This approach’s advantages are that you can use the bulk-insert feature with default values, and you can never accidentally omit a column.</p>

<p>There’s another alternative <code>INSERT</code> syntax. In this approach, you list the column names and values together, so you don’t have to mentally map the list of values to the earlier list of columns. Here’s an example that adds a new row to the <code>country</code> table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">INSERT</code><code> </code><code class="k">INTO</code><code> </code><code class="n">country</code><code> </code><code class="kt">SET</code><code> </code><code class="n">country_id</code><code class="o">=</code><code class="no">NULL</code><code class="p">,</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="n">country</code><code class="o">=</code><code class="s1">'Bahamas'</code><code class="p">,</code><code> </code><code class="n">last_update</code><code class="o">=</code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.01 sec)</pre>

<p>The syntax requires you to list a table name, the keyword <code>SET</code>, and then column-equals-value pairs, separated by commas. Columns for which values aren’t supplied are set to their default values. Again, the disadvantages are that you can accidentally omit values for columns and that you need to remember and type in column names. A significant additional disadvantage is that you can’t use this method for bulk 
<span class="keep-together">insertion.</span></p>

<p>You can also insert using values returned from a query. We discuss this in <a data-type="xref" href="ch07.xhtml#CH7_DOING_MORE">Chapter 7</a>.<a data-type="indexterm" data-startref="ch03-ins2" id="idm46177495655192"/><a data-type="indexterm" data-startref="ch03-ins3" id="idm46177495654488"/><a data-type="indexterm" data-startref="ch03-alt" id="idm46177495653816"/><a data-type="indexterm" data-startref="ch03-alt2" id="idm46177495653144"/></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="The DELETE Statement"><div class="sect1" id="BAS-SEC-DELETE">
<h1>The DELETE Statement</h1>

<p>The <code>DELETE</code> statement is used to remove one or more rows<a data-type="indexterm" data-primary="tables" data-secondary="DELETE" id="ch03-del5"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="DELETE" id="ch03-del"/><a data-type="indexterm" data-primary="DELETE" id="ch03-del2"/><a data-type="indexterm" data-primary="rows" data-secondary="DELETE" id="ch03-del4"/> from a table. We explain single-table deletes here and discuss multitable deletes—which remove data from two or more tables through one statement—in <a data-type="xref" href="ch07.xhtml#CH7_DOING_MORE">Chapter 7</a>.</p>








<section data-type="sect2" data-pdf-bookmark="DELETE Basics"><div class="sect2" id="BAS-SEC-DELETE1">
<h2>DELETE Basics</h2>

<p>The simplest use of <code>DELETE</code> is to remove all the rows in a table. Suppose you want to empty your <code>rental</code> table. You can do this with:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DELETE</code><code> </code><code class="k">FROM</code><code> </code><code class="n">rental</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 16044 rows affected (2.41 sec)</pre>

<p>The <code>DELETE</code> syntax doesn’t include column names since it’s used to remove whole rows and not just values from a row. To reset or modify a value in a row, you use the <code>UPDATE</code> statement, described in <a data-type="xref" href="#BAS-SEC-UPDATE">“The UPDATE Statement”</a>. Note that the <code>DELETE</code> statement doesn’t remove the table itself. For example, having deleted all the rows in the <code>rental</code> table, you can still query the table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">*</code><code> </code><code class="k">FROM</code><code> </code><code class="n">rental</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Empty set (0.00 sec)</pre>

<p>You can also continue to explore its structure using <code>DESCRIBE</code> or <code>SHOW CREATE TABLE</code>, and insert new rows using <code>INSERT</code>. To remove a table, you use the <code>DROP</code> statement described in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>.</p>

<p>Note that if the table has a relationship with another table, the delete might fail because of the foreign key constraint:<a data-type="indexterm" data-primary="constraints" data-secondary="DELETE with relationship" id="idm46177495583992"/><a data-type="indexterm" data-primary="DELETE" data-secondary="relationships causing failure" id="idm46177495583048"/><a data-type="indexterm" data-primary="relationships" data-secondary="DELETE failure" id="idm46177495582136"/></p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DELETE</code><code> </code><code class="k">FROM</code><code> </code><code class="n">language</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key
constraint fails (`sakila`.`film`, CONSTRAINT `fk_film_language` FOREIGN KEY
(`language_id`) REFERENCES `language` (`language_id`) ON UPDATE CASCADE)</pre>
</div></section>













<section data-type="sect2" class="less_space pagebreak-before" data-pdf-bookmark="Using WHERE, ORDER BY, and LIMIT"><div class="sect2" id="BAS-SEC-DELETE2">
<h2>Using WHERE, ORDER BY, and LIMIT</h2>

<p>If you deleted rows in the previous section, reload your <code>sakila</code> database now by following the instructions in <a data-type="xref" href="ch02.xhtml#BAS-SEC-MODELING-EXAMPLES">“Entity Relationship Modeling Examples”</a>. You’ll need the rows in the <code>rental</code> table restored for the examples in this section.</p>

<p>To remove one or more rows, but not all rows in a table,<a data-type="indexterm" data-primary="WHERE clause" data-secondary="DELETE" id="idm46177495548888"/><a data-type="indexterm" data-primary="DELETE" data-secondary="WHERE clause" id="idm46177495547912"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="DELETE" data-tertiary="WHERE clause" id="idm46177495546968"/> use a <code>WHERE</code> clause. This works in the same way as it does for <code>SELECT</code>. For example, suppose you want to remove all rows from the <code>rental</code> table with a <code>rental_id</code> less than 10. You can do this with:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DELETE</code><code> </code><code class="k">FROM</code><code> </code><code class="n">rental</code><code> </code><code class="k">WHERE</code><code> </code><code class="n">rental_id</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">10</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 9 rows affected (0.01 sec)</pre>

<p>The result is that the nine rows that match the criterion are removed.</p>

<p>Now suppose you want to remove all the payments from a<a data-type="indexterm" data-primary="INNER JOIN" data-secondary="DELETE with" id="idm46177495509848"/><a data-type="indexterm" data-primary="DELETE" data-secondary="INNER JOIN with" id="idm46177495508872"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="DELETE" data-tertiary="INNER JOIN with" id="idm46177495507928"/> customer called Mary Smith from the database. First, perform a <code>SELECT</code> with the <code>customer</code> and <code>payment</code> tables using <code>INNER JOIN</code> (as described in <a data-type="xref" href="#BAS-SEC-JOINS">“Joining Two Tables”</a>):</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="n">first_name</code><code class="p">,</code><code> </code><code class="n">last_name</code><code class="p">,</code><code> </code><code class="n">customer</code><code class="p">.</code><code class="n">customer_id</code><code class="p">,</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="n">amount</code><code class="p">,</code><code> </code><code class="n">payment_date</code><code> </code><code class="k">FROM</code><code> </code><code class="n">payment</code><code> </code><code class="k">INNER</code><code> </code><code class="k">JOIN</code><code> </code><code class="n">customer</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">ON</code><code> </code><code class="n">customer</code><code class="p">.</code><code class="n">customer_id</code><code class="o">=</code><code class="n">payment</code><code class="p">.</code><code class="n">customer_id</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">first_name</code><code> </code><code class="k">like</code><code> </code><code class="s1">'Mary'</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="n">last_name</code><code> </code><code class="k">like</code><code> </code><code class="s1">'Smith'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+------------+-----------+-------------+--------+---------------------+
| first_name | last_name | customer_id | amount | payment_date        |
+------------+-----------+-------------+--------+---------------------+
| MARY       | SMITH     |           1 |   2.99 | 2005-05-25 11:30:37 |
| MARY       | SMITH     |           1 |   0.99 | 2005-05-28 10:35:23 |
| MARY       | SMITH     |           1 |   5.99 | 2005-06-15 00:54:12 |
| MARY       | SMITH     |           1 |   0.99 | 2005-06-15 18:02:53 |
...
| MARY       | SMITH     |           1 |   1.99 | 2005-08-22 01:27:57 |
| MARY       | SMITH     |           1 |   2.99 | 2005-08-22 19:41:37 |
| MARY       | SMITH     |           1 |   5.99 | 2005-08-22 20:03:46 |
+------------+-----------+-------------+--------+---------------------+
32 rows in set (0.00 sec)</pre>

<p>Next, perform the following <code>DELETE</code> operation to remove the row with a <em>customer_id</em> of 1 from the <code>payment</code> table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DELETE</code><code> </code><code class="k">FROM</code><code> </code><code class="n">payment</code><code> </code><code class="k">where</code><code> </code><code class="n">customer_id</code><code class="o">=</code><code class="mi">1</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 32 rows affected (0.01 sec)</pre>

<p>You can use the <code>ORDER BY</code> and <code>LIMIT</code> clauses with<a data-type="indexterm" data-primary="DELETE" data-secondary="ORDER BY and LIMIT" id="idm46177495385032"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="DELETE" data-tertiary="ORDER BY and LIMIT" id="idm46177495384024"/><a data-type="indexterm" data-primary="ORDER BY" data-secondary="DELETE LIMIT" id="idm46177495382808"/><a data-type="indexterm" data-primary="LIMIT clause" data-secondary="DELETE ORDER BY" id="idm46177495381864"/> <code>DELETE</code>. You usually do this when you want to limit the number of rows deleted. For example:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">DELETE</code><code> </code><code class="k">FROM</code><code> </code><code class="n">payment</code><code> </code><code class="k">ORDER</code><code> </code><code class="k">BY</code><code> </code><code class="n">customer_id</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">10000</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 10000 rows affected (0.22 sec)</pre>
<div data-type="tip"><h6>Tip</h6>
<p>We highly recommend using <code>DELETE</code> and <code>UPDATE</code> <a data-type="indexterm" data-primary="performance" data-secondary="DELETE and UPDATE" id="idm46177495342888"/><a data-type="indexterm" data-primary="rows" data-secondary="DELETE" data-tertiary="performance issues" id="idm46177495341992"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="DELETE" data-tertiary="performance issues" id="idm46177495340776"/><a data-type="indexterm" data-primary="rows" data-secondary="UPDATE" data-tertiary="performance issues" id="idm46177495339560"/><a data-type="indexterm" data-primary="UPDATE" data-secondary="performance issues" id="idm46177495338344"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="UPDATE" data-tertiary="performance issues" id="idm46177495337400"/>operations for small sets of rows, due to performance issues. The appropriate value varies depending on the hardware, but a good rule of thumb is around 20,000–40,000 rows per batch.</p>
</div>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Removing All Rows with TRUNCATE"><div class="sect2" id="BAS-SEC-TRUNCATE">
<h2>Removing All Rows with TRUNCATE</h2>

<p>If you want to remove all the rows in a table, there’s a faster<a data-type="indexterm" data-primary="TRUNCATE TABLE" id="idm46177495314728"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="TRUNCATE TABLE" id="idm46177495314024"/> method than removing them with <code>DELETE</code>. When you use the <code>TRUNCATE</code> <code>TABLE</code> statement, MySQL takes the shortcut of dropping the table, removing the table structures, and then re-creating them. When there are many rows in a table, this is much faster.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>As a curiosity, there is a bug in MySQL 5.6 that can cause it to<a data-type="indexterm" data-primary="InnoDB" data-secondary="MySQL 5.6 TRUNCATE bug" id="idm46177495310472"/><a data-type="indexterm" data-primary="TRUNCATE TABLE" data-secondary="InnoDB bug" id="idm46177495309496"/> stall MySQL when performing a <code>TRUNCATE</code> operation when MySQL is configured with a large InnoDB buffer pool (200 GB or more). See the <a href="https://oreil.ly/I40U9">bug report for details</a>.</p>
</div>

<p>If you want to remove all the data in the <code>payment</code> table, you can execute this:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="n">TRUNCATE</code><code> </code><code class="k">TABLE</code><code> </code><code class="n">payment</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 0 rows affected (0.07 sec)</pre>

<p>Notice that the number of rows affected is shown as zero: to speed up the operation, MySQL doesn’t count the number of rows that are deleted, so the number shown does not reflect the actual number of rows deleted.</p>

<p>The <code>TRUNCATE TABLE</code> statement differs from <code>DELETE</code> in a lot of ways, but it is worth mentioning a few:<a data-type="indexterm" data-primary="TRUNCATE TABLE" data-secondary="DELETE versus" id="idm46177495295608"/><a data-type="indexterm" data-primary="DELETE" data-secondary="TRUNCATE TABLE versus" id="idm46177495294632"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="TRUNCATE TABLE" data-tertiary="DELETE versus" id="idm46177495293688"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="DELETE" data-tertiary="TRUNCATE TABLE versus" id="idm46177495292472"/></p>

<ul>
<li>
<p><code>TRUNCATE</code> operations drop and re-create the table, which is much faster than deleting rows one by one, particularly for large tables.</p>
</li>
<li>
<p><code>TRUNCATE</code> operations cause an implicit commit, so you can’t roll them back.</p>
</li>
<li>
<p>You cannot perform <code>TRUNCATE</code> operations if the session holds an active table lock.</p>
</li>
</ul>

<p>Table types, transactions, and locking are discussed in <a data-type="xref" href="ch05.xhtml#CH5_ADV1">Chapter 5</a>. None of these limitations affects most applications in practice, and you can use <code>TRUNCATE TABLE</code> to speed up your processing. Of course, it’s not common to delete whole tables during regular operation. An exception is temporary tables used to store query results for a particular user session temporarily, which can be deleted without losing the original data.<a data-type="indexterm" data-startref="ch03-del" id="idm46177495266376"/><a data-type="indexterm" data-startref="ch03-del2" id="idm46177495265672"/><a data-type="indexterm" data-startref="ch03-del4" id="idm46177495265000"/><a data-type="indexterm" data-startref="ch03-del5" id="idm46177495264328"/></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="The UPDATE Statement"><div class="sect1" id="BAS-SEC-UPDATE">
<h1>The UPDATE Statement</h1>

<p>The <code>UPDATE</code> statement is used to change data. <a data-type="indexterm" data-primary="rows" data-secondary="UPDATE" id="ch03-upd4"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="UPDATE" id="ch03-upd"/><a data-type="indexterm" data-primary="UPDATE" id="ch03-upd3"/>In this section, we show you how to update one or more rows in a single table. Multitable updates are discussed in <a data-type="xref" href="ch07.xhtml#ADV2-SEC-UPDATES">“Updates”</a>.</p>

<p>If you’ve deleted rows from your <code>sakila</code> database, reload it before continuing.</p>








<section data-type="sect2" data-pdf-bookmark="Examples"><div class="sect2" id="BAS-SEC-UPDATE1">
<h2>Examples</h2>

<p>The simplest use of the <code>UPDATE</code> statement is to change all the rows in a table. Suppose you need to update the <code>amount</code> column of the <code>payment</code> table by adding 10% for all payments. You could do this by executing:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">UPDATE</code><code> </code><code class="n">payment</code><code> </code><code class="kt">SET</code><code> </code><code class="n">amount</code><code class="o">=</code><code class="n">amount</code><code class="o">*</code><code class="mi">1</code><code class="p">.</code><code class="mi">1</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 16025 rows affected, 16025 warnings (0.41 sec)
Rows matched: 16049  Changed: 16025  Warnings: 16025</pre>

<p>Note that we forgot to update the <code>last_update</code> status. To make it coherent with the expected database model, you can fix this by running the following statement:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">UPDATE</code><code> </code><code class="n">payment</code><code> </code><code class="kt">SET</code><code> </code><code class="n">last_update</code><code class="o">=</code><code class="s1">'2021-02-28 17:53:00'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 16049 rows affected (0.27 sec)
Rows matched: 16049  Changed: 16049  Warnings: 0</pre>
<div data-type="tip"><h6>Tip</h6>
<p>You can use the <code>NOW()</code> function to update the <code>last_update</code> column with the current timestamp of the execution. For example:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">UPDATE</code><code> </code><code class="n">payment</code><code> </code><code class="kt">SET</code><code> </code><code class="n">last_update</code><code class="o">=</code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></strong></pre>
</div>

<p>The second row reported by an <code>UPDATE</code> statement shows the overall effect of the statement. In our example, you see:</p>

<pre data-type="programlisting">Rows matched: 16049  Changed: 16049  Warnings: 0</pre>

<p>The first column reports the number of rows that were retrieved as matches; in this case, since there’s no <code>WHERE</code> or <code>LIMIT</code> clause, all rows in the table match the query. The second column reports how many rows needed to be changed, which is always equal to or less than the number of rows that match. If you repeat the statement, you’ll see a different result:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">UPDATE</code><code> </code><code class="n">payment</code><code> </code><code class="kt">SET</code><code> </code><code class="n">last_update</code><code class="o">=</code><code class="s1">'2021-02-28 17:53:00'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 0 rows affected (0.07 sec)
Rows matched: 16049  Changed: 0  Warnings: 0</pre>

<p>This time, since the date is already set to <code>2021-02-28 17:53:00</code> and there is no <code>WHERE</code> condition, all the rows still match the query but none are changed. Note also the number of rows changed is always equal to the number of rows affected, as reported on the first line of the output.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Using WHERE, ORDER BY, and LIMIT"><div class="sect2" id="BAS-SEC-UPDATE2">
<h2>Using WHERE, ORDER BY, and LIMIT</h2>

<p>Often, you don’t want to change all the rows in a table.<a data-type="indexterm" data-primary="LIMIT clause" data-secondary="UPDATE ORDER BY" id="idm46177495132104"/><a data-type="indexterm" data-primary="ORDER BY" data-secondary="UPDATE LIMIT" id="idm46177495131128"/><a data-type="indexterm" data-primary="WHERE clause" data-secondary="UPDATE" id="idm46177495130184"/><a data-type="indexterm" data-primary="UPDATE" data-secondary="WHERE, ORDER BY, LIMIT" id="idm46177495129240"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="UPDATE" data-tertiary="WHERE, ORDER BY, LIMIT" id="idm46177495128296"/> Instead, you want to update one or more rows that match a condition. As with <code>SELECT</code> and <code>DELETE</code>, the <code>WHERE</code> clause is used for the task. In addition, in the same way as with <code>DELETE</code>, you can use <code>ORDER BY</code> and <code>LIMIT</code> together to control how many rows are updated from an ordered list.</p>

<p>Let’s try an example that modifies one row in a table. Suppose that the actress Penelope Guiness has changed her last name. To update it in the <code>actor</code> table of the database, you need to execute:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">UPDATE</code><code> </code><code class="n">actor</code><code> </code><code class="kt">SET</code><code> </code><code class="n">last_name</code><code class="o">=</code><code> </code><code class="nf">UPPER</code><code class="p">(</code><code class="s1">'cruz'</code><code class="p">)</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">WHERE</code><code> </code><code class="n">first_name</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'PENELOPE'</code></strong><code>
    </code><code class="o">-</code><code class="o">&gt;</code><code> </code><strong><code class="k">AND</code><code> </code><code class="n">last_name</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'GUINESS'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0</pre>

<p>As expected, MySQL matched one row and changed one row.</p>

<p>To control how many updates occur, you can use the combination of <code>ORDER BY</code> and <code>LIMIT</code>:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">UPDATE</code><code> </code><code class="n">payment</code><code> </code><code class="kt">SET</code><code> </code><code class="n">last_update</code><code class="o">=</code><code class="nf">NOW</code><code class="p">(</code><code class="p">)</code><code> </code><code class="k">LIMIT</code><code> </code><code class="mi">10</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 10 rows affected (0.01 sec)
Rows matched: 10  Changed: 10  Warnings: 0</pre>

<p>As with <code>DELETE</code>, you would do this because you either want to perform the operation in small chunks or modify only some rows. Here, you can see that 10 rows were matched and changed.</p>

<p>The previous query also illustrates an important aspect of updates. As you’ve seen, updates have two phases: a matching phase, where rows are found that match the <code>WHERE</code> clause, and a modification phase, where the rows that need changing are 
<span class="keep-together">updated.</span><a data-type="indexterm" data-startref="ch03-upd" id="idm46177495021688"/><a data-type="indexterm" data-startref="ch03-upd3" id="idm46177495020984"/><a data-type="indexterm" data-startref="ch03-upd4" id="idm46177495020312"/></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Exploring Databases and Tables with SHOW &#10;and mysqlshow"><div class="sect1" id="BAS-SEC-SHOW">
<h1>Exploring Databases and Tables with SHOW 
<span class="keep-together">and mysqlshow</span></h1>

<p>We’ve already explained how you can use the <code>SHOW</code> command to obtain information on the structure of a database, its tables, and the table columns. <a data-type="indexterm" data-primary="SHOW" data-secondary="DATABASES" id="idm46177495016136"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW DATABASES" id="idm46177495015160"/>In this section, we’ll review the most common types of the <code>SHOW</code> statement with brief examples using the <code>sakila</code> database. The <code>mysqlshow</code> command-line program performs the same 
<span class="keep-together">functions</span> as several <code>SHOW</code> command variants, but without you needing to start the MySQL client.</p>

<p>The <code>SHOW DATABASES</code> statement lists the databases you can access. If you’ve followed our sample database installation steps in <a data-type="xref" href="ch02.xhtml#BAS-SEC-MODELING-EXAMPLES">“Entity Relationship Modeling Examples”</a> and deployed the bank model in <a data-type="xref" href="ch02.xhtml#CREATE-BANK">“Creating a Bank Database ER Model”</a>, your output should be as follows:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="k">DATABASES</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------+
| Database           |
+--------------------+
| information_schema |
| bank_model         |
| employees          |
| mysql              |
| performance_schema |
| sakila             |
| sys                |
| world              |
+--------------------+
8 rows in set (0.01 sec)</pre>

<p>These are the databases that you can access<a data-type="indexterm" data-primary="USE database" data-secondary="SHOW DATABASES" id="idm46177494988808"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="USE database" data-tertiary="SHOW DATABASES" id="idm46177494987864"/><a data-type="indexterm" data-primary="privileges" data-secondary="SHOW DATABASES" id="idm46177494986648"/> with the <code>USE</code> command (discussed in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>); if you have access privileges for other databases on your server, these will be listed too. You can only see databases for which you have some privileges, unless you have the global <code>SHOW DATABASES</code> privilege. <a data-type="indexterm" data-primary="mysqlshow" id="idm46177494983704"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="mysqlshow" id="idm46177494982968"/>You can get the same effect from the command line using the <code>mysqlshow</code> program:</p>

<pre data-type="programlisting">$ <strong>mysqlshow -uroot -pmsandbox -h 127.0.0.1 -P 3306</strong></pre>

<p>You can add a <code>LIKE</code> clause to <code>SHOW DATABASES</code>. <a data-type="indexterm" data-primary="SHOW" data-secondary="DATABASES" data-tertiary="LIKE clause" id="idm46177494960456"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW DATABASES" data-tertiary="LIKE clause" id="idm46177494959176"/><a data-type="indexterm" data-primary="LIKE clause" data-secondary="SHOW DATABASES" id="idm46177494957960"/>This is useful if you have many databases and want a short list as output. For example, to see only databases whose names begin with <code>s</code>, run:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="k">DATABASES</code><code> </code><code class="k">LIKE</code><code> </code><code class="s1">'s%'</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+---------------+
| Database (s%) |
+---------------+
| sakila        |
| sys           |
+---------------+
2 rows in set (0.00 sec)</pre>

<p>The <code>LIKE</code> statement’s syntax is identical to its use in <code>SELECT</code>.</p>

<p>To see the statement used to create a database, <a data-type="indexterm" data-primary="SHOW" data-secondary="CREATE DATABASE" id="idm46177494944696"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW CREATE DATABASE" id="idm46177494943720"/>you can use the <code>SHOW CREATE</code> <span class="keep-together"><code>DATABASE</code></span> statement. For example, to see how you created <code>sakila</code>, type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="k">CREATE</code><code> </code><code class="k">DATABASE</code><code> </code><code class="n">sakila</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">************************** 1. row ***************************
       Database: sakila
Create Database: CREATE DATABASE `sakila` /*!40100 DEFAULT CHARACTER SET
utf8mb4 COLLATE utf8mb4_0900_ai_ci */ /*!80016 DEFAULT ENCRYPTION='N' */
1 row in set (0.00 sec)</pre>

<p>This is perhaps the least exciting <code>SHOW</code> statement; it only displays the statement. Note, though, that some additional comments are included, <code>/*!</code> and <code>*/</code>:</p>

<pre data-type="programlisting">40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci
80016 DEFAULT ENCRYPTION='N'</pre>

<p>These comments contain MySQL-specific keywords that provide instructions that are unlikely to be understood by other database programs. A database server other than MySQL will ignore this comment text, so the syntax is usable by both MySQL and other database server software. The optional number at the start of the comment indicates the minimum version of MySQL that can process this particular instruction (for example, <code>40100</code> indicates version 4.01.00); older versions of MySQL ignore such instructions. You’ll learn about creating databases in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>.</p>

<p>The <code>SHOW TABLES</code> statement lists the tables in a database.<a data-type="indexterm" data-primary="SHOW" data-secondary="TABLES" id="idm46177494905848"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW TABLES" id="idm46177494904872"/> To check the tables in <code>sakila</code>, type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="kp">TABLES</code><code> </code><code class="k">FROM</code><code> </code><code class="n">sakila</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+----------------------------+
| Tables_in_sakila           |
+----------------------------+
| actor                      |
| actor_info                 |
| address                    |
| category                   |
| city                       |
| country                    |
| customer                   |
| customer_list              |
| film                       |
| film_actor                 |
| film_category              |
| film_list                  |
| film_text                  |
| inventory                  |
| language                   |
| nicer_but_slower_film_list |
| payment                    |
| rental                     |
| sales_by_film_category     |
| sales_by_store             |
| staff                      |
| ...                 |
+----------------------------+
23 rows in set (0.01 sec)</pre>

<p class="pagebreak-before">If you’ve already selected the <code>sakila</code> database with the <code>USE sakila</code> command, you can use the shortcut:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="kp">TABLES</code><code class="p">;</code></strong></pre>

<p>You can get a similar result by specifying the database <a data-type="indexterm" data-primary="basic SQL" data-secondary="mysqlshow" data-tertiary="showing tables" id="idm46177494845752"/><a data-type="indexterm" data-primary="mysqlshow" data-secondary="showing tables" id="idm46177494844712"/>name to the <code>mysqlshow</code> <span class="keep-together">program</span>:</p>

<pre data-type="programlisting">$ <strong>mysqlshow -uroot -pmsandbox -h 127.0.0.1 -P 3306 sakila</strong></pre>

<p>As with <code>SHOW DATABASES</code>, you can’t see <a data-type="indexterm" data-primary="privileges" data-secondary="SHOW TABLES" id="idm46177494840632"/>tables that you don’t have privileges for. This means you can’t see tables in a database you can’t access, even if you have the <code>SHOW DATABASES</code> global privilege.</p>

<p>The <code>SHOW COLUMNS</code> statement lists the columns<a data-type="indexterm" data-primary="SHOW" data-secondary="COLUMNS" id="idm46177494838072"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW COLUMNS" id="idm46177494818552"/> in a table. For example, to check the columns of <code>country</code>, type:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="n">COLUMNS</code><code> </code><code class="k">FROM</code><code> </code><code class="n">country</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">*************************** 1. row ***************************
  Field: country_id
   Type: smallint unsigned
   Null: NO
    Key: PRI
Default: NULL
  Extra: auto_increment
*************************** 2. row ***************************
  Field: country
   Type: varchar(50)
   Null: NO
    Key:
Default: NULL
  Extra:
*************************** 3. row ***************************
  Field: last_update
   Type: timestamp
   Null: NO
    Key:
Default: CURRENT_TIMESTAMP
  Extra: DEFAULT_GENERATED on update CURRENT_TIMESTAMP
3 rows in set (0.00 sec)</pre>

<p>The output reports the names of all the columns, their types and sizes, <a data-type="indexterm" data-primary="NULL" data-secondary="SHOW COLUMNS attribute" id="idm46177497982648"/><a data-type="indexterm" data-primary="attributes" data-secondary="SHOW COLUMNS" id="idm46177494779560"/>whether they can be <code>NULL</code>, whether they are part of a key, their default values, and any extra information. Types, keys, <code>NULL</code> values, and defaults are discussed further in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>. If you haven’t already chosen the <code>sakila</code> database with the <code>USE</code> command, then you can add the database name before the table name, as in <code>sakila.country</code>. Unlike with the previous <code>SHOW</code> statements, you can always see all column names if you have access to a table; it doesn’t matter that you don’t have certain privileges for all columns.</p>

<p class="pagebreak-before">You can get a similar result by using <code>mysqlshow</code> with the database and table name:<a data-type="indexterm" data-primary="mysqlshow" data-secondary="showing columns" id="idm46177494773896"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="mysqlshow" data-tertiary="showing columns" id="idm46177494772920"/></p>

<pre data-type="programlisting">$ <strong>mysqlshow -uroot -pmsandbox -h 127.0.0.1 -P 3306 sakila country</strong></pre>

<p>You can see the statement used to create a particular table<a data-type="indexterm" data-primary="SHOW" data-secondary="CREATE TABLE" id="idm46177494770120"/><a data-type="indexterm" data-primary="basic SQL" data-secondary="SHOW CREATE TABLE" id="idm46177494769144"/> using the <code>SHOW CREATE TABLE</code> statement (we’ll also look at creating tables in <a data-type="xref" href="ch04.xhtml#CH4_MODIFY">Chapter 4</a>). Some users prefer this output to that of <code>SHOW COLUMNS</code>, since it has the familiar format of a <code>CREATE TABLE</code> statement. Here’s an example for the <code>country</code> table:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SHOW</code><code> </code><code class="k">CREATE</code><code> </code><code class="k">TABLE</code><code> </code><code class="n">country</code><code class="err">\</code><code class="n">G</code></strong></pre>

<pre data-type="programlisting">*************************** 1. row ***************************
       Table: country
Create Table: CREATE TABLE `country` (
  `country_id` smallint unsigned NOT NULL AUTO_INCREMENT,
  `country` varchar(50) NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE
  CURRENT_TIMESTAMP,
  PRIMARY KEY (`country_id`)
) ENGINE=InnoDB AUTO_INCREMENT=110 DEFAULT CHARSET=utf8mb4
  COLLATE=utf8mb4_0900_ai_ci
1 row in set (0.00 sec)</pre>
</div></section>







</div></section></div></body></html>