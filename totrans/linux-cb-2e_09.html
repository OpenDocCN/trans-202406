<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 9. Managing Partitions and Filesystems &#10;with GParted"><div class="chapter" id="cha-partitioning-gparted">
<h1><span class="label">Chapter 9. </span>Managing Partitions and Filesystems 
<span class="keep-together">with GParted</span></h1>


<p>GParted, the GNOME Partition Manager, is <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="purpose of" id="idm46466158974696"/>one of my favorite tools on Linux.
GParted is a nice graphical  front-end to the <em>parted</em> partition manager
command and all of the filesystem management commands. You can create, delete,
move, copy, and resize partitions and filesystems, and create new partition
tables with just a few clicks. Other features are data rescue and managing
labels and UUIDs.</p>

<p>Labels on <a data-type="indexterm" data-primary="partitions" data-secondary="labels" id="idm46466158975016"/><a data-type="indexterm" data-primary="filesystems" data-secondary="labels" id="idm46466158972600"/><a data-type="indexterm" data-primary="labels for partitions/filesystems" id="idm46466158971752"/>partitions and filesystems are useful for identifying partitions and
filesystems in a friendly way, and to give filesystems short, easy names. Without
a label, a filesystem is identified by its long UUID. For example, when you plug
in a USB stick without filesystem labels, it appears as something like
<em>/media/username/1d742b2d-a621-4454-b4d3-469216a6f01e</em>. Give it a
nice short label like <em>mystuff</em>, and then it mounts as
<em>/media/username/mystuff</em>.</p>

<p>After an operation in GParted is complete, the status window offers you the
option to save a logfile of what it did. Save this information and study it
because it shows you the commands it used.</p>
<div data-type="tip"><h1>Changing Your Running System</h1>
<p>For some <a data-type="indexterm" data-primary="running system, changing" id="idm46466158967640"/><a data-type="indexterm" data-primary="changing" data-secondary="running system" id="idm46466158967144"/>operations, such as copying, checking and repair, and setting labels
and UUIDs, it is required to unmount the filesystems first. You cannot unmount
the filesystems that are required for your running system. In this case, use a
bootable SystemRescue CD/USB (<a data-type="xref" href="Images/ch19.html#cha-rescue-recovery">Chapter 19</a>). If you are running a
multiboot system with more than one Linux distribution installed, boot to a
different Linux and run GParted from there (see <a data-type="xref" href="ch01.xhtml#cha-install-linux">Chapter 1</a>).</p>
</div>

<p>GParted <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="privileges" id="idm46466158964600"/><a data-type="indexterm" data-primary="privileges" data-secondary="for GParted" data-secondary-sortas="GParted" id="idm46466158963864"/>requires root privileges. When you launch GParted, a dialog for
entering your sudo or root password will open (<a data-type="xref" href="#fig-gparted-8">Figure 9-1</a>).</p>

<figure><div id="fig-gparted-8" class="figure">
<img src="Images/lcb2_0901.png" alt="The application launchers asks for a password" width="705" height="289"/>
<h6><span class="label">Figure 9-1. </span>The application launcher asks for a password</h6>
</div></figure>

<p>It is <a data-type="indexterm" data-primary="disks" data-secondary="terminology" id="idm46466158956504"/>common to call all storage media <em>disks</em>, even solid-state media like
SSDs, USB drives, SD (Secure Digital), NVMe (Non-Volatile
Memory Express), and CompactFlash. GParted manages any of these disks physically
attached to your system, internal and external.</p>

<p>If you are not familiar with the basics of partitioning and managing
filesystems, the introduction to <a data-type="xref" href="ch08.xhtml#cha-partitioning-parted">Chapter 8</a> provides a detailed
overview.</p>
<div data-type="warning" epub:type="warning"><h1>Be Careful!</h1>
<p>Before you try any of the recipes in this chapter, have current backups and be
very certain that you are operating on the correct disks and partitions.</p>

<p>Creating a new partition table wipes out your entire disk.</p>

<p>Deleting or otherwise damaging a partition loses all the data on that
partition. It is possible to recover it, but not guaranteed.</p>

<p>USB sticks are great for practice and testing.</p>
</div>






<section data-type="sect1" class="pagebreak-before less_space" data-pdf-bookmark="9.1 Viewing Partitions, Filesystems, and Free Space"><div class="sect1" id="rec-view-partitions">
<h1>9.1 Viewing Partitions, Filesystems, and Free Space</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158951784">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="displaying" id="gparted-display"/><a data-type="indexterm" data-primary="partitions" data-secondary="displaying existing" id="partition-display-gparted"/><a data-type="indexterm" data-primary="existing partitions/disks, displaying" id="existing-partition-display-gparted"/><a data-type="indexterm" data-primary="disks" data-secondary="displaying existing" id="disks-display-gparted"/><a data-type="indexterm" data-primary="displaying" data-secondary="partitions" id="display-partition-gparted"/><a data-type="indexterm" data-primary="free space, displaying" id="free-space-display"/>want to see all the partitions, filesystems, and free space on all attached
disks.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158939224">
<h2>Solution</h2>

<p>Launch GParted, and use the drop-down menu on the upper right to see all
attached disks (<a data-type="xref" href="#fig-gparted-2">Figure 9-2</a>). Click View → Device Information to open the
panel on the left to see disk information, such as the model, serial number,
size, and partition table type.</p>

<figure><div id="fig-gparted-2" class="figure">
<img src="Images/lcb2_0902.png" alt="Viewing disks on GParted" width="1035" height="542"/>
<h6><span class="label">Figure 9-2. </span>Viewing disks on GParted</h6>
</div></figure>

<p>You will see a lot of information: device names, mountpoints,
filesystems, labels, partition type and sizes, used and total space, and free
space. Right-click on any partition to open the operations menu, and click the
Information button at the bottom of the menu to see more information on that
partition (<a data-type="xref" href="#fig-gparted-3">Figure 9-3</a>).</p>

<figure><div id="fig-gparted-3" class="figure">
<img src="Images/lcb2_0903.png" alt="Viewing partition information" width="734" height="495"/>
<h6><span class="label">Figure 9-3. </span>Viewing partition information on GParted</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158931400">
<h2>Discussion</h2>

<p>GParted does not apply changes until you click the green checkmark in the top
toolbar, so it is safe to poke around and explore. If you accidentally click a
command, click the little curvy yellow arrow next to the checkmark to undo.</p>

<p>When you open the right-click operations menu, some commands are grayed out,
because they can be used only on unmounted filesystems. Click the Unmount
command, and then these commands will become available. Note that any
filesystems that are necessary for your running system cannot be unmounted; in
this case, use<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="displaying" data-startref="gparted-display" id="idm46466158929800"/><a data-type="indexterm" data-primary="partitions" data-secondary="displaying existing" data-startref="partition-display-gparted" id="idm46466158924184"/><a data-type="indexterm" data-primary="existing partitions/disks, displaying" data-startref="existing-partition-display-gparted" id="idm46466158928504"/><a data-type="indexterm" data-primary="disks" data-secondary="displaying existing" data-startref="disks-display-gparted" id="idm46466158927496"/><a data-type="indexterm" data-primary="displaying" data-secondary="partitions" data-startref="display-partition-gparted" id="idm46466158926152"/><a data-type="indexterm" data-primary="free space, displaying" data-startref="free-space-display" id="idm46466158922248"/> a SystemRescue CD/USB (<a data-type="xref" href="Images/ch19.html#cha-rescue-recovery">Chapter 19</a>).</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158920952">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.2 Creating a New Partition Table"><div class="sect1" id="rec-gparted-create-partition-table">
<h1>9.2 Creating a New Partition Table</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158915864">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="GPT partition table, creating" id="gparted-gpt-create"/><a data-type="indexterm" data-primary="GPT (GUID Partition Table)" data-secondary="creating new" id="gpt-create-new"/><a data-type="indexterm" data-primary="partition tables" data-secondary="creating" id="partition-table-create"/>want to reformat a disk with a new GPT partition table. Your existing
partition table is MS-DOS, and you want to replace it with GPT, or it is a used
disk with old installations on it, and you want to start over with a clean disk.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158910440">
<h2>Solution</h2>

<p>First, be very sure which disk you want to create the new partition table on,
because this will erase all data on the disk. This is one operation that
GParted applies immediately, after just one warning, and there is no Undo, so be
careful.</p>

<p>Select your disk in the top-right dropdown menu, then click Device → Create
Partition Table (<a data-type="xref" href="#fig-gparted-4">Figure 9-4</a>).</p>

<figure><div id="fig-gparted-4" class="figure">
<img src="Images/lcb2_0904.png" alt="Creating a new partition table" width="974" height="541"/>
<h6><span class="label">Figure 9-4. </span>Creating a new partition table</h6>
</div></figure>

<p>Select the GPT partition table type and click Apply (<a data-type="xref" href="#fig-gparted-7">Figure 9-5</a>) .</p>

<p>It doesn’t take very long, and then you will have a new, clean, empty disk, all
ready to partition and format with new filesystems.</p>

<figure><div id="fig-gparted-7" class="figure">
<img src="Images/lcb2_0905.png" alt="Selecting the new partition table type" width="962" height="330"/>
<h6><span class="label">Figure 9-5. </span>Select the partition table type</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158901704">
<h2>Discussion</h2>

<p>Always create a GPT partition table, unless you have a reason to use something
else. GParted supports several partition table types, including MS-DOS, BSD,
Amiga, and AIX. GPT and MS-DOS are the most commonly used on the x86 platform.
GPT is for modern large hard disks and is easier to manage and more resilient
than the old MS-DOS partition table. See the introduction to
<a data-type="xref" href="ch08.xhtml#cha-partitioning-parted">Chapter 8</a> for detailed information on <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="GPT partition table, creating" data-startref="gparted-gpt-create" id="idm46466158898424"/><a data-type="indexterm" data-primary="GPT (GUID Partition Table)" data-secondary="creating new" data-startref="gpt-create-new" id="idm46466158897336"/><a data-type="indexterm" data-primary="partition tables" data-secondary="creating" data-startref="partition-table-create" id="idm46466158896152"/>partition tables.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158898952">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="ch08.xhtml#cha-partitioning-parted">Chapter 8</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.3 Deleting a Partition"><div class="sect1" id="idm46466158889704">
<h1>9.3 Deleting a Partition</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158888600">
<h2>Problem</h2>

<p>You<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="deleting" id="gparted-delete"/><a data-type="indexterm" data-primary="partitions" data-secondary="deleting" data-tertiary="with Gparted" data-tertiary-sortas="Gparted" id="partition-delete-gparted"/><a data-type="indexterm" data-primary="deleting" data-secondary="partitions" data-tertiary="with Gparted" data-tertiary-sortas="Gparted" id="delete-partition-gparted"/> need to delete one or more partitions.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158882456">
<h2>Solution</h2>

<p>Select the partition you want to delete, and right-click to open the operations
menu. If it has a mounted filesystem on it, you must first unmount it, which you
can do by clicking Unmount in the menu. Then click Delete, click the
green checkmark, and it is gone (<a data-type="xref" href="#fig-gparted-5">Figure 9-6</a>).</p>

<figure><div id="fig-gparted-5" class="figure">
<img src="Images/lcb2_0906.png" alt="Deleting a partition" width="700" height="542"/>
<h6><span class="label">Figure 9-6. </span>Deleting a partition</h6>
</div></figure>

<p>You will see a status message when the delete has finished.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158877192">
<h2>Discussion</h2>

<p>Deleting the partition deletes everything inside the partition, so if you have
a filesystem and data on the partition, be very sure you want to <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="deleting" data-startref="gparted-delete" id="idm46466158875320"/><a data-type="indexterm" data-primary="partitions" data-secondary="deleting" data-tertiary="with Gparted" data-tertiary-sortas="Gparted" data-startref="partition-delete-gparted" id="idm46466158874072"/><a data-type="indexterm" data-primary="deleting" data-secondary="partitions" data-tertiary="with Gparted" data-tertiary-sortas="Gparted" data-startref="delete-partition-gparted" id="idm46466158871992"/>delete it.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158869976">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="ch08.xhtml#rec-parted-delete-partition">Recipe 8.6</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.4 Creating a New Partition"><div class="sect1" id="rec-new-partition-gparted">
<h1>9.4 Creating a New Partition</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158863880">
<h2>Problem</h2>

<p>You<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="creating" id="gparted-create"/><a data-type="indexterm" data-primary="partitions" data-secondary="creating" id="partition-create-gparted"/> want to create new partitions.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158859592">
<h2>Solution</h2>

<p>All you need is empty space on a disk. The following example creates a new 400
GB partition and formats it with an Ext4 filesystem (<a data-type="xref" href="#fig-gparted-6">Figure 9-7</a>).</p>

<figure><div id="fig-gparted-6" class="figure">
<img src="Images/lcb2_0907.png" alt="Creating a new partition" width="708" height="354"/>
<h6><span class="label">Figure 9-7. </span>Creating a new partition</h6>
</div></figure>

<p>Click Partition → New in the top menu. This opens a new window, where you enter
your partition size, select your filesystem, and create partition and
filesystem labels. Use either the slider or the New Size
(MiB) field to set your filesystem size. The values in the New Size field are
in mibibytes, so 400,000 is 400 GiB. Then click Add, then the green
checkmark.</p>

<p>When finished, see <a data-type="xref" href="ch06.xhtml#cha-files-directories">Chapter 6</a> to learn how to set correct
ownership and permissions on your new filesystem.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158851928">
<h2>Discussion</h2>

<p>With <a data-type="indexterm" data-primary="primary filesystems" id="idm46466158852216"/><a data-type="indexterm" data-primary="GPT (GUID Partition Table)" data-secondary="primary filesystems" id="idm46466158850792"/><a data-type="indexterm" data-primary="filesystems" data-secondary="primary" id="idm46466158849944"/><a data-type="indexterm" data-primary="MS-DOS partition tables" id="idm46466158849000"/><a data-type="indexterm" data-primary="partition tables" data-secondary="MS-DOS" id="idm46466158848296"/><a data-type="indexterm" data-primary="logical partitions" id="idm46466158846904"/><a data-type="indexterm" data-primary="extended partitions" id="idm46466158846168"/>a GPT partition table, you will always create only primary filesystems.
The other two options, logical partition and extended partition, are only for
MS-DOS partition tables. If you’re not sure which one your disk is using, click
View → Device Information. This opens a pane on the left with information
about your disk, including the partition table type.</p>

<p>In the filesystem selector you also have the option to create an empty
partition without a filesystem. This is way down at the bottom, Unformatted.
Next to Unformatted is Clear, which deletes an existing filesystem and
preserves the partition.</p>

<p>GParted combines creating a partition and putting a filesystem on it into a
single, fast operation. This is faster than using <em>parted</em>, which only creates
partitions and rquires you to create your filesystem <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="creating" data-startref="gparted-create" id="idm46466158840632"/><a data-type="indexterm" data-primary="partitions" data-secondary="creating" data-startref="partition-create-gparted" id="idm46466158843688"/>separately.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158838840">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="ch08.xhtml#cha-partitioning-parted">Chapter 8</a></p>
</li>
<li>
<p><a data-type="xref" href="ch11.xhtml#cha-create-filesystems">Chapter 11</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.5 Deleting a Filesystem Without Deleting the Partition"><div class="sect1" id="idm46466158834280">
<h1>9.5 Deleting a Filesystem Without Deleting the Partition</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158833528">
<h2>Problem</h2>

<p>You<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="filesystems" data-tertiary="deleting while preserving partition" id="gparted-filesystem-delete"/><a data-type="indexterm" data-primary="filesystems" data-secondary="deleting" data-tertiary="while preserving partition" id="filesystem-delete-preserve"/><a data-type="indexterm" data-primary="deleting" data-secondary="filesystems" data-tertiary="while preserving partition" id="delete-filesystem-preserve"/><a data-type="indexterm" data-primary="partitions" data-secondary="preserving" data-tertiary="while deleting filesystem" id="partition-preserve"/><a data-type="indexterm" data-primary="preserving" data-secondary="partitions" data-tertiary="while deleting filesystem" id="preserve-part-delete"/> want to remove a filesystem without deleting its underlying partition
because you want to format the partition with a different filesystem, or the
existing filesystem is corrupt and you need to reformat it and then copy your
files back into it (<a data-type="xref" href="#fig-gparted-11">Figure 9-8</a>).</p>

<figure class="width-80"><div id="fig-gparted-11" class="figure">
<img src="Images/lcb2_0908.png" alt="Deleting a filesystem" width="781" height="839"/>
<h6><span class="label">Figure 9-8. </span>Deleting a filesystem without deleting the partition</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158819960">
<h2>Solution</h2>

<p>The filesystem must first be unmounted. Right-click on the partition to open
the operations menu, then click Unmount. When that is completed, click Format
To. Scroll to the bottom of the list and click Cleared. This deletes the
filesystem without deleting the <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="filesystems" data-tertiary="deleting while preserving partition" data-startref="gparted-filesystem-delete" id="idm46466158819112"/><a data-type="indexterm" data-primary="filesystems" data-secondary="deleting" data-tertiary="while preserving partition" data-startref="filesystem-delete-preserve" id="idm46466158817896"/><a data-type="indexterm" data-primary="deleting" data-secondary="filesystems" data-tertiary="while preserving partition" data-startref="delete-filesystem-preserve" id="idm46466158816424"/><a data-type="indexterm" data-primary="partitions" data-secondary="preserving" data-tertiary="while deleting filesystem" data-startref="partition-preserve" id="idm46466158814360"/><a data-type="indexterm" data-primary="preserving" data-secondary="partitions" data-tertiary="while deleting filesystem" data-startref="preserve-part-delete" id="idm46466158813064"/>partition.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158810824">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.6 Recovering a Deleted Partition"><div class="sect1" id="idm46466158807576">
<h1>9.6 Recovering a Deleted Partition</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158806840">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="recovering deleted" id="idm46466158805224"/><a data-type="indexterm" data-primary="partitions" data-secondary="recovering deleted" id="idm46466158804136"/><a data-type="indexterm" data-primary="recovering" data-secondary="deleted partitions" id="idm46466158803288"/><a data-type="indexterm" data-primary="deleting" data-secondary="partitions" data-tertiary="recovering deleted" id="idm46466158802344"/>deleted a partition, and now you wish you hadn’t, and you want to get it back.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158800280">
<h2>Solution</h2>

<p>If you accidentally deleted a new empty partition, don’t bother trying to
recover it, just create it again. If your partition had a filesystem and data
on it, then your best chance is to try an immediate recovery. Click Delete → Attempt Data Rescue.</p>

<p>This could take a long time, and there is no guarantee of success. <em>parted</em>
seems to do this faster; see <a data-type="xref" href="Images/ch08.html#rec-parted-recover-deleted-partition">Recipe 8.7</a>.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158797144">
<h2>Discussion</h2>

<p>It is usually faster to create a new partition and filesystem, and then replace
your files from backup. But it does not hurt to try recovery first.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158795384">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="Images/ch08.html#rec-parted-recover-deleted-partition">Recipe 8.7</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" class="pagebreak-before less_space" data-pdf-bookmark="9.7 Resizing Partitions"><div class="sect1" id="rec-resize-partitions-gparted">
<h1>9.7 Resizing Partitions</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158788840">
<h2>Problem</h2>

<p>You<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="resizing" id="gparted-resize"/><a data-type="indexterm" data-primary="partitions" data-secondary="resizing" id="partition-resize-gparted"/><a data-type="indexterm" data-primary="resizing" data-secondary="partitions" id="resize-partition-gparted"/><a data-type="indexterm" data-primary="partitions" data-secondary="shrinking" id="partition-shrink-gparted"/><a data-type="indexterm" data-primary="shrinking" data-secondary="partitions" id="shrink-partition-gparted"/> want to make a partition larger or smaller.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158780136">
<h2>Solution</h2>

<p>With GParted, this takes just a few clicks. When a partition is resized, the
filesystem on it must also be resized. GParted does this in a single operation.</p>

<p>To enlarge a partition, there must be free space at the end of it. Ext4, Btrfs,
and XFS can be enlarged online. FAT16/32 must be unmounted first.</p>
<div data-type="warning" epub:type="warning"><h1>Always Have Backups!</h1>
<p>Remember, always have current backups!</p>
</div>

<p><a data-type="xref" href="#fig-gparted-16">Figure 9-9</a> shows a FAT32 filesystem with plenty of free space to grow
into.</p>

<figure><div id="fig-gparted-16" class="figure">
<img src="Images/lcb2_0909.png" alt="Selecting a partition to resize" width="864" height="338"/>
<h6><span class="label">Figure 9-9. </span>Selecting a partition to resize</h6>
</div></figure>

<p>Right-click on the selected partition to open the menu, then
click Resize/Move. This opens a dialog where you set the
new size, either by dragging the slider or by typing the value, in mibibytes, in the New Size field (<a data-type="xref" href="#fig-gparted-10">Figure 9-10</a>).</p>

<p>Click Resize/Move, then click the green checkmark. Enlarging a
partition takes just a minute or two, and you will see a status message when it
is finished.</p>

<p>Use the same procedure for shrinking a partition, except this does not require
any free space at the end. Your new partition size should be at least 10% larger
than the space used by your files. Even if you do not plan to add any new files
to this filesystem, you must leave a certain amount of unused capacity, because
if the filesystem fills up completely, you may not be able to access it. Shrinking
a partition takes longer than enlarging it.</p>

<figure><div id="fig-gparted-10" class="figure">
<img src="Images/lcb2_0910.png" alt="Configuring the new size." width="551" height="319"/>
<h6><span class="label">Figure 9-10. </span>Configuring the new partition size</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158779192">
<h2>Discussion</h2>

<p>The Ext4 filesystem reserves a small amount of space for the root user. If
the filesystem fills up, then root can still access the filesystem and remove
files. FAT16/32, Btrfs, and XFS do not have reserved blocks.</p>

<p>Ext4 and Btrfs can be shrunk online. XFS can only be enlarged, it cannot be
shrunk. It is safer to unmount them before <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="resizing" data-startref="gparted-resize" id="idm46466158763384"/><a data-type="indexterm" data-primary="partitions" data-secondary="resizing" data-startref="partition-resize-gparted" id="idm46466158766968"/><a data-type="indexterm" data-primary="resizing" data-secondary="partitions" data-startref="resize-partition-gparted" id="idm46466158766328"/><a data-type="indexterm" data-primary="partitions" data-secondary="shrinking" data-startref="partition-shrink-gparted" id="idm46466158762376"/><a data-type="indexterm" data-primary="shrinking" data-secondary="partitions" data-startref="shrink-partition-gparted" id="idm46466158761192"/>resizing.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158758776">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="ch08.xhtml#rec-resize-partition-fs">Recipe 8.8</a></p>
</li>
<li>
<p><a data-type="xref" href="ch08.xhtml#rec-shrink-partition">Recipe 8.9</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.8 Moving a Partition"><div class="sect1" id="idm46466158753144">
<h1>9.8 Moving a Partition</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158752152">
<h2>Problem</h2>

<p>You<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="moving" id="gparted-move"/><a data-type="indexterm" data-primary="partitions" data-secondary="moving" id="partition-move"/><a data-type="indexterm" data-primary="moving" data-secondary="partitions" id="move-partition"/> have a bit of free space between partitions, for example, between
<em>/dev/sda1</em> and <em>/dev/sda2</em>. You want to move <em>/dev/sda2</em> into the free
space so there is no gap between them. Or, you wish to enlarge <em>/dev/sda1</em>,
but there is no free space following it, so you have to move <em>/dev/sda2</em>  to
make room.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158747080">
<h2>Solution</h2>

<p>Right-click the partition you want to move to open the operations menu,
then click Resize/Move (<a data-type="xref" href="#fig-gparted-12">Figure 9-11</a>).</p>

<figure><div id="fig-gparted-12" class="figure">
<img src="Images/lcb2_0911.png" alt="Selecting a partition to move" width="853" height="280"/>
<h6><span class="label">Figure 9-11. </span>Selecting a partition</h6>
</div></figure>

<p>In the Resize/Move dialog, you can drag the slider to the left, or enter 0 in
the Free Space Preceding (MiB) field. Then click Resize/Move (<a data-type="xref" href="#fig-gparted-13">Figure 9-12</a>).</p>

<figure><div id="fig-gparted-13" class="figure">
<img src="Images/lcb2_0912.png" alt="Moving a partition" width="554" height="324"/>
<h6><span class="label">Figure 9-12. </span>Moving a partition</h6>
</div></figure>

<p>This will take some time, as much as several hours, depending on how much data
is on the partition.</p>
</div></section>













<section data-type="sect2" class="pagebreak-before less_space" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158735832">
<h2>Discussion</h2>

<p>Moving a partition is more complicated than resizing a partition. When you
resize a partition, you are moving only its endpoint, but moving a partition
requires also changing its starting point, which, to the operating system, is a
big change. GParted usually manages this reliably, but it is risky, so always
have good<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="moving" data-startref="gparted-move" id="idm46466158730024"/><a data-type="indexterm" data-primary="partitions" data-secondary="moving" data-startref="partition-move" id="idm46466158728888"/><a data-type="indexterm" data-primary="moving" data-secondary="partitions" data-startref="move-partition" id="idm46466158732888"/> backups.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158731016">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="Images/ch19.html#cha-rescue-recovery">Chapter 19</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.9 Copying a Partition"><div class="sect1" id="idm46466158724760">
<h1>9.9 Copying a Partition</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158723768">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="copying" id="gparted-copy"/><a data-type="indexterm" data-primary="partitions" data-secondary="copying" id="partition-copy"/><a data-type="indexterm" data-primary="copying" data-secondary="partitions" id="copy-partition"/>want to make a clone of a partition, or several partitions, as backups or
to move data to a new hard disk.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158718056">
<h2>Solution</h2>

<p>Use GParted’s Copy command. For example, you want to copy <em>/dev/sdb2</em> to a USB
hard drive attached to your system. Copy it to free space equal to or larger
than the partition you are copying.</p>

<p>Right-click on the partition you want to copy (<a data-type="xref" href="#fig-gparted-14">Figure 9-13</a>). Unmount it
if it is mounted, then click Copy.</p>

<figure><div id="fig-gparted-14" class="figure">
<img src="Images/lcb2_0913.png" alt="Copying a partition" width="767" height="199"/>
<h6><span class="label">Figure 9-13. </span>Copying a partition</h6>
</div></figure>

<p>Change to the disk you want to copy it to and click Paste. This opens the
configuration dialog, with options to increase the size and change
the location of the new partition (<a data-type="xref" href="#fig-gparted-15">Figure 9-14</a>). When you are satisfied
with the settings, click Paste.</p>

<p>The final step is to click the green checkmark to start the copy. If you change
your mind, click Undo. The copy operation will take a little time,
depending on how much data needs to be copied.</p>

<figure><div id="fig-gparted-15" class="figure">
<img src="Images/lcb2_0914.png" alt="Settings for the new partition" width="554" height="322"/>
<h6><span class="label">Figure 9-14. </span>Settings for the new partition</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158717800">
<h2>Discussion</h2>

<p>The copied partition must go into a new partition of equal or greater size.
Copying a partition into free space saves the hassle of creating the
destination partition.</p>

<p>Copying partitions, in my experience, has limited usefulness. The partition and
filesystem UUIDs remain the same, so you cannot use the copied partition on the
same system as the original without changing the UUIDs. (Which you can do in
GParted in the right-click operations menu.) If you change UUIDs for filesystems
listed in <em>/etc/fstab</em>, their entries must be updated. I think it is better, in
most cases, to create new partitions and filesystems, and then copy your files into
them.<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="partitions" data-tertiary="copying" data-startref="gparted-copy" id="idm46466158703656"/><a data-type="indexterm" data-primary="partitions" data-secondary="copying" data-startref="partition-copy" id="idm46466158705368"/><a data-type="indexterm" data-primary="copying" data-secondary="partitions" data-startref="copy-partition" id="idm46466158704152"/></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158701640">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://gparted.org">GNOME Partition Editor</a></p>
</li>
<li>
<p><a data-type="xref" href="ch11.xhtml#cha-create-filesystems">Chapter 11</a></p>
</li>
<li>
<p><a data-type="xref" href="ch11.xhtml#rec-automatic-fs-mount">Recipe 11.6</a></p>
</li>
<li>
<p><a data-type="xref" href="Images/ch19.html#cha-rescue-recovery">Chapter 19</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="9.10 Managing Filesystems with GParted"><div class="sect1" id="rec-filesystems">
<h1>9.10 Managing Filesystems with GParted</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158692440">
<h2>Problem</h2>

<p>You<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="filesystems" data-tertiary="creating" id="gparted-filesystem-create"/><a data-type="indexterm" data-primary="filesystems" data-secondary="creating with GParted" id="filesystem-create-gparted"/> want a nice graphical tool for creating new filesystems.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158688056">
<h2>Solution</h2>

<p>Use GParted, which manages partitions and filesystems. Find the partition you
want to format with a new filesystem, right-click, and select the filesystem
you want to use (see <a data-type="xref" href="#fig-gparted-create-filesystem">Figure 9-15</a>).</p>

<figure><div id="fig-gparted-create-filesystem" class="figure">
<img src="Images/lcb2_0915.png" alt="GParted creates filesystems" width="650" height="397"/>
<h6><span class="label">Figure 9-15. </span>GParted displays filesystem types</h6>
</div></figure>

<p>Click the green checkmark in the toolbar to create the new filesystem. Creating
a new filesystem destroys everything on the existing filesystem, so be sure
you are in the right place.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158683048">
<h2>Discussion</h2>

<p>GParted is one of the best graphical applications in any category. It is a
well-organized frontend to a number of command-line tools for managing
partitions and filesystems, and it makes complicated tasks simple and fast.</p>

<p>GParted shows the filesystem types on mounted and unmounted volumes, displaying
one disk at a time (see <a data-type="xref" href="#fig-gparted-filesys">Figure 9-16</a>). Click the drop-down menu on
the top right to view other disks.<a data-type="indexterm" data-primary="GParted (GNOME Partition Manager)" data-secondary="filesystems" data-tertiary="creating" data-startref="gparted-filesystem-create" id="idm46466158677640"/><a data-type="indexterm" data-primary="filesystems" data-secondary="creating with GParted" data-startref="filesystem-create-gparted" id="idm46466158676952"/></p>

<figure><div id="fig-gparted-filesys" class="figure">
<img src="Images/lcb2_0916.png" alt="GParted shows the filesystem types" width="1076" height="380"/>
<h6><span class="label">Figure 9-16. </span>GParted displays filesystem types</h6>
</div></figure>
</div></section>





</div></section>







</div></section></div></body></html>