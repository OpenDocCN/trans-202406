- en: Chapter 15\. Printing on Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Linux relies on CUPS, the Common Unix Printing System, to manage printers. In
    this chapter you will learn how to install and manage printers, and how to share
    them over your network. You will learn about the *driverless* future of Linux
    printing, in which printers will be available to client devices without having
    to install drivers.
  prefs: []
  type: TYPE_NORMAL
- en: Overview
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The key to happy printing on Linux is to select good-quality printers and multifunction
    devices (printer, scanner, copier, fax) that are well supported on Linux. Which,
    thankfully, is a lot easier than in olden times. When you select a well supported
    device, the drivers are included in CUPS, and you do not have to hassle with hunting
    down and downloading manufacturer drivers.
  prefs: []
  type: TYPE_NORMAL
- en: The next-best option is buying machines that have manufacturer-supplied Linux
    drivers. This is not my favorite option, as the drivers are often old and not
    maintained, and you must manually install them. This is more common with multifunction
    devices (MFDs). For one example, the Brother MFC-J5945DW is my personal machine,
    and it does not have native CUPS drivers, though it does support driverless printing.
    It was a good deal and inks are cheap, though in hindsight I really should have
    bought a machine with native Linux support. Native support is more reliable because
    once a device is supported in CUPS it is always supported, and you won’t be at
    the mercy of manufacturers who don’t maintain their drivers or who discontinue
    their driver downloads.
  prefs: []
  type: TYPE_NORMAL
- en: The least favorable option is to buy without doing your homework and hope it
    works. In this case you might be able to use macOS drivers (PPD files) for printers
    not supported in Linux, though it can take some work if the Macintosh PPD has
    macOC-specific entries, such as calling macOS executables, libraries, or filters.
    These must be replaced with the equivalents for Linux, if they exist. See [cupsFilter](https://oreil.ly/w3Oqd)
    for some useful information if you want to try this.
  prefs: []
  type: TYPE_NORMAL
- en: If you want a shared device, the least troublesome approach is to get one that
    has networking built in, and that has built-in controls for copying, setting up
    networking, viewing ink levels, cleaning print heads, and other setup and maintenance
    tasks. These are easier and more pleasant to use than devices that require setup
    and control from a computer.
  prefs: []
  type: TYPE_NORMAL
- en: Finding Supported Printers and Scanners
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Hewlett-Packard (HP) printers and multifunction devices have excellent Linux
    support via the *hplip*, *hplip-hpijs*, *hplip-sane*, and *hplip-scan-utils* packages.
    Of course every Linux is special and has different package names, such as *hpijs-ppds*,
    *hplip-data*, *printer-driver-hpcups*, *hplip-common*, and *libsane-hpaio*. Searching
    for *hplip* should find them.
  prefs: []
  type: TYPE_NORMAL
- en: Not all HP printers and MFDs are supported in Linux; see the link below for
    HP’s Linux support database.
  prefs: []
  type: TYPE_NORMAL
- en: Brother has good machines, decent customer support, and good prices on inks.
    They have both machines with native Linux support and some that require the Brother
    drivers.
  prefs: []
  type: TYPE_NORMAL
- en: 'Canon, Epson, Honeywell, Fujitsu, IBM, Lexmark, Kodak, Tektronix, Samsung,
    Sharp, Xerox, Toshiba, and many other brands have some level of Linux support.
    It can be difficult to learn which models are supported. Some vendors tell you
    in their product specs. There are several websites to check, though they are usually
    not complete nor up-to-date, but they’re good places to start:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Supported HP printers](https://oreil.ly/y9z4J)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[OpenPrinting.org printer listings](https://oreil.ly/7JbPH)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[H-node printers and MFDs](https://oreil.ly/Hwy0w)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ThinkPenguin store](https://oreil.ly/54H5F)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Ubuntu page for supported printers](https://oreil.ly/03SV3)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[IPP Everywhere Printers](https://oreil.ly/l7pFz)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: CUPS Printer Drivers
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Linux printer drivers are provided by CUPS, the Common Unix Printing System.
    CUPS has been the standard printing subsystem for Linux since around 2000\. Apple
    started using CUPS around 2002, then hired CUPS creator Michael Sweet and bought
    the source code in 2007. Sweet left Apple in 2019, and Apple’s involvement stalled—see
    [apple/cups on GitHub](https://oreil.ly/HgUX8). Mr. Sweet has not been idle; rather,
    he has been hard at work on the OpenPrinting.org’s CUPS fork at [OpenPrinting/cups](https://oreil.ly/uP0CJ)
    on GitHub.
  prefs: []
  type: TYPE_NORMAL
- en: There is a lot more to CUPS than writing code. Michael Sweet, Till Kamppeter,
    and others invested a lot of work into getting manufacturers on board and developing
    common printing standards and APIs. The centers of CUPS and printing standards
    development are [The Printer Working Group](https://oreil.ly/yEMad) and [OpenPrinting](https://oreil.ly/caH6b).
  prefs: []
  type: TYPE_NORMAL
- en: Printer drivers in CUPS consist of one or more filters specific to a printer,
    which are packaged in PPD (PostScript Printer Description) files. All printers
    in CUPS, even non-PostScript printers, need a PPD. The PPDs contain descriptions
    about the printers, printer commands, and filters.
  prefs: []
  type: TYPE_NORMAL
- en: Filters translate print jobs to formats the printer can understand, such as
    PDF, HP-PCL, raster, and image files, and they pass in commands for operations
    such as page selection, paper size, colors, contrast, and media type. PPDs are
    plain-text files, and the PPDs for all supported printers are in */usr/share/cups/model/*.
    Installed printers have PPDs in */etc/cups/ppd/*.
  prefs: []
  type: TYPE_NORMAL
- en: PPDs Are Doomed
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: CUPS has relied on PPDs from its inception, and they have worked well. However,
    there is new approach in development called *driverless* printing. Instead of
    using static PPD files, the printer advertises its capabilities and does not require
    driver installation on client machines. The idea is to make connecting to a new
    printer as easy as connecting to a new network with NetworkManager, which automatically
    finds available networks and does not require you to install drivers or to manually
    configure every new network. This is especially advantageous for mobile devices
    like phones and tablets, which have limited storage space and limited screen size
    for hassling with driver installation.
  prefs: []
  type: TYPE_NORMAL
- en: 'Driverless was introduced in CUPS 2.2.0\. You should have at least CUPS 2.2.4
    (released in June 2017) for reliable performance. You can learn more at the following
    resources:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Printer Applications: A New Way to Print in Linux](https://oreil.ly/clNC3)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[CUPS Driverless Printing](https://oreil.ly/yaj5q)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.1 Using the CUPS Web Interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You need to find the CUPS administration tool.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open the CUPS web interface in your web browser at [*http://localhost:631/*](http://localhost:631/)
    ([Figure 15-1](#fig-printscan-2)).
  prefs: []
  type: TYPE_NORMAL
- en: '![The CUPS web control panel](Images/lcb2_1501.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-1\. The CUPS web control panel
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are numerous graphical tools for managing printers, such as *system-config-printer*
    and the YaST printer module in openSUSE. The CUPS web administration page provides
    the most complete management options and is the same on all Linux distributions.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.2 Installing a Locally Attached Printer
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You need to install a new printer which is connected to your PC. You have wisely
    chosen a printer with native CUPS support.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Use the CUPS web control panel. Your printer should be connected and powered
    on. The following examples are on a Linux Mint system.
  prefs: []
  type: TYPE_NORMAL
- en: Go to the Administration tab and click Add Printer. It will ask you for your
    login ([Figure 15-2](#fig-printscan-3a)). (If your login does not work, and only
    the root login succeeds, see [Recipe 15.7](#rec-cups-forbidden) to learn how to
    configure CUPS to accept nonroot logins.) Check “Save debugging information for
    troubleshooting,” and check “Share printers connected to this system” to share
    printers directly attached to your computer. This only enables sharing, and then
    you must enable sharing on each printer you want to share.
  prefs: []
  type: TYPE_NORMAL
- en: '![Adding a printer](Images/lcb2_1502.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-2\. Adding a printer
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: On the next screen, CUPS discovers and lists your printer in the Local Printers
    section ([Figure 15-3](#fig-printscan-4)). Select your printer and click Continue.
  prefs: []
  type: TYPE_NORMAL
- en: Now you should see a screen like [Figure 15-4](#fig-printscan-5), with Name,
    Description, and Location fields. The Name and Description fields are automatically
    filled, and you may change these to whatever you want. The Name field appears
    in the printer dialogs when you print a document.
  prefs: []
  type: TYPE_NORMAL
- en: '![CUPS finds your local printer](Images/lcb2_1503.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-3\. CUPS finds your local printer
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: '![Configuring the Name, Description, and Location.](Images/lcb2_1504.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-4\. Specifying the name, description, and location
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Select your printer driver. CUPS displays a giant list for you to choose from.
    Find the driver for your printer model. In [Figure 15-5](#fig-printscan-6) the
    drivers come from the *epson-inkjet-printer-escpr* package (*printer-driver-escpr*
    on Ubuntu), for Seiko Epson color ink jet printers.
  prefs: []
  type: TYPE_NORMAL
- en: '![Select the printer driver](Images/lcb2_1505.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-5\. Select the printer driver
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: The final configuration screen is for setting default options, such as paper
    type, paper size, color or black and white, print quality, and other options according
    to what your printer and printer driver support. When you are finished, click
    Set Default Options ([Figure 15-6](#fig-printscan-7)).
  prefs: []
  type: TYPE_NORMAL
- en: '![Set default printer options](Images/lcb2_1506.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-6\. Set default printer options
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: When you are finished, you see the Printers page, listing all of your installed
    printers ([Figure 15-7](#fig-printscan-8)).
  prefs: []
  type: TYPE_NORMAL
- en: '![All installed printers](Images/lcb2_1507.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-7\. All installed printers
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Click on your new printer, and print a test page from the Maintenance drop-down
    menu. When it prints correctly, you are done.
  prefs: []
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In [Figure 15-2](#fig-printscan-3a) you see two buttons, Add Printer and Find
    New Printers. These are pretty much the same thing, with the discovered printer
    listings organized differently.
  prefs: []
  type: TYPE_NORMAL
- en: You will probably have more than one printer driver to choose from; for example,
    it is common to see both CUPS+Gutenprint and Foomatic drivers for the same printer.
    Gutenprint used to be the better choice for color printers; try both to see which
    you prefer. CUPS+Gutenprint Simplified drivers contain fewer features and options
    than the full versions.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.3 Giving Printers Useful Names
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you open the printer dialog in a document, you have several printers to
    choose from, including some that look similar, and you aren’t sure which one to
    use.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you install a printer, enter a descriptive name in the Name field ([Figure 15-8](#fig-printscan-18)).
    You have to do this at installation because you cannot change the name after installation.
  prefs: []
  type: TYPE_NORMAL
- en: '![Use the printer name to identify your printers.](Images/lcb2_1508.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-8\. Use the printer name to identify your printers
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you first install a printer using the CUPS web control panel, there are
    Description and Location fields that you can use, and these show up in the CUPS
    web control panel. But many apps that you print from do not read these fields
    and only read the Name field. Some exceptions are the Evolution mail client and
    the Firefox and Chromium web browsers, which display the name, location, and status.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.4 Installing a Network Printer
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There is a shared network printer on your network, and you want to install it
    on your computer.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The procedure is the same as installing a locally attached USB printer ([Recipe
    15.2](#rec-install-localprinter)), except you select a discovered network printer.
    The printer must be powered on and on the same network segment as your computer.
    You will see it listed under Discovered Network Printers ([Figure 15-9](#fig-printscan-19)).
  prefs: []
  type: TYPE_NORMAL
- en: '![Installing a shared network printer.](Images/lcb2_1509.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-9\. Installing a shared network printer
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: You need TCP port 631 open in the firewalls on all clients.
  prefs: []
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: What if CUPS does not discover your printer? See [Recipe 15.11](#rec-printer-troubleshooting)
    for some troubleshooting help. If CUPS does not see your printer, you cannot install
    it.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.5 Using Driverless Printing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Your printer is not supported in CUPS, and you want to try the driverless printing
    option. Or, you want to connect your Android or iOS devices to your printer.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You may have already seen driverless options in the CUPS printer driver selector.
    The following example is for my Brother MFC-J5945DW, which does not have native
    CUPS support.
  prefs: []
  type: TYPE_NORMAL
- en: Go to Administration → Add Printer in the CUPS web control panel. CUPS sees
    my Brother machine in Discovered Network Printers ([Figure 15-10](#fig-printscan-9)).
    There is a *driverless* option, and that is the correct one to choose.
  prefs: []
  type: TYPE_NORMAL
- en: '![CUPS sees my unsupported network printer](Images/lcb2_1510.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-10\. CUPS sees my unsupported network printer
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Continue the installation, and select the correct driver, which in [Figure 15-11](#fig-printscan-20)
    is the “Brother MFC-J5945DW, driverless, cups-filters 1.25.0 (en).”
  prefs: []
  type: TYPE_NORMAL
- en: Print a test page, and if it looks right, the installation is completed.
  prefs: []
  type: TYPE_NORMAL
- en: '![Select the driverless printer driver](Images/lcb2_1511.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-11\. Select the driverless printer driver
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Strictly speaking, this isn’t driverless, because CUPS creates PPD files in
    */etc/cups/ppd* for your “driverless” printer. However, you don’t have to maintain
    directories full of OpenPrinting.org and Gutenprint PPDs.
  prefs: []
  type: TYPE_NORMAL
- en: 'Your printer must support driverless printing, which means it must support
    the Mopria, AirPrint, IPP Everywhere, or WiFi Direct Print standard. These are
    all similar: the printer advertises itself, its network address, and basic functionality
    via the Avahi daemon. Avahi provides service discovery on your local network,
    using the mDNS/DNS-SD protocol suite. (Apple calls this service Bonjour and Zeroconf.)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Driverless printing in CUPS works great for Android and iOS devices. You only
    need to install a printer app. If your printer is driverless enabled, and especially
    if it is Mopria certified, then your mobile devices will have no trouble finding
    it. Mopria certification means your printer supports wireless printing sent from
    mobile devices. If your printer documentation does not tell you if it is Mopria
    certified, run the following command, which shows that the printer is Mopria certified:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[Debian Wiki, Driverless Printing](https://oreil.ly/d2Qw8)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.6 Sharing Nonnetworked Printers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You want to share a printer that does not have built-in networking.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: CUPS shares printers that do not have networking, but are connected to a PC
    on your network. First, you must have your name services working so that all your
    LAN hosts can ping each other.
  prefs: []
  type: TYPE_NORMAL
- en: Make sure that printer sharing is enabled on the Administration screen by checking
    “Share printers connected to this system.” Then enable sharing on the printer
    you want to share ([Figure 15-12](#fig-printscan-23)).
  prefs: []
  type: TYPE_NORMAL
- en: '![Enable printer sharing](Images/lcb2_1512.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-12\. Enable printer sharing
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: CUPS will advertise the printer to your network. Any Linux client on your network
    who wants to use this printer must install it the same way as installing a network
    or locally attached printer; start at Administration → Add Printer, then go through
    the normal installation process.
  prefs: []
  type: TYPE_NORMAL
- en: You may also share with Windows and macOS clients. macOS has native support
    for discovery via DNS-SD/mDNS and IPP. DNS-SD/mDNS is provided by Avahi on Linux
    and is called Bonjour on the Macintosh. Use the Macintosh control panel to find
    and install shared CUPS printers.
  prefs: []
  type: TYPE_NORMAL
- en: Windows 10 natively supports DNS-SD/mDNS. Older Windows releases support sharing
    via the Internet Printing Protocol (IPP). Use the Windows printer control panel
    to find and install shared CUPS printers.
  prefs: []
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In olden times, before network-enabled printers were common and inexpensive,
    admins used dedicated printer servers. These were old PCs, old laptops, small
    single-board computers, or commercial printer server devices. You can still buy
    small printer server gadgets, and they cost a lot less than in the old days.
  prefs: []
  type: TYPE_NORMAL
- en: Nowadays most printers have networking built in and are simpler to manage.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.7 Correcting the “Forbidden” Error Message
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'When you try to perform any administrative task in the CUPS web control panel,
    for example, adding a new printer, your login fails and there is a “Add Printer
    Error Unable to add printer: Forbidden” message.'
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'On some Linux distributions, such as openSUSE, the default configuration allows
    only the root user to do CUPS administration tasks. Edit */etc/cups/cups-files.conf*
    to allow nonroot users to do CUPS administration tasks. Look for these lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'This is why only the root login works. You can add your own private user group,
    like our example user Duchess, whose private group is *duchess*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'After saving changes to */etc/cups/cups-files.conf*, restart the CUPS service:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Now Duchess can do CUPS administration tasks.
  prefs: []
  type: TYPE_NORMAL
- en: 'Another approach is to use a system group created for this purpose. On Ubuntu
    Linux distributions, this is the *lpadmin* group, and Fedora uses the *sys* and
    *wheel* groups. You may create your own group for CUPS administration, like the
    following example that creates a *cupsadmin* group, and adds the user Mad Max
    to this group:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Mad Max must log out, then log back in to activate the new group membership.
    Add the *cupsadmin* group to *SystemGroup* in */etc/cups/cups-files.conf*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: Restart CUPS, and Mad Max can go to work.
  prefs: []
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'There should also be a section like this in */etc/cups/cups-files.conf*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: None of the groups listed for *SystemGroup* can match *Group*. If you try to
    use *lp*, as in the preceding example, CUPS will not start, and you will see error
    messages in */var/log/cups/error_log* or the syslog, depending how yours is configured
    in */etc/cups/cups-files.conf*.
  prefs: []
  type: TYPE_NORMAL
- en: 'If your Linux uses SysV init instead of systemctl, restart it with this command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Chapter 4](ch04.xhtml#cha-systemd)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.8 Installing Printer Drivers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You need to know if installing CUPS also installs a complete set of printer
    drivers, or if there are more that you might want that are not included with CUPS.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Most Linuxes install a subset of all available printing options. Every Linux
    distribution varies in which printer drivers are available, which ones are included
    in a default installation, and which specific names are used for packages, especially
    between Ubuntu and everyone else.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following list comprises a basic set of CUPS packages and printer drivers:'
  prefs: []
  type: TYPE_NORMAL
- en: '*cups* (server and client)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*cups-filters* (OpenPrinting CUPS filters and backends)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*gutenprint* (Gutenprint printer drivers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*foomatic* (Foomatic printer drivers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'OpenPrinting.org PPDs; for example, OpenSUSE provides:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*OpenPrintingPPDs*'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*OpenPrintingPPDs-ghostscript* (interpreter of printer drivers written in the
    PostScript language)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*OpenPrintingPPDs-hpijs* (HP printers)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*OpenPrintingPPDs-postscript*'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*cups-client* (command-line utilities for setting up and managing printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: OpenPrinting.org includes Foomatic. Fedora and Ubuntu ship *foomatic* packages,
    while OpenSUSE includes *OpenPrinting* packages. The names change, but the functionality
    is the same.
  prefs: []
  type: TYPE_NORMAL
- en: 'These packages may provide everything you need. The following are additional
    printer packages you might find useful:'
  prefs: []
  type: TYPE_NORMAL
- en: '*gimp-gutenprint* (provides a more featureful printer dialog for GIMP, the
    GNU Image Manipulation Program)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*bluez-cups* (connect Bluetooth printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*cups-airprint* (share printers with iOS devices)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*ptouch-driver* (Brother P-touch label printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*rasterview* (view Apple raster images such as GIF, JPEG, and PNG, see [MSweet.org/rasterview](https://oreil.ly/zZZAp)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*c2esp* (some Kodak all-in-one printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Ubuntu packages the largest assortment of printer drivers. Many, but not all,
    of the package names start with *printer-driver*:'
  prefs: []
  type: TYPE_NORMAL
- en: '*openprinting-ppds* (OpenPrinting printer support, PostScript PPD files)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-all* (printer drivers metapackage)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-brlaser* (some Brother laser printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-c2050* (Lexmark 2050 Color Jetprinter)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-foo2zjs* (ZjStream-based printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-c2esp* (Kodak ESP AiO color inkjet series)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-cjet* (Canon LBP laser printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-cups-pdf* (PDF writing via CUPS)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-dymo* (DYMO label printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-escpr* (Epson Inkjets that use ESC/P-R)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-foo2zjs* (ZjStream-based printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-fujixerox* (Fuji Xerox printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-gutenprint* (printer drivers for CUPS)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-hpcups* (HP Linux Printing and Imaging, CUPS Raster driver
    (hpcups))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-hpijs* (HP Linux Printing and Imaging, printer driver (hpijs))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-indexbraille* (CUPS printing to Index Braille printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-m2300w* (Minolta magicolor 2300W/2400W color laser printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-min12xxw* (KonicaMinolta PagePro 1[234]xxW)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-oki* (OKI Data printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-pnm2ppa* (HP-GDI printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-postscript-hp* (HP Printers PostScript Descriptions)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-ptouch* (printer driver for Brother P-touch label printers)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-pxljr* (HP Color LaserJet 35xx/36xx)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-sag-gdi* (Ricoh Aficio SP 1000s/SP 1100s)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*printer-driver-splix* (Samsung and Xerox SPL2 and SPLc la)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: If you don’t see your printer listed in the driver selector in the CUPS web
    interface, try searching for the brand name of your printer in your package manager.
    This may all seem rather messy, but setting up printers is untidy on all computing
    platforms (not just on Linux).
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Ghostscript documentation](https://oreil.ly/CHZpP)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[OpenPrinting](https://oreil.ly/jpYIW)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[The Printer Working Group](https://oreil.ly/Q5BUh)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.9 Modifying an Installed Printer
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You want to change the configuration of a printer that is already installed.
    For example, you want to share it.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open the printer in the CUPS web control panel, then click Administration →
    Modify Printer. This is similar to installing a new printer, except it displays
    the printer’s current settings. [Figure 15-13](#fig-printscan-21) enables sharing
    the printer. (Note that sharing must first be enabled on the Administration →
    Advanced page.)
  prefs: []
  type: TYPE_NORMAL
- en: '![Modifying an installed printer](Images/lcb2_1513.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-13\. Modifying an installed printer
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can change everything except the printer name.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.10 Saving Documents by Printing to a PDF File
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You want to save a web page, or any document, to a PDF file instead of sending
    it to a printer.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Look at the File → Print dialog in any application, and you will see an option
    to print to a PDF file ([Figure 15-14](#fig-printofile)).
  prefs: []
  type: TYPE_NORMAL
- en: '![Printing to a PDF file.](Images/lcb2_1514.png)'
  prefs: []
  type: TYPE_IMG
- en: Figure 15-14\. Printing to a PDF file
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: You have all the usual options, such as filename and location, margins, print
    quality, color or monochrome, and page orientation. The printer dialogs look different
    in different apps; for example, the Firefox web browser printer dialog includes
    a document preview. In other apps the preview is usually a separate button.
  prefs: []
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Print to file is great for saving web confirmation forms and receipts, and creating
    PDFs from any type of documents.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 15.11 Troubleshooting
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Problem
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Printing doesn’t work! How do you fix it?
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'These are the most common issues with printers on Linux:'
  prefs: []
  type: TYPE_NORMAL
- en: For shared printers, make sure that your networking is set up correctly and
    your firewall allows TCP port 631\. If you have more than one network, verify
    that the printer is on the same network as your computer.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For USB-connected printers, try a different USB port or a different cable.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Verify you are using the correct printer drivers, or try driverless.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The CUPS daemon is managed by systemd. Try restarting the daemon:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Or reboot, and also power-cycle your printer.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Check your log files on the CUPS web administration page; you can view both
    the error log and the access log. Turn the logging level up to Debug to get the
    most information. (Click Edit Configuration File, then set *LogLevel debug*.)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Discussion
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The most important factor is using printers with good Linux support. This prevents
    most problems.
  prefs: []
  type: TYPE_NORMAL
- en: See Also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[CUPS documentation](https://oreil.ly/OlCzV)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
