<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 10. Getting Detailed Information About &#10;Your Computer Hardware"><div class="chapter" id="cha-discover-hardware">
<h1><span class="label">Chapter 10. </span>Getting Detailed Information About 
<span class="keep-together">Your Computer Hardware</span></h1>


<p>Linux comes with several good utilities for getting detailed information on
the hardware components in your computer. You can sit down at a machine and in
minutes have an inventory of its components and their specifications,
without opening the case.</p>

<p>These utilities are useful for providing detailed information for technical
support, finding the correct drivers for a device, and finding out if it is
supported in Linux at all. You can’t count on manufacturers to provide timely
accurate information about their own products. For example, they will often
change their chipsets without changing model numbers, which may turn a device
that worked fine on Linux into a device that does not work on Linux.
Fortunately, in these modern times Linux support is much less of a hassle than
it used to be.</p>

<p>Ideally, you will also have your computer documentation, or at least the
motherboard manual. Motherboard manuals are usually full of photos, diagrams, and
useful information, and you should be able to find them online.</p>

<p>In this chapter you will learn about the <em>lshw</em> (list hardware),
<em>lspci</em> (list PCI), <em>hwinfo</em> (hardware information), <em>lsusb</em> (list USB),
<em>lscpu</em> (list CPU), and <em>lsblk</em> (list block devices) commands.</p>

<p><em>lshw</em> and <em>hwinfo</em> provide the most complete information.</p>

<p><em>lshw</em> reports <a data-type="indexterm" data-primary="lshw command" data-secondary="purpose of" id="idm46466158665928"/>memory configuration, firmware versions, mainboard configuration,
CPU version and speed, cache configuration, bus speed, hardware paths, attached
devices, partitions, and filesystems.</p>

<p><em>hwinfo</em> reports <a data-type="indexterm" data-primary="hwinfo command" data-secondary="purpose of" id="idm46466158663608"/>computer monitor information, RAID arrays, memory configuration,
CPU information, firmware, mainboard configuration, caches, bus speeds, attached
devices, partitions, and filesystems.</p>

<p><em>lsusb</em> probes <a data-type="indexterm" data-primary="lsusb command" data-secondary="purpose of" id="idm46466158659672"/>USB buses and the devices attached to them.</p>

<p><em>lspci</em> probes <a data-type="indexterm" data-primary="lspci command" data-secondary="purpose of" id="idm46466158662360"/>PCI buses and the devices attached to them.</p>

<p><em>lsblk</em> lists <a data-type="indexterm" data-primary="lsblk command" data-secondary="purpose of" id="idm46466158657064"/>physical drives, partitions, and filesystems.</p>

<p><em>lscpu</em> lists <a data-type="indexterm" data-primary="lscpu command" data-secondary="purpose of" id="idm46466158655640"/>information about your CPU.</p>






<section data-type="sect1" data-pdf-bookmark="10.1 Collecting Hardware Information with lshw"><div class="sect1" id="idm46466158654104">
<h1>10.1 Collecting Hardware Information with lshw</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158653096">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lshw command" data-tertiary-sortas="lshw command" id="hardware-info-collect-lshw"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lshw command" data-tertiary-sortas="lshw command" id="list-hardware-lshw"/><a data-type="indexterm" data-primary="lshw command" data-secondary="listing hardware information" id="lshw-collect"/>want an inventory of the hardware on your system and details about each item.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158646232">
<h2>Solution</h2>

<p>Try the <em>lshw</em> (Hardware Lister) command with no options, and store the output
in a text file:</p>
<pre>$ <strong>sudo lshw | tee hardware.txt</strong>
duchess
    description: Laptop
    product: Latitude E7240 (05CA)
    vendor: Dell Inc.
    version: 00
    serial: 456ABC1
    width: 64 bits
[...]</pre>

<p>You’ll get several hundred lines of output that include firmware, drivers,
capabilities, serial numbers, version numbers, and bus information. <em>lshw</em> will
not probe any device attached via a wireless network interface, such as a
wireless printer, or a smartphone attached via Bluetooth, but it will report
wireless and Bluetooth interfaces.</p>

<p>You may prefer a summary in a hardware path tree view:</p>
<pre>$ <strong>sudo lshw -short</strong>
H/W path         Device           Class          Description
============================================================
                                  system         To Be Filled By O.E.M.
/0                                bus            H97M Pro4
/0/0                              memory         64KiB BIOS
/0/b                              memory         16GiB System Memory
/0/b/0                            memory         DIMM [empty]
/0/b/1                            memory         8GiB DIMM DDR3 Synchronous
1333
MHz (0.8 ns)
[...]
/0/100/14/0/5                     bus            USB3.0 Hub
/0/100/14/0/5/1                   generic        SAMSUNG_Android
/0/100/14/0/5/2                   printer        MFC-J5945DW
/0/100/14/0/5/4  wlx9cefd5fe8f20  network        802.11 n WLAN
/0/100/14/0/b                     input          USB Optical Mouse
/0/100/14/0/c                     input          QuickFire Rapid keyboard
[...]</pre>

<p>Or try the summary bus view, rather than the hardware path view:</p>
<pre>$ <strong>sudo lshw -businfo</strong>
Bus info          Device           Class          Description
=============================================================
[...]
cpu@0                              processor      Intel(R) Core(TM) i7-4770K
CPU
@ 3.50GHz
usb@3:5.4         wlx9cefd5fe8f20  network        802.11 n WLAN
usb@3:b                            input          USB Optical Mouse
usb@3:c                            input          QuickFire Rapid keyboard
pci@0000:00:19.0  enp0s25          network        Ethernet Connection (2) I218-V
pci@0000:00:1a.0                   bus            9 Series Chipset Family USB
scsi@0:0.0.0      /dev/sda         disk           4TB ST4000DM000-1F21
scsi@0:0.0.0,1    /dev/sda1        volume         476MiB EXT4 volume
[...]</pre>

<p><em>lshw</em> has a graphical interface, which you open with <em>sudo lshw -X</em>. This is
often a separate package, for example, <em>lshw-gtk</em> on Ubuntu
and <em>lshw-gui</em> on openSUSE and Fedora.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158634856">
<h2>Discussion</h2>

<p><em>lshw</em> packs a lot of information into its output. Visit
<a href="https://oreil.ly/XRGx1">Hardware Lister (lshw)</a> to
learn what everything means.</p>

<p><em>lshw</em> does not detect FireWire interfaces or computer monitors.</p>

<p>The example says “system To Be Filled By O.E.M.” because it is a homebrew
machine. A branded computer, such as Lenovo or Dell, should have the brand name
and model.</p>

<p>The <em>H/W path</em> column contains hardware paths, which are analogous to filepaths. /0 is <em>/system/bus</em>, which means computer and motherboard. Then all
the following entries are in a tree view, similar to a file tree. As you can see
in the example output, /0/0 is <em>/system/bus/BIOS memory</em>, /0/b is the first
populated RAM slot, and /0/b/1 is the second populated RAM slot. These paths
correspond to physical connections on your motherboard and are<a data-type="indexterm" data-primary="slots" id="idm46466158626280"/> commonly
called <em>slots</em>, even though most of them are soldered to the motherboard
and do not have physical slots that you can plug expansion cards <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lshw command" data-tertiary-sortas="lshw command" data-startref="hardware-info-collect-lshw" id="idm46466158625752"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lshw command" data-tertiary-sortas="lshw command" data-startref="list-hardware-lshw" id="idm46466158627208"/><a data-type="indexterm" data-primary="lshw command" data-secondary="listing hardware information" data-startref="lshw-collect" id="idm46466158624072"/>into.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158622856">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://oreil.ly/axiyL">Hardware Lister (lshw)</a></p>
</li>
<li>
<p><em>man 1 lshw</em></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.2 Filtering lshw Output"><div class="sect1" id="idm46466158618280">
<h1>10.2 Filtering lshw Output</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158617288">
<h2>Problem</h2>

<p><em>lshw</em> sure does<a data-type="indexterm" data-primary="lshw command" data-secondary="filtering output" id="idm46466158615368"/><a data-type="indexterm" data-primary="filtering" data-secondary="lshw command output" id="idm46466158614520"/> dump a lot of information, and you want to limit the output
to what you want to see.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158613352">
<h2>Solution</h2>

<p>Run <em>sudo lshw -short</em> or <em>sudo lshw -businfo</em> to see a list of device
classes, then name one or more device classes that you want to see:</p>
<pre>$ <strong>sudo lshw -short -class bus -class cpu</strong>
</pre>

<p>Omit the <em>-short</em> option to see detailed information.</p>

<p>Format the long output as HTML, XML, or JSON, and store it in a file so you can
use your favorite scripting hacks to parse the output:</p>
<pre>$ <strong>sudo lshw -html -class bus -class cpu | tee lshw.html</strong>
$ <strong>sudo lshw -xml -class printer -class display -class input | tee lshw.xml</strong>
$ <strong>sudo lshw -json -class storage | tee lshw.json</strong></pre>

<p>Remove sensitive information with the <em>-sanitize</em> option, such as IP addresses
and serial numbers, to make it safer to share with technical support:</p>
<pre>$ <strong>sudo lshw -json -sanitize  -class bus -class cpu | tee lshw.json</strong>
</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158613096">
<h2>Discussion</h2>

<p>The <em>tee</em> command <a data-type="indexterm" data-primary="tee command" id="idm46466158602504"/>displays output on the screen and stores it in a text file.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158601688">
<h2>See Also</h2>

<ul>
<li>
<p><a href="https://oreil.ly/qCioO">Hardware Lister (lshw)</a></p>
</li>
<li>
<p><em>man 1 lshw</em></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.3 Detecting Hardware, Including Displays and RAID Devices, with hwinfo"><div class="sect1" id="idm46466158597368">
<h1>10.3 Detecting Hardware, Including Displays and RAID Devices, with hwinfo</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158596360">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with hwinfo command" data-tertiary-sortas="hwinfo command" id="hardware-info-collect-hwinfo"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with hwinfo command" data-tertiary-sortas="hwinfo command" id="list-hardware-hwinfo"/><a data-type="indexterm" data-primary="hwinfo command" data-secondary="listing hardware information" id="hwinfo-collect"/><a data-type="indexterm" data-primary="monitors, collecting hardware information" id="monitor-info"/><a data-type="indexterm" data-primary="RAID devices, collecting hardware information" id="RAID-collect"/>want to get information on your computer monitor and RAID devices, as well as
other devices on your system.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158587480">
<h2>Solution</h2>

<p>The <em>hwinfo</em> command provides a detailed hardware inventory, including monitors
and RAID devices on your system. The following example probes your monitor:</p>
<pre>$ <strong>hwinfo --monitor</strong>
[...]
  Hardware Class: monitor
  Model: "VIEWSONIC VX2450 SERIES"
  Vendor: VSC "VIEWSONIC"
  Device: eisa 0xe226 "VX2450 SERIES"
[...]</pre>

<p>The complete output is quite a bit longer than this example, and it includes
all supported screen resolutions, date of manufacture, synchronization ranges,
type of monitor, and refresh frequencies.</p>

<p>Another nice feature is detecting RAID devices. It does not detect them by
default, so use the <em>--listmd</em> option:</p>
<pre>$ <strong>hwinfo --listmd</strong></pre>

<p>If it returns nothing, there are no RAID devices on your system. If there are,
it prints a lot of information.</p>

<p>Create a summary of your hardware:</p>
<pre>$ <strong>hwinfo --short</strong>
keyboard:
  /dev/input/event4    CM Storm QuickFire Rapid keyboard
mouse:
  /dev/input/event5    CM Storm QuickFire Rapid keyboard
  /dev/input/mice      Logitech Optical Wheel Mouse
printer:
                       Brother Industries MFC-J5945DW
monitor:
                       VIEWSONIC VX2450 SERIES
graphics card:
                       Intel Xeon E3-1200 v3/4th Gen Core Processor Integrated
[...]</pre>

<p class="pagebreak-before less_space">Get detailed information on one or more hardware components:</p>
<pre>$ <strong>hwinfo --mouse --network --cdrom</strong>
</pre>

<p>Consult <em>man 8 hwinfo</em> for a list of device names, or run <em>hwinfo --help</em>:</p>
<pre>$ <strong>hwinfo --help</strong>
Usage: hwinfo [OPTIONS]
Probe for hardware.
Options:
    --&lt;HARDWARE_ITEM&gt;
        This option can be given more than once. Probe for a particular
        HARDWARE_ITEM. Available hardware items are:
        all, arch, bios, block, bluetooth, braille, bridge, camera,
        cdrom, chipcard, cpu, disk, dsl, dvb, fingerprint, floppy,
        framebuffer, gfxcard, hub, ide, isapnp, isdn, joystick, keyboard,
        memory, mmc-ctrl, modem, monitor, mouse, netcard, network, partition,
        pci, pcmcia, pcmcia-ctrl, pppoe, printer, redasd,
        reallyall, scanner, scsi, smp, sound, storage-ctrl, sys, tape,
        tv, uml, usb, usb-ctrl, vbe, wlan, xen, zip
[...]</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158587016">
<h2>Discussion</h2>

<p><em>hwinfo</em> prints useful and complete information. For example, for network
interfaces it shows their <em>/sys</em> paths, drivers, link status, and MAC
addresses. CD-ROM output includes the model name, revision number, drivers,
device files, drive speed, a features list, and whether there is a disk
in the drive. <em>hwinfo</em> often tells you more than the manufacturer’s
product <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with hwinfo command" data-tertiary-sortas="hwinfo command" data-startref="hardware-info-collect-hwinfo" id="idm46466158571128"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with hwinfo command" data-tertiary-sortas="hwinfo command" data-startref="list-hardware-hwinfo" id="idm46466158569464"/><a data-type="indexterm" data-primary="hwinfo command" data-secondary="listing hardware information" data-startref="hwinfo-collect" id="idm46466158567544"/><a data-type="indexterm" data-primary="monitors, collecting hardware information" data-startref="monitor-info" id="idm46466158566456"/><a data-type="indexterm" data-primary="RAID devices, collecting hardware information" data-startref="RAID-collect" id="idm46466158565512"/>information.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158572200">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 8 hwinfo</em></p>
</li>
<li>
<p><a href="https://oreil.ly/BsDAT">hwinfo on GitHub</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.4 Detecting PCI Hardware with lspci"><div class="sect1" id="idm46466158560776">
<h1>10.4 Detecting PCI Hardware with lspci</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158559688">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lspci command" data-tertiary-sortas="lspci command" id="hardware-info-collect-lspci"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lspci command" data-tertiary-sortas="lspci command" id="list-hardware-lspci"/><a data-type="indexterm" data-primary="lspci command" data-secondary="listing hardware information" id="lspci-collect"/><a data-type="indexterm" data-primary="PCI devices" data-secondary="collecting hardware information" id="pci-collect-info"/>want to list devices attached to the PCI bus on your computer with
vendor and version information.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158552088">
<h2>Solution</h2>

<p>Run the <em>lspci</em> (list PCI) command. The following example prints a summary list
of all PCI devices:</p>
<pre>$ <strong>lspci</strong>
00:00.0 Host bridge: Intel Corporation 4th Gen Core Processor DRAM Controller
(rev 06)
00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3/4th Gen
Core Processor Integrated Graphics Controller (rev 06)
00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor
HD Audio Controller (rev 06)
[...]</pre>

<p>Increase verbosity to see more details:</p>
<pre>$ <strong>lspci -v</strong>
$ <strong>lspci -vv</strong>
$ <strong>lspci -vvv</strong></pre>

<p>When you see “access denied” messages, try <em>sudo lspci</em> to see what you’re
missing.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158546392">
<h2>Discussion</h2>

<p><em>lspci</em> reads information from the PCI bus, which includes onboard components
on your motherboard as well as expansion cards plugged into PCI slots.</p>

<p><em>lspci</em> displays additional information from its own database of hardware IDs,
such as vendors, devices, and classes and subclasses. This information is stored
in a text file in various locations, depending on your Linux distribution.
Ubuntu puts it in <em>/usr/share/misc/pci.ids</em>, Fedora uses
<em>/usr/share/hwdata/pci.ids</em>, and openSUSE uses <em>/usr/share/pci.ids</em>. The man
page for your Linux should tell you where it is, or search for the <em>pci.ids</em>
file (<em>locate pci.ids</em>).</p>

<p>The <em>lspci</em> maintainers welcome submissions of updated information; read your
<em>pci.ids</em> file for instructions. Run the <em>sudo update-pciids</em> command
periodically to update your PCI IDs database.</p>

<p>PCI is short for Peripheral Component Interconnect. PCI is a local hardware
bus; that is, a means for the various hardware devices in your computer to
communicate with the Linux kernel. <em>lspci</em> primarily detects controllers,
buses, and some individual devices, including:</p>

<ul>
<li>
<p>SATA controllers</p>
</li>
<li>
<p>Audio controllers and devices</p>
</li>
<li>
<p>Video controllers and devices</p>
</li>
<li>
<p>Ethernet controllers</p>
</li>
<li>
<p>USB controllers</p>
</li>
<li>
<p>Communication controllers</p>
</li>
<li>
<p>Ethernet controllers</p>
</li>
<li>
<p>RAID controllers</p>
</li>
<li>
<p>Integrated SD/MMC card readers</p>
</li>
<li>
<p>PCI FireWire controllers</p>
</li>
</ul>

<p>There have been several PCI protocols over the years. The current standard is
PCIe, PCI Express, <a data-type="indexterm" data-primary="PCIe (PCI Express)" id="idm46466158527288"/>introduced in 2003. It is backward compatible with all
legacy PCI protocols, and it replaces PCI, PCI-X, and AGP. Remember AGP, the
Accelerated Graphics Port protocol? AGP <a data-type="indexterm" data-primary="AGP (Accelerated Graphics Port)" id="idm46466158526984"/>video cards were faster than PCI video
cards because AGP provided a dedicated link for video processing.</p>

<p>PCIe is substantially different from the earlier protocols because, just like
AGP, each device gets it own dedicated link. The older protocols used a shared
parallel bus, which was considerably <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lspci command" data-tertiary-sortas="lspci command" data-startref="hardware-info-collect-lspci" id="idm46466158526248"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lspci command" data-tertiary-sortas="lspci command" data-startref="list-hardware-lspci" id="idm46466158524184"/><a data-type="indexterm" data-primary="lspci command" data-secondary="listing hardware information" data-startref="lspci-collect" id="idm46466158521752"/><a data-type="indexterm" data-primary="PCI devices" data-secondary="collecting hardware information" data-startref="pci-collect-info" id="idm46466158520232"/>slower.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158518520">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 8 lspci</em></p>
</li>
<li>
<p><em>man 8 update-pciids</em></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.5 Understanding lspci Output"><div class="sect1" id="idm46466158514472">
<h1>10.5 Understanding lspci Output</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158513576">
<h2>Problem</h2>

<p>Most<a data-type="indexterm" data-primary="lspci command" data-secondary="explanation of output" id="lspci-output-explain"/> of the output of <em>lspci</em> makes sense because it is device specifications.
But you want to know what the numbers at the beginning of each device line are
for, like this example:</p>
<pre>$ <strong>lspci</strong>
[...]
00:1f.2 SATA controller: Intel Corporation 9 Series Chipset Family SATA
Controller [AHCI Mode]
[...]</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158508968">
<h2>Solution</h2>

<p><em>00:1f.2</em> is the device’s BDF number, <em>bus:device.function</em>. Bus number 00, device
number 1f, and function number 2. A function number of 2 means the device has
two functions, and each one gets its own PCI address.</p>

<p>Use the tree view to see the relationship between the PCI bus and the devices:</p>
<pre>$ <strong>lspci -tvv</strong>
-[0000:00]-+-00.0  Intel Corporation 4th Gen Core Processor DRAM Controller
           +-02.0  Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor
                   Integrated Graphics Controller
           +-03.0  Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor HD
                   Audio Controller
           +-14.0  Intel Corporation 9 Series Chipset Family USB xHCI Controller
           +-16.0  Intel Corporation 9 Series Chipset Family ME Interface #1
           +-19.0  Intel Corporation Ethernet Connection (2) I218-V
           +-1a.0  Intel Corporation 9 Series Chipset Family USB EHCI
                   Controller #2
           +-1b.0  Intel Corporation 9 Series Chipset Family HD Audio Controller
           +-1c.0-[01]--
           +-1c.3-[02-03]----00.0-[03]--
           +-1d.0  Intel Corporation 9 Series Chipset Family USB EHCI
                   Controller #1
           +-1f.0  Intel Corporation H97 Chipset LPC Controller
           +-1f.2  Intel Corporation 9 Series Chipset Family SATA Controller
                   [AHCI Mode]
           \-1f.3  Intel Corporation 9 Series Chipset Family SMBus Controller</pre>

<p>PCs almost always have a single PCI bus, which is always 00.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158503432">
<h2>Discussion</h2>

<p>The zeroes enclosed in brackets at the root of the tree, [0000:00], identify the
<em>domain</em> and <em>bus</em>. The first four zeroes are the domain number, and the two
zeroes after the colon are the bus number. The domain is the host bridge.
The PCI host bridge connects the PCI controller to the CPU. <em>Domain</em> is a
Linux-specific term, and it is more commonly called the <em>segment group</em>.
You can also see this with the <em>-D</em> option:</p>
<pre>$ <strong>lspci -D</strong>
0000:00:00.0 Host bridge: Intel Corporation 4th Gen Core Processor DRAM
 Controller (rev 06)
0000:00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3/4th Gen
 Core Processor Integrated Graphics Controller (rev 06)
0000:00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core
 Processor HD Audio Controller
[...]</pre>

<p>You will see multiple host bridges on servers with multiple physical CPUs,
and sometimes multiple buses on a single <a data-type="indexterm" data-primary="lspci command" data-secondary="explanation of output" data-startref="lspci-output-explain" id="idm46466158498008"/>domain.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158496360">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 8 lspci</em></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.6 Filtering lspci Output"><div class="sect1" id="rec-filter-lspci">
<h1>10.6 Filtering lspci Output</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158492024">
<h2>Problem</h2>

<p><em>lspci</em> outputs<a data-type="indexterm" data-primary="lspci command" data-secondary="filtering output" id="lspci-filter"/><a data-type="indexterm" data-primary="filtering" data-secondary="lspci command output" id="filter-lspci"/> a lot of information, and you want to filter it to
see just what you want 
<span class="keep-together">to see.</span></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158487720">
<h2>Solution</h2>

<p>Use the <em>awk</em> command to<a data-type="indexterm" data-primary="awk command" data-secondary="filtering lspci output" id="awk-filter"/> cut out the clutter. The following example finds only
entries pertaining to USB:</p>
<pre>$ <strong>lspci -v | awk '/USB/,/^$/'</strong>
00:14.0 USB controller: Intel Corporation 9 Series Chipset Family USB xHCI
Controller (prog-if 30 [XHCI])
        Subsystem: ASRock Incorporation 9 Series Chipset Family USB xHCI
Controller
        Flags: bus master, medium devsel, latency 0, IRQ 26
        Memory at efc20000 (64-bit, non-prefetchable) [size=64K]
        Capabilities: &lt;access denied&gt;
        Kernel driver in use: xhci_hcd

00:1a.0 USB controller: Intel Corporation 9 Series Chipset Family USB EHCI
Controller #2 (prog-if 20 [EHCI])
        Subsystem: ASRock Incorporation 9 Series Chipset Family USB EHCI
Controller
        Flags: bus master, medium devsel, latency 0, IRQ 16
        Memory at efc3b000 (32-bit, non-prefetchable) [size=1K]
        Capabilities: &lt;access denied&gt;
        Kernel driver in use: ehci-pci</pre>

<p>You must use the classes (Audio, Ethernet, USB, etc.) as they appear in the
output from <em>lspci</em>, and pay attention to case, because using <em>awk</em> to run a
case-insensitive search is complicated. This example shows the audio
controller and device:</p>
<pre>$ <strong>lspci -v | awk '/Audio/,/^$/'</strong>
00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor
HD Audio Controller (rev 06)
        Subsystem: ASRock Incorporation Xeon E3-1200 v3/4th Gen Core Processor
HD Audio Controller
        Flags: bus master, fast devsel, latency 0, IRQ 31
        Memory at efc34000 (64-bit, non-prefetchable) [size=16K]
        Capabilities: &lt;access denied&gt;
        Kernel driver in use: snd_hda_intel
        Kernel modules: snd_hda_intel

00:1b.0 Audio device: Intel Corporation 9 Series Chipset Family HD Audio
Controller
        Subsystem: ASRock Incorporation 9 Series Chipset Family HD Audio
Controller
        Flags: bus master, fast devsel, latency 0, IRQ 32
        Memory at efc30000 (64-bit, non-prefetchable) [size=16K]
        Capabilities: &lt;access denied&gt;
        Kernel driver in use: snd_hda_intel
        Kernel modules: snd_hda_intel</pre>

<p>Adjust the verbosity level as needed.</p>

<p>You may also select items by vendor, device, or class number. Find these
numbers with the <em>-nn</em> option. In this example, <code>0300</code> (enclosed in square braces)
is the class number, <code>8086</code> is the vendor number, and <code>0412</code> is the device number:</p>
<pre>$ <strong>lspci -nn</strong>
[....]
00:02.0 VGA compatible controller [0300]: Intel Corporation
Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller
[8086:0412] (rev 06)
[...]</pre>

<p>The following examples filter by class, vendor, and device, respectively:</p>
<pre>$ <strong>lspci -d ::0604</strong>
00:1c.0 PCI bridge: Intel Corporation 9 Series Chipset Family PCI Express Root
Port 1 (rev d0)
00:1c.3 PCI bridge: Intel Corporation 82801 PCI Bridge (rev d0)
02:00.0 PCI bridge: ASMedia Technology Inc. ASM1083/1085 PCIe to PCI Bridge (rev
03)

$ <strong>lspci -d 8086::</strong>
00:00.0 Host bridge: Intel Corporation 4th Gen Core Processor DRAM Controller
(rev 06)
00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3/4th Gen
Core Processor Integrated Graphics Controller (rev 06)
00:03.0 Audio device: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor
HD Audio Controller (rev 06)
[...]

$ <strong>lspci -d :0412:</strong>
00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3/4th Gen
Core Processor Integrated Graphics Controller (rev 06)</pre>

<p>Another way to find these numbers is to look them up at
<a href="https://oreil.ly/f2EKi">the PCI ID Repository</a>.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158483032">
<h2>Discussion</h2>

<p><em>awk</em> is a marvelous power tool for extracting specific text strings from
command output or documents. The caret,
<em>^</em>, is a regular expression anchor that
matches the start of a string, and <em>$</em>
matches the end, so in this example, <em>/^$/</em>
looks for the line breaks, the empty spaces at the beginning and end of the
text blocks. This is a great trick for extracting text blocks from sources that
have spaces between<a data-type="indexterm" data-primary="awk command" data-secondary="filtering lspci output" data-startref="awk-filter" id="idm46466158467528"/><a data-type="indexterm" data-primary="lspci command" data-secondary="filtering output" data-startref="lspci-filter" id="idm46466158465496"/><a data-type="indexterm" data-primary="filtering" data-secondary="lspci command output" data-startref="filter-lspci" id="idm46466158464248"/> sections.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158462344">
<h2>See Also</h2>

<ul class="no-space-list">
<li>
<p><em>man 1 grep</em></p>
</li>
<li>
<p><em>man 8 lspci</em></p>
</li>
<li>
<p><a href="https://oreil.ly/f2EKi">the PCI ID Repository</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.7 Using lspci to Identify Kernel Modules"><div class="sect1" id="idm46466158456952">
<h1>10.7 Using lspci to Identify Kernel Modules</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158455704">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="lspci command" data-secondary="identifying kernel modules" id="idm46466158454440"/><a data-type="indexterm" data-primary="PCI devices" data-secondary="kernel modules" id="idm46466158453592"/><a data-type="indexterm" data-primary="kernel modules for PCI devices, identifying" id="idm46466158452744"/>want to know which kernel modules your PCI devices are using, and which
ones are available on your system.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158451528">
<h2>Solution</h2>

<p>Use the <em>-k</em> option. The following example queries only the Ethernet
controller:</p>
<pre>$ <strong>lspci -kd ::0200</strong>
00:19.0 Ethernet controller: Intel Corporation Ethernet Connection (2) I218-V
        Subsystem: ASRock Incorporation Ethernet Connection (2) I218-V
        Kernel driver in use: e1000e
        Kernel modules: e1000e</pre>

<p>You may also <a data-type="indexterm" data-primary="awk command" data-secondary="identifying kernel modules" id="idm46466158447736"/>use <em>awk</em>, like this example for your graphics controller:</p>
<pre>$ <strong>lspci -vmmk| awk '/VGA/,/^$/'</strong>
Class:  VGA compatible controller
Vendor: Intel Corporation
Device: Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller
SVendor:        ASRock Incorporation
SDevice:        Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics
Controller
Rev:    06
Driver: i915
Module: i915</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158444744">
<h2>Discussion</h2>

<p>The <em>-k</em> option shows the kernel modules in use, and all of the
available kernel modules for each device. Usually the in-use and available
entries are the same, but sometimes there are multiple modules available.</p>

<p>When you use <em>awk</em> remember to add some verbosity, or you may not see the
information you want. See the Discussion in <a data-type="xref" href="#rec-filter-lspci">Recipe 10.6</a> to learn about
the <em>awk</em> options.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158441336">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 1 awk</em></p>
</li>
<li>
<p><em>man 8 lspci</em></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.8 Using lsusb to List USB Devices"><div class="sect1" id="idm46466158436328">
<h1>10.8 Using lsusb to List USB Devices</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158435224">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lsusb command" data-tertiary-sortas="lsusb command" id="hardware-info-collect-lsusb"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lsusb command" data-tertiary-sortas="lsusb command" id="list-hardware-lsusb"/><a data-type="indexterm" data-primary="lsusb command" data-secondary="listing hardware information" id="lsusb-collect"/><a data-type="indexterm" data-primary="USB devices, listing" id="usb-list"/>want a quick, easy tool for listing USB devices on your system.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158428232">
<h2>Solution</h2>

<p><em>lsusb</em> lists USB buses and connected USB devices, including mice, keyboards,
USB sticks, printers, smartphones, and other connected peripherals. The
following two examples show two different views of the same devices.</p>

<p>Run <em>lsusb</em> with no options to see a summary of USB devices on your system.
In the next example, three external USB devices are connected: a
keyboard, mouse, and wireless network interface:</p>
<pre>$ <strong>lsusb</strong>
[...]
Bus 003 Device 011: ID 148f:5372 Ralink Technology, Corp. RT5372 Wireless Adapter
Bus 003 Device 002: ID 0bda:5401 Realtek Semiconductor Corp. RTL 8153 USB 3.0
 hub with gigabit ethernet
Bus 003 Device 006: ID 046d:c018 Logitech, Inc. Optical Wheel Mouse
Bus 003 Device 005: ID 2516:0004 Cooler Master Co., Ltd. Storm QuickFire Rapid
 Mechanical Keyboard
[...]</pre>

<p>This example shows the same thing, with more details in a USB bus hierarchy
format, including kernel drivers, device codes and vendor numbers, and port numbers:</p>
<pre>$ <strong>lsusb -tv</strong>
[...]
/:  Bus 03.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/14p, 480M
    ID 1d6b:0002 Linux Foundation 2.0 root hub
    |__ Port 3: Dev 2, If 0, Class=Hub, Driver=hub/4p, 480M
        ID 0bda:5401 Realtek Semiconductor Corp. RTL 8153 USB 3.0 hub with
        gigabit ethernet
    |__ Port 7: Dev 11, If 0, Class=Vendor Specific Class, Driver=rt2800usb, 480M
        ID 148f:5372 Ralink Technology, Corp. RT5372 Wireless Adapter
    |__ Port 11: Dev 5, If 0, Class=Human Interface Device, Driver=usbhid, 1.5M
        ID 2516:0004 Cooler Master Co., Ltd. Storm QuickFire Rapid Mechanical
        Keyboard
    |__ Port 12: Dev 6, If 0, Class=Human Interface Device, Driver=usbhid, 1.5M
        ID 046d:c018 Logitech, Inc. Optical Wheel Mouse
[...]</pre>

<p>The following examples show what it looks like when you plug in an external
USB hub with a Bluetooth interface and a Samsung smartphone attached to the
hub:</p>
<pre>$ <strong>lsusb</strong>
[...]
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 012: ID 04e8:6860 Samsung Electronics Co., Ltd Galaxy series,
 misc. (MTP mode)
Bus 003 Device 013: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle
 (HCI mode)
Bus 003 Device 002: ID 0bda:5401 Realtek Semiconductor Corp. RTL 8153 USB 3.0
 hub with gigabit ethernet
[...]

$ <strong>lsusb -tv</strong>
[...]
/:  Bus 03.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/14p, 480M
    ID 1d6b:0002 Linux Foundation 2.0 root hub
    |__ Port 3: Dev 2, If 0, Class=Hub, Driver=hub/4p, 480M
        ID 0bda:5401 Realtek Semiconductor Corp. RTL 8153 USB 3.0 hub with
        gigabit ethernet
        |__ Port 4: Dev 12, If 0, Class=Imaging, Driver=, 480M
            ID 04e8:6860 Samsung Electronics Co., Ltd Galaxy series, misc. (MTP
            mode)
        |__ Port 2: Dev 13, If 0, Class=Wireless, Driver=btusb, 12M
            ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
        |__ Port 2: Dev 13, If 1, Class=Wireless, Driver=btusb, 12M
            ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
[...]</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158418616">
<h2>Discussion</h2>

<p>The bus and port numbers are always the same. The dev number changes every time
you plug in a device.</p>

<p>The ID numbers, for example, <code>0a12:0001</code>, are the vendor and device codes. Manufacturers must apply to <a href="https://usb.org"><em class="hyperlink">https://usb.org</em></a> for new codes. You can find the list of current USB IDs at <a href="https://oreil.ly/bHLo6">linux-usb.org</a> and to contribute updated 
<span class="keep-together">information</span>.</p>

<p>The class codes are also managed by <a href="https://usb.org"><em class="hyperlink">https://usb.org</em></a>; see
<a href="https://oreil.ly/vNCgT">USB class codes</a>. I find it interesting
that Dev 57, which is a Samsung Android phone, is classed as an imaging device.
However, it makes sense because most Linux distributions use the Media Transfer
Protocol (MTP) to transfer files from an Android phone.</p>

<p>The examples in this section are from a PC that has both USB 2.0 and USB 3.1
ports. The <em>lsusb</em> output shows the negotiated speeds the devices are using, so
when you see something like <code>usbhid, 1.5M</code>, instead of <code>480M</code> or <code>5000M</code>, that is
all right because that is a keyboard, which does not need the full speed of the
USB link. You should see higher speeds for storage devices, such as USB sticks
and external <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lsusb command" data-tertiary-sortas="lsusb command" data-startref="hardware-info-collect-lsusb" id="idm46466158409928"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lsusb command" data-tertiary-sortas="lsusb command" data-startref="list-hardware-lsusb" id="idm46466158406344"/><a data-type="indexterm" data-primary="lsusb command" data-secondary="listing hardware information" data-startref="lsusb-collect" id="idm46466158404376"/><a data-type="indexterm" data-primary="USB devices, listing" data-startref="usb-list" id="idm46466158403288"/>hard drives.</p>
</div></section>













<section data-type="sect2" class="pagebreak-before less_space" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158402344">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 8 lsusb</em></p>
</li>
<li>
<p><a href="https://usb.org"><em class="hyperlink">https://usb.org</em></a></p>
</li>
<li>
<p><a href="https://oreil.ly/js1oj"><em class="hyperlink">https://oreil.ly/js1oj</em></a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.9 Listing Partitions and Hard Disks with lsblk"><div class="sect1" id="rec-lsblk-hardware">
<h1>10.9 Listing Partitions and Hard Disks with lsblk</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158394376">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lsblk command" data-tertiary-sortas="lsblk command" id="hardware-info-collect-lsblk"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lsblk command" data-tertiary-sortas="lsblk command" id="list-hardware-lsblk"/><a data-type="indexterm" data-primary="lsblk command" data-secondary="listing hardware information" id="lsblk-collect"/><a data-type="indexterm" data-primary="partitions" data-secondary="listing" id="partition-list"/><a data-type="indexterm" data-primary="hard disks" data-secondary="listing" id="harddisk-list"/>need a quick way to list all of your attached storage drives, and their
partitions.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158384760">
<h2>Solution</h2>

<p>Use the <em>lsblk</em> (list block devices) command. Run it with no options to
generate a list of all block devices on your computer:</p>
<pre>$ <strong>lsblk</strong>
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0   3.7T  0 disk
├─sda1   8:1    0   476M  0 part /boot
├─sda2   8:2    0  55.9G  0 part /
├─sda3   8:3    0   1.8T  0 part /home
└─sda4   8:4    0   7.5G  0 part [SWAP]
sdb      8:16   0   1.8T  0 disk
├─sdb1   8:17   0   102M  0 part
├─sdb2   8:18   0   6.5G  0 part
├─sdb3   8:19   0   1.1G  0 part [SWAP]
└─sdb4   8:20   0   1.8T  0 part
sdc      8:32   0   3.7T  0 disk
├─sdc1   8:33   0   128M  0 part
├─sdc2   8:34   0 439.7G  0 part
└─sdc3   8:35   0   3.2T  0 part
sdd      8:48   1   3.8G  0 disk
└─sdd1   8:49   1   3.8G  0 part
sr0     11:0    1 159.3M  0 rom</pre>

<p>Show the filesystem labels and UUIDs on the selected device:</p>
<pre>$ <strong>lsblk -f /dev/sdc</strong>
NAME   FSTYPE LABEL                 UUID                MOUNTPOINT
sdc
├─sdc1
├─sdc2 ntfs   Seagate Backup Plus   2E203F82203F5057
└─sdc3 ext4   backup                0451d428-9716-4cdd  /media/max/backup</pre>

<p class="pagebreak-before less_space">List only SCSI devices and their types:</p>
<pre>$ <strong>lsblk -S</strong>
NAME HCTL       TYPE VENDOR   MODEL             REV TRAN
sda  0:0:0:0    disk ATA      ST4000DM000-1F21 CC54 sata
sdb  2:0:0:0    disk ATA      SAMSUNG HD204UI  0001 sata
sdc  6:0:0:0    disk Seagate  BUP SL           0304 usb
sr0  4:0:0:0    rom  ATAPI    iHAS424   B      GL1B sata</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158377640">
<h2>Discussion</h2>

<p><em>sda</em> and <em>sdb</em> are SATA hard disks, and <em>sdc</em> is a USB flash drive. On
Linux, mass storage devices such as SATA hard disks and flash media use the SCSI
driver. <em>sr0</em>, <em>rom</em>, and <em>ATAPI</em> all identify a CD/DVD player.</p>

<p>Defining the<a data-type="indexterm" data-primary="block devices" id="idm46466158373144"/> term <em>block devices</em> without starting arguments is rather
difficult because it’s a programming term that does not translate well to a
concise userland concept. In my experience it is most useful to think of block
devices as mass storage devices and the partitions on storage devices.</p>

<p><code>MAJ:MIN</code> are the major and minor numbers. The major number identifies the
category, for example, 8 is for <em>sd</em> devices, and the minor number labels each
device in sequence. (Run <strong><code>lsblk -l</code></strong> to see this in a tree structure.)</p>

<p><code>RM</code> tells if it a removable drive or not, with 1 indicating a removable drive.</p>

<p><code>SIZE</code> is the size of the block device.</p>

<p><code>RO = 0</code> means the device is not read-only, and 1 is read-only. <em>sr0</em>, the CD/DVD
drive, is a read-write drive, but <em>lsblk</em> cannot tell you if the disk in <em>sr0</em>
is writeable.</p>

<p><code>TYPE</code> identifies the disk type.</p>

<p><code>MOUNTPOINT</code> shows the paths, if the device is <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lsblk command" data-tertiary-sortas="lsblk command" data-startref="hardware-info-collect-lsblk" id="idm46466158364088"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lsblk command" data-tertiary-sortas="lsblk command" data-startref="list-hardware-lsblk" id="idm46466158362424"/><a data-type="indexterm" data-primary="lsblk command" data-secondary="listing hardware information" data-startref="lsblk-collect" id="idm46466158360632"/><a data-type="indexterm" data-primary="partitions" data-secondary="listing" data-startref="partition-list" id="idm46466158359320"/><a data-type="indexterm" data-primary="hard disks" data-secondary="listing" data-startref="harddisk-list" id="idm46466158357976"/>mounted.</p>










<section data-type="sect3" data-pdf-bookmark="See Also"><div class="sect3" id="idm46466158355960">
<h3>See Also</h3>

<ul>
<li>
<p><em>man 8 lsblk</em></p>
</li>
</ul>
</div></section>



</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.10 Getting CPU Information"><div class="sect1" id="idm46466158377224">
<h1>10.10 Getting CPU Information</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158352776">
<h2>Problem</h2>

<p>You <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lscpu command" data-tertiary-sortas="lscpu command" id="hardware-info-collect-lscpu"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lscpu command" data-tertiary-sortas="lscpu command" id="list-hardware-lscpu"/><a data-type="indexterm" data-primary="lscpu command" data-secondary="listing CPU information" id="lscpu-collect"/><a data-type="indexterm" data-primary="CPU information, listing" id="cpu-list"/>want to know what CPU or CPUs are on your system, and their specifications.</p>
</div></section>













<section data-type="sect2" class="pagebreak-before less_space" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158345416">
<h2>Solution</h2>

<p>Run the <em>lscpu</em> (list CPU) command with no options:</p>
<pre>$ <strong>lscpu</strong>
Architecture:        x86_64
CPU op-mode(s):      32-bit, 64-bit
Byte Order:          Little Endian
CPU(s):              8
On-line CPU(s) list: 0-7
Thread(s) per core:  2
Core(s) per socket:  4
Socket(s):           1
Vendor ID:           GenuineIntel
CPU family:          6
Model:               60
Model name:          Intel(R) Core(TM) i7-4770K CPU @ 3.50GHz
[...]
L1d cache:           128 KiB
L1i cache:           128 KiB
L2 cache:            1 MiB
L3 cache:            8 MiB
[...]</pre>

<p>This spits out a large amount of information; you will also see a large number
of flags, which list capabilities, and L cache information.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158341304">
<h2>Discussion</h2>

<p>There are<a data-type="indexterm" data-primary="memory, CPU caches" id="idm46466158339816"/><a data-type="indexterm" data-primary="L1/L2/L3 CPU caches" id="idm46466158339208"/> three types of CPU caches: L1, L2, and L3. These are small memory
caches on the CPU. They are very fast, many times faster than system RAM, and
store the data that the CPU is most likely to need for its next operations. L1
is the fastest and most expensive, so it is usually the smallest. L2 is the next
fastest and less expensive, and is usually larger than L1. L3 is the slowest and
least expensive, and usually the largest.</p>

<p>The CPU in the preceding example has four caches. Use the <em>-C</em> option to see
more detailed cache information:</p>
<pre>$ <strong>lscpu -C</strong>
NAME ONE-SIZE ALL-SIZE WAYS TYPE        LEVEL
L1d       32K     128K    8 Data            1
L1i       32K     128K    8 Instruction     1
L2       256K       1M    8 Unified         2
L3         8M       8M   16 Unified         3
</pre>

<p>This shows four caches, shared among the four physical CPU cores. L1i caches store CPU
instructions, and L1d caches store data. L2 and L3 store data.</p>

<p>The number of CPU cores can be a little confusing. <code>CPU(s): 8</code> does not mean 8
physical cores in this example; instead, that is how many cores the Linux kernel
sees. The following lines tell the full story:</p>

<pre data-type="programlisting">Thread(s) per core:  2
Core(s) per socket:  4
Socket(s):           1</pre>

<p>This is a single processor with four physical cores and two threads per core,
for a total of eight logical <a data-type="indexterm" data-primary="hardware" data-secondary="listing" data-tertiary="with lscpu command" data-tertiary-sortas="lscpu command" data-startref="hardware-info-collect-lscpu" id="idm46466158332360"/><a data-type="indexterm" data-primary="listing" data-secondary="hardware" data-tertiary="with lscpu command" data-tertiary-sortas="lscpu command" data-startref="list-hardware-lscpu" id="idm46466158335480"/><a data-type="indexterm" data-primary="lscpu command" data-secondary="listing CPU information" data-startref="lscpu-collect" id="idm46466158334504"/><a data-type="indexterm" data-primary="CPU information, listing" data-startref="cpu-list" id="idm46466158328264"/>CPUs.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158326264">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 1 lscpu</em></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="10.11 Identifying Your Hardware Architecture"><div class="sect1" id="rec-hardware-arch">
<h1>10.11 Identifying Your Hardware Architecture</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm46466158322600">
<h2>Problem</h2>

<p>You’re <a data-type="indexterm" data-primary="hardware" data-secondary="identifying architecture" id="hardware-architecture"/><a data-type="indexterm" data-primary="uname command" id="uname"/>not sure what the hardware architecture is on a machine; you think it is
either x86-64 or ARM, and you need to know which it is.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm46466158318984">
<h2>Solution</h2>

<p>Use the <em>uname</em> command. This example is on an x86-64 machine:</p>
<pre>$ <strong>uname -m</strong>
x86_64</pre>

<p>The following list contains some of the more common results you might see:</p>

<ul>
<li>
<p>arm</p>
</li>
<li>
<p>aarch64</p>
</li>
<li>
<p>armv7* (arm7 and below are 32-bit)</p>
</li>
<li>
<p>armv8* (arm8 and up is 64-bit)</p>
</li>
<li>
<p>ia64</p>
</li>
<li>
<p>ppc</p>
</li>
<li>
<p>ppc64</p>
</li>
<li>
<p>s390x</p>
</li>
<li>
<p>sparc</p>
</li>
<li>
<p>sparc64</p>
</li>
<li>
<p>i386</p>
</li>
<li>
<p>i686</p>
</li>
<li>
<p>x86_64</p>
</li>
</ul>

<p>If the machine is not running Linux, try booting it with a SystemRescue USB stick,
and then run <em>uname -m</em>.</p>

<p>You can install Linux <a data-type="indexterm" data-primary="Chromebooks, displaying hardware information" id="idm46466158301800"/>on a Chromebook. Chromebooks use both Intel and ARM
processors. One way to see what yours has is to open the web browser to
<em>chrome://system</em>. This shows all the system information, probably more than
you want.</p>

<p>A friendlier<a data-type="indexterm" data-primary="Cog System Info Viewer" id="idm46466158299912"/> tool is
<a href="https://oreil.ly/Yeirk">Cog System Info Viewer</a>,
which displays hardware and network information on Chromebooks.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm46466158297912">
<h2>Discussion</h2>

<p>Linux supports more hardware architectures than any other operating system, from
tiny embedded systems and systems on a chip (SoCs), to mainframes and supercomputers
and everything in between. Whatever obscure computing hardware you might have,
chances are that some flavor of Linux will<a data-type="indexterm" data-primary="hardware" data-secondary="identifying architecture" data-startref="hardware-architecture" id="idm46466158296520"/><a data-type="indexterm" data-primary="uname command" data-startref="uname" id="idm46466158295432"/> run on it.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm46466158293992">
<h2>See Also</h2>

<ul>
<li>
<p><em>man 1 uname</em></p>
</li>
</ul>
</div></section>





</div></section>







</div></section></div></body></html>