<html><head></head><body><div id="sbo-rt-content"><section data-type="appendix" epub:type="appendix" data-pdf-bookmark="Appendix A. Installing MongoDB"><div class="appendix" id="appendix_d1e12346"><h1><span class="label">Appendix A. </span>Installing MongoDB</h1><p>MongoDB<a data-type="indexterm" data-primary="MongoDB" data-secondary="installing" id="MDBinstall00a"/><a data-type="indexterm" data-primary="installation" data-secondary="downloading archives" id="idm45882333269704"/> binaries are available for Linux, macOS, Windows, and
  Solaris. This means that, on most platforms, you can download an archive
  from <!--ULINK WITHOUT TEXT NODE.--><a href="https://www.mongodb.com/download-center">the MongoDB Download Center
  page</a>, inflate it, and run the binary.</p><p>The MongoDB server requires a directory it can write database files to
  and a port it can listen for connections on. This section covers the entire
  install on the two variants of system: Windows and everything else
  (Linux/Unix/macOS).</p><p>When we speak of “installing MongoDB,” generally what we are talking
  about is setting up <em>mongod</em>, the core database server.
  <em>mongod</em> can be used as a standalone server or as a
  member of a replica set. Most of the time, this will be the MongoDB process
  you are using.</p><section data-type="sect1" data-pdf-bookmark="Choosing a Version"><div class="sect1" id="sect1_d1e12370"><h1>Choosing a Version</h1><p>MongoDB<a data-type="indexterm" data-primary="versioning scheme" id="idm45882333264248"/><a data-type="indexterm" data-primary="installation" data-secondary="version selection" id="idm45882333263384"/> uses a fairly simple versioning scheme: even-point releases
    are stable, and odd-point releases are development versions. For example,
    anything starting with 4.2 is a stable release, such as 4.2.0, 4.2.1, and
    4.2.8. Anything starting with 4.3 is a development release, such as 4.3.0,
    4.3.2, or 4.3.12. Let’s take the 4.2/4.3 release as a sample case to
    demonstrate how the versioning timeline works:</p><ol><li><p>MongoDB 4.2.0 is released. This is a major release and will have
        an extensive changelog.</p></li><li><p>After the developers start working on the milestones for 4.4
        (the next major stable release), they release 4.3.0. This is the new
        development branch, which is fairly similar to 4.2.0 but probably with
        an extra feature or two and maybe some bugs.</p></li><li><p>As the developers continue to add features, they will release
        4.3.1, 4.3.2, and so on. These releases should not be used in
        production.</p></li><li><p>Some minor bug fixes may be backported to the 4.2 branch, which
        will cause releases of 4.2.1, 4.2.2, and so on. Developers are
        conservative about what is backported; few new features are ever added
        to a stable release. Generally, only bug fixes are ported.</p></li><li><p>After all of the major milestones have been reached for 4.4.0,
        4.3.7 (or whatever the latest development release is) will be turned
        into 4.4.0-rc0.</p></li><li><p>After extensive testing of 4.4.0-rc0, usually there are a couple
        minor bugs that need to be fixed. Developers fix these bugs and
        release 4.4.0-rc1.</p></li><li><p>Developers repeat step 6 until no new bugs are apparent, and
        then 4.4.0-rc2 (or whatever the latest release ended up being) is
        renamed 4.4.0.</p></li><li><p>Developers start over from step 1, incrementing all versions by
        0.2.</p></li></ol><p>You can see how close a production release is by browsing the core
    server roadmap on the <a href="http://jira.mongodb.org">MongoDB bug
    tracker</a>.</p><p>If you are running in production, you should use a stable release.
    If you are planning to use a development release in production, ask about
    it first on the mailing list or IRC to get the developers’ advice.</p><p>If you are just starting development on a project, using a
    development release may be a better choice. By the time you deploy to
    production, there will probably be a stable release with the features
    you’re using (MongoDB attempts to stick to a regular cycle of stable
    releases every 12 months). However, you must balance this against the
    possibility that you may run into server bugs, which can be discouraging
    to a new user.</p></div></section><section data-type="sect1" data-pdf-bookmark="Windows Install"><div class="sect1" id="sect1_d1e12444"><h1>Windows Install</h1><p>To<a data-type="indexterm" data-primary="installation" data-secondary="Windows" id="idm45882333253208"/> install MongoDB on Windows, download the Windows
    <em>.msi</em> from <a href="https://oreil.ly/nZZd0">the MongoDB Download Center
    page</a>. Use the advice in the previous section to choose the correct
    version of MongoDB. When you click the link, it will download the
    <em>.msi</em>. Double-click the <em>.msi</em> file
    icon to launch the installer program.</p><p>Now you need to make a directory in which MongoDB can write database
    files. By default, MongoDB tries to use the <em>\data\db</em>
    directory on the current drive as its data directory (e.g., if you’re
    running <em>mongod</em> on <em>C:</em> on Windows,
    it’ll use <em>C:\Program
    Files\MongoDB\Server\&amp;&lt;VERSION&gt;\data</em>). This will be
    created automatically for you by the installer. If you chose to use a
    directory other than <em>\data\db</em>, you’ll need to specify
    the path when you start <span class="keep-together">MongoDB</span>,
    which is covered in a moment.</p><p>Now that you have a data directory, open the command prompt
    (<em>cmd.exe</em>). Navigate to the directory where you
    unzipped the MongoDB binaries and run the following:</p><pre id="I_programlisting_d1e13466" data-type="programlisting">$ C:\Program Files\MongoDB\Server\&amp;&lt;VERSION&gt;\bin\mongod.exe</pre><p>If you chose a directory other than <em>C:\Program
    Files\MongoDB\Server\&amp;&lt;VERSION&gt;\data</em>, you’ll have to
    specify it here, with the <code class="option">--dbpath</code> argument:</p><pre id="I_programlisting_d1e13476" data-type="programlisting">$ C:\Program Files\MongoDB\Server\&amp;&lt;VERSION&gt;\bin\mongod.exe \
        --dbpath C:\Documents and Settings\Username\My Documents\db</pre><p>See <a data-type="xref" href="ch21.xhtml#chapter-start-stop">Chapter 21</a> for more common options,
    or run <code>mongod.exe
    </code><code class="option">--help</code> to see all the options.</p><section data-type="sect2" data-pdf-bookmark="Installing as a Service"><div class="sect2" id="sect2_d1e12483"><h2>Installing as a Service</h2><p>MongoDB can also be installed as a service on Windows. To do this,
      simply run it with the full path, escape any spaces, and use the
      <code class="option">--install</code> option. For example:</p><pre id="I_programlisting_d1e13496" data-type="programlisting">$ C:\Program Files\MongoDB\Server\4.2.0\bin\mongod.exe \
          --dbpath "\"C:\Documents and Settings\Username\My Documents\db\"" \
          --install</pre><p>It can then be started and stopped from the Control Panel.</p></div></section></div></section><section data-type="sect1" data-pdf-bookmark="POSIX (Linux and Mac OS X) Install"><div class="sect1" id="sect1_d1e12503"><h1>POSIX (Linux and Mac OS X) Install</h1><p>Choose<a data-type="indexterm" data-primary="installation" data-secondary="POSIX (Linux and Mac OS X)" id="idm45882333234920"/> a version of MongoDB, based on the advice in the section
    <a data-type="xref" href="#sect1_d1e12370">“Choosing a Version”</a>. Go to <a href="https://oreil.ly/XEScg">the MongoDB Download
    Center</a> and select the correct version for your OS.</p><div data-type="warning" epub:type="warning"><h6>Warning</h6><p>If you are using a Mac and are running macOS Catalina 10.15+, you
      should use <em>/System/Volumes/Data/db</em> instead of
      <em>/data/db</em>. This version made a change that renders
      the root folder read-only and resets upon reboot, which would result in
      the loss of your MongoDB data folder.</p></div><p>You must create a directory for the database to put its files in. By
    default the database will use <em>/data/db</em>, although you
    can specify any other directory. If you create the default directory, make
    sure it has the correct write permissions. You can create the directory
    and set the permissions by running the following commands:</p><pre id="I_programlisting_d1e13545" data-type="programlisting">      $ mkdir -p /data/db
      $ chown -R $USER:$USER /data/db</pre><p><code>mkdir -p</code> creates the directory
    and all its parents, if necessary (i.e., if the <em>/data</em>
    directory doesn’t exist, it will create the <em>/data</em>
    directory and then the <em>/data/db</em> directory). <code>chown</code> changes the ownership of
    <em>/data/db</em> so that your user can write to it. Of
    course, you can also just create a directory in your home folder and
    specify that MongoDB should use that when you start the database, to avoid
    any permissions issues.</p><p>Decompress the <em>.tar.gz</em> file you downloaded from
    <!--ULINK WITHOUT TEXT NODE.-->the MongoDB Download
    Center:</p><pre id="I_programlisting_d1e13573" data-type="programlisting">      $ tar zxf mongodb-linux-x86_64-enterprise-rhel62-4.2.0.tgz
      $ cd mongodb-linux-x86_64-enterprise-rhel62-4.2.0</pre><p>Now you can start the database:</p><pre id="I_programlisting_d1e13577" data-type="programlisting">      $ bin/mongod</pre><p>Or, if you’d like to use an alternate database path, specify it with
    the <code class="option">--dbpath</code> option:</p><pre id="I_programlisting_d1e13592" data-type="programlisting" data-code-language="javascript"><code class="nx">$</code> <code class="nx">bin</code><code class="o">/</code><code class="nx">mongod</code> <code class="o">--</code><code class="nx">dbpath</code> <code class="o">~</code><code class="err">/db</code></pre><p>You can run <code>mongod.exe</code> <code class="option">--help</code> to see all the possible
    options.</p><section data-type="sect2" data-pdf-bookmark="Installing from a Package Manager"><div class="sect2" id="sect2_d1e12578"><h2>Installing from a Package Manager</h2><p>There<a data-type="indexterm" data-primary="installation" data-secondary="from package&#10;          managers" id="idm45882333213176"/> are also many package managers that can be used to
      install MongoDB. If you prefer using one of these, there are official
      packages for Red Hat, Debian, and Ubuntu as well as unofficial packages
      for many other systems. If you use an unofficial version, make sure it
      installs a relatively recent version.</p><p>On macOS, there are unofficial packages for Homebrew and MacPorts.
      To use the <a href="https://oreil.ly/9xoTe">MongoDB
      Homebrew tap</a>, you first install the tap and then install the
      required version of MongoDB via Homebrew. The following example
      highlights how to install the latest production version of MongoDB
      Community Edition. You can add the custom tap in a macOS terminal
      session using:</p><pre data-type="programlisting">        $ brew tap mongodb/brew</pre><p>Then install the latest available production release of MongoDB
      Community Server (including all command-line tools) using:</p><pre data-type="programlisting">        $ brew install mongodb-community</pre><p>If you go for the MacPorts version, be forewarned: it takes hours
      to compile all the Boost libraries, which are MongoDB prerequisites.
      Start the download and leave it overnight.</p><p>Regardless of the package manager you use, it is a good idea to
      figure out where it is putting the MongoDB log files before you have a
      problem and need to find them. It’s important to make sure they’re being
      saved properly in advance of any <a data-type="indexterm" data-startref="MDBinstall00a" id="idm45882333203816"/>possible issues.</p></div></section></div></section></div></section></div>



  </body></html>