<html><head></head><body><section data-pdf-bookmark="Chapter 8. Backgrounds" data-type="chapter" epub:type="chapter"><div class="chapter" id="backgrounds">&#13;
<h1><span class="label">Chapter 8. </span>Backgrounds</h1>&#13;
&#13;
&#13;
<p>By default, the <em>background area</em> of an <a data-primary="backgrounds" data-type="indexterm" id="ix_backgrounds_ch8"/>element consists of the content box, padding box, and border box, with the borders drawn on top of the background. (You can change that&#13;
to a degree with CSS, as you’ll see in this chapter.)</p>&#13;
&#13;
<p>CSS lets you apply one solid opaque or semitransparent color to the background of an element, as well as apply one or more images to the background of a single element,&#13;
or even describe your own color gradients of various shapes to fill the background area.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Setting Background Colors" data-type="sect1"><div class="sect1" id="background-colors">&#13;
<h1>Setting Background Colors</h1>&#13;
&#13;
<p>To declare a <a data-primary="backgrounds" data-secondary="colors" data-type="indexterm" id="ix_background_colors"/><a data-primary="colors" data-secondary="background" data-type="indexterm" id="ix_colors_background"/><a data-primary="background-color property" data-type="indexterm" id="ix_background_color_prop"/>color for the background of an element, you use&#13;
the property <code>background-color</code>, which accepts any&#13;
valid color value.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176097257472">&#13;
<h1>background-color</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>&lt;<em><code>color</code></em>&gt;</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>transparent</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As specified</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>Yes</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></aside>&#13;
&#13;
<p class="pagebreak-before">If you want the color to extend out a little bit from the content area of the&#13;
element, add some padding to the mix, as shown in the following code and illustrated in <a data-type="xref" href="#cab_fig07">Figure 8-1</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="m">#AEA</code><code class="p">;}</code>&#13;
<code class="nt">p</code><code class="nc">.padded</code> <code class="p">{</code><code class="k">padding</code><code class="o">:</code> <code class="m">1em</code><code class="p">;}</code></pre>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">p</code><code class="p">&gt;</code>A paragraph.<code class="p">&lt;/</code><code class="nt">p</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">p</code> <code class="na">class</code><code class="o">=</code><code class="s">"padded"</code><code class="p">&gt;</code>A padded paragraph.<code class="p">&lt;/</code><code class="nt">p</code><code class="p">&gt;</code></pre>&#13;
&#13;
<figure class="coderesult"><div class="figure" id="cab_fig07">&#13;
<img alt="css5 0801" src="assets/css5_0801.png"/>&#13;
<h6><span class="label">Figure 8-1. </span>Background color and padding</h6>&#13;
</div></figure>&#13;
&#13;
<p>You can set a background color for any element, from <code>&lt;body&gt;</code>&#13;
all the way down to inline elements such as <code>&lt;em&gt;</code> and <code>&lt;a&gt;</code>.&#13;
The value of <code>background-color</code> is not inherited.</p>&#13;
&#13;
<p>Its default value is the keyword <code>transparent</code>, which should make sense: if an element doesn’t have a defined color, its background should be transparent so that the background and content of its ancestor elements will be visible.</p>&#13;
&#13;
<p>One way to picture what that means is to imagine a clear (i.e.,&#13;
transparent) plastic sign mounted to a textured wall. The wall is&#13;
still visible through the sign, but this is not the background of the&#13;
sign; it’s the background of the wall (in CSS terms, anyway). Similarly,&#13;
if you set the page canvas to have a background, it can be seen through&#13;
all of the elements in the document that don’t have their own&#13;
backgrounds.</p>&#13;
&#13;
<p>They don’t inherit the background; it is visible <em>through</em>&#13;
the elements. This may seem like an irrelevant distinction, but as you’ll see&#13;
when we discuss background images, it’s a critical difference.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Explicitly Setting a Transparent Background" data-type="sect2"><div class="sect2" id="idm45176097178448">&#13;
<h2>Explicitly Setting a Transparent Background</h2>&#13;
&#13;
<p>Most of the time, you’ll have no reason to use the keyword <code>transparent</code>, <a data-primary="transparent backgrounds" data-type="indexterm" id="idm45176097176496"/><a data-primary="backgrounds" data-secondary="transparent" data-type="indexterm" id="idm45176097175760"/>since that’s the default value. On occasion, though, it can be useful.</p>&#13;
&#13;
<p>Imagine that a third-party script you have to include has set all images to have a white background, but your design includes a few transparent PNG images, and you don’t want the background on those images to be white. To make sure your design choice prevails, you would declare the following:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">img</code><code class="nc">.myDesign</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="nb">transparent</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Without this (and adding classes to your images), your semitransparent images would not appear semitransparent; rather, they would look like they had a solid white background.</p>&#13;
&#13;
<p>While the right color background on a semitransparent image is a nice-to-have, good contrast between text and the text’s background color is a must-have. If the contrast between text and any part of the background isn’t great enough, the text will be illegible. Always ensure that the contrast between the text and background is greater than or equal to 4.5:1 for small text and 3:1 for large text.</p>&#13;
&#13;
<p>Declaring both a color and a background color, with a good contrast, on your root element is generally considered a good practice. Not declaring a background color when declaring a color will lead the CSS validator to generate warnings such as, “You have no <code>background-color</code> with your <code>color</code>” to remind you that author-user color interaction can occur, and your rule has not taken this possibility into account. Warnings do not mean your styles are invalid: only errors prevent validation.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Background and Color Combinations" data-type="sect2"><div class="sect2" id="special-effects">&#13;
<h2>Background and Color Combinations</h2>&#13;
&#13;
<p>By combining <code>color</code> and <code>background-color</code>, you can <a data-primary="color property" data-type="indexterm" id="idm45176097145520"/>create interesting effects:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">h1</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">white</code><code class="p">;</code> <code class="k">background-color</code><code class="o">:</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">20%</code> <code class="m">20%</code> <code class="m">20%</code><code class="p">);</code>&#13;
    <code class="k">font-family</code><code class="o">:</code> <code class="n">Arial</code><code class="o">,</code> <code class="nb">sans-serif</code><code class="p">;}</code></pre>&#13;
&#13;
<p><a data-type="xref" href="#cab_fig08">Figure 8-2</a> depicts this example.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig08">&#13;
<img alt="css5 0802" src="assets/css5_0802.png"/>&#13;
<h6><span class="label">Figure 8-2. </span>A reverse-text effect for <code>&lt;h1&gt;</code> elements</h6>&#13;
</div></figure>&#13;
&#13;
<p>There are as many color combinations as there are colors, and&#13;
we can’t show all of them here. Still, we’ll try to give you some idea of&#13;
what you can do.</p>&#13;
&#13;
<p>This stylesheet is a little more complicated, as illustrated by <a data-type="xref" href="#cab_fig09">Figure 8-3</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">black</code><code class="p">;</code> <code class="k">background-color</code><code class="o">:</code> <code class="nb">white</code><code class="p">;}</code>&#13;
<code class="nt">h1</code><code class="o">,</code> <code class="nt">h2</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">yellow</code><code class="p">;</code> <code class="k">background-color</code><code class="o">:</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">0</code> <code class="m">51</code> <code class="m">0</code><code class="p">);}</code>&#13;
<code class="nt">p</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="m">#555</code><code class="p">;}</code>&#13;
<code class="nt">a</code><code class="nd">:link</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">black</code><code class="p">;</code> <code class="k">background-color</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;}</code>&#13;
<code class="nt">a</code><code class="nd">:visited</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">gray</code><code class="p">;</code> <code class="k">background-color</code><code class="o">:</code> <code class="nb">white</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig09">&#13;
<img alt="css5 0803" src="assets/css5_0803.png"/>&#13;
<h6><span class="label">Figure 8-3. </span>The results of a more complicated stylesheet</h6>&#13;
</div></figure>&#13;
&#13;
<p>And then there’s the question of what happens when you apply a background to a replaced element. We already discussed images with transparent portions, like a PNG or WebP. Suppose, though, you want to create a two-tone border around a JPEG. You can pull that off by adding a background color and a little bit of padding to your image, as shown in the following code and illustrated in <a data-type="xref" href="#cab_fig10">Figure 8-4</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">img</code><code class="nc">.twotone</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="nb">red</code><code class="p">;</code> <code class="k">padding</code><code class="o">:</code> <code class="m">5px</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="m">5px</code> <code class="nb">solid</code> <code class="nb">gold</code><code class="p">;}</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig10">&#13;
<img alt="css5 0804" src="assets/css5_0804.png"/>&#13;
<h6><span class="label">Figure 8-4. </span>Using background and border to two-tone an image</h6>&#13;
</div></figure>&#13;
&#13;
<p>Technically, the background goes to the outer border edge, but since the&#13;
border is solid and continuous, we can’t see the background behind it.&#13;
The 5 pixels of padding allow a thin ring of background to be seen&#13;
between the image and its border, creating the visual effect of an&#13;
“inner border.” This technique could be extended to create more&#13;
complicated effects with box shadows (discussed at the end of the chapter) and background images like gradients (discussed in <a data-type="xref" href="ch09.html#gradients">Chapter 9</a>).<a data-primary="" data-startref="ix_background_color_prop" data-type="indexterm" id="idm45176096938128"/><a data-primary="" data-startref="ix_background_colors" data-type="indexterm" id="idm45176096937184"/><a data-primary="" data-startref="ix_colors_background" data-type="indexterm" id="idm45176096936240"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Clipping the Background" data-type="sect1"><div class="sect1" id="clipping-the-background">&#13;
<h1>Clipping the Background</h1>&#13;
&#13;
<p>When you apply a <a data-primary="backgrounds" data-secondary="clipping" data-type="indexterm" id="ix_backgrounds_clipping"/><a data-primary="clipping" data-secondary="backgrounds" data-type="indexterm" id="ix_clip_background"/>background to a replaced element, such as an image, the background will show through any transparent portions. <a data-primary="borders" data-secondary="background and" data-type="indexterm" id="ix_border_background"/>Background colors, by default, go to the outer edge of the element’s border, showing behind the border if the border is itself transparent, or if it has transparent areas such as the spaces between dots, dashes, or lines when border style <code>dotted</code>, <code>dashed</code>, or <code>double</code> is applied.</p>&#13;
&#13;
<p>To <a data-primary="background-clip property" data-type="indexterm" id="ix_background_clip_prop"/><a data-primary="borders" data-secondary="transparent" data-type="indexterm" id="idm45176096950912"/>prevent the background from showing behind semitransparent or fully transparent borders, we can use <code>background-clip</code>. This property defines how far out an element’s background will go.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176096949216">&#13;
<h1>background-clip</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>[ <code>border-box</code> | <code>padding-box</code> | <code>content-box</code> | <code>text</code> ]#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>border-box</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As declared</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></aside>&#13;
&#13;
<p>The <a data-primary="background painting area" data-type="indexterm" id="idm45176096909616"/>default value <code>border-box</code> indicates that the <em>background painting&#13;
area</em> (which is what <code>background-clip</code> defines) extends out to the outer&#13;
edge of the border. Given this value, the background will <em>always</em> be drawn behind the&#13;
visible parts of the border, if any.</p>&#13;
&#13;
<p>If you choose the value <code>padding-box</code>, the background will&#13;
extend to only the outer edge of the padding area (which is also the inner&#13;
edge of the border). Thus, the background won’t be drawn behind the border. The&#13;
value <code>content-box</code>, on the other hand, restricts the background to just&#13;
the content area of the element.</p>&#13;
&#13;
<p>The effects of these three values are illustrated in <a data-type="xref" href="#cab_fig11">Figure 8-5</a>, which is&#13;
the result of the following code:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code><code class="o">[</code><code class="nt">id</code><code class="o">]</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">navy</code><code class="p">;</code> <code class="k">background</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;</code>&#13;
         <code class="k">padding</code><code class="o">:</code> <code class="m">1em</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="m">0.5em</code> <code class="nb">dashed</code><code class="p">;}</code>&#13;
<code class="nf">#ex01</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">border-box</code><code class="p">;}</code>  <code class="c">/* default value */</code>&#13;
<code class="nf">#ex02</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code>&#13;
<code class="nf">#ex03</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;}</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig11">&#13;
<img alt="css5 0805" src="assets/css5_0805.png"/>&#13;
<h6><span class="label">Figure 8-5. </span>The three box-oriented types of background clipping</h6>&#13;
</div></figure>&#13;
&#13;
<p>That might seem pretty simple, but several caveats exist. First, <code>background-clip</code> has no effect on the root element (in HTML, that’s&#13;
either the <code>&lt;html&gt;</code> element, or the <code>&lt;body&gt;</code> element if you haven’t defined any background styles on <code>&lt;html&gt;</code>). This has to do with how the background painting of the root&#13;
element has to be handled.</p>&#13;
&#13;
<p>Second, the exact <a data-primary="corners" data-secondary="rounding" data-type="indexterm" id="idm45176096867488"/><a data-primary="borders" data-secondary="corner rounding" data-type="indexterm" id="idm45176096866480"/>clipping of the background area can be&#13;
reduced if the element has rounded corners, thanks to the <code>border-radius</code> property (see <a data-type="xref" href="ch07.html#padding-borders-outlines-and-margins">Chapter 7</a>). This is basically common sense, since if you give your&#13;
element significantly rounded corners, you want the background to be&#13;
clipped by those corners instead of stick out past them. The way to&#13;
think of this is that the background painting area is determined by&#13;
<code>background-clip</code>, and then any corners that have to be further clipped&#13;
by rounded corners are appropriately clipped.<a data-primary="" data-startref="ix_border_background" data-type="indexterm" id="idm45176096863584"/></p>&#13;
&#13;
<p>Third, the value of <code>background-clip</code> can interact poorly with some <span class="keep-together">of the</span> more interesting values of <code>background-repeat</code>, which we’ll get to later.</p>&#13;
&#13;
<p>Fourth, <code>background-clip</code> defines the <a data-primary="background images" data-secondary="clipping" data-type="indexterm" id="ix_back_image_clipping"/>clipping area of&#13;
the <span class="keep-together">background.</span> It doesn’t affect other background properties. When it&#13;
comes to flat background colors, that’s a distinction without&#13;
meaning; but when it comes to background images, which we’ll talk about in the next section, it can make a great deal of difference.</p>&#13;
&#13;
<p>There is one more value, <code>text</code>, which clips the background to the text of the element.  In other words, the text is “filled in” with the background, and the rest of the element’s background area remains transparent.  This is a simple way to add textures to text, by “filling in” the text of an element with its background.</p>&#13;
&#13;
<p>The <a data-primary="foreground colors" data-type="indexterm" id="idm45176096856592"/><a data-primary="colors" data-secondary="foreground" data-type="indexterm" id="idm45176096855856"/>kicker is that to see this effect, you have to remove the foreground color of the element.  Otherwise, the foreground color obscures the background.  Consider the following, which has the result shown in <a data-type="xref" href="#cbag_css4_background-clip-text">Figure 8-6</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">255</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="p">);</code> <code class="k">background</code><code class="o">:</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">255</code><code class="p">);</code>&#13;
     <code class="k">padding</code><code class="o">:</code> <code class="m">0</code> <code class="m">1em</code><code class="p">;</code> <code class="k">margin</code><code class="o">:</code> <code class="m">1.5em</code> <code class="m">1em</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="m">0.5em</code> <code class="nb">dashed</code><code class="p">;</code>&#13;
     <code class="k">font-weight</code><code class="o">:</code> <code class="nb">bold</code><code class="p">;}</code>&#13;
<code class="nf">#ex01</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">text</code><code class="p">;</code> <code class="k">color</code><code class="o">:</code> <code class="nb">transparent</code><code class="p">;}</code>&#13;
<code class="nf">#ex02</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">text</code><code class="p">;</code> <code class="k">color</code><code class="o">:</code> <code class="n">rgba</code><code class="p">(</code><code class="m">255</code> <code class="m">0</code> <code class="m">0</code> <code class="o">/</code> <code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nf">#ex03</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">text</code><code class="p">;}</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cbag_css4_background-clip-text">&#13;
<img alt="css5 0806" src="assets/css5_0806.png"/>&#13;
<h6><span class="label">Figure 8-6. </span>Clipping the background to the text</h6>&#13;
</div></figure>&#13;
&#13;
<p>For the first example, the foreground color is made completely transparent, and the blue background is visible only where it intersects with the text shapes in the element’s content.  It is not visible through the image inside the paragraph, since an image’s foreground can’t be set to <code>transparent</code>.</p>&#13;
&#13;
<p>In the second example, the foreground color has been set to <code>rgba(255 0 0 0.5)</code>, which is a half-opaque red.  The text there is rendered purple, because the half-opaque red combines with the blue underneath.  The borders, on the other hand, blend their half-opaque red with the white background behind them, yielding a light red.</p>&#13;
&#13;
<p>In the third example, the foreground color is a solid, opaque red.  The text and borders are both fully red, with no hint of the blue background.  It can’t be seen in this instance, because it’s been clipped to the text.  The foreground just completely obscures the &#13;
<span class="keep-together">background.</span></p>&#13;
&#13;
<p>This technique works for any background, including gradient and image backgrounds, topics that we’ll cover in a bit.  Remember, however: if the background for some reason fails to be drawn behind the text, the transparent text meant to be “filled” with the background will instead be completely unreadable.</p>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>As of late 2022, not all browsers support <code>background-clip: text</code> correctly. Blink browsers (Chrome and Edge) require a <code>-webkit-</code> prefix, supporting <code>-webkit-background-clip: text</code>. Also, since browsers may not support the <code>text</code> value in the future (it’s under discussion for removal from CSS as we write this), include the prefixed and nonprefixed versions of <code>background-clip</code> and set the transparent color inside a <code>@supports</code> feature query (for more &#13;
<span class="keep-together">information,</span> see <a data-type="xref" href="ch21.html#css-at-rules">Chapter 21</a>).<a data-primary="" data-startref="ix_background_clip_prop" data-type="indexterm" id="idm45176096684400"/><a data-primary="" data-startref="ix_back_image_clipping" data-type="indexterm" id="idm45176096683424"/><a data-primary="" data-startref="ix_backgrounds_clipping" data-type="indexterm" id="idm45176096682480"/><a data-primary="" data-startref="ix_clip_background" data-type="indexterm" id="idm45176096681536"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Working with Background Images" data-type="sect1"><div class="sect1" id="background-images">&#13;
<h1>Working with Background Images</h1>&#13;
&#13;
<p>Having covered the basics of <a data-primary="positioning" data-secondary="background images" data-type="indexterm" id="ix_position_back_image"/><a data-primary="positioning" data-secondary="backgrounds" data-type="indexterm" id="ix_position_background"/><a data-primary="background images" data-type="indexterm" id="ix_back_image_ch8"/>background colors, we turn now to the subject of background images. By default, images are tiled, repeating in  both horizontal and vertical directions to fill up the entire background of the document. This default CSS behavior created horrific websites often referred to as “Geocities 1996,” but CSS can do a great deal more than simple tiling of background images. It can be used to create subtle beauty. We’ll start with the basics and then work our way up.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using an Image" data-type="sect2"><div class="sect2" id="using-an-image">&#13;
<h2>Using an Image</h2>&#13;
&#13;
<p>In order to get an <a data-primary="background-image property" data-type="indexterm" id="ix_back_image_prop"/>image into the background in the first place, use the&#13;
property &#13;
<span class="keep-together"><code>background-image</code>.</span></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176096671552">&#13;
<h1>background-image</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>[ &lt;<em><code>image</code></em>&gt;# | <code>none</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>none</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As specified, but with all URLs made absolute</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<dl>&#13;
<dt>&lt;<em><code>image</code></em>&gt;</dt>&#13;
<dd>&#13;
<p>[ &lt;<em><code>uri</code></em>&gt; | &lt;<em><code>linear-gradient</code></em>&gt; | &lt;<em><code>repeating-linear-gradient</code></em>&gt;  | <br/>&lt;<em><code>radial-gradient</code></em>&gt;  | &lt;<em><code>repeating-radial-gradient</code></em>&gt; | &lt;<em><code>conic-gradient</code></em>&gt;  | &lt;<em><code>repeating-conic-gradient</code></em>&gt; ]</p>&#13;
</dd>&#13;
</dl>&#13;
</div></aside>&#13;
&#13;
<p>The default value of <code>none</code> means about what you’d expect: no image is&#13;
placed in the background. If you want a background image, you must give&#13;
this property at least one image reference, such as in the following:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(bg23.gif)</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Because of the default values of other background properties, this will&#13;
cause the image <em>bg23.gif</em> to be tiled in the document’s background,&#13;
as shown in <a data-type="xref" href="#cab_fig12">Figure 8-7</a>. You’ll learn how to change that shortly.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig12">&#13;
<img alt="css5 0807" src="assets/css5_0807.png"/>&#13;
<h6><span class="label">Figure 8-7. </span>Applying a background image in CSS</h6>&#13;
</div></figure>&#13;
&#13;
<p>It’s usually a good idea to specify a background color to go along with&#13;
your background image; we’ll come back to that concept a little later. (We’ll also talk about how to have more than one image at the same&#13;
time, but for now we’re going to stick to just one background image per&#13;
element.)</p>&#13;
&#13;
<p>You can apply background images to any element, block-level or inline. If you have more than one background image, comma-separate them:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(bg23.gif)</code><code class="o">,</code> <code class="sx">url(another_img.png)</code><code class="p">;}</code></pre>&#13;
&#13;
<p>If you combine simple icons with creative attribute selectors, you can&#13;
(by using properties we’ll get to in just a bit) mark when a&#13;
link points to a PDF, word processor document, email address, or other unusual&#13;
resource. You can, for example, use the following code to display <a data-type="xref" href="#cab_fig14">Figure 8-8</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">a</code><code class="o">[</code><code class="nt">href</code><code class="o">]</code> <code class="p">{</code><code class="k">padding-left</code><code class="o">:</code> <code class="m">1em</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;}</code>&#13;
<code class="nt">a</code><code class="o">[</code><code class="nt">href</code><code class="err">$</code><code class="o">=</code><code class="s2">".pdf"</code><code class="o">]</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(/i/pdf-icon.png)</code><code class="p">;}</code>&#13;
<code class="nt">a</code><code class="o">[</code><code class="nt">href</code><code class="err">$</code><code class="o">=</code><code class="s2">".doc"</code><code class="o">]</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(/i/msword-icon.png)</code><code class="p">;}</code>&#13;
<code class="nt">a</code><code class="o">[</code><code class="nt">href</code><code class="o">^=</code><code class="s2">"mailto:"</code><code class="o">]</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(/i/email-icon.png)</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig14">&#13;
<img alt="css5 0808" src="assets/css5_0808.png"/>&#13;
<h6><span class="label">Figure 8-8. </span>Adding link icons as background images</h6>&#13;
</div></figure>&#13;
&#13;
<p>It’s true that you can add multiple background images to an element, but until you learn how to position each image and prevent it from repeating, you most likely won’t want to. We’ll cover repeating background images after we cover these necessary properties.</p>&#13;
&#13;
<p>Just like <code>background-color</code>, <code>background-image</code> is not inherited—in&#13;
fact, not a single one of the background properties is inherited.&#13;
Remember also that when specifying the URL of a background image, it&#13;
falls under the usual restrictions and caveats for <code>url()</code> values: a&#13;
relative URL should be interpreted with respect to the stylesheet (see <a data-type="xref" href="ch05.html#urls">“URLs”</a>).<a data-primary="" data-startref="ix_back_image_prop" data-type="indexterm" id="idm45176096537456"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Understanding Why Backgrounds Aren’t Inherited" data-type="sect2"><div class="sect2" id="why-backgrounds-arent-inherited">&#13;
<h2>Understanding Why Backgrounds Aren’t Inherited</h2>&#13;
&#13;
<p>Earlier, we <a data-primary="background images" data-secondary="inheritance and" data-type="indexterm" id="idm45176096534736"/><a data-primary="inheritance" data-secondary="background images and" data-type="indexterm" id="idm45176096533728"/>specifically noted that backgrounds are not inherited.&#13;
Background images demonstrate why inherited backgrounds would be&#13;
a bad thing. Imagine a situation that backgrounds were inherited, and&#13;
you applied a background image to the <code>&lt;body&gt;</code>. That image would be used&#13;
for the background of every element in the document, with each element&#13;
doing its own tiling, as shown in <a data-type="xref" href="#cab_fig15">Figure 8-9</a>.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig15">&#13;
<img alt="css5 0809" src="assets/css5_0809.png"/>&#13;
<h6><span class="label">Figure 8-9. </span>What inherited backgrounds would do to layout</h6>&#13;
</div></figure>&#13;
&#13;
<p>Note that the pattern restarts at the top left of every element,&#13;
including the links. This isn’t what most authors would want, and&#13;
this is why background properties are not inherited. If you do want this&#13;
particular effect for some reason, you can make it happen with a rule&#13;
like this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="o">*</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Alternatively, you could use the value <code>inherit</code> like this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;}</code>&#13;
<code class="o">*</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="nb">inherit</code><code class="p">;}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Following Good Background Practices" data-type="sect2"><div class="sect2" id="good-background-practices">&#13;
<h2>Following Good Background Practices</h2>&#13;
&#13;
<p>Images are <a data-primary="background images" data-secondary="specifying" data-type="indexterm" id="idm45176096447104"/>laid on top of whatever background color you specify. If your images aren’t tiled or have areas that are not opaque, the background will show through, blending its color with that of the semitransparent images. If the image fails to load, the background color specified will show instead of the image. For this reason, it’s always a good idea to specify a background color when using a background image, so that you’ll at least get a legible result if the image doesn’t appear.</p>&#13;
&#13;
<p>Background images can cause <a data-primary="accessibility issues" data-secondary="content/background contrast" data-type="indexterm" id="idm45176096444640"/>accessibility issues. For example, if you have an image of a clear blue sky as a background image with dark text, that is likely very legible. But what if there is a bird in the sky? If dark text lands on a dark part of the background, that text will not be legible. Adding a drop shadow to the text (see <a data-type="xref" href="ch15.html#text_properties">Chapter 15</a>) or a list semitransparent background color behind all the text can reduce the risk of illegibility.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Positioning Background Images" data-type="sect2"><div class="sect2" id="background-positioning">&#13;
<h2>Positioning Background Images</h2>&#13;
&#13;
<p>OK, so we can <a data-primary="backgrounds" data-secondary="positioning" data-type="indexterm" id="ix_background_position"/><a data-primary="background images" data-secondary="positioning" data-type="indexterm" id="ix_back_image_position"/><a data-primary="background-position property" data-type="indexterm" id="ix_back_position_prop"/>put images in the background of an element. How about positioning the image exactly where you want? No problem! The <code>background-position</code> property is here to help.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176096436288">&#13;
<h1>background-position</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>&lt;<em><code>position</code></em>&gt;#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>0% 0%</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>Block-level and replaced elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Percentages</strong></p></td>&#13;
<td><p>Refer to the corresponding point on both the element and the origin image (see explanation in <a data-type="xref" href="#percentage-values">“Percentage values”</a>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>The absolute length offsets, if &lt;<em><code>length</code></em>&gt; is specified; otherwise, percentage values</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>Yes</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<dl>&#13;
<dt>&lt;<em><code>position</code></em>&gt;</dt>&#13;
<dd>&#13;
<p>[ [ <code>left</code> | <code>center</code> | <code>right</code> | <code>top</code> | <code>bottom</code> | &lt;<em><code>percentage</code></em>&gt; | &lt;<em><code>length</code></em>&gt; ] | [ <code>left</code> | <code>center</code> | <code>right</code> | &lt;<em><code>percentage</code></em>&gt; | &lt;<em><code>length</code></em>&gt; ] [ <code>top</code> | <code>center</code> | <code>bottom</code> | <br/>&lt;<em><code>percentage</code></em>&gt; | &lt;<em><code>length</code></em>&gt; ] | [ <code>center</code> | [ <code>left</code> | <code>right</code> ] [ &lt;<em><code>percentage</code></em>&gt; | &lt;<em><code>length</code></em>&gt; ]? ] &amp;&amp; [ <code>center</code> | [ <code>top</code> | <code>bottom</code> ] [ &lt;<em><code>percentage</code></em>&gt; | &lt;<em><code>length</code></em>&gt; ]? ] ]</p>&#13;
</dd>&#13;
</dl>&#13;
</div></aside>&#13;
&#13;
<p>That value syntax looks horrific, but it isn’t; it’s just what happens when you try to formalize the fast-and-loose implementations of a new technology into a regular syntax and then layer even more features on top of that while trying to reuse parts of the old syntax. (So, OK, kind of horrific.) In practice, the syntax for <code>background-position</code> is simple, but the percent values can be a little difficult to wrap your head around.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Throughout <a data-primary="background-repeat property" data-type="indexterm" id="idm45176096389072"/>this section, we’ll be using the rule&#13;
<code>background-repeat: no-repeat</code> to prevent tiling of the background&#13;
image. You’re not imagining things: we haven’t talked about <code>background-repeat</code>&#13;
yet! For now, just accept that the rule&#13;
restricts the background to a single image. You’ll learn more details in <a data-type="xref" href="#background-repeating-or-lack-thereof">“Background Repeating (or Lack Thereof)”</a>.</p>&#13;
</div>&#13;
&#13;
<p>For example, we can center a background image in the <code>&lt;body&gt;</code> element as follows,&#13;
with the result depicted in <a data-type="xref" href="#cab_fig17">Figure 8-10</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(hazard-rad.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig17">&#13;
<img alt="css5 0810" src="assets/css5_0810.png"/>&#13;
<h6><span class="label">Figure 8-10. </span>Centering a single background image</h6>&#13;
</div></figure>&#13;
&#13;
<p>Here, we’ve placed a single image in the background and then&#13;
prevented it from being repeated with <code>background-repeat</code>. Every background that includes an&#13;
image starts with a single image. This starting image is called the&#13;
<em>origin image</em>.</p>&#13;
&#13;
<p>The placement of the origin image is accomplished with&#13;
<code>background-position</code>, and there are several ways to supply values for&#13;
this property. First off, we can use the keywords <code>top</code>, <code>bottom</code>,&#13;
<code>left</code>, <code>right</code>, and <code>center</code>. Usually, these appear in pairs, but (as&#13;
the previous example shows) this is not always true. We can also use length values, such as <code>50px</code> or <code>2cm</code>;&#13;
the combinations of keywords and length values, such as <code>right 50px bottom 2cm</code>;&#13;
and finally, percentage values, such as <code>43%</code>. Each type of value has a slightly different effect on the&#13;
placement of the background image.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Keywords" data-type="sect3"><div class="sect3" id="cab_keywords">&#13;
<h3>Keywords</h3>&#13;
&#13;
<p>The image placement keywords are easiest to understand. They have the&#13;
effects you’d expect from their names; for example, <code>top right</code> would&#13;
cause the origin image to be placed in the top-right corner of the&#13;
element’s background. Let’s use a small yin-yang symbol:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">right</code><code class="p">;}</code></pre>&#13;
&#13;
<p>This will place a nonrepeated origin image in the top-right corner of&#13;
each paragraph’s background, and the result would be exactly the same if the position were declared as <code>right top</code>.</p>&#13;
&#13;
<p>This is because position keywords can appear in any order, as long as there are no more&#13;
than two of them—one for the horizontal and one for the vertical. If you&#13;
use two horizontal (<code>right right</code>) or two vertical (<code>top top</code>) keywords,&#13;
the whole value is ignored.</p>&#13;
&#13;
<p>If only one keyword appears, the other is assumed to be <code>center</code>.&#13;
So if you want an image to appear in the top center of every paragraph,&#13;
you need only declare this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code><code class="p">;}</code> <code class="c">/* same as 'top center' */</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Percentage values" data-type="sect3"><div class="sect3" id="percentage-values">&#13;
<h3>Percentage values</h3>&#13;
&#13;
<p>Percentage values are closely related to the keywords, although they&#13;
behave in a more sophisticated way. Let’s say that you want to center an&#13;
origin image within its element by using percentage values. That’s straightforward enough:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(chrome.jpg)</code><code class="p">;</code>&#13;
   <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
   <code class="k">background-position</code><code class="o">:</code> <code class="m">50%</code> <code class="m">50%</code><code class="p">;}</code></pre>&#13;
&#13;
<p>This places the origin image such that its center is aligned with the center of its element’s background. In other words, the percentage values apply to both the element and the origin image. The pixel of the image that is 50% from the top and 50% from the left in the image is placed 50% from the top and 50% from the left of the element on which it was set.</p>&#13;
&#13;
<p>To understand what that means, let’s examine the process in closer&#13;
detail. When you center an origin image in an element’s background, the&#13;
point in the image that can be described as <code>50% 50%</code> (the center) is&#13;
lined up with the point in the background that can be described the same&#13;
way. If the image is placed at <code>0% 0%</code>, its top-left corner is placed in&#13;
the top-left corner of the element’s background. Using <code>100% 100%</code> causes the&#13;
bottom-right corner of the origin image to go into the bottom-right corner of the background. <a data-type="xref" href="#cab_fig19">Figure 8-11</a> contains examples of those values, as well as a few others, with the points of alignment for each located at the center of the concentric rings.</p>&#13;
&#13;
<p>Thus, if you want to place a single origin image a third of the way&#13;
across the background and two-thirds of the way down, your declaration&#13;
would be as follows:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
   <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
   <code class="k">background-position</code><code class="o">:</code> <code class="m">33%</code> <code class="m">66%</code><code class="p">;}</code></pre>&#13;
&#13;
<p>With these rules, the point in the origin image that is one-third across&#13;
and two-thirds down from the top-left corner of the image will be&#13;
aligned with the point that is farthest from the top-left corner of the&#13;
background. Note that the horizontal value <em>always</em> comes first with&#13;
percentage values. If you were to switch the percentages in the&#13;
preceding example, the point in the image that is two-thirds from the left side of the image and one-third of the way down from the top would be placed two-thirds of the way&#13;
across the background and one-third of the way down.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig19">&#13;
<img alt="css5 0811" src="assets/css5_0811.png"/>&#13;
<h6><span class="label">Figure 8-11. </span>Various percentage positions</h6>&#13;
</div></figure>&#13;
&#13;
<p>If you supply only one percentage value, the single value supplied is&#13;
taken to be the horizontal value, and the vertical is assumed to be&#13;
<code>50%</code>. For example:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="m">25%</code><code class="p">;}</code></pre>&#13;
&#13;
<p>The origin image is placed one-quarter of the way across the paragraph’s&#13;
background and halfway down it, as if <code>background-position: 25% 50%;</code> had been set.</p>&#13;
&#13;
<p><a data-type="xref" href="#cab_table02">Table 8-1</a> gives a breakdown of keyword and percentage equivalencies.</p>&#13;
<table class="lined" id="cab_table02">&#13;
<caption><span class="label">Table 8-1. </span>Positional equivalents</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Keyword(s)</th>&#13;
<th>Equivalent keywords</th>&#13;
<th>Equivalent percentages</th>&#13;
</tr>&#13;
</thead>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><code>center</code></td>&#13;
<td><code>center center</code></td>&#13;
<td><code>50% 50%</code><br/><code>50%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>right</code></td>&#13;
<td><code>center right</code><br/><code>right center</code></td>&#13;
<td><code>100% 50%</code><br/><code>100%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>left</code></td>&#13;
<td><code>center left</code><br/><code>left center</code></td>&#13;
<td><code>0% 50%</code><br/><code>0%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>top</code></td>&#13;
<td><code>top center</code><br/><code>center top</code></td>&#13;
<td><code>50% 0%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>bottom</code></td>&#13;
<td><code>bottom center</code><br/><code>center bottom</code></td>&#13;
<td><code>50% 100%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>top left</code></td>&#13;
<td><code>left top</code></td>&#13;
<td><code>0% 0%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>top right</code></td>&#13;
<td><code>right top</code></td>&#13;
<td><code>100% 0%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>bottom right</code></td>&#13;
<td><code>right bottom</code></td>&#13;
<td><code>100% 100%</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>bottom left</code></td>&#13;
<td><code>left bottom</code></td>&#13;
<td><code>0% 100%</code></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>As the property table in <a data-type="xref" href="#background-positioning">“Positioning Background Images”</a> showed, the default values for <code>background-position</code>&#13;
are <code>0% 0%</code>, which is functionally the same as <code>top left</code>. This is why,&#13;
unless you set different values for the position, background images&#13;
always start tiling from the top-left corner of the element’s&#13;
background.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Length values" data-type="sect3"><div class="sect3" id="length-values">&#13;
<h3>Length values</h3>&#13;
&#13;
<p>Finally, we turn to <a data-primary="offsets" data-secondary="length values" data-type="indexterm" id="idm45176096099248"/>length values for positioning. When you supply&#13;
lengths for the position of the origin image, they are interpreted as&#13;
offsets from the top-left corner of the element’s background. The offset&#13;
point is the top-left corner of the origin image; thus, if you set the&#13;
values <code>20px 30px</code>, the top-left corner of the origin image will be 20&#13;
pixels to the right of, and 30 pixels below, the top-left corner of the&#13;
element’s background, as shown (along with a few other length examples)&#13;
in <a data-type="xref" href="#cab_fig21">Figure 8-12</a>. As with percentages, the horizontal value comes first with length values.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig21">&#13;
<img alt="css5 0812" src="assets/css5_0812.png"/>&#13;
<h6><span class="label">Figure 8-12. </span>Offsetting the background image by using length measures</h6>&#13;
</div></figure>&#13;
&#13;
<p>This is quite different from percentage values because the offset is&#13;
from one top-left corner to another. In other words, the top-left&#13;
corner of the origin image lines up with the point specified in the&#13;
<code>background-position</code> declaration.</p>&#13;
&#13;
<p>You can combine length and percentage values to get a&#13;
“best of both worlds” effect. Let’s say you need to have a background&#13;
image that is all the way to the right side of the background and 10&#13;
pixels down from the top. As always, the&#13;
horizontal value comes first:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="m">100%</code> <code class="m">10px</code><code class="p">;</code>&#13;
    <code class="k">border</code><code class="o">:</code> <code class="m">1px</code> <code class="nb">dotted</code> <code class="nb">gray</code><code class="p">;}</code></pre>&#13;
&#13;
<p>For that matter, you can get the same result by&#13;
using <code>right 10px</code>, since you’re allowed to mix keywords with lengths&#13;
and percentages. The syntax enforces axis order when&#13;
using nonkeyword values; if you use a length or&#13;
percentage value, the horizontal value must <em>always</em> come first, and the&#13;
vertical must <em>always</em> come second. That means <code>right 10px</code> is fine,&#13;
whereas <code>10px right</code> is invalid and will be ignored (because <code>right</code> is not a valid vertical keyword).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Negative values" data-type="sect3"><div class="sect3" id="negative-values">&#13;
<h3>Negative values</h3>&#13;
&#13;
<p>If you’re using lengths or percentages, you can use negative values to&#13;
pull the origin image outside of the element’s background. Consider a document with a&#13;
very large yin-yang symbol for a background. What if we want only part of it visible in&#13;
the top-left corner of the element’s background? No problem, at least in&#13;
theory.</p>&#13;
&#13;
<p>Assuming that the origin image is 300 pixels tall by 300 pixels wide and that only the bottom-right third of the image should be visible, we get the desired effect (shown in <a data-type="xref" href="#cab_fig23">Figure 8-13</a>) like this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="m">-200px</code> <code class="m">-200px</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig23">&#13;
<img alt="css5 0813" src="assets/css5_0813.png"/>&#13;
<h6><span class="label">Figure 8-13. </span>Using negative length values to position the origin image</h6>&#13;
</div></figure>&#13;
&#13;
<p>Or, say you want just the right half of the origin image to be visible and vertically&#13;
centered within the element’s background area:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="m">-150px</code> <code class="m">50%</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Negative values will come into play later, as they are useful in creating gorgeous backgrounds; see <a data-type="xref" href="ch09.html#conic-gradients">“Conic Gradients”</a>.</p>&#13;
&#13;
<p>Negative percentages are also possible, although they are somewhat&#13;
interesting to calculate. The origin image and the element are likely to&#13;
be very different sizes, for one thing, and that can lead to unexpected&#13;
effects. Consider, for example, the situation created by the following&#13;
rule, illustrated in <a data-type="xref" href="#cab_fig24">Figure 8-14</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(pix/yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="m">-10%</code> <code class="m">-10%</code><code class="p">;</code>&#13;
    <code class="k">width</code><code class="o">:</code> <code class="m">500px</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig24">&#13;
<img alt="css5 0814" src="assets/css5_0814.png"/>&#13;
<h6><span class="label">Figure 8-14. </span>Varying effects of negative percentage values</h6>&#13;
</div></figure>&#13;
&#13;
<p>The rule calls for the point outside the origin image defined by&#13;
<code>-10% -10%</code> to be aligned with a similar point for each paragraph. The&#13;
image is 300 × 300 pixels, so we know its alignment point can be&#13;
described as 30 pixels above the top of the image, and 30 pixels to the&#13;
left of its left edge (effectively <code>-30px</code> and <code>-30px</code>). The paragraph&#13;
elements are all the same width (<code>500px</code>), so the horizontal alignment&#13;
point is 50 pixels to the left of the left edge of their backgrounds.&#13;
This means that each origin image’s left edge will be 20 pixels to the&#13;
left of the left padding edge of the paragraphs. This is because the&#13;
<code>-30px</code> alignment point of the images lines up with the <code>-50px</code> point&#13;
for the paragraphs. The difference between the two is 20 pixels.</p>&#13;
&#13;
<p>The paragraphs have different heights, however, so the vertical&#13;
alignment point changes for each paragraph. If a paragraph’s background&#13;
area is 300 pixels high, to pick a semi-random example, then the top of&#13;
the origin image will line up exactly with the top of the element’s&#13;
background, because both will have vertical alignment points of <code>-30px</code>.&#13;
If a paragraph is 50 pixels tall, its alignment point would be&#13;
<code>-5px</code>, and the top of the origin image will actually be 25 pixels&#13;
<em>below</em> the top of the background. This is why you can see all the tops&#13;
of the background images in <a data-type="xref" href="#cab_fig24">Figure 8-14</a>—the paragraphs are shorter than&#13;
the background image.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Changing the offset edges" data-type="sect3"><div class="sect3" id="changing-the-offset-edges">&#13;
<h3>Changing the offset edges</h3>&#13;
&#13;
<p>It’s time for a confession: throughout this whole discussion of&#13;
background positioning, we’ve been keeping two facts from you. We acted&#13;
as though the value of <code>background-position</code> could have no more than two&#13;
keywords, and that all <a data-primary="offsets" data-secondary="changing edges" data-type="indexterm" id="ix_offset_position"/>offsets were always made from the top-left corner&#13;
of the background area.</p>&#13;
&#13;
<p>That was originally the case with CSS but hasn’t been true for a while. When we include four keywords, or two keywords and two length or percentage values in a very specific pattern, we can set the edge from which the background image should be offset.</p>&#13;
&#13;
<p>Let’s start with a simple example: placing the origin image a quarter of the way across and 30 pixels down from the top-left corner. Using what we saw in previous sections, that would be the following:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-position</code><code class="o">:</code> <code class="m">25%</code> <code class="m">30px</code><code class="p">;</code></pre>&#13;
&#13;
<p>Now let’s do the same thing with this four-part syntax:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-position</code><code class="o">:</code> <code class="nb">left</code> <code class="m">25%</code> <code class="nb">top</code> <code class="m">30px</code><code class="p">;</code></pre>&#13;
&#13;
<p>This four-part value says, “From the <code>left</code> edge, have a&#13;
horizontal offset of <code>25%</code>; from the <code>top</code> edge, have an offset of&#13;
<code>30px</code>.”</p>&#13;
&#13;
<p>Great, so that’s a more verbose way of getting the default behavior. Now let’s change the code so the origin image is placed a quarter of the way across and 30 pixels up from the bottom-right corner, as shown in <a data-type="xref" href="#cab_fig25">Figure 8-15</a> (which assumes no repeating of the background image, for clarity’s sake):</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-position</code><code class="o">:</code> <code class="nb">right</code> <code class="m">25%</code> <code class="n">bottom</code> <code class="m">30px</code><code class="p">;</code></pre>&#13;
&#13;
<p>Here, we have a value that means “from the <code>right</code> edge, have a&#13;
horizontal offset of <code>25%</code>; from the <code>bottom</code> edge, have an offset of <code>30px</code>.”</p>&#13;
&#13;
<p>Thus, the general pattern is <em>edge keyword, offset distance, edge&#13;
keyword, offset distance</em>. You can mix the order of horizontal and&#13;
vertical information; that is, <code>bottom 30px right 25%</code> works just as&#13;
well as <code>right 25% bottom 30px</code>. However, you cannot omit either of the&#13;
edge keywords; <code>30px right 25%</code> is invalid and will be ignored.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig25">&#13;
<img alt="css5 0815" src="assets/css5_0815.png"/>&#13;
<h6><span class="label">Figure 8-15. </span>Changing the offset edges for the origin image</h6>&#13;
</div></figure>&#13;
&#13;
<p>That said, you can omit an offset distance when you want it to be 0.&#13;
So <code>right</code> <code><span class="keep-together">bottom</span></code> <code>30px</code> would put the origin image against the right edge and 30 pixels up from the bottom of the background area, whereas <code>right 25% bottom</code> would place the origin image a quarter of the way across from the right edge and up against the bottom. These are both illustrated in <a data-type="xref" href="#cab_fig26">Figure 8-16</a>.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig26">&#13;
<img alt="css5 0816" src="assets/css5_0816.png"/>&#13;
<h6><span class="label">Figure 8-16. </span>Inferred zero-length offsets</h6>&#13;
</div></figure>&#13;
&#13;
<p>You can define only the edges of an element as offset&#13;
bases, not the center. A value like <code>center 25% center 25px</code> will be&#13;
ignored.</p>&#13;
&#13;
<p>If you have multiple background images and only one background position, all the images will be placed in the same location. If you want to place them in different spots, provide a comma-separated list of background positions. They will be applied to the images in order. If you have more images than position values, the positions get repeated (as we’ll explore further later in the chapter).<a data-primary="" data-startref="ix_back_position_prop" data-type="indexterm" id="idm45176095813440"/><a data-primary="" data-startref="ix_offset_position" data-type="indexterm" id="idm45176095812464"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Changing the positioning box" data-type="sect3"><div class="sect3" id="changing-the-positioning-box">&#13;
<h3>Changing the positioning box</h3>&#13;
&#13;
<p>Now you know how to <a data-primary="boxes" data-secondary="background image position" data-type="indexterm" id="ix_box_back_image_pos"/>add an image to the background, and can even change where the origin image is placed. <a data-primary="background-origin property" data-type="indexterm" id="ix_back_origin_prop"/>But what if we want to place it with respect to the border edge, or to the outer content edge, instead of to the default outer padding edge? We can use the property&#13;
<code>background-origin</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176095806544">&#13;
<h1>background-origin</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>[ <code>border-box</code> | <code>padding-box</code> | <code>content-box</code> ]#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>padding-box</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As declared</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></aside>&#13;
&#13;
<p>This property probably looks similar to <code>background-clip</code>, and with good reason, but its effect is distinct. Whereas <code>background-clip</code> defines the <em>background painting area</em>, <code>background-origin</code> defines  the edge that’s used to determine placement of the origin image. This is also known as <em>defining the background positioning area</em>.</p>&#13;
&#13;
<p>The default, <code>padding-box</code>, means that the top-left corner of the origin image will be placed in the top-left corner of the outer edge of the element’s padding box (if <code>background-position</code> hasn’t been changed from its default of <code>top left</code> or <code>0 0</code>), which is just inside the border area.</p>&#13;
&#13;
<p>If you use the value <code>border-box</code>, the top-left corner of a <code>background-position: 0 0</code>&#13;
origin image will go into the top-left corner of the padding area.&#13;
The border, if any, will be drawn over the origin&#13;
image (assuming the background painting area wasn’t restricted to be&#13;
<code>padding-box</code> or <code>content-box</code>, that is).</p>&#13;
&#13;
<p>With <code>content-box</code>, you shift the origin image to the top-left corner of the content area. The following code depicts the three options,&#13;
illustrated in <a data-type="xref" href="#cab_fig27">Figure 8-17</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code><code class="o">[</code><code class="nt">id</code><code class="o">]</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">navy</code><code class="p">;</code> <code class="k">background</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;</code>&#13;
         <code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
         <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
         <code class="k">padding</code><code class="o">:</code> <code class="m">1em</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="m">0.5em</code> <code class="nb">dashed</code><code class="p">;}</code>&#13;
<code class="nf">#ex01</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">border-box</code><code class="p">;}</code>&#13;
<code class="nf">#ex02</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code>  <code class="c">/* default value */</code>&#13;
<code class="nf">#ex03</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;}</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig27">&#13;
<img alt="css5 0817" src="assets/css5_0817.png"/>&#13;
<h6><span class="label">Figure 8-17. </span>The three types of background origins</h6>&#13;
</div></figure>&#13;
&#13;
<p>Remember that this “placed in the top left” behavior is the default&#13;
behavior, which you can change with <code>background-position</code>.&#13;
The position of the origin image is calculated with respect to the box defined by&#13;
<code>background-origin</code>: the border edge, the padding edge, or the&#13;
content edge. Consider, for example, this variant of our previous&#13;
example, which is illustrated in <a data-type="xref" href="#cab_fig28">Figure 8-18</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code><code class="o">[</code><code class="nt">id</code><code class="o">]</code> <code class="p">{</code><code class="k">color</code><code class="o">:</code> <code class="nb">navy</code><code class="p">;</code> <code class="k">background</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;</code>&#13;
         <code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang)</code><code class="p">;</code>&#13;
         <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
         <code class="k">background-position</code><code class="o">:</code> <code class="n">bottom</code> <code class="nb">right</code><code class="p">;</code>&#13;
         <code class="k">padding</code><code class="o">:</code> <code class="m">1em</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="m">0.5em</code> <code class="nb">dashed</code><code class="p">;}</code>&#13;
<code class="nf">#ex01</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">border-box</code><code class="p">;}</code>&#13;
<code class="nf">#ex02</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code>  <code class="c">/* default value */</code>&#13;
<code class="nf">#ex03</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;}</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig28">&#13;
<img alt="css5 0818" src="assets/css5_0818.png"/>&#13;
<h6><span class="label">Figure 8-18. </span>The three types of background origins, redux</h6>&#13;
</div></figure>&#13;
&#13;
<p>Things can get <em>really</em> interesting if you’ve explicitly&#13;
defined your background origin and clipping to be different boxes.&#13;
Imagine you have the origin placed with respect to the padding edge but&#13;
the background clipped to the content area, or vice versa. The following code results in <a data-type="xref" href="#cab_fig29">Figure 8-19</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"> <code class="nf">#ex01</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;</code>&#13;
        <code class="k">background-clip</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;}</code>&#13;
 <code class="nf">#ex02</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;</code>&#13;
        <code class="k">background-clip</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig29">&#13;
<img alt="css5 0819" src="assets/css5_0819.png"/>&#13;
<h6><span class="label">Figure 8-19. </span>When origin and clipping diverge</h6>&#13;
</div></figure>&#13;
&#13;
<p>In the first example, the edges of the origin image&#13;
are clipped because it is positioned with respect to the padding&#13;
box, but the background painting area has been clipped at the edge of&#13;
the content box. In the second example, the origin image is placed with&#13;
respect to the content box, but the painting area extends into the&#13;
padding box. Thus, the origin image is visible all the way down to the&#13;
bottom padding edge, even though its top is not placed against the top&#13;
padding edge.<a data-primary="" data-startref="ix_back_image_position" data-type="indexterm" id="idm45176095542992"/><a data-primary="" data-startref="ix_background_position" data-type="indexterm" id="idm45176095542016"/><a data-primary="" data-startref="ix_position_back_image" data-type="indexterm" id="idm45176095541072"/><a data-primary="" data-startref="ix_position_background" data-type="indexterm" id="idm45176095540128"/><a data-primary="" data-startref="ix_back_origin_prop" data-type="indexterm" id="idm45176095564384"/><a data-primary="" data-startref="ix_box_back_image_pos" data-type="indexterm" id="idm45176095563440"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Background Repeating (or Lack Thereof)" data-type="sect2"><div class="sect2" id="background-repeating-or-lack-thereof">&#13;
<h2>Background Repeating (or Lack Thereof)</h2>&#13;
&#13;
<p>Viewports <a data-primary="background-repeat property" data-type="indexterm" id="ix_back_repeat_prop"/><a data-primary="repeating elements" data-secondary="background images" data-type="indexterm" id="ix_repeat_back_image"/><a data-primary="background images" data-secondary="repeating" data-type="indexterm" id="ix_back_image_repeat"/>come in an infinite number of sizes. <a data-primary="tiling background images" data-type="indexterm" id="ix_tiling_back_image"/>Fortunately, we can tile background images, meaning we don’t need to create backgrounds of multiple sizes or serve large-format (and file size) wallpaper to  small-screen low-bandwidth devices.  When you want to repeat an image in a specific way, or when you don’t want to repeat it at all, we have <code>background-repeat</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176095555424">&#13;
<h1>background-repeat</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>&lt;<em><code>repeat-style</code></em>&gt;#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>repeat</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As specified</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<dl>&#13;
<dt>&lt;<em><code>repeat-style</code></em>&gt;</dt>&#13;
<dd>&#13;
<p><code>repeat-x</code> | <code>repeat-y</code> | [<code>repeat</code> | <code>space</code> | <code>round</code> | <code>no-repeat</code>]{1,2}</p>&#13;
</dd>&#13;
</dl>&#13;
</div></aside>&#13;
&#13;
<p>The value syntax for <code>background-repeat</code> looks a bit complicated at&#13;
first glance, but it’s fairly straightforward. In fact, at its&#13;
base, it uses just four values: <code>repeat</code>, <code>no-repeat</code>, <code>space</code>, and&#13;
<code>round</code>. The other two, <code>repeat-x</code> and <code>repeat-y</code>, are considered shorthand for combinations of the others. <a data-type="xref" href="#cab_table03">Table 8-2</a> shows how they break down.</p>&#13;
&#13;
<p>If two values are given, the first applies in the horizontal&#13;
direction, and the second in the vertical. If there is just one value,&#13;
it applies in both the horizontal and vertical directions, with the&#13;
exception, as shown in <a data-type="xref" href="#cab_table03">Table 8-2</a>, of <code>repeat-x</code> and <code>repeat-y</code>.</p>&#13;
<table id="cab_table03">&#13;
<caption><span class="label">Table 8-2. </span>Repeat keyword equivalents</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Single keyword</th><th>Equivalent keywords</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
&#13;
<tr>&#13;
<td><code>repeat-x</code></td>&#13;
<td><code>repeat no-repeat</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>repeat-y</code></td>&#13;
<td><code>no-repeat repeat</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>repeat</code></td>&#13;
<td><code>repeat repeat</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>no-repeat</code></td>&#13;
<td><code>no-repeat no-repeat</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>space</code></td>&#13;
<td><code>space space</code></td>&#13;
</tr>&#13;
<tr>&#13;
<td><code>round</code></td>&#13;
<td><code>round round</code></td>&#13;
</tr>&#13;
&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>As you might guess, <code>repeat</code> by itself causes the image to tile infinitely in all directions. The <code>repeat-x</code> and <code>repeat-y</code> values cause the image to be repeated in the horizontal or vertical directions, respectively, and <code>no-repeat</code> prevents the image from tiling along a given axis.  If you have more than one image, each with different repeat patterns, provide a comma-separated list of values. We said “all directions” rather than “both directions” because a <code>background-position</code> may have put the initial repeating image somewhere other than the top-left corner of the clip box. With <code>repeat</code>, the image repeats in all directions. By default, the background image will start from the top-left corner of an element. Therefore, the following rules will have the effect shown in&#13;
<a data-type="xref" href="#cab_fig30">Figure 8-20</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-y</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig30">&#13;
<img alt="css5 0820" src="assets/css5_0820.png"/>&#13;
<h6><span class="label">Figure 8-20. </span>Tiling the background image vertically</h6>&#13;
</div></figure>&#13;
&#13;
<p>Let’s assume, though, that you want the image to repeat only across the top&#13;
of the document. Rather than creating a special image with a whole lot&#13;
of blank space underneath, you can just make a small change to that&#13;
last rule:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-x</code><code class="p">;}</code></pre>&#13;
&#13;
<p>As <a data-type="xref" href="#cab_fig31">Figure 8-21</a> shows, the image is repeated along the x-axis (horizontally) from its starting position—in this case, the top-left&#13;
corner of the <code>&lt;body&gt;</code> element’s background area.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig31">&#13;
<img alt="css5 0821" src="assets/css5_0821.png"/>&#13;
<h6><span class="label">Figure 8-21. </span>Tiling the background image horizontally</h6>&#13;
</div></figure>&#13;
&#13;
<p>Finally, you may not want to repeat the background image. In this&#13;
case, use the value &#13;
<span class="keep-together"><code>no-repeat</code>:</span></p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;}</code></pre>&#13;
&#13;
<p>With this tiny image, <code>no-repeat</code> may not seem terribly useful, but it is the most common value, and unfortunately not the default. Let’s try it again with a much bigger symbol. The following code results in <a data-type="xref" href="#cab_fig32">Figure 8-22</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig32">&#13;
<img alt="css5 0822" src="assets/css5_0822.png"/>&#13;
<h6><span class="label">Figure 8-22. </span>Placing a single large background image</h6>&#13;
</div></figure>&#13;
&#13;
<p>The ability to control the repeat direction dramatically expands the&#13;
range of possible effects. For example, let’s say you want a triple&#13;
border on the left side of each <code>&lt;h1&gt;</code> element in your document. You can&#13;
take that concept further and decide to set a wavy border along the top&#13;
of each <code>&lt;h2&gt;</code> element. The image is colored in such a way that it blends&#13;
with the background color and produces the wavy effect shown in <a data-type="xref" href="#cab_fig33">Figure 8-23</a>, which is the result of the following code:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">h1</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(triplebor.gif)</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-y</code><code class="p">;}</code>&#13;
<code class="nt">h2</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(wavybord.gif)</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-x</code><code class="p">;</code>&#13;
    <code class="k">background-color</code><code class="o">:</code> <code class="m">#CCC</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig33">&#13;
<img alt="css5 0823" src="assets/css5_0823.png"/>&#13;
<h6><span class="label">Figure 8-23. </span>Bordering elements with background images</h6>&#13;
</div></figure>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>There are better ways to create a wavy-border effect—notably, the border image properties explored in <a data-type="xref" href="ch07.html#image-borders">“Image Borders”</a>.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Positioning images that repeat" data-type="sect3"><div class="sect3" id="repeating-and-positioning">&#13;
<h3>Positioning images that repeat</h3>&#13;
&#13;
<p>In the <a data-primary="background images" data-secondary="positioning" data-type="indexterm" id="idm45176095296560"/><a data-primary="positioning" data-secondary="background images" data-type="indexterm" id="idm45176095295552"/>previous section, we explored the values <code>repeat-x</code>, <code>repeat-y</code>,&#13;
and <code>repeat</code>, and how they affect the tiling of background images. In&#13;
each case, the tiling pattern always started from the top-left corner of&#13;
the element’s background. That’s because, as you’ve seen, the default&#13;
values for <code>background-position</code> are <code>0% 0%</code>. Given that you know how to&#13;
change the position of the origin image, you need to know how user&#13;
agents will handle it.</p>&#13;
&#13;
<p>It will be easier to show an example and then explain it. Consider the&#13;
following markup, which is illustrated in <a data-type="xref" href="#cab_fig34">Figure 8-24</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">p</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
    <code class="k">border</code><code class="o">:</code> <code class="m">1px</code> <code class="nb">dotted</code> <code class="nb">gray</code><code class="p">;}</code>&#13;
<code class="nt">p</code><code class="nc">.c1</code> <code class="p">{</code><code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-y</code><code class="p">;}</code>&#13;
<code class="nt">p</code><code class="nc">.c2</code> <code class="p">{</code><code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-x</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig34">&#13;
<img alt="css5 0824" src="assets/css5_0824.png"/>&#13;
<h6><span class="label">Figure 8-24. </span>Centering the origin image and repeating it</h6>&#13;
</div></figure>&#13;
&#13;
<p>So there you have it: stripes running through the center of the&#13;
elements. It may look wrong, but it isn’t.</p>&#13;
&#13;
<p>These examples are correct because the origin image has&#13;
been placed in the center of the first <code>&lt;p&gt;</code> element. In the first example,&#13;
the image is tiled along&#13;
the y-axis <em>in both</em> &#13;
<span class="keep-together"><em>directions</em>—up</span> <em>and</em> down, starting from the origin image at the center.&#13;
In the second example, the images are tiled along the x-axis,&#13;
starting from the origin image, and repeated to both the right <em>and</em>&#13;
left. You may notice the first and last repetitions are slightly cut off,&#13;
 whereas when we started with <code>background-position: 0 0</code>,  only the last image, or rightmost and bottommost images, risked being clipped.</p>&#13;
&#13;
<p>Setting an image in the center of the <code>&lt;p&gt;</code> and then letting it&#13;
fully repeat will cause it to tile in all <em>four</em> directions: up, down,&#13;
left, and right. The only difference <code>background-position</code> makes is in&#13;
where the tiling starts.  When the background&#13;
image repeats from the center, the grid of&#13;
yin-yang symbols is centered within the element, resulting in consistent&#13;
clipping along the edges. When the tiling begins&#13;
at the top-left corner of the padding area, the clipping is not&#13;
consistent around the edges.&#13;
The <code>spacing</code> and <code>rounding</code> values, on the other hand, prevent image clipping but have their own drawbacks.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>In case you’re wondering, CSS has no single-direction values&#13;
such as <code>repeat-left</code> or <code>repeat-up</code>.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Spacing and rounding repeat patterns" data-type="sect3"><div class="sect3" id="spacing-and-rounding">&#13;
<h3>Spacing and rounding repeat patterns</h3>&#13;
&#13;
<p>Beyond the <a data-primary="spacing" data-secondary="background images" data-type="indexterm" id="ix_spacing_back_image"/><a data-primary="background images" data-secondary="spacing" data-type="indexterm" id="ix_back_image_space"/>basic tiling patterns you’ve seen thus far,&#13;
<code>background-repeat</code> has the ability to exactly fill out the background&#13;
area. Consider, for example, what happens if we use the value <code>space</code> to&#13;
define the tiling pattern, as shown in <a data-type="xref" href="#cab_fig36">Figure 8-25</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code><code class="nf">#example</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
            <code class="k">background-repeat</code><code class="o">:</code> <code class="n">space</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig36">&#13;
<img alt="css5 0825" src="assets/css5_0825.png"/>&#13;
<h6><span class="label">Figure 8-25. </span>Tiling the background image with filler space</h6>&#13;
</div></figure>&#13;
&#13;
<p>You’ll notice background images in each of the four corners of the element. Furthermore, the images are spaced out so that they occur at regular intervals in both the horizontal and vertical directions.</p>&#13;
&#13;
<p>This is what <code>space</code> does: it determines the number of repetitions that will fully fit along a given axis, and then spaces them out at regular intervals so that the repetitions go from one edge of the background to another. This doesn’t guarantee a regular square grid, with intervals that are all the same both horizontally and vertically. It just means that you’ll have what look like columns and rows of background images. While no image will be clipped, unless there isn’t enough room for even one iteration (as can happen with very large background images), this value often results in different horizontal and vertical separations. <a data-type="xref" href="#cab_fig37">Figure 8-26</a> shows some examples.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig37">&#13;
<img alt="css5 0826" src="assets/css5_0826.png"/>&#13;
<h6><span class="label">Figure 8-26. </span>Tiling with different intervals showing <code>background-repeat: space</code> on &#13;
<span class="keep-together">elements</span> of different sizes</h6>&#13;
</div></figure>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Keep in mind that any background color, or the “backdrop” of the element (that is, the combined backgrounds of the element’s ancestors) will show through the gaps between <code>space</code>-separated background images.</p>&#13;
</div>&#13;
&#13;
<p>What happens if you have a really big image that won’t fit more than once, or even once, along the given axis? That image is drawn once, placed as determined by the value of <code>background-position</code>, and clipped as necessary. The flip side is that if more than one repetition of <span class="keep-together"> the image</span> will fit along an axis,&#13;
the value of <code>background-position</code> is ignored along that axis. The following code, for example, displays <a data-type="xref" href="#cab_fig38">Figure 8-27</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code><code class="nf">#example</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
            <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
            <code class="k">background-repeat</code><code class="o">:</code> <code class="n">space</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig38">&#13;
<img alt="css5 0827" src="assets/css5_0827.png"/>&#13;
<h6><span class="label">Figure 8-27. </span>Spacing along one axis but not the other</h6>&#13;
</div></figure>&#13;
&#13;
<p>Notice that the images are spaced horizontally, and thus override the&#13;
<code>center</code> position along that axis, but are centered vertically and not spaced (because there isn’t enough room to do so). That’s&#13;
the effect of <code>space</code> overriding <code>center</code> along one axis but not the&#13;
other.</p>&#13;
&#13;
<p>By contrast, the <a data-primary="background images" data-secondary="rounding" data-type="indexterm" id="idm45176095140432"/><a data-primary="rounding corners" data-type="indexterm" id="idm45176095139424"/>value <code>round</code> will most likely result in scaling&#13;
of the background image as it is repeated, <em>and</em> (strangely enough)&#13;
will not override <code>background-position</code>. If an image won’t quite repeat&#13;
so that it goes from edge to edge of the background, that image will be&#13;
scaled up <em>or</em> down to make it fit a whole number of times.</p>&#13;
&#13;
<p>Furthermore, the images can be <a data-primary="scaling factor" data-type="indexterm" id="idm45176095136544"/>scaled differently along each axis. The <code>round</code> value is the only background property value that can alter an image’s intrinsic aspect ratio automatically if needed. While <code>background-size</code> can also lead to a change in the aspect ratio, distorting the image, this happens only by explicit direction from the author.&#13;
You can see an example in <a data-type="xref" href="#cab_fig39">Figure 8-28</a>, which is the result of the following code:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
      <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">left</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="n">round</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig39">&#13;
<img alt="css5 0828" src="assets/css5_0828.png"/>&#13;
<h6><span class="label">Figure 8-28. </span>Tiling the background image with scaling</h6>&#13;
</div></figure>&#13;
&#13;
<p>Note that if you have a background 850 pixels wide and a horizontally&#13;
rounded image that’s 300 pixels wide, a browser can decide to use&#13;
three images and scale them down to fit three across into the 850-pixel&#13;
area (thus making each instance of the image 283.333 pixels wide). With&#13;
<code>space</code>, the browser would have to use two images and put 250 pixels of space&#13;
between them, but <code>round</code> is not so constrained.</p>&#13;
&#13;
<p>Here’s the interesting wrinkle: while <code>round</code> will resize the images so that you can fit a whole number of them into the background,&#13;
it will <em>not</em> move them to make sure that they actually touch the edges&#13;
of the background. The only way to make sure your&#13;
repeating pattern fits and no background images are clipped is to put&#13;
the origin image in a corner. If the origin image is anywhere <span class="keep-together">else,</span> clipping will occur. The following code shows an example, illustrated in <a data-type="xref" href="#cab_fig40">Figure 8-29</a>:<a data-primary="" data-startref="ix_back_image_space" data-type="indexterm" id="idm45176095088848"/><a data-primary="" data-startref="ix_spacing_back_image" data-type="indexterm" id="idm45176095087872"/></p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
      <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="n">round</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig40">&#13;
<img alt="css5 0829" src="assets/css5_0829.png"/>&#13;
<h6><span class="label">Figure 8-29. </span>Rounded background images that are clipped</h6>&#13;
</div></figure>&#13;
&#13;
<p>The images are still scaled so that they would fit into the background&#13;
positioning area a whole number of times. They just aren’t repositioned&#13;
to actually do so. Thus, if you’re going to use <code>round</code> and don’t&#13;
want to have any clipped background tiles, make sure you’re starting&#13;
from one of the four corners (and make sure the background positioning&#13;
and painting areas are the same; see <a data-type="xref" data-xrefstyle="select:nopage" href="#tiling-and-clipping">“Tiling and clipping repeated backgrounds”</a> for more).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Tiling and clipping repeated backgrounds" data-type="sect3"><div class="sect3" id="tiling-and-clipping">&#13;
<h3>Tiling and clipping repeated backgrounds</h3>&#13;
&#13;
<p>As you may <a data-primary="background-clip property" data-type="indexterm" id="idm45176095050960"/><a data-primary="background-origin property" data-type="indexterm" id="idm45176095050256"/><a data-primary="background images" data-secondary="clipping" data-type="indexterm" id="idm45176095049616"/><a data-primary="backgrounds" data-secondary="clipping" data-type="indexterm" id="idm45176095048672"/><a data-primary="clipping" data-secondary="backgrounds" data-type="indexterm" id="idm45176095047728"/>recall, <code>background-clip</code> can alter the area in which the&#13;
background is drawn, and <code>background-origin</code> determines the placement of&#13;
the origin image. So what happens when you’ve made the clipping area and&#13;
the origin area different, <em>and</em> you’re using either <code>space</code> or <code>round</code>&#13;
for the tiling pattern?</p>&#13;
&#13;
<p>The basic answer is that if your values for <code>background-origin</code> and&#13;
<code>background-clip</code> aren’t the same, clipping will happen. This is&#13;
because <code>space</code> and <code>round</code> are calculated with respect to the&#13;
background positioning area, not the painting area. <a data-type="xref" href="#cab_fig41">Figure 8-30</a> shows some examples of what can happen.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig41">&#13;
<img alt="css5 0830" src="assets/css5_0830.png"/>&#13;
<h6><span class="label">Figure 8-30. </span>Clipping due to mismatched clip and origin values</h6>&#13;
</div></figure>&#13;
&#13;
<p>As for the best combination of values to use, that’s a matter of opinion and&#13;
circumstance. In most cases, setting both&#13;
<code>background-origin</code> and <code>background-clip</code> to <code>padding-box</code> will likely get you&#13;
the results you desire. If you plan to have borders with see-through&#13;
bits, though, <code>border-box</code> might be a better choice.<a data-primary="" data-startref="ix_back_image_repeat" data-type="indexterm" id="idm45176095013840"/><a data-primary="" data-startref="ix_back_repeat_prop" data-type="indexterm" id="idm45176095012864"/><a data-primary="" data-startref="ix_repeat_back_image" data-type="indexterm" id="idm45176095011920"/><a data-primary="" data-startref="ix_tiling_back_image" data-type="indexterm" id="idm45176095010976"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Getting Attached" data-type="sect2"><div class="sect2" id="getting-attached">&#13;
<h2>Getting Attached</h2>&#13;
&#13;
<p>Now you know how to <a data-primary="background images" data-secondary="attaching to viewing area" data-type="indexterm" id="ix_back_image_attach"/>place the origin image for the background anywhere in the background of an element, and you know how to control (to a large degree) the way it tiles. As you may have realized already, placing an image in the center of the <code>&lt;body&gt;</code> element could mean, given a sufficiently long document, that the background image won’t be initially visible to the reader. After all, a browser is a viewport providing a window onto the document. <a data-primary="scrolling" data-secondary="attaching background image and" data-type="indexterm" id="idm45176095006864"/>If the document is too long to be completely shown in the viewport, the user can scroll back and forth through the document. The center of the body could be two or three “screens” below the beginning of the document, or just far enough down to push most of the origin image beyond the bottom of the browser window.</p>&#13;
&#13;
<p>Furthermore, if the <a data-primary="background-attachment property" data-type="indexterm" id="ix_background_attach_prop"/>origin image is initially visible, by default it scrolls with the <span class="keep-together">document—</span>vanishing when the user scrolls beyond the location of the image. Never fear: CSS provides a way to prevent the background image from scrolling out of view.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176095003552">&#13;
<h1>background-attachment</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>[ <code>scroll</code> | <code>fixed</code> | <code>local</code> ]#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>scroll</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As specified</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></aside>&#13;
&#13;
<p>Using the property <code>background-attachment</code>, you can declare the origin&#13;
image to <span class="keep-together">be fixed</span> with respect to the viewing area and therefore immune&#13;
to the effects of scrolling:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
    <code class="k">background-attachment</code><code class="o">:</code> <code class="nb">fixed</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Doing this has two immediate effects. First, the origin image does not scroll along with the document.&#13;
Second, the placement of the origin image is determined by&#13;
the size of the viewport, not the size (or placement within the&#13;
viewport) of the element that contains it.  <a data-type="xref" href="#cab_fig43">Figure 8-31</a> shows the image still sitting in the center of the viewport, even though the document has been scrolled partway through the text.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig43">&#13;
<img alt="css5 0831" src="assets/css5_0831.png"/>&#13;
<h6><span class="label">Figure 8-31. </span>The centering continues to hold</h6>&#13;
</div></figure>&#13;
&#13;
<p>The element-specific version of <code>fixed</code> is <code>local</code>. In this case, though, the effect is seen only when an element’s content (rather than the whole document) has to be scrolled. This is tricky to grasp at first. Consider the following, where <code>background-attachment</code> is defaulting to <code>scroll</code>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">aside</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">right</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">max-height</code><code class="o">:</code> <code class="m">20em</code><code class="p">;</code>&#13;
    <code class="k">overflow</code><code class="o">:</code> <code class="nb">scroll</code><code class="p">;}</code></pre>&#13;
&#13;
<p>In this situation, if the content of an <code>aside</code> is taller than 20 em, the overflowed content is not visible but can be accessed using a scrollbar.  The background image, however, will <em>not</em> scroll with the content.  It will instead stay in the top-right corner of the element box.</p>&#13;
&#13;
<p>By adding <code>background-attachment: local</code>, the image is attached to the local context.  The visual effect is rather like an <code>iframe</code>, if you have any experience with those.  <a data-type="xref" href="#cbag_css4_background-attachment-local">Figure 8-32</a> shows the results of the previous code sample and the following code side &#13;
<span class="keep-together">by side:</span></p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">aside</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">right</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-attachment</code><code class="o">:</code> <code class="n">local</code><code class="p">;</code> <code class="c">/* attaches to content */</code>&#13;
    <code class="k">max-height</code><code class="o">:</code> <code class="m">20em</code><code class="p">;</code>&#13;
    <code class="k">overflow</code><code class="o">:</code> <code class="nb">scroll</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cbag_css4_background-attachment-local">&#13;
<img alt="css5 0832" src="assets/css5_0832.png"/>&#13;
<h6><span class="label">Figure 8-32. </span>Default scroll attachment versus local attachment</h6>&#13;
</div></figure>&#13;
&#13;
<p>One other value for <code>background-attachment</code> is the default value <code>scroll</code>. As you might expect, this causes the background image&#13;
to scroll along with the rest of the document when viewed in a web&#13;
browser, and it doesn’t necessarily change the position of the origin image as the window is resized. If the document width is fixed (perhaps by assigning an explicit <code>width</code> to the <code>&lt;body&gt;</code> element), resizing the viewing area won’t affect the placement of a scroll-attachment origin&#13;
image at all.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Useful side effects of attached backgrounds" data-type="sect3"><div class="sect3" id="useful-side-effects">&#13;
<h3>Useful side effects of attached backgrounds</h3>&#13;
&#13;
<p>In technical terms, when a background image has been fixed, it is positioned with respect to the viewing area, not the element that contains it. However, the background will be visible only within its containing element. Aligning images to the viewport, rather than the element, can be used to our advantage.</p>&#13;
&#13;
<p>Let’s say you have a document with a tiled background that actually&#13;
looks like it’s tiled, and both <code>&lt;h1&gt;</code> and <code>&lt;h2&gt;</code> elements with the same&#13;
pattern, only in a different color. You set both the <code>&lt;body&gt;</code> and heading elements&#13;
to have fixed backgrounds as follows, resulting in <a data-type="xref" href="#cab_fig44">Figure 8-33</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(grid1.gif)</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat</code><code class="p">;</code>&#13;
    <code class="k">background-attachment</code><code class="o">:</code> <code class="nb">fixed</code><code class="p">;}</code>&#13;
<code class="nt">h1</code><code class="o">,</code> <code class="nt">h2</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(grid2.gif)</code><code class="p">;</code> <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat</code><code class="p">;</code>&#13;
    <code class="k">background-attachment</code><code class="o">:</code> <code class="nb">fixed</code><code class="p">;}</code></pre>&#13;
&#13;
<p>This neat trick is made possible because when a background’s attachment&#13;
is <code>fixed</code>, the origin element is positioned with respect to the <em>viewport</em>.&#13;
Thus, both background patterns begin tiling from the top-left corner of&#13;
the viewport, not from the individual elements. For the <code>&lt;body&gt;</code>, you can see&#13;
the entire repeat pattern. For the <code>&lt;h1&gt;</code>, however, the only place you can&#13;
see its background is in the padding and content of the <code>&lt;h1&gt;</code> itself.&#13;
Since both background images are the same size and have precisely&#13;
the same origin, they appear to line up, as shown in <a data-type="xref" href="#cab_fig44">Figure 8-33</a>.</p>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig44">&#13;
<img alt="css5 0833" src="assets/css5_0833.png"/>&#13;
<h6><span class="label">Figure 8-33. </span>Perfect alignment of backgrounds</h6>&#13;
</div></figure>&#13;
&#13;
<p>This capability can be used to create sophisticated effects.&#13;
One of the most famous examples is the <a href="https://meyerweb.com/eric/css/edge/complexspiral/glassy.html">“complexspiral distorted” demonstration</a>, shown in <a data-type="xref" href="#cab_fig45">Figure 8-34</a>.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig45">&#13;
<img alt="css5 0834" src="assets/css5_0834.png"/>&#13;
<h6><span class="label">Figure 8-34. </span>The complexspiral distorted</h6>&#13;
</div></figure>&#13;
&#13;
<p class="pagebreak-before">The visual effects are caused by assigning different fixed-attachment&#13;
background images to non-<code>&lt;body&gt;</code> elements. The entire demo is driven by one HTML document, four JPEG images, and a stylesheet. Because all four&#13;
images are positioned in the <span class="keep-together">top-left</span> corner of the browser window but&#13;
are visible only where they intersect with their elements, the images&#13;
line up to create the illusion of translucent rippled&#13;
glass. (Now we can use SVG filters for these sorts of special effects, but fixed-attachment backgrounds made creating faux filters possible back in 2002.)<a data-primary="background-size property" data-type="indexterm" id="ix_back_size_prop"/></p>&#13;
&#13;
<p>It is also the case that in paged media, such as printouts, every page&#13;
generates its own viewport. Therefore, a fixed-attachment background&#13;
should appear on every page of the printout. This could be used for&#13;
effects such as watermarking all the pages in a document.<a data-primary="" data-startref="ix_background_attach_prop" data-type="indexterm" id="idm45176094750512"/><a data-primary="" data-startref="ix_back_image_attach" data-type="indexterm" id="idm45176094749568"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Sizing Background Images" data-type="sect2"><div class="sect2" id="sizing-background-images">&#13;
<h2>Sizing Background Images</h2>&#13;
&#13;
<p>Thus far, we’ve <a data-primary="background images" data-secondary="sizing" data-type="indexterm" id="ix_back_image_size"/>taken images of varying sizes and&#13;
dropped them into element backgrounds to be repeated (or not),&#13;
positioned, clipped, and attached. In every case, we just took the image&#13;
at whatever intrinsic size it was (with the automated exception of&#13;
<code>round</code> repeating). Ready to actually change the size of the origin&#13;
image and all the tiled images that spawn from it?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176094744640">&#13;
<h1>background-size</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>[ [ &lt;<em><code>length</code></em>&gt; | &lt;<em><code>percentage</code></em>&gt; | <code>auto</code> ]{1,2} | <code>cover</code> | <code>contain</code> ]#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>auto</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>As declared, except all lengths made absolute and any missing auto keywords added</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>Yes</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></aside>&#13;
&#13;
<p>Let’s start by explicitly resizing a background image. We’ll drop in an&#13;
image that’s 200 × 200 pixels and then resize it to be twice as big. The following code results in <a data-type="xref" href="#cab_fig46">Figure 8-35</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">main</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
    <code class="k">background-size</code><code class="o">:</code> <code class="m">400px</code> <code class="m">400px</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig46">&#13;
<img alt="css5 0835" src="assets/css5_0835.png"/>&#13;
<h6><span class="label">Figure 8-35. </span>Resizing the origin image</h6>&#13;
</div></figure>&#13;
&#13;
<p>With <code>background-size</code>, we can resize the origin image to be smaller. We can size it using ems, pixels, viewport widths, any length unit, or a combination thereof.</p>&#13;
&#13;
<p>We can even distort the image by changing its size. <a data-type="xref" href="#cab_fig47">Figure 8-36</a> illustrates the results when changing the previous code sample to use <code>background-size: 400px 4em</code>, with both repeated and nonrepeated backgrounds.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig47">&#13;
<img alt="css5 0836" src="assets/css5_0836.png"/>&#13;
<h6><span class="label">Figure 8-36. </span>Distorting the origin image by resizing it</h6>&#13;
</div></figure>&#13;
&#13;
<p class="pagebreak-before">As you can see, when <code>background-size</code> has two values, the first is the horizontal size and the second is&#13;
the vertical. If you allow the image to repeat, all the repeated images will be the same size as the origin image.</p>&#13;
&#13;
<p>Percentages are a little more interesting. If you declare a percentage&#13;
value, it’s calculated with respect to the background positioning&#13;
area—that is, the area defined by <code>background-origin</code>, and <em>not</em> by&#13;
<code>background-clip</code>. Suppose you want an image that’s half as wide and&#13;
half as tall as its background positioning area; the following code results in <a data-type="xref" href="#cab_fig48">Figure 8-37</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-size</code><code class="o">:</code> <code class="m">50%</code> <code class="m">50%</code><code class="p">;</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig48">&#13;
<img alt="css5 0837" src="assets/css5_0837.png"/>&#13;
<h6><span class="label">Figure 8-37. </span>Resizing the origin image with percentages</h6>&#13;
</div></figure>&#13;
&#13;
<p>And yes, you can mix lengths and percentages:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-size</code><code class="o">:</code> <code class="m">25px</code> <code class="m">100%</code><code class="p">;</code></pre>&#13;
&#13;
<p>Negative length and percentage values are not permitted for&#13;
<code>background-size</code>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Maintaining the background image’s aspect ratio" data-type="sect3"><div class="sect3" id="idm45176094608192">&#13;
<h3>Maintaining the background image’s aspect ratio</h3>&#13;
&#13;
<p>Now, what about the <a data-primary="aspect-ratio, background image" data-type="indexterm" id="idm45176094606576"/>default value of <code>auto</code>? First off, when only one value is provided, it’s taken for the horizontal size, and the&#13;
vertical size is set to <code>auto</code>. (Thus <code>background-size: auto</code> is&#13;
equivalent to <code>background-size: auto auto</code>.) If you want to size the&#13;
origin image vertically and leave the horizontal size to be automatic, thus preserving the intrinsic aspect ratio of the image,&#13;
you have to write it explicitly, like this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-size</code><code class="o">:</code> <code class="nb">auto</code> <code class="m">333px</code><code class="p">;</code></pre>&#13;
&#13;
<p>In many ways, <code>auto</code> in&#13;
<code>background-size</code> acts a lot like the <code>auto</code> values of <code>height</code> and <code>width</code>&#13;
(also <code>block-size</code> and <code>inline-size</code>)&#13;
when applied to replaced elements such as images. That is to say, you’d&#13;
expect roughly similar results from the following two rules, if they&#13;
were applied to the same image in different contexts:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">img</code><code class="nc">.yinyang</code> <code class="p">{</code><code class="k">width</code><code class="o">:</code> <code class="m">300px</code><code class="p">;</code> <code class="k">height</code><code class="o">:</code> <code class="nb">auto</code><code class="p">;}</code>&#13;
&#13;
<code class="nt">main</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-size</code><code class="o">:</code> <code class="m">300px</code> <code class="nb">auto</code><code class="p">;}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Covering and containing" data-type="sect3"><div class="sect3" id="covering-and-containing">&#13;
<h3>Covering and containing</h3>&#13;
&#13;
<p>Now for some real fun! <a data-primary="cover, background image" data-type="indexterm" id="ix_cover_back_image"/>Suppose you want to cover&#13;
the entire background of an element with an image, and you don’t care if parts of it&#13;
stick outside the background painting area. In this case, you can use&#13;
<code>cover</code>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">main</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
    <code class="k">background-size</code><code class="o">:</code> <code class="n">cover</code><code class="p">;}</code></pre>&#13;
&#13;
<p>This scales the origin image so that it completely covers&#13;
the background positioning area while still preserving its intrinsic&#13;
aspect ratio, assuming it has one. You can <span class="keep-together">see an example</span> in&#13;
<a data-type="xref" href="#cab_fig50">Figure 8-38</a>, where a 200 × 200 pixel image is scaled up to cover the&#13;
background of an 800 × 400 pixel element. The following code provides this result:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">main</code> <code class="p">{</code><code class="k">width</code><code class="o">:</code> <code class="m">800px</code><code class="p">;</code> <code class="k">height</code><code class="o">:</code> <code class="m">400px</code><code class="p">;</code>&#13;
    <code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
    <code class="k">background-size</code><code class="o">:</code> <code class="n">cover</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Note that there is no <code>background-repeat</code> in this example. That’s&#13;
because we expect the image to fill out the entire background, so&#13;
whether it’s repeated or not doesn’t really &#13;
<span class="keep-together">matter.</span></p>&#13;
&#13;
<p>You can also see that <code>cover</code> is very different from <code>100% 100%</code>.&#13;
If we’d used <code>100% 100%</code>, the origin image would have been&#13;
stretched to be 800 pixels wide by 400 pixels tall. Instead, <code>cover</code>&#13;
made it 800 pixels wide and tall, then centered the image inside the&#13;
background positioning area. This is the same as if we’d said&#13;
<code>100% auto</code> in this particular case, but the beauty of <code>cover</code> is that&#13;
it works regardless of whether your element is wider than it is tall, or&#13;
taller than it is wide.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig50">&#13;
<img alt="css5 0838" src="assets/css5_0838.png"/>&#13;
<h6><span class="label">Figure 8-38. </span>Covering the background with the origin image</h6>&#13;
</div></figure>&#13;
&#13;
<p>By <a data-primary="containing background image" data-type="indexterm" id="ix_contain_back_image"/>contrast, <code>contain</code> will scale the image so that it fits exactly&#13;
inside the background positioning area, even if that leaves some of the&#13;
rest of the background showing around it. This is illustrated in <a data-type="xref" href="#cab_fig51">Figure 8-39</a>, which is the result of the following code:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">main</code> <code class="p">{</code><code class="k">width</code><code class="o">:</code> <code class="m">800px</code><code class="p">;</code> <code class="k">height</code><code class="o">:</code> <code class="m">400px</code><code class="p">;</code>&#13;
    <code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
    <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code>&#13;
    <code class="k">background-position</code><code class="o">:</code> <code class="nb">center</code><code class="p">;</code>&#13;
    <code class="k">background-size</code><code class="o">:</code> <code class="n">contain</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig51">&#13;
<img alt="css5 0839" src="assets/css5_0839.png"/>&#13;
<h6><span class="label">Figure 8-39. </span>Containing the origin image within the background</h6>&#13;
</div></figure>&#13;
&#13;
<p>In this case, since the element is shorter than it is tall, the origin&#13;
image is scaled so it is as tall as the background positioning area,&#13;
and the width is scaled to match, just as if we’d declared <code>auto 100%</code>.&#13;
If an element is taller than it is wide, <code>contain</code> acts&#13;
like <code>100% auto</code>.</p>&#13;
&#13;
<p>You’ll <a data-primary="background images" data-secondary="repeating" data-type="indexterm" id="idm45176094384752"/><a data-primary="repeating elements" data-secondary="background images" data-type="indexterm" id="idm45176094383744"/>note that we brought <code>no-repeat</code> back to the example so the visual result wouldn’t become too visually confusing. Removing that declaration would cause the background to repeat, which is no big deal if that’s what you want. <a data-type="xref" href="#cab_fig52">Figure 8-40</a> shows the result.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig52">&#13;
<img alt="css5 0840" src="assets/css5_0840.png"/>&#13;
<h6><span class="label">Figure 8-40. </span>Repeating a contained origin image</h6>&#13;
</div></figure>&#13;
&#13;
<p>Always remember: the sizing of <code>cover</code> and <code>contain</code> images is always&#13;
with respect to the background positioning area, which is defined by&#13;
<code>background-origin</code>. <a data-primary="background-origin property" data-type="indexterm" id="idm45176094371168"/><a data-primary="backgrounds" data-secondary="clipping" data-type="indexterm" id="idm45176094370464"/><a data-primary="clipping" data-secondary="backgrounds" data-type="indexterm" id="idm45176094369520"/><a data-primary="background-clip property" data-type="indexterm" id="idm45176094368576"/>This is true even if the background painting area&#13;
defined by <code>background-clip</code> is different! Consider the following rules,&#13;
which are depicted in <a data-type="xref" href="#cab_fig53">Figure 8-41</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">div</code> <code class="p">{</code><code class="k">border</code><code class="o">:</code> <code class="m">1px</code> <code class="nb">solid</code> <code class="nb">red</code><code class="p">;</code>&#13;
     <code class="k">background</code><code class="o">:</code> <code class="sx">url(yinyang-sm.png)</code> <code class="nb">center</code> <code class="nb">no-repeat</code> <code class="nb">green</code><code class="p">;}</code>&#13;
     <code class="c">/* that’s shorthand 'background', explained in the next section */</code>&#13;
<code class="nc">.cover</code> <code class="p">{</code><code class="k">background-size</code><code class="o">:</code> <code class="n">cover</code><code class="p">;}</code>&#13;
<code class="nc">.contain</code> <code class="p">{</code><code class="k">background-size</code><code class="o">:</code> <code class="n">contain</code><code class="p">;}</code>&#13;
<code class="nc">.clip-content</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;}</code>&#13;
<code class="nc">.clip-padding</code> <code class="p">{</code><code class="k">background-clip</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code>&#13;
<code class="nc">.origin-content</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">content-box</code><code class="p">;}</code>&#13;
<code class="nc">.origin-padding</code> <code class="p">{</code><code class="k">background-origin</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig53">&#13;
<img alt="css5 0841" src="assets/css5_0841.png"/>&#13;
<h6><span class="label">Figure 8-41. </span>Covering and containing with <code>background-clip</code> and <code>background-origin</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>Yes, you can see background color around the edges of some of these, and&#13;
others get clipped. That’s the difference between the painting area and&#13;
the positioning area. You’d think that <code>cover</code> and <code>contain</code> would be&#13;
sized with respect to the painting area, but they aren’t, as depicted in the last examples in <a data-type="xref" href="#cab_fig53">Figure 8-41</a>. Keep that&#13;
firmly in mind whenever you use these values.</p>&#13;
&#13;
<p>If you have more than one background image, with different values for position, repeat, or size, include a comma-separated list of values. Each value in a list will be associated with the image in that position in the list. If there are more values than images, the extra values are ignored. If there are fewer, the list is repeated. You can set only one background color, though.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>In this section, we used raster images (GIFs, to be precise) even&#13;
though they tend to look horrible when scaled up and represent a waste&#13;
of network resources when scaled down. (We did this so that it would be&#13;
extra obvious when lots of up-scaling was happening.) This is&#13;
an inherent risk in scaling background raster images. On the other hand,&#13;
you can just as easily use SVGs as background images, and they scale up&#13;
or down with no loss of quality or waste of bandwidth.&#13;
If you’re going to be scaling a background image and it&#13;
doesn’t have to be a photograph, strongly consider using SVG or CSS gradients.<a data-primary="" data-startref="ix_back_image_size" data-type="indexterm" id="idm45176094282896"/><a data-primary="" data-startref="ix_back_size_prop" data-type="indexterm" id="idm45176094311232"/><a data-primary="" data-startref="ix_contain_back_image" data-type="indexterm" id="idm45176094310288"/><a data-primary="" data-startref="ix_cover_back_image" data-type="indexterm" id="idm45176094309344"/></p>&#13;
</div>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Bringing It All Together" data-type="sect2"><div class="sect2" id="bringing-it-all-together">&#13;
<h2>Bringing It All Together</h2>&#13;
&#13;
<p>As is often the <a data-primary="background property" data-type="indexterm" id="ix_back_prop_ch8"/><a data-primary="background images" data-secondary="shorthand properties" data-type="indexterm" id="ix_back_image_shorthand"/>case with thematic areas of CSS, the background&#13;
properties can all be brought together in a single shorthand property:&#13;
<code>background</code>. Whether you might want to do that is another question&#13;
entirely.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176094303296">&#13;
<h1>background</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p>[ &lt;<em><code>bg-layer</code></em>&gt;, ]* &lt;<em><code>final-bg-layer</code></em>&gt;</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p>Refer to individual properties</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Percentages</strong></p></td>&#13;
<td><p>Refer to individual properties</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>Refer to individual properties</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>See individual properties</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<dl>&#13;
<dt>&lt;<em><code>bg-layer</code></em>&gt;</dt>&#13;
<dd>&#13;
<p>    &lt;<em><code>bg-image</code></em>&gt; ‖ &lt;<em><code>position</code></em>&gt; [ / &lt;<em><code>bg-size</code></em>&gt; ]?&#13;
‖ &lt;<em><code>repeat-style</code></em>&gt; ‖ &lt;<em><code>attachment</code></em>&gt; ‖ &lt;<em><code>box</code></em>&gt; ‖ &lt;<em><code>box</code></em>&gt;</p>&#13;
</dd>&#13;
<dt>&lt;<em><code>final-bg-layer</code></em>&gt;</dt>&#13;
<dd>&#13;
<p>    &lt;<em><code>bg-image</code></em>&gt; ‖  &lt;<em><code>position</code></em>&gt; [ /&#13;
&lt;<em><code>bg-size</code></em>&gt; ]? ‖ &lt;<em><code>repeat-style</code></em>&gt; ‖ &lt;<em><code>attachment</code></em>&gt; ‖ &lt;<em><code>box</code></em>&gt;&#13;
‖ &lt;<em><code>box</code></em>&gt; ‖ &lt;<em><code>background-color</code></em>&gt;</p>&#13;
</dd>&#13;
</dl>&#13;
</div></aside>&#13;
&#13;
<p>This syntax can get a little confusing. Let’s start simple and work our&#13;
way up.</p>&#13;
&#13;
<p>First off, the following statements are all equivalent to one another and will have the&#13;
effect shown in <a data-type="xref" href="#cab_fig54">Figure 8-42</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="nb">white</code><code class="p">;</code>&#13;
      <code class="k">background-image</code><code class="o">:</code> <code class="sx">url(yinyang.png)</code><code class="p">;</code>&#13;
      <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">left</code><code class="p">;</code>&#13;
      <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">repeat-y</code><code class="p">;</code>&#13;
      <code class="k">background-attachment</code><code class="o">:</code> <code class="nb">fixed</code><code class="p">;</code>&#13;
      <code class="k">background-origin</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;</code>&#13;
      <code class="k">background-clip</code><code class="o">:</code> <code class="nb">border-box</code><code class="p">;</code>&#13;
      <code class="k">background-size</code><code class="o">:</code> <code class="m">50%</code> <code class="m">50%</code><code class="p">;}</code>&#13;
<code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="nb">white</code> <code class="sx">url(yinyang.png)</code> <code class="nb">repeat-y</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">/</code><code class="m">50%</code> <code class="m">50%</code> <code class="nb">fixed</code>&#13;
     <code class="nb">padding-box</code> <code class="nb">border-box</code><code class="p">;}</code>&#13;
<code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="nb">fixed</code> <code class="sx">url(yinyang.png)</code> <code class="nb">padding-box</code> <code class="nb">border-box</code> <code class="nb">white</code> <code class="nb">repeat-y</code>&#13;
     <code class="nb">top</code> <code class="nb">left</code><code class="o">/</code><code class="m">50%</code> <code class="m">50%</code><code class="p">;}</code>&#13;
<code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="sx">url(yinyang.png)</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">/</code><code class="m">50%</code> <code class="m">50%</code> <code class="nb">padding-box</code> <code class="nb">white</code> <code class="nb">repeat-y</code>&#13;
    <code class="nb">fixed</code> <code class="nb">border-box</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig54">&#13;
<img alt="css5 0842" src="assets/css5_0842.png"/>&#13;
<h6><span class="label">Figure 8-42. </span>Using shorthand</h6>&#13;
</div></figure>&#13;
&#13;
<p>You can mostly <a data-primary="background-position property" data-type="indexterm" id="idm45176094173424"/><a data-primary="backgrounds" data-secondary="positioning" data-type="indexterm" id="idm45176094172720"/><a data-primary="background-size property" data-type="indexterm" id="idm45176094171776"/><a data-primary="positioning" data-secondary="backgrounds" data-type="indexterm" id="idm45176094171136"/>mix up the order of the values however you like, with three restrictions. First, any <code>background-size</code>&#13;
value <em>must</em> come immediately after the <code>background-position</code> value, and must be separated from it by a forward slash (<code>/</code>).&#13;
Second, within those values, the usual restrictions apply: the&#13;
horizontal value comes first, and the vertical value follows,&#13;
assuming that you’re supplying axis-derived values (as opposed to, say,&#13;
<code>cover</code>).</p>&#13;
&#13;
<p>Third, if you supply values for both&#13;
<code>background-origin</code> and <code>background-clip</code>, the first of the two you list&#13;
will be assigned to <code>background-origin</code>, and the second to&#13;
<code>background-clip</code>. Therefore, the following two rules are&#13;
functionally identical:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="sx">url(yinyang.png)</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">/</code><code class="m">50%</code> <code class="m">50%</code> <code class="nb">padding-box</code> <code class="nb">border-box</code> <code class="nb">white</code>&#13;
     <code class="nb">repeat-y</code> <code class="nb">fixed</code><code class="p">;}</code>&#13;
<code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="sx">url(yinyang.png)</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">/</code><code class="m">50%</code> <code class="m">50%</code> <code class="nb">padding-box</code> <code class="nb">white</code> <code class="nb">repeat-y</code>&#13;
     <code class="nb">fixed</code> <code class="nb">border-box</code><code class="p">;}</code></pre>&#13;
&#13;
<p class="pagebreak-before">Related to that, if you <a data-primary="clipping" data-secondary="backgrounds" data-type="indexterm" id="idm45176094052464"/><a data-primary="background-clip property" data-type="indexterm" id="idm45176094051728"/><a data-primary="background-origin property" data-type="indexterm" id="idm45176094051088"/><a data-primary="backgrounds" data-secondary="clipping" data-type="indexterm" id="idm45176094050448"/>supply only one such value, it sets both&#13;
<code>background-origin</code> and <code>background-clip</code>. Thus, the following shorthand&#13;
sets both the background positioning area and the background painting&#13;
area to the padding box:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="sx">url(yinyang.png)</code> <code class="nb">padding-box</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">/</code><code class="m">50%</code> <code class="m">50%</code> <code class="nb">border-box</code><code class="p">;}</code></pre>&#13;
&#13;
<p>As is the case for shorthand properties, if you leave out any values,&#13;
the defaults for the relevant properties are filled in automatically.&#13;
Thus, the following two are equivalent:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">white</code> <code class="nb">url</code><code class="p">(</code><code class="n">yinyang</code><code class="o">.</code><code class="n">png</code><code class="p">;}</code>&#13;
<code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">white</code> <code class="sx">url(yinyang.png)</code> <code class="nb">transparent</code> <code class="m">0%</code> <code class="m">0%</code><code class="o">/</code><code class="nb">auto</code> <code class="nb">repeat</code>&#13;
      <code class="nb">scroll</code> <code class="nb">padding-box</code> <code class="nb">border-box</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Even better, <code>background</code> has no required values—as long as&#13;
you have at least one value present, you can omit the rest.&#13;
It’s possible to set just the background color using the&#13;
shorthand property, which is a very common practice:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">white</code><code class="p">;}</code></pre>&#13;
&#13;
<p>On that note, remember that <code>background</code> is a shorthand property, and,&#13;
as such, its default values can obliterate previously assigned values&#13;
for a given element. For example:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">h1</code><code class="o">,</code> <code class="nt">h2</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">gray</code> <code class="sx">url(thetrees.jpg)</code> <code class="nb">center</code><code class="o">/</code><code class="n">contain</code> <code class="nb">repeat-x</code><code class="p">;}</code>&#13;
<code class="nt">h2</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Given these rules, <code>&lt;h1&gt;</code> elements will be styled according to the first&#13;
rule. And <code>&lt;h2&gt;</code> elements will be styled according to the second, which means&#13;
they’ll just have a flat silver background. No image will be applied to&#13;
<code>&lt;h2&gt;</code> backgrounds, let alone centered and repeated horizontally. It is&#13;
more likely that the author meant to do this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">h1</code><code class="o">,</code> <code class="nt">h2</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">gray</code> <code class="sx">url(thetrees.jpg)</code> <code class="nb">center</code><code class="o">/</code><code class="n">contain</code> <code class="nb">repeat-x</code><code class="p">;}</code>&#13;
<code class="nt">h2</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;}</code></pre>&#13;
&#13;
<p>This lets the background color be changed without wiping out all the&#13;
other values.</p>&#13;
&#13;
<p>One more restriction will lead us very neatly into the next&#13;
section: you can supply a background color to only the final background&#13;
layer. No other background layer can have a solid color declared. What&#13;
the heck does that mean? So glad you asked.<a data-primary="" data-startref="ix_back_image_shorthand" data-type="indexterm" id="idm45176093832544"/><a data-primary="" data-startref="ix_back_prop_ch8" data-type="indexterm" id="idm45176093831696"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Working with Multiple Backgrounds" data-type="sect2"><div class="sect2" id="multiple-backgrounds">&#13;
<h2>Working with Multiple Backgrounds</h2>&#13;
&#13;
<p>Throughout <a data-primary="background images" data-secondary="multiple" data-type="indexterm" id="ix_back_image_multi"/>most of this chapter, we’ve only briefly mentioned that almost all the background properties accept a comma-separated list of values. For example, if you wanted to have three different background images, you could do this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">section</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(bg01.png)</code><code class="o">,</code> <code class="sx">url(bg02.gif)</code><code class="o">,</code> <code class="sx">url(bg03.jpg)</code><code class="p">;</code>&#13;
         <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Seriously. It will look like <a data-type="xref" href="#cab_fig55">Figure 8-43</a>.</p>&#13;
&#13;
<figure><div class="figure" id="cab_fig55">&#13;
<img alt="css5 0843" src="assets/css5_0843.png"/>&#13;
<h6><span class="label">Figure 8-43. </span>Multiple background images</h6>&#13;
</div></figure>&#13;
&#13;
<p>This creates three background layers, one for each image, with the last being the final, bottom background layer.</p>&#13;
&#13;
<p>The three images are piled into the top-left corner of the element and don’t repeat.  <a data-primary="background images" data-secondary="repeating" data-type="indexterm" id="idm45176093780800"/><a data-primary="background-repeat property" data-type="indexterm" id="idm45176093779824"/>The lack of repetition occurs because we declared <code>background-repeat: no-repeat</code>. We declared it only once, and there are three background images.</p>&#13;
&#13;
<p>When a mismatch occurs between the number of values in a background-related property and the <code>background-image</code> property, the missing values are derived by repeating the sequence in the property with a value undercount.  Thus, in the previous example, it was as though we had said this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="o">,</code> <code class="nb">no-repeat</code><code class="o">,</code> <code class="nb">no-repeat</code><code class="p">;</code></pre>&#13;
&#13;
<p>Now, <a data-primary="background images" data-secondary="positioning" data-type="indexterm" id="idm45176093773136"/><a data-primary="positioning" data-secondary="background images" data-type="indexterm" id="idm45176093772288"/>suppose we want to put the first image at the top right, put the second at the center of the left side, and put the last layer at the center of the bottom. We can layer <code>background-position</code> as follows, resulting in <a data-type="xref" href="#cab_fig56">Figure 8-44</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">section</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(bg01.png)</code><code class="o">,</code> <code class="sx">url(bg02.gif)</code><code class="o">,</code> <code class="sx">url(bg03.jpg)</code><code class="p">;</code>&#13;
         <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">right</code><code class="o">,</code> <code class="nb">left</code> <code class="nb">center</code><code class="o">,</code> <code class="m">50%</code> <code class="m">100%</code><code class="p">;</code>&#13;
         <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig56">&#13;
<img alt="css5 0844" src="assets/css5_0844.png"/>&#13;
<h6><span class="label">Figure 8-44. </span>Individually positioning background images</h6>&#13;
</div></figure>&#13;
&#13;
<p>Similarly, say we want to keep the first two layers from repeating, but&#13;
horizontally repeat the third:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">section</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(bg01.png)</code><code class="o">,</code> <code class="sx">url(bg02.gif)</code><code class="o">,</code> <code class="sx">url(bg03.jpg)</code><code class="p">;</code>&#13;
         <code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">right</code><code class="o">,</code> <code class="nb">left</code> <code class="nb">center</code><code class="o">,</code> <code class="m">50%</code> <code class="m">100%</code><code class="p">;</code>&#13;
         <code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="o">,</code> <code class="nb">no-repeat</code><code class="o">,</code> <code class="nb">repeat-x</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Nearly every background property can be comma-listed this way. You can&#13;
have different origins, clipping boxes, sizes, and just about everything&#13;
else for each background layer you create. Technically, there is no&#13;
limit to the number of layers you can have, though at a certain point&#13;
it’s just going to get silly.</p>&#13;
&#13;
<p>Even the shorthand <code>background</code> can be comma-separated. The following&#13;
example is exactly equivalent to the previous one, and the result is&#13;
shown in <a data-type="xref" href="#cab_fig57">Figure 8-45</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">section</code> <code class="p">{</code>&#13;
    <code class="k">background</code><code class="o">:</code> <code class="sx">url(bg01.png)</code> <code class="nb">right</code> <code class="nb">top</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
                <code class="sx">url(bg02.gif)</code> <code class="nb">center</code> <code class="nb">left</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
                <code class="sx">url(bg03.jpg)</code> <code class="m">50%</code> <code class="m">100%</code> <code class="nb">repeat-x</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="cab_fig57">&#13;
<img alt="css5 0845" src="assets/css5_0845.png"/>&#13;
<h6><span class="label">Figure 8-45. </span>Multiple background layers via shorthand</h6>&#13;
</div></figure>&#13;
&#13;
<p>The only real <a data-primary="backgrounds" data-secondary="colors" data-type="indexterm" id="idm45176093588768"/><a data-primary="colors" data-secondary="background" data-type="indexterm" id="idm45176093587760"/><a data-primary="background-color property" data-type="indexterm" id="idm45176093586816"/><a data-primary="background images" data-secondary="background color" data-type="indexterm" id="idm45176093586176"/>restriction on multiple backgrounds is that&#13;
<code>background-color</code> does <em>not</em> repeat in this manner, and if you provide&#13;
a comma-separated list for the <code>background</code> shorthand, the color&#13;
can appear on only the last background layer. If you add a color to any other layer, the entire <code>background</code> declaration is made invalid.&#13;
Thus, if we want to have&#13;
a green background fill for the previous example, we’d do it in one of the&#13;
following two ways:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">section</code> <code class="p">{</code>&#13;
    <code class="k">background</code><code class="o">:</code> <code class="sx">url(bg01.png)</code> <code class="nb">right</code> <code class="nb">top</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
                <code class="sx">url(bg02.gif)</code> <code class="nb">center</code> <code class="nb">left</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
                <code class="sx">url(bg03.jpg)</code> <code class="m">50%</code> <code class="m">100%</code> <code class="nb">repeat-x</code> <code class="nb">green</code><code class="p">;}</code>&#13;
<code class="nt">section</code> <code class="p">{</code>&#13;
    <code class="k">background</code><code class="o">:</code> <code class="sx">url(bg01.png)</code> <code class="nb">right</code> <code class="nb">top</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
                <code class="sx">url(bg02.gif)</code> <code class="nb">center</code> <code class="nb">left</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
                <code class="sx">url(bg03.jpg)</code> <code class="m">50%</code> <code class="m">100%</code> <code class="nb">repeat-x</code><code class="p">;</code>&#13;
    <code class="k">background-color</code><code class="o">:</code> <code class="nb">green</code><code class="p">;}</code></pre>&#13;
&#13;
<p>The reason for this restriction is pretty straightforward. Imagine if&#13;
you were able to add a full background color to the first background&#13;
layer. It would fill in the whole background and obscure all the&#13;
background layers behind it! So if you do supply a color, it can be&#13;
on only the last layer, which is “bottommost.”</p>&#13;
&#13;
<p>This ordering is important to internalize as soon as possible, because&#13;
it runs counter to the instincts you’ve likely built up in the course of&#13;
using CSS. After all, you know what will happen here—the <code>&lt;h1&gt;</code>&#13;
background will be green:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">h1</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="nb">red</code><code class="p">;}</code>&#13;
<code class="nt">h1</code> <code class="p">{</code><code class="k">background-color</code><code class="o">:</code> <code class="nb">green</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Contrast that with this multiple-background rule, which will make the&#13;
<code>&lt;h1&gt;</code> background red:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">h1</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
    <code class="sx">url(box-red.gif)</code><code class="o">,</code>&#13;
    <code class="sx">url(box-green.gif)</code><code class="o">,</code>&#13;
    <code class="nb">green</code><code class="p">;}</code></pre>&#13;
&#13;
<p>Yes, red. The red GIF is tiled to cover the entire background area, as&#13;
is the green GIF, but the red GIF is “on top of” the green GIF. It’s&#13;
closer to you. And the effect is exactly backward from the “last one&#13;
wins” rules built into the cascade.</p>&#13;
&#13;
<p>You can visualize it like this: when there are multiple backgrounds, they’re&#13;
listed like the layers in a drawing program such as Adobe Photoshop or&#13;
Illustrator. In the layer palette of a drawing program, layers at the&#13;
top of the palette are drawn over the layers at the bottom. The same&#13;
process plays out here: the layers listed at the top of the list are drawn over the&#13;
layers at the bottom of the list.</p>&#13;
&#13;
<p>The odds are pretty good that you will, at some point, set up a bunch of&#13;
background layers in the wrong order, because your cascade-order&#13;
reflexes will kick in. (This error still occasionally trips up the authors even to this day, so&#13;
don’t get down on yourself if it gets you too.)</p>&#13;
&#13;
<p>Another fairly common mistake when you’re getting started with multiple backgrounds is to use the <code>background</code> shorthand and forget to explicitly turn off background tiling for your background layers by letting the <code>background-repeat</code> value default to <code>repeat</code>, thus obscuring all but the top layer. See <a data-type="xref" href="#cab_fig59">Figure 8-46</a>, for example, which is the result of the &#13;
<span class="keep-together">following</span> code:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">section</code> <code class="p">{</code><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(bg02.gif)</code><code class="o">,</code> <code class="sx">url(bg03.jpg)</code><code class="p">;}</code></pre>&#13;
&#13;
<p>We can see only the top layer because it’s tiling infinitely, thanks to&#13;
the default value of <code>background-repeat</code>. That’s why the example at the&#13;
beginning of this section used <code>background-repeat: no-repeat</code>.<a data-primary="" data-startref="ix_back_image_multi" data-type="indexterm" id="idm45176093404608"/></p>&#13;
&#13;
<figure><div class="figure" id="cab_fig59">&#13;
<img alt="css5 0846" src="assets/css5_0846.png"/>&#13;
<h6><span class="label">Figure 8-46. </span>Obscuring layers with repeated images</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using the Background Shorthand" data-type="sect2"><div class="sect2" id="using-the-background-shorthand">&#13;
<h2>Using the Background Shorthand</h2>&#13;
&#13;
<p>One way to <a data-primary="background property" data-type="indexterm" id="idm45176093399984"/><a data-primary="background images" data-secondary="shorthand properties" data-type="indexterm" id="idm45176093399248"/>avoid these sorts of situations is to use the&#13;
<code>background</code> shorthand, like so:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
         <code class="sx">url(bg01.png)</code> <code class="nb">top</code> <code class="nb">left</code> <code class="nb">border-box</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
         <code class="sx">url(bg02.gif)</code> <code class="n">bottom</code> <code class="nb">center</code> <code class="nb">padding-box</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
         <code class="sx">url(bg04.svg)</code> <code class="n">bottom</code> <code class="nb">center</code> <code class="nb">padding-box</code> <code class="nb">no-repeat</code> <code class="nb">gray</code><code class="p">;}</code></pre>&#13;
&#13;
<p>That way, when you add or subtract background layers, the values you&#13;
meant to apply specifically to them will come in or go out with them.</p>&#13;
&#13;
<p>This can mean some annoying repetition if all the backgrounds&#13;
should have the same value of a given property, like&#13;
<code>background-origin</code>. If that’s the situation, you can blend the two&#13;
approaches, like so:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nt">body</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code>&#13;
         <code class="sx">url(bg01.png)</code> <code class="nb">top</code> <code class="nb">left</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
         <code class="sx">url(bg02.gif)</code> <code class="n">bottom</code> <code class="nb">center</code> <code class="nb">no-repeat</code><code class="o">,</code>&#13;
         <code class="sx">url(bg04.svg)</code> <code class="n">bottom</code> <code class="nb">center</code> <code class="nb">no-repeat</code> <code class="nb">gray</code><code class="p">;</code>&#13;
     <code class="k">background-origin</code><code class="o">:</code> <code class="nb">padding-box</code><code class="p">;}</code></pre>&#13;
&#13;
<p>This works just as long as you don’t need to make any exceptions. The&#13;
minute you decide to change the origin of one of those background&#13;
layers, you’ll need to explicitly list them, whether you do it in <code>background</code>&#13;
or with the separate <code>background-origin</code> declaration.</p>&#13;
&#13;
<p>Remember that the number of layers is determined by the number of&#13;
background images, and so, by definition, <code>background-image</code> values are&#13;
<em>not</em> repeated to equal the number of comma-separated values given for&#13;
other properties. You might want to put the same image in all four&#13;
corners of an element and think you could do it like this:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(i/box-red.gif)</code><code class="p">;</code>&#13;
<code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">,</code> <code class="nb">top</code> <code class="nb">right</code><code class="o">,</code> <code class="n">bottom</code> <code class="nb">right</code><code class="o">,</code> <code class="n">bottom</code> <code class="nb">left</code><code class="p">;</code>&#13;
<code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code></pre>&#13;
&#13;
<p>The result, however, would be to place a single red box in the top-left&#13;
corner of the element. To get images in all four corners, as&#13;
shown in <a data-type="xref" href="#cab_fig60">Figure 8-47</a>, you’ll have to list the same image four times:<a data-primary="" data-startref="ix_back_image_ch8" data-type="indexterm" id="idm45176093247296"/></p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">background-image</code><code class="o">:</code> <code class="sx">url(i/box-red.gif)</code><code class="o">,</code> <code class="sx">url(i/box-red.gif)</code><code class="o">,</code>&#13;
                  <code class="sx">url(i/box-red.gif)</code><code class="o">,</code> <code class="sx">url(i/box-red.gif)</code><code class="p">;</code>&#13;
<code class="k">background-position</code><code class="o">:</code> <code class="nb">top</code> <code class="nb">left</code><code class="o">,</code> <code class="nb">top</code> <code class="nb">right</code><code class="o">,</code> <code class="n">bottom</code> <code class="nb">right</code><code class="o">,</code> <code class="n">bottom</code> <code class="nb">left</code><code class="p">;</code>&#13;
<code class="k">background-repeat</code><code class="o">:</code> <code class="nb">no-repeat</code><code class="p">;</code></pre>&#13;
&#13;
<figure class="bordernone"><div class="figure" id="cab_fig60">&#13;
<img alt="css5 0847" src="assets/css5_0847.png"/>&#13;
<h6><span class="label">Figure 8-47. </span>Placing the same image in all four corners</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Creating Box Shadows" data-type="sect1"><div class="sect1" id="box-shadows">&#13;
<h1>Creating Box Shadows</h1>&#13;
&#13;
<p>You have <a data-primary="shadows" data-secondary="box-shadow property" data-type="indexterm" id="ix_shadow_prop"/><a data-primary="box-shadow property" data-type="indexterm" id="ix_box_shadow_prop"/><a data-primary="backgrounds" data-secondary="box shadows" data-type="indexterm" id="ix_background_shadow"/>learned about border images, outlines, and background images. CSS has another property that can decorate both the inside and outside of an element without impacting the box model: <code>box-shadow</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45176093159888">&#13;
<h1>box-shadow</h1><table>&#13;
&#13;
<tbody>&#13;
<tr>&#13;
<td><p><strong>Values</strong></p></td>&#13;
<td><p><code>none</code> | [<code>inset</code>? &amp;&amp; &lt;<em><code>length</code></em>&gt;{2,4} &amp;&amp; &lt;<em><code>color</code></em>&gt;?]#</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Initial value</strong></p></td>&#13;
<td><p><code>none</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Applies to</strong></p></td>&#13;
<td><p>All elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Computed value</strong></p></td>&#13;
<td><p>&lt;<em><code>length</code></em>&gt; values as absolute length values; &lt;<em><code>color</code></em>&gt; values as computed internally; otherwise, as specified</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Inherited</strong></p></td>&#13;
<td><p>No</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><strong>Animatable</strong></p></td>&#13;
<td><p>Yes</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></aside>&#13;
&#13;
<p>It might seem a little out of place to talk about shadows in a chapter mostly concerned with backgrounds, but you’ll understand our reasoning in a moment.</p>&#13;
&#13;
<p>Let’s consider a simple box drop shadow: one that’s 10 pixels down and 10 pixels to the right of an element box, and a half-opaque black.  Behind it we’ll put a repeating &#13;
<span class="keep-together">background</span> on the <code>&lt;body&gt;</code> element.  All of this is illustrated in <a data-type="xref" href="#Asimpleboxshadow">Figure 8-48</a> and created with the following code:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nf">#box</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">silver</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="nb">medium</code> <code class="nb">solid</code><code class="p">;</code>&#13;
     <code class="k">box-shadow</code><code class="o">:</code> <code class="m">10px</code> <code class="m">10px</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="o">/</code> <code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code></pre>&#13;
&#13;
<figure><div class="figure" id="Asimpleboxshadow">&#13;
<img alt="css5 0848" src="assets/css5_0848.png"/>&#13;
<h6><span class="label">Figure 8-48. </span>A simple box shadow</h6>&#13;
</div></figure>&#13;
&#13;
<p>We can see that the <code>&lt;body&gt;</code>’s background is visible through the half-opaque (or half-transparent, if you prefer) drop shadow.  Because no blur or spread distances are defined, the drop shadow exactly mimics the outer shape of the element box itself—at least it appears to do so.</p>&#13;
&#13;
<p>The reason it only appears to mimic the shape of the box is that the shadow is visible only outside the outer border edge of the element.  We couldn’t really see that in the previous figure, because the element had an opaque background.  You might have just assumed that the shadow extended all the way under the element, but it doesn’t.  Consider the following, illustrated in <a data-type="xref" href="#Boxshadowsareincomplete">Figure 8-49</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nf">#box</code> <code class="p">{</code><code class="k">background</code><code class="o">:</code> <code class="nb">transparent</code><code class="p">;</code> <code class="k">border</code><code class="o">:</code> <code class="nb">thin</code> <code class="nb">dashed</code><code class="p">;</code>&#13;
     <code class="k">box-shadow</code><code class="o">:</code> <code class="m">10px</code> <code class="m">10px</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="o">/</code> <code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code></pre>&#13;
&#13;
<figure><div class="figure" id="Boxshadowsareincomplete">&#13;
<img alt="css5 0849" src="assets/css5_0849.png"/>&#13;
<h6><span class="label">Figure 8-49. </span>Box shadows are incomplete</h6>&#13;
</div></figure>&#13;
&#13;
<p>So it looks as though the element’s content (and padding and border) area “knocks out” part of the shadow.  In truth, it’s just that the shadow was never drawn there, because of the way box shadows are defined in the specification.  This does mean, as <a data-type="xref" href="#Boxshadowsareincomplete">Figure 8-49</a> demonstrates, that any background “behind” the box with a drop shadow can be visible through the element itself.  This (perhaps bizarre-seeming) interaction with the backgrounds and borders is why <code>box-shadow</code> is covered here, instead of at an earlier point in the text.</p>&#13;
&#13;
<p>So far, we’ve seen box shadows defined with two length values.  <a data-primary="offsets" data-secondary="box-shadow" data-type="indexterm" id="idm45176093055952"/>The first defines a horizontal offset, and the second a vertical offset.  Positive numbers move the shadow down and to the right, and negative numbers move the shadow up and to the left.</p>&#13;
&#13;
<p>If a <a data-primary="blur radius" data-secondary="box-shadow" data-type="indexterm" id="idm45176093054464"/>third length is given, it defines a blur distance, which determines how much space is given to blurring.  A fourth length defines a spread distance, which changes the size of the shadow.  Positive length values make the shadow expand before blurring happens; negative values cause the shadow to shrink.  The following has the results shown in <a data-type="xref" href="#Variousblurredandspreadshadows">Figure 8-50</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">1</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">1em</code> <code class="m">1em</code> <code class="m">2px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">2</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">2em</code> <code class="m">0.5em</code> <code class="m">0.25em</code> <code class="n">rgba</code><code class="p">(</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">3</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0.5em</code> <code class="m">2ch</code> <code class="m">1vw</code> <code class="m">13px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">4</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">-10px</code> <code class="m">25px</code> <code class="m">5px</code> <code class="m">-5px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">5</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0.67em</code> <code class="m">1.33em</code> <code class="m">0</code> <code class="m">-0.1em</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">6</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0.67em</code> <code class="m">1.33em</code> <code class="m">0.2em</code> <code class="m">-0.1em</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">7</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0</code> <code class="m">0</code> <code class="m">2ch</code> <code class="m">2ch</code> <code class="n">rgba</code><code class="p">(</code><code class="m">128</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code></pre>&#13;
&#13;
<figure><div class="figure" id="Variousblurredandspreadshadows">&#13;
<img alt="css5 0850" src="assets/css5_0850.png"/>&#13;
<h6><span class="label">Figure 8-50. </span>Various blurred and spread shadows</h6>&#13;
</div></figure>&#13;
&#13;
<p>You may have noticed that some of these boxes have rounded corners (via <code>border-radius</code>), and that their shadows are curved to match.  This is the defined behavior, &#13;
<span class="keep-together">fortunately.</span></p>&#13;
&#13;
<p>We have yet to cover <a data-primary="inset keyword, box-shadow property" data-type="indexterm" id="idm45176092829232"/>one aspect of <code>box-shadow</code>, which is the <code>inset</code> keyword.  If <code>inset</code> is added to the value of <code>box-shadow</code>, the shadow is rendered inside the box, as if the box were a punched-out hole in the canvas rather than floating above it (visually speaking).  Let’s take the previous set of examples and redo them with inset shadows.  This will have the result shown in <a data-type="xref" href="#Variousinsetshadows">Figure 8-51</a>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">1</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="nb">inset</code> <code class="m">1em</code> <code class="m">1em</code> <code class="m">2px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">2</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="nb">inset</code> <code class="m">2em</code> <code class="m">0.5em</code> <code class="m">0.25em</code> <code class="n">rgba</code><code class="p">(</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">3</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0.5em</code> <code class="m">2ch</code> <code class="m">1vw</code> <code class="m">13px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">)</code> <code class="nb">inset</code><code class="p">;}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">4</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="nb">inset</code> <code class="m">-10px</code> <code class="m">25px</code> <code class="m">5px</code> <code class="m">-5px</code>  <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">5</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0.67em</code> <code class="m">1.33em</code> <code class="m">0</code> <code class="m">-0.1em</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">)</code> <code class="nb">inset</code><code class="p">;}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">6</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code>&#13;
   <code class="nb">inset</code> <code class="m">0.67em</code> <code class="m">1.33em</code> <code class="m">0.2em</code> <code class="m">-0.1em</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);}</code>&#13;
<code class="nc">.box</code><code class="nd">:nth-of-type</code><code class="o">(</code><code class="nt">7</code><code class="o">)</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0</code> <code class="m">0</code> <code class="m">2ch</code> <code class="m">2ch</code> <code class="n">rgba</code><code class="p">(</code><code class="m">128</code><code class="o">,</code><code class="m">128</code><code class="o">,</code><code class="m">0</code><code class="o">,</code><code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">)</code> <code class="nb">inset</code><code class="p">;}</code></pre>&#13;
&#13;
<figure><div class="figure" id="Variousinsetshadows">&#13;
<img alt="css5 0851" src="assets/css5_0851.png"/>&#13;
<h6><span class="label">Figure 8-51. </span>Various inset shadows</h6>&#13;
</div></figure>&#13;
&#13;
<p>Note that the <code>inset</code> keyword can appear before the rest of the value, or after, but <em>not</em> in the middle of the lengths and colors.  A value like <code>0 0 0.1em inset gray</code> would be ignored as invalid because of the placement of the <code>inset</code> keyword.</p>&#13;
&#13;
<p>The last point to note is that you can apply to an element a list of as many comma-separated box shadows as you like, just as with text shadows.  Some could be inset, and some outset.  The following rules are just two of the infinite possibilities:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nf">#shadowbox</code> <code class="p">{</code>&#13;
	<code class="k">padding</code><code class="o">:</code> <code class="m">20px</code><code class="p">;</code>&#13;
	<code class="k">box-shadow</code><code class="o">:</code> <code class="nb">inset</code> <code class="m">0</code> <code class="m">-3em</code> <code class="m">3em</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="o">/</code><code class="m">0</code><code class="o">.</code><code class="m">1</code><code class="p">)</code><code class="o">,</code>&#13;
		<code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="m">2px</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">255</code> <code class="m">255</code> <code class="m">255</code><code class="p">)</code><code class="o">,</code>&#13;
		<code class="m">0.3em</code> <code class="m">0.3em</code> <code class="m">1em</code> <code class="nb">rgb</code><code class="p">(</code><code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="o">/</code> <code class="m">0</code><code class="o">.</code><code class="m">3</code><code class="p">);}</code>&#13;
<code class="nf">#wacky</code> <code class="p">{</code><code class="k">box-shadow</code><code class="o">:</code> <code class="nb">inset</code> <code class="m">10px</code> <code class="m">2vh</code> <code class="m">0.77em</code> <code class="m">1ch</code> <code class="nb">red</code><code class="o">,</code>&#13;
     <code class="m">1cm</code> <code class="m">1in</code> <code class="m">0</code> <code class="m">-1px</code> <code class="nb">cyan</code> <code class="nb">inset</code><code class="o">,</code>&#13;
     <code class="m">2ch</code> <code class="m">3ch</code> <code class="m">0.5ch</code> <code class="n">hsl</code><code class="p">(</code><code class="m">117</code><code class="o">,</code> <code class="m">100%</code><code class="o">,</code> <code class="m">50%</code> <code class="o">/</code> <code class="m">0</code><code class="o">.</code><code class="m">343</code><code class="p">)</code><code class="o">,</code>&#13;
     <code class="m">-2ch</code> <code class="m">-3ch</code> <code class="m">0.5ch</code> <code class="n">hsl</code><code class="p">(</code><code class="m">297</code><code class="o">,</code> <code class="m">100%</code><code class="o">,</code> <code class="m">50%</code> <code class="o">/</code> <code class="m">0</code><code class="o">.</code><code class="m">23</code><code class="p">);}</code></pre>&#13;
&#13;
<p>Multiple shadows are drawn back to front, just as background layers are, so the first shadow in the comma-separated list will be “on top” of all the others. Consider the &#13;
<span class="keep-together">following:</span></p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">box-shadow</code><code class="o">:</code> <code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="m">5px</code> <code class="nb">red</code><code class="o">,</code>&#13;
            <code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="m">10px</code> <code class="nb">blue</code><code class="o">,</code>&#13;
            <code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="m">15px</code> <code class="nb">green</code><code class="p">;</code></pre>&#13;
&#13;
<p>The green is drawn first, then the blue on top of the green, and the red drawn last, on top of the blue.  While box shadows can be infinitely wide, they do not contribute to the box model and take up no space. Because of this, make sure to include enough space, especially if you’re doing large offsets or blur distances.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>The <code>filter</code> <a data-primary="filter property" data-type="indexterm" id="idm45176092373024"/>property is another way to create element drop shadows, although it is much closer in behavior to <code>text-shadow</code> than <code>box-shadow</code>, albeit applying to the entire element box and text.  See <a data-type="xref" href="ch20.html#filters-compositing">Chapter 20</a> for details.<a data-primary="" data-startref="ix_backgrounds_ch8" data-type="indexterm" id="idm45176092370384"/><a data-primary="" data-startref="ix_background_shadow" data-type="indexterm" id="idm45176092369408"/><a data-primary="" data-startref="ix_box_shadow_prop" data-type="indexterm" id="idm45176092368464"/><a data-primary="" data-startref="ix_shadow_prop" data-type="indexterm" id="idm45176092367520"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="bg_summary">&#13;
<h1>Summary</h1>&#13;
&#13;
<p>Adding backgrounds to elements, whether with colors or images, gives you a great deal of&#13;
power over the total visual presentation. The advantage of CSS over older methods is that colors and&#13;
backgrounds can be applied to any element in a document, and manipulated in surprisingly complex ways.</p>&#13;
</div></section>&#13;
</div></section></body></html>