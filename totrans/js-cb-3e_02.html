<html><head></head><body><section class="pagenumrestart" data-pdf-bookmark="Chapter 1. Setting Up a Development Environment" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch01">&#13;
<h1><span class="label">Chapter 1. </span>Setting Up a Development Environment</h1>&#13;
&#13;
&#13;
<p><a data-primary="character data (CDATA) markup" data-see="CDATA" data-type="indexterm" id="idm45475196399320"/><a data-primary="continuous integration tools" data-see="CI" data-type="indexterm" id="idm45475196397928"/><a data-primary="command-line interface" data-see="CLI" data-type="indexterm" id="idm45475196386152"/><a data-primary="Cross-Origin Resource Sharing" data-see="CORS" data-type="indexterm" id="idm45475196385208"/><a data-primary="Chrome Developer Tools" data-see="DevTools" data-type="indexterm" id="idm45475196384248"/><a data-primary="Google Chrome Developer Tools" data-see="DevTools" data-type="indexterm" id="idm45475196383304"/><a data-primary="Encrypted Media Extensions" data-see="EME" data-type="indexterm" id="idm45475196382344"/><a data-primary="Node" data-secondary="with Express" data-secondary-sortas="Express" data-see="Express framework" data-type="indexterm" id="idm45475196381384"/><a data-primary="web apps/APIs" data-secondary="Express" data-see="Express framework" data-type="indexterm" id="idm45475196379896"/><a data-primary="elements" data-secondary="img" data-see="images (img element)" data-type="indexterm" id="idm45475196378680"/><a data-primary="Google Lighthouse" data-see="Lighthouse" data-type="indexterm" id="idm45475196377464"/><a data-primary="Node" data-secondary="modules" data-see="modules" data-type="indexterm" id="idm45475196376520"/><a data-primary="Node Version Manager" data-see="NVM" data-type="indexterm" id="idm45475196375304"/><a data-primary="progressive web applications" data-see="PWAs" data-type="indexterm" id="idm45475196374360"/><a data-primary="data" data-secondary="remote data" data-see="remote data" data-type="indexterm" id="idm45475196373400"/><a data-primary="code" data-secondary="strings" data-see="strings (String object)" data-type="indexterm" id="idm45475196372184"/><a data-primary="Scalable Vector Graphics" data-see="SVG" data-type="indexterm" id="idm45475196370968"/><a data-primary="XML" data-secondary="SVG" data-see="SVG" data-type="indexterm" id="idm45475196318360"/><a data-primary="Test-Driven Development" data-see="TDD" data-type="indexterm" id="idm45475196317144"/><a data-primary="Coordinated Universal Time" data-see="UTC" data-type="indexterm" id="idm45475196316200"/><a data-primary="Internet Explorer" data-see="IE" data-type="indexterm" id="idm45475196315240"/><a data-primary="Asynchronous Module Definition" data-see="AMD" data-type="indexterm" id="idm45475196314296"/><a data-primary="full-duplex communication" data-see="bidirectional communication" data-type="indexterm" id="idm45475196313336"/><a data-primary="typed arrays" data-see="binary data" data-type="indexterm" id="idm45475196312360"/><a data-primary="functions" data-secondary="callback" data-see="callback function" data-type="indexterm" id="idm45475196311416"/><a data-primary="development environment, setting up" data-type="indexterm" id="ix_dev_environ_setup"/>You may have heard it said that the “tools make the developer.” While that’s something of an exaggeration, no one wants to be left in front of a wall of JavaScript code without their favorite tools to edit, analyze, and debug it.</p>&#13;
&#13;
<p>When you’re setting up your own development environment, the first tool you’ll consider is a code editor. Even the most basic editor adds essentials like autocompletion and syntax highlighting—two simple features that prevent piles of potential mistakes. Modern code editors add many more features, such as integration with a source control service like GitHub, line-by-line debugging, and smart refactoring. Sometimes these features will snap into your editor with a plug-in. Sometimes you’ll run them from the terminal or as part of a build process. But no matter how you use your tools, assembling the right combination to suit your coding style, development environment, and project types is part of the fun. It’s like a home improvement pro collecting tools, or an aspiring chef investing in just the right cooking gear.</p>&#13;
&#13;
<p>Tool choices aren’t static. As a developer, your preferences may shift. You’ll grow your kit as you evolve and as new tools prove themselves useful. This chapter explores the minimum toolset that every JavaScript developer should consider before they tackle a project. But there’s plenty of room to choose between different, broadly equivalent options. And, as many a wise person has remarked, there’s no accounting for taste!</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>In this chapter, we’re putting on our advocacy hat. You’ll see some of our favorite tools, and references to other, equally good options. But we don’t attempt to cover <em>every</em> tool, just some excellent default choices you can start with.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Choosing a Code Editor" data-type="sect1"><div class="sect1" id="choosing_code_editor">&#13;
<h1>Choosing a Code Editor</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475196303672">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="development environment, setting up" data-secondary="choosing code editor" data-type="indexterm" id="ix_dev_environ_code_editor"/><a data-primary="code editor, choosing" data-type="indexterm" id="ix_code_editor"/>You want to write code in an editor that understands JavaScript syntax.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475196299832">&#13;
<h2>Solution</h2>&#13;
&#13;
<p><a data-primary="VS (Visual Studio) Code" data-type="indexterm" id="idm45475196298344"/>If you’re in a hurry, you won’t go wrong with our favorite choice, Visual Studio Code (often shortened to just <em>VS Code</em>). You can download this free, open source editor for Windows, Macintosh, or Linux.</p>&#13;
&#13;
<p>If you have time to research, there are a number of other editors you might consider. The list in <a data-type="xref" href="#code_editors">Table 1-1</a> is far from complete, but shows some of the most consistently popular editors.</p>&#13;
<table id="code_editors">&#13;
<caption><span class="label">Table 1-1. </span>Desktop code editors</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Editor</th>&#13;
<th>Supported platforms</th>&#13;
<th>Open source</th>&#13;
<th>Cost</th>&#13;
<th>Notes</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><a href="https://code.visualstudio.com">Visual Studio Code</a></p></td>&#13;
<td><p>Windows, Macintosh, Linux</p></td>&#13;
<td><p>Yes</p></td>&#13;
<td><p>Free</p></td>&#13;
<td><p>A great choice for any language, and our first choice for JavaScript development</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="https://atom.io">Atom</a></p></td>&#13;
<td><p>Windows, Macintosh, Linux</p></td>&#13;
<td><p>Yes</p></td>&#13;
<td><p>Free</p></td>&#13;
<td><p>Most of the chapters in this book were written using Atom with plug-ins for AsciiDoc support</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="https://jetbrains.com/webstorm">WebStorm</a></p></td>&#13;
<td><p>Windows, Macintosh, Linux</p></td>&#13;
<td><p>No</p></td>&#13;
<td><p>Free for open source developers and educational users, otherwise roughly $60 per year for an individual</p></td>&#13;
<td><p>A heavier-weight environment that’s closer to a traditional IDE than a code editor</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="https://sublimetext.com">Sublime Text</a></p></td>&#13;
<td><p>Windows, Macintosh, Linux</p></td>&#13;
<td><p>No</p></td>&#13;
<td><p>A one-time payment of $80 for an individual, although there is no license enforcement or time limit</p></td>&#13;
<td><p>A popular editor with a reputation for fast performance with massive text files</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="http://brackets.io">Brackets</a></p></td>&#13;
<td><p>Windows, Macintosh</p></td>&#13;
<td><p>Yes</p></td>&#13;
<td><p>Free</p></td>&#13;
<td><p>An Adobe-sponsored project that’s focused on web development</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>No matter what code editor you choose, you’ll follow a similar process to start a new project. Begin by creating a new folder for your project (like <em>test-site</em>). Then, in your code editor, look for a command like <strong>File &gt; Open Folder</strong>, and choose the project folder you created. Most code editors will immediately show the contents of the project folder in a handy list or tree panel, so you can quickly jump between files.</p>&#13;
&#13;
<p>Having a project folder also gives you a place to put the packages you use (<a data-type="xref" href="#installing_npm_package">“Downloading a Package with npm”</a>) and store application-specific configuration files and linting rules (<a data-type="xref" href="#using_eslint">“Enforcing Code Standards with a Linter”</a>). And if your editor has a built-in terminal (<a data-type="xref" href="#using_terminal">“Extra: Using a Terminal and Shell”</a>), it always starts in the current project folder.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475196210872">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Recommending a best editor is a little like <em>me</em> choosing <em>your</em> dessert. Personal taste is definitely a factor, and there are at least a dozen reasonable choices. Most of the suggestions listed in <a data-type="xref" href="#code_editors">Table 1-1</a> tick off all the important boxes, meaning they’re:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Cross-platform, so it doesn’t matter what operating system you’re using.</p>&#13;
</li>&#13;
<li>&#13;
<p>Plug-in-based, so you can snap in whatever features you need. Many of the tools mentioned in this book (like the Prettier code formatter described in <a data-type="xref" href="#using_eslint">“Enforcing Code Standards with a Linter”</a>) have plug-ins that integrate with different editors.</p>&#13;
</li>&#13;
<li>&#13;
<p>Multilanguage, allowing you to go beyond HTML, CSS, and JavaScript to write code in other programming languages (with the right plug-in).</p>&#13;
</li>&#13;
<li>&#13;
<p>Community-driven, which gives you confidence that they’ll be maintained and improved long into the future.</p>&#13;
</li>&#13;
<li>&#13;
<p>Free, or available for a modest cost.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p><a data-primary="VS (Visual Studio) Code" data-type="indexterm" id="idm45475196201128"/>Our top choice, VS Code, is a Microsoft-built code editor with native JavaScript support. In fact, the editor itself is <em>written</em> in JavaScript, and hosted in Electron. (More precisely, it’s written in TypeScript, a stricter superset of JavaScript that’s transpiled into JavaScript before it’s distributed or executed.)</p>&#13;
&#13;
<p>In many ways, VS Code is the younger, trendier sibling to Microsoft’s sprawling Visual Studio IDE, which is also available in a free Community edition, and also supports JavaScript coding. But VS Code strikes a better balance for developers that aren’t already working with the Microsoft .NET stack. That’s because it starts out lightweight, but is endlessly customizable through its <a href="https://oreil.ly/RvMZ9">library with thousands of community plug-ins</a>. In Stack Overflow’s developer survey, VS Code regularly ranks as the most popular code editor across as languages.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475196197800">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>For an introduction to VS Code’s basic features and overall organization, there’s an excellent set of <a href="https://oreil.ly/iiRhA">introductory videos</a>. In this chapter, you’ll also learn how to use Emmet shortcuts in VS Code (<a data-type="xref" href="#using_emmet">“Filling in HTML Boilerplate with Emmet Shortcuts”</a>), and how to add the ESLint (<a data-type="xref" href="#using_eslint">“Enforcing Code Standards with a Linter”</a>) and Prettier (<a data-type="xref" href="#using_prettier">“Styling Code Consistently with a Formatter”</a>) plug-ins.<a data-primary="" data-startref="ix_dev_environ_code_editor" data-type="indexterm" id="idm45475196634360"/><a data-primary="" data-startref="ix_code_editor" data-type="indexterm" id="idm45475196633368"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using the Developer Console in Your Browser" data-type="sect1"><div class="sect1" id="using_developer_console">&#13;
<h1>Using the Developer Console in Your Browser</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475196630808">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="browser" data-seealso="web apps/APIs" data-type="indexterm" id="idm45475196629608"/><a data-primary="console, using" data-type="indexterm" id="ix_console_using"/><a data-primary="browser" data-secondary="developer console" data-type="indexterm" id="ix_browser_dev_console"/><a data-primary="developer console, using" data-type="indexterm" id="ix_dev_console_use"/><a data-primary="development environment, setting up" data-secondary="developer console" data-type="indexterm" id="ix_dev_environ_console"/>You want to see the errors that occur in your web page and the messages you write to the console.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475196623880">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use the developer console in your browser. <a data-type="xref" href="#developer_console_shortcuts">Table 1-2</a> shows how to load the developer tools in every modern desktop browser.</p>&#13;
<table id="developer_console_shortcuts">&#13;
<caption><span class="label">Table 1-2. </span>Shortcut key to load the developer console</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Browser</th>&#13;
<th>Operating system</th>&#13;
<th>Shortcut</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Chrome</p></td>&#13;
<td><p>Windows or Linux</p></td>&#13;
<td><p>F12  or  Ctrl+Shift+J</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Chrome</p></td>&#13;
<td><p>Macintosh</p></td>&#13;
<td><p>Cmd-Option-J</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Edge</p></td>&#13;
<td><p>Windows or Linux</p></td>&#13;
<td><p>F12  or  Ctrl+Shift+J</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Firefox</p></td>&#13;
<td><p>Windows or Linux</p></td>&#13;
<td><p>F12  or  Ctrl+Shift+J</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Firefox</p></td>&#13;
<td><p>Macintosh</p></td>&#13;
<td><p>Cmd-Shift-J</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Safari<sup><a data-type="noteref" href="ch01.html#idm45475196605672" id="idm45475196605672-marker">a</a></sup></p></td>&#13;
<td><p>Macintosh</p></td>&#13;
<td><p>Cmd-Option-C</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Opera</p></td>&#13;
<td><p>Windows</p></td>&#13;
<td><p>Ctrl+Shift+J</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Opera</p></td>&#13;
<td><p>Macintosh</p></td>&#13;
<td><p>Cmd-Option-J</p></td>&#13;
</tr>&#13;
</tbody>&#13;
<tbody><tr class="footnotes"><td colspan="3"><p data-type="footnote" id="idm45475196605672"><sup><a href="ch01.html#idm45475196605672-marker">a</a></sup> Before you can use the developer console in Safari, you must enable it. To do so, choose <strong>Safari Menu &gt; Preferences</strong> from the menu, click the <strong>Advanced</strong> tab, and check <strong>Show Develop menu in the menu bar</strong>.</p></td></tr></tbody></table>&#13;
&#13;
<p><a data-primary="console.log() method" data-type="indexterm" id="idm45475196597496"/>The developer tools are usually presented as a tabbed group of panes at the right or bottom of the web browser window. The Console panel is the one that shows the messages you output with <code>console.log()</code> and any unhandled errors.</p>&#13;
&#13;
<p>Here’s the full code for a page that writes to the console and then fails with an error:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="nt">&lt;html</code> <code class="na">lang=</code><code class="s">"en"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;head&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"UTF-8"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">name=</code><code class="s">"viewport"</code> <code class="na">content=</code><code class="s">"width=device-width, initial-scale=1.0"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">http-equiv=</code><code class="s">"X-UA-Compatible"</code> <code class="na">content=</code><code class="s">"ie=edge"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;title&gt;</code>Log and Error Test<code class="nt">&lt;/title&gt;</code>&#13;
  <code class="nt">&lt;/head&gt;</code>&#13;
  <code class="nt">&lt;body&gt;</code>&#13;
    <code class="nt">&lt;h1&gt;</code>Log and Error Test<code class="nt">&lt;/h1&gt;</code>&#13;
&#13;
<code class="nt">&lt;script&gt;</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'This appears in the developer console'</code><code class="p">);</code>&#13;
<code class="nt">&lt;/script&gt;</code>&#13;
&#13;
<code class="nt">&lt;script&gt;</code>&#13;
  <code class="c1">// This will cause an error that appears in the console</code>&#13;
  <code class="kr">const</code> <code class="nx">myNumber</code> <code class="o">=</code>&#13;
<code class="nt">&lt;/script&gt;</code>&#13;
  <code class="nt">&lt;/body&gt;</code>&#13;
<code class="nt">&lt;/html&gt;</code></pre>&#13;
&#13;
<p><a data-type="xref" href="#developer_console">Figure 1-1</a> shows the output in the developer console. The logged message appears first, followed by the error (a <code>SyntaxError</code> for “Unexpected end of input”). Errors are displayed in red lettering, and Chrome helpfully adds links next to each message, so you can quickly view the source code that caused the message. Lines in your web pages and script files are numbered automatically. In this example, that makes it easy to distinguish between the source of the message (line 13) and the source of the error (the closing <code>&lt;/script&gt;</code> tag on line 19).</p>&#13;
&#13;
<figure class="no-frame"><div class="figure" id="developer_console">&#13;
<img alt="jsc3 0101" src="assets/jsc3_0101.png"/>&#13;
<h6><span class="label">Figure 1-1. </span>Viewing the output in Chrome’s developer console</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475194670392">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>We use <code>console.log()</code> throughout this book, often to write quick testing messages. However, there are other <code>console</code> methods you can use. <a data-type="xref" href="#console_methods">Table 1-3</a> lists some of the most useful.</p>&#13;
<table class="pagebreak-before less_space" id="console_methods">&#13;
<caption><span class="label">Table 1-3. </span>Console methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>console.warn(object)</code></p></td>&#13;
<td><p>Similar to <code>console.log()</code>, but outputs text with a yellow background.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.error(object)</code></p></td>&#13;
<td><p>Similar to <code>console.log()</code>, but outputs text with a red background. It’s typically used to log error objects.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.assert(expression, object)</code></p></td>&#13;
<td><p>If the expression is <code>false</code>, the message is written to the console along with a stack trace.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.trace()</code></p></td>&#13;
<td><p>Displays a stack trace.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.count(label)</code></p></td>&#13;
<td><p>Displays the number of times you’ve called this method with this label.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.dir(object)</code></p></td>&#13;
<td><p>Displays all the properties of an object in an expandable, tree-like list.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.group()</code></p></td>&#13;
<td><p>Starts a new group with the title you supply. The following console messages are indented underneath this heading, so they appear to be part of one logically related section. You use <code>console.groupEnd()</code> to end the group.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.time(label)</code></p></td>&#13;
<td><p>Starts a timer with a label you use to identify it.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>console.timeEnd(label)</code></p></td>&#13;
<td><p>Stops the timer associated with the label and displays the elapsed time.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><a data-primary="browser" data-secondary="lazy evaluation in browser-based consoles" data-type="indexterm" id="idm45475196115144"/><a data-primary="lazy evaluation, browser-based consoles" data-type="indexterm" id="idm45475196114072"/>The consoles in modern browsers sometimes use <em>lazy evaluation</em> with objects and arrays. This issue may appear if you output an object with <code>console.log()</code>, then change it, and then output the same object a second time. If you do this from the script code in a web page, you’ll often find that both calls to <code>console.log()</code> emit the same changed object, even though the first call preceded the actual change!</p>&#13;
&#13;
<p>To avoid this quirk, you can explicitly convert your object to a string before you log it. This trick works because the console doesn’t use lazy evaluation with strings. This technique isn’t always convenient (for example, it doesn’t help if you want to log a complete array that contains objects), but it does let you work around most cases.</p>&#13;
</div>&#13;
&#13;
<p>Of course, the console is only one panel (or tab) in the developer tools. Look around, and you’ll find quite a bit of useful functionality packed into the other panels. The exact arrangement and naming depends on your browser, but here are some highlights in Chrome:</p>&#13;
<dl>&#13;
<dt>Elements</dt>&#13;
<dd>&#13;
<p>Use this panel to view the HTML markup for specific parts of your page, and inspect the CSS rules that apply to individual elements. You can even <em>change</em> markup and styles (temporarily) to quickly test potential edits.</p>&#13;
</dd>&#13;
<dt>Sources</dt>&#13;
<dd>&#13;
<p>Use this panel to browse all the files the current page is using, including JavaScript libraries, images, and style sheets.</p>&#13;
</dd>&#13;
<dt>Network</dt>&#13;
<dd>&#13;
<p>Use the panel tab to watch the size and download time of your page and its resources, and to view the asynchronous messages being sent over the wire (for example, as part of a <code>fetch</code> request).</p>&#13;
</dd>&#13;
<dt>Performance</dt>&#13;
<dd>&#13;
<p>Use this panel to start tracking the time your code takes to execute (see <a data-type="xref" href="ch11.html#analyzing_performance_in_console">“Analyzing Runtime Performance”</a>).</p>&#13;
</dd>&#13;
<dt>Application</dt>&#13;
<dd>&#13;
<p>Use this panel to review all the data the current site is storing with cookies, in local storage or with the IndexedDB API.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>You can play around with most of these panels to get an idea about how they work, or you can review <a href="https://oreil.ly/cZ6AP">Google’s documentation</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475196099544">&#13;
<h2>See Also</h2>&#13;
&#13;
<p><a data-type="xref" href="#running_code_developer_console">“Running Blocks of Code in the Developer Console”</a> explains how to run ad hoc bits of code in the developer console.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Running Blocks of Code in the Developer Console" data-type="sect1"><div class="sect1" id="running_code_developer_console">&#13;
<h1>Running Blocks of Code in the Developer Console</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475196095832">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="code" data-secondary="running blocks of code in console" data-type="indexterm" id="ix_code_run_blocks"/>You want to try out a snippet of code without opening an editor and creating HTML and JavaScript files.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475196092920">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use the developer console in your browser. First, open the developer tools (as explained in <a data-type="xref" href="#using_developer_console">“Using the Developer Console in Your Browser”</a>). Make sure the Console panel is selected. Then, paste or type your JavaScript.</p>&#13;
&#13;
<p>Press Enter to run your code immediately. If you need to type multiple lines of code, press Shift+Enter at the end of each line to insert a soft return. Only press Enter when you’re finished and you want to run your full block of code.</p>&#13;
&#13;
<p>Often, you’ll want to modify the same piece of code and rerun it. In all modern browsers, the developer console has a history feature that makes this easy. To use it, press the up arrow key to show the previously executed code block. If you want to see the code you ran before <em>that</em>, press the up arrow multiple times.</p>&#13;
&#13;
<p><a data-type="xref" href="#developer_console_code">Figure 1-2</a> shows an example with a code block that didn’t run successfully the first time because of a syntax error. The code was then called up in the history, edited, and executed, with the output (15) appearing underneath.</p>&#13;
&#13;
<figure class="no-frame"><div class="figure" id="developer_console_code">&#13;
<img alt="jsc3 0102" src="assets/jsc3_0102.png"/>&#13;
<h6><span class="label">Figure 1-2. </span>Running code in the console</h6>&#13;
</div></figure>&#13;
&#13;
<p>The history feature only works if you <em>don’t</em> start typing in any new code. If the console command line isn’t empty, the up arrow key will just move through the current code block rather than stepping back through the history.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475196083848">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>In the developer console, you can enter JavaScript code exactly as you would in a script block. In other words, you can add functions and call them, or define a class and then instantiate it. You can also access the <code>document</code> object, interact with HTML elements in the current page, show alerts, and write to the console. (The messages will appear directly below.)</p>&#13;
&#13;
<p>There’s one potential stumbling block when using the console for longer code examples. You may run into a naming clash, because JavaScript won’t allow you to define the same variables or function names in the same scope more than once. For example, consider a simple block of code like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">testValue</code> <code class="o">=</code> <code class="mi">40</code><code class="o">+</code><code class="mi">12</code><code class="p">;</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">testValue</code><code class="p">);</code></pre>&#13;
&#13;
<p>This works fine if you run it once. But if you call it back up in the history to make a modification (by pressing the up arrow), and you try to run it again, you’ll get an error informing you that <code>testValue</code> is already declared. You could rename your variable, but if you’re trying to perfect a snippet of code with multiple values and functions, this renaming gets awkward fast. Alternatively, you could execute the command <code>location.reload()</code> to refresh the page, but that can be slow for complex pages, and you might lose some page state you’re trying to keep.</p>&#13;
&#13;
<p>Fortunately, there’s a simpler solution. Simply enclose your entire block of code in an extra set of braces to create a new naming scope. You can then safely run the code multiple times, because each time a new context is created (and then discarded).</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="kr">const</code> <code class="nx">testValue</code> <code class="o">=</code> <code class="mi">40</code><code class="o">+</code><code class="mi">12</code><code class="p">;</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">testValue</code><code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475196070392">&#13;
<h2>See Also</h2>&#13;
&#13;
<p><a data-type="xref" href="ch11.html#debugging_javascript_in_console">“Debugging JavaScript”</a> explores the art of debugging in the developer console. <a data-type="xref" href="ch11.html#analyzing_performance_in_console">“Analyzing Runtime Performance”</a> shows how to use the developer console for performance analysis.<a data-primary="" data-startref="ix_dev_environ_console" data-type="indexterm" id="idm45475194285192"/><a data-primary="" data-startref="ix_dev_console_use" data-type="indexterm" id="idm45475194284248"/><a data-primary="" data-startref="ix_browser_dev_console" data-type="indexterm" id="idm45475194283304"/><a data-primary="" data-startref="ix_console_using" data-type="indexterm" id="idm45475194282360"/><a data-primary="" data-startref="ix_code_run_blocks" data-type="indexterm" id="idm45475194281416"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using Strict Mode to Catch Common Mistakes" data-type="sect1"><div class="sect1" id="using_strict_mode">&#13;
<h1>Using Strict Mode to Catch Common Mistakes</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475194253512">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="errors (Error object)" data-secondary="strict mode to catch mistakes" data-type="indexterm" id="ix_error_strict_catch"/><a data-primary="strict mode" data-secondary="catching mistakes with" data-type="indexterm" id="ix_strict_mode_catch"/><a data-primary="development environment, setting up" data-secondary="strict mode to catch mistakes" data-type="indexterm" id="ix_strict_mode_mistake"/>You want to disallow potentially risky features, like automatic variable creation and some statements that fail silently.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475194248200">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Add the <code>use strict</code> directive at the top of your JavaScript code file, like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="s1">'use strict'</code><code class="p">;</code></pre>&#13;
&#13;
<p>Alternatively, consider writing your JavaScript in a <em>module</em>, which is always loaded in strict mode (<a data-type="xref" href="ch08.html#using_es6_modules">“Organizing Your JavaScript Classes with Modules”</a>).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475194242568">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>JavaScript has a (somewhat deserved) reputation for tolerating sloppy code practices. The problem is that languages that ignore minor rule breaking put developers at a disadvantage. After all, you can’t fix a problem that you never notice.</p>&#13;
&#13;
<p>The following example demonstrates an example of JavaScript gone bad. Can you find the mistake?</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// This function adds a list of consecutive numbers</code>&#13;
<code class="kd">function</code> <code class="nx">addRange</code><code class="p">(</code><code class="nx">start</code><code class="p">,</code> <code class="nx">end</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="kd">let</code> <code class="nx">sum</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code>&#13;
  <code class="k">for</code> <code class="p">(</code><code class="kd">let</code> <code class="nx">i</code> <code class="o">=</code> <code class="nx">start</code><code class="p">;</code> <code class="nx">i</code> <code class="o">&lt;</code> <code class="nx">end</code><code class="o">+</code><code class="mi">1</code><code class="p">;</code> <code class="nx">i</code><code class="o">++</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nx">sum</code> <code class="o">+=</code> <code class="nx">i</code><code class="p">;</code>&#13;
  <code class="p">}</code>&#13;
  <code class="k">return</code> <code class="nx">sum</code><code class="p">;</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="c1">// Add numbers from 10 to 15</code>&#13;
<code class="kd">let</code> <code class="nx">startNumber</code> <code class="o">=</code> <code class="mi">10</code><code class="p">;</code>&#13;
<code class="kd">let</code> <code class="nx">endNumber</code> <code class="o">=</code> <code class="mi">15</code><code class="p">;</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">addRange</code><code class="p">(</code><code class="nx">startNumber</code><code class="p">,</code><code class="nx">endNumber</code><code class="p">));</code>   <code class="c1">// Displays 75</code>&#13;
&#13;
<code class="c1">// Now add numbers from 1 to 5</code>&#13;
<code class="nx">startnumber</code> <code class="o">=</code> <code class="mi">1</code><code class="p">;</code>&#13;
<code class="nx">endNumber</code> <code class="o">=</code> <code class="mi">5</code><code class="p">;</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">addRange</code><code class="p">(</code><code class="nx">startNumber</code><code class="p">,</code><code class="nx">endNumber</code><code class="p">));</code>   <code class="c1">// Displays 0, but we expect 15</code></pre>&#13;
&#13;
<p>Although the code runs without an error, the results aren’t what we expect. The problem occurs in this line:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">startnumber</code> <code class="o">=</code> <code class="mi">1</code><code class="p">;</code></pre>&#13;
&#13;
<p>The issue here is that JavaScript creates variables whenever you assign a value, even if you don’t explicitly define the variable. So if you assign to <code>startnumber</code> when you really want <code>startNumber</code>, JavaScript quietly creates a new <code>startnumber</code> variable. The end result is that the value you intended to assign to <code>startNumber</code> vanishes into another variable, never to be seen or used again.</p>&#13;
&#13;
<p>To catch this problem, add the strict mode directive to the top of the file, before the function code:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="s1">'use strict'</code><code class="p">;</code></pre>&#13;
&#13;
<p>Now a <code>ReferenceError</code> occurs when JavaScript reaches the <code>startnumber</code> assignment. This interrupts your code, ending the script. However, the error appears in red lettering in the developer console, explaining the problem and the line number where it happened. Now, a fix is trivially easy.</p>&#13;
&#13;
<p>Strict mode catches a number of small but pernicious errors. Some examples include:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Assignments to undeclared variables</p>&#13;
</li>&#13;
<li>&#13;
<p>Duplicate parameter names (like <code>function(a, b, a)</code>) or object literal property names (as in <code>{a: 5, a: 0}</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p>Attempts to assign values to special keywords like <code>Infinity</code> or <code>undefined</code></p>&#13;
</li>&#13;
<li>&#13;
<p>Attempts to set read-only properties (<a data-type="xref" href="ch07.html#creating_properties_with_define_property">“Customizing the Way a Property Is Defined”</a>) or change frozen objects (<a data-type="xref" href="ch07.html#preventing_any_changes_to_an_object">“Preventing Any Changes to an Object”</a>)</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Many of these actions would fail without strict mode. However, they would fail <em>silently</em>, potentially leading to a maddening situation where your code doesn’t work the way you expect it to, and you have no idea why.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>You may be able to configure your editor to insert the <code>use strict</code> directive to every new code file. For example, Visual Studio Code has at least <a href="https://oreil.ly/ye0o7">three small extensions</a> that offer to perform this task.</p>&#13;
</div>&#13;
&#13;
<p>Strict mode catches a relatively small set of errors. Most developers also use a linting tool (<a data-type="xref" href="#using_eslint">“Enforcing Code Standards with a Linter”</a>) to catch a much broader range of bugs and potentially risky actions. In fact, developers rely on linters to such an extent that they sometimes don’t bother to apply strict mode at all. However, it’s always recommended to have strict mode as a basic level of protection against shooting yourself in the foot.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475194241464">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>For the full details on what strict mode won’t accept, see <a href="https://oreil.ly/Z7QhF">the strict mode documentation</a>. To see how to use modules, which always execute in strict mode, see <a data-type="xref" href="ch08.html#using_es6_modules">“Organizing Your JavaScript Classes with Modules”</a>.<a data-primary="" data-startref="ix_strict_mode_mistake" data-type="indexterm" id="idm45475194093272"/><a data-primary="" data-startref="ix_strict_mode_catch" data-type="indexterm" id="idm45475194092296"/><a data-primary="" data-startref="ix_error_strict_catch" data-type="indexterm" id="idm45475194091352"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Filling in HTML Boilerplate with Emmet Shortcuts" data-type="sect1"><div class="sect1" id="using_emmet">&#13;
<h1>Filling in HTML Boilerplate with Emmet Shortcuts</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475194088664">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="HTML5" data-secondary="filling in boilerplate with Emmet shortcuts" data-type="indexterm" id="ix_html5_emmet"/><a data-primary="Emmet editor feature" data-type="indexterm" id="ix_emmet_shortcut"/><a data-primary="development environment, setting up" data-secondary="filling in boilerplate with Emmet shortcuts" data-type="indexterm" id="ix_dev_environ_emmet"/>You want to add a common chunk of HTML boilerplate without painstakingly typing each start and end tag.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475194066968">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Emmet is an editor feature that automatically changes predefined text abbreviations into standard blocks of HTML. Some code editors, like Visual Studio and WebStorm, support Emmet natively. Other editors, like Atom and Sublime Text, require the use of an editor plug-in. You can usually find the right plug-in by searching the plug-in library for “Emmet,” but if you’re in doubt, there’s a <a href="https://emmet.io/download">master list of Emmet-supporting plug-ins</a>.</p>&#13;
&#13;
<p>To use Emmet, create a new file and save it with a <em>.html</em> or <em>.htm</em> extension, so your code editor recognizes it as an HTML document. Then, type one of Emmet’s abbreviations, followed by the Tab key. (In some editors, you might use a different shortcut, like Enter or Ctrl+E, but the Tab key is most common.) Your text will be automatically expanded into the corresponding block of markup.</p>&#13;
&#13;
<p>For example, the Emmet abbreviation <code>input:time</code> expands into this markup:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"time"</code> <code class="na">name=</code><code class="s">""</code> <code class="na">id=</code><code class="s">""</code> <code class="nt">/&gt;</code></pre>&#13;
&#13;
<p><a data-type="xref" href="#emmet_in_vscode">Figure 1-3</a> shows how VS Code recognizes an Emmet abbreviation as you type it. VS Code provides autocomplete support for Emmet, so you can see possible choices, and it adds the note “Emmet Abbreviation” to the autocomplete menu to signal that you aren’t writing HTML, but an Emmet shortcut that will be <em>translated</em> into HTML.</p>&#13;
&#13;
<figure class="no-frame"><div class="figure" id="emmet_in_vscode">&#13;
<img alt="jsc3 0103" src="assets/jsc3_0103.png"/>&#13;
<h6><span class="label">Figure 1-3. </span>Using Emmet in VS Code</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475194056952">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Emmet provides a straightforward syntax, but it’s surprisingly flexible. You can write more complicated expressions that create nested combinations of elements, set attributes, and incorporate sequential numbers into names. For example, to create a bulleted list with five items, you use the abbreviation <code>ul&gt;li*5</code>, which adds the following block of markup:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;ul&gt;</code>&#13;
    <code class="nt">&lt;li&gt;&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;&lt;/li&gt;</code>&#13;
<code class="nt">&lt;/ul&gt;</code></pre>&#13;
&#13;
<p>Or, you can create the starting skeleton for an HTML5 web page (the modern standard) with the shortcut <code>html:5</code>.</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="nt">&lt;html</code> <code class="na">lang=</code><code class="s">"en"</code><code class="nt">&gt;</code>&#13;
<code class="nt">&lt;head&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"UTF-8"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">name=</code><code class="s">"viewport"</code> <code class="na">content=</code><code class="s">"width=device-width, initial-scale=1.0"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;title&gt;</code>Document<code class="nt">&lt;/title&gt;</code>&#13;
<code class="nt">&lt;/head&gt;</code>&#13;
<code class="nt">&lt;body&gt;</code>&#13;
&#13;
<code class="nt">&lt;/body&gt;</code>&#13;
<code class="nt">&lt;/html&gt;</code></pre>&#13;
&#13;
<p>All of these features are described in the <a href="https://docs.emmet.io">Emmet documentation</a>. If you’re in a hurry, start with the patterns in the useful cheatsheet.<a data-primary="" data-startref="ix_dev_environ_emmet" data-type="indexterm" id="idm45475193631928"/><a data-primary="" data-startref="ix_emmet_shortcut" data-type="indexterm" id="idm45475193631048"/><a data-primary="" data-startref="ix_html5_emmet" data-type="indexterm" id="idm45475193630104"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Installing the npm Package Manager (with Node.js)" data-type="sect1"><div class="sect1" id="installing_node_npm">&#13;
<h1>Installing the npm Package Manager (with Node.js)</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475193607128">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="Node" data-secondary="installing/maintaining with npm" data-type="indexterm" id="ix_node_npm_install2"/><a data-primary="npm (Node package manager)" data-secondary="installing" data-type="indexterm" id="ix_npm_pckge_install"/><a data-primary="development environment, setting up" data-secondary="npm package manager" data-type="indexterm" id="ix_dev_environ_npm_pckge"/>You want to install npm, so you can easily download JavaScript libraries from the npm registry and add them to web projects.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475193601848">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>The Node Package Manager (npm) hosts the largest (and currently most popular) software registry in the world. The easiest way to get software from the npm registry is using npm, which is bundled with Node.js. To install Node, download an installer for your operating system (Windows, MacOS, or Linux) from the <a href="https://nodejs.org">Node website</a>.</p>&#13;
&#13;
<p>Once you finish installing Node, you can test that it’s available using the command line. Open a terminal window and type the command <code>node -v</code>. To check if npm is installed, type <code>npm -v</code>. You’ll see the version number of both packages:</p>&#13;
&#13;
<pre data-type="programlisting">$ node -v&#13;
v14.15.4&#13;
$ npm -v&#13;
6.14.10</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475193597160">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>npm is included with Node.js, a JavaScript runtime environment and web server. You might use Node to run a server-side JavaScript framework like Express, or to build a JavaScript desktop application with Electron. But even if you don’t plan to use Node, you’ll almost certainly still install it just to get access to the npm package manager.</p>&#13;
&#13;
<p>The Node Package Manager is a tool that can download packages from the npm registry, a free catalog that tracks tens of thousands of JavaScript libraries. In fact, you’ll be hard-pressed to find a computer that’s used for JavaScript development that <em>doesn’t</em> have an installation of Node and npm.</p>&#13;
&#13;
<p>The work of a package manager goes beyond simply downloading useful libraries. The package manager also has the responsibility of tracking what libraries your project is using (called <em>dependencies</em>), downloading the packages <em>they</em> depend on (sometimes called subdependencies), storing versioning information, and distinguishing between test and production builds. Thanks to npm, you can take a completed application to another computer and install all the dependencies it needs with a single command, as explained in <a data-type="xref" href="#installing_npm_package">“Downloading a Package with npm”</a>.</p>&#13;
&#13;
<p><a data-primary="Pnpm package manager" data-type="indexterm" id="idm45475193591144"/><a data-primary="Yarn package manager" data-type="indexterm" id="idm45475193590440"/>Although npm is currently the most popular package manager for JavaScript, it’s not the only one you might encounter. <a href="https://yarnpkg.com">Yarn</a> is favored by some developers who find it offers faster package installation. <a href="https://pnpm.io">Pnpm</a> is another option that aims to be command-line compatible with npm, while requiring less diskspace and offering better installation performance.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475193587864">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>To install a package with npm, see <a data-type="xref" href="#installing_npm_package">“Downloading a Package with npm”</a>.</p>&#13;
&#13;
<p><a data-primary="NVM (Node Version Manager)" data-type="indexterm" id="idm45475193585480"/>If you’re using Node for development (not just npm), you should consider installing it with nvm, the Node version manager. That way you can easily switch between different Node versions and quickly update your installation when new releases are available (which is often). For more information, see <a data-type="xref" href="ch17.html#use-nvm">“Managing Node Versions with Node Version Manager”</a>. And if you need help to get started running code in the Node environment, <a data-type="xref" href="ch17.html#ch17">Chapter 17</a> has many more examples.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Extra: Using a Terminal and Shell" data-type="sect2"><div class="sect2" id="using_terminal">&#13;
<h2>Extra: Using a Terminal and Shell</h2>&#13;
&#13;
<p><a data-primary="terminal, using in Node or npm" data-type="indexterm" id="idm45475193551752"/><a data-primary="Node" data-secondary="terminal and shell" data-type="indexterm" id="ix_node_terminal_shell"/>To run Node or npm, you use the <em>terminal</em>. <a data-primary="shell" data-type="indexterm" id="idm45475193549144"/>Technically, a terminal is a text-based interface that communicates with a <em>shell</em> to execute commands. Many different <span class="keep-together">terminal</span> programs exist, along with many different shells. The terminal and shell program that you use depends on your operating system (and your personal preference, because there are plenty of third-party alternatives).</p>&#13;
&#13;
<p>Here are some of the most common terminal and shell combinations you’ll encounter:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>On a Macintosh computer, go to <strong>Applications</strong>, open the <strong>Utilities</strong> folder, and choose <strong>Terminal</strong>. This launches the default terminal program, which uses <code>bash</code> as its shell.</p>&#13;
</li>&#13;
<li>&#13;
<p>On a Linux computer, the terminal program depends on the distro. There’s often a shortcut named Terminal, and it almost always uses the <code>bash</code> shell.</p>&#13;
</li>&#13;
<li>&#13;
<p>On Windows, you can launch PowerShell from the Start menu. Technically, PowerShell is the shell and it’s wrapped in a terminal process called <code>conhost</code>. Microsoft is developing a modern <code>conhost</code> replacement called Windows Terminal, which early adopters can install from the Windows Store (or <a href="https://github.com/microsoft/terminal">download from GitHub</a>). Microsoft also includes the <code>bash</code> shell as part of its <a href="https://oreil.ly/N7EWS">Windows Subsystem for Linux</a>, although that’s a relatively recent addition to the operating system.</p>&#13;
</li>&#13;
<li>&#13;
<p>Code editors sometimes include their own terminals. For example, if you open the terminal window in VS Code (use the Ctrl + ` shortcut [that’s a backtick, not a single quote] or choose <strong>View &gt; Terminal</strong> from the menu) you get VS Code’s integrated terminal window. By default, it communicates with PowerShell on Windows and <code>bash</code> on other systems, although you can configure its settings.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>When we direct you to use a terminal command, you can use the terminal window in your code editor, the terminal program that’s specific to your computer, or one of the many third-party terminal and shell applications. They all get the same environment variables (which means they have access to Node and npm once they’re installed), and they all have the ability to run programs in the current path. You can also use your terminal for the usual filesystem maintenance tasks, like creating folders and files.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><a data-primary="$ (terminal command line)" data-type="indexterm" id="idm45475193533784"/>In this book, when we show the commands you should type in a terminal (as in <a data-type="xref" href="#installing_node_npm">“Installing the npm Package Manager (with Node.js)”</a>), we preceded them with the <code>$</code> character. This is the traditional prompt for <code>bash</code>. However, different shells have different conventions. If you’re using PowerShell you’ll see a folder name followed by the <code>&gt;</code> character instead (as in <code>C:\Projects\Sites\WebTest&gt;</code>). Either way, the commands you use to run utilities (like npm) don’t change.<a data-primary="" data-startref="ix_node_terminal_shell" data-type="indexterm" id="idm45475193530088"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Downloading a Package with npm" data-type="sect1"><div class="sect1" id="installing_npm_package">&#13;
<h1>Downloading a Package with npm</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475193527528">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="Node" data-secondary="downloading package with npm" data-type="indexterm" id="ix_node_npm_down"/>You want to install a specific software package from the npm registry.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475193524728">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>First, you must have npm on your computer (see <a data-type="xref" href="#installing_node_npm">“Installing the npm Package Manager (with Node.js)”</a> for instructions). Assuming you do, open a terminal window (<a data-type="xref" href="#using_terminal">“Extra: Using a Terminal and Shell”</a>), and go to the project directory for your website.</p>&#13;
&#13;
<p><a data-primary="init command (npm)" data-type="indexterm" id="idm45475193521144"/><a data-primary="CLI (command-line interface) tools" data-secondary="init (npm)" data-type="indexterm" id="idm45475193520216"/>Next, you should create a <em>package.json</em> file, if your application doesn’t already have one. You don’t actually need this file to install packages, but it does become important for some other tasks (like restoring your packages to another development computer). <a data-primary="package.json file" data-type="indexterm" id="idm45475193518552"/><a data-primary="files" data-secondary="package.json file" data-type="indexterm" id="idm45475193517848"/>The easiest way to create a <em>package.json</em> file is with npm’s <code>init</code> command:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm init -y</pre>&#13;
&#13;
<p>The <code>-y</code> parameter (for <em>yes</em>) means that npm will simply choose default values rather than prompt you for specific information about your application. If you don’t include the <code>-y</code> parameter, you’ll be asked a variety of questions about your application (its package name, description, version, license, and so on). However, you don’t need to fill in any of these details at first (or at all), so it’s perfectly acceptable to press Enter to leave each field blank and create the basic <em>package.json</em> boilerplate. For more information about the descriptive information inside <em>package.json</em>, see <a data-type="xref" href="#package_json">“Extra: Understanding package.json”</a>.</p>&#13;
&#13;
<p>Once you’ve initialized your application, you’re ready to install a package. You must know the exact name of the package you want to install. By convention, npm names are made up of dash-separated lowercase words, like <code>fs-extra</code> or <code>react-dom</code>. To install your package of choice, run the <code>npm install</code> command with the package name. For example, here’s how you would install the popular Lodash library:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm install lodash</pre>&#13;
&#13;
<p>npm adds the packages you install to the <em>package.json</em> file. It also records more detailed versioning information about each package in a file named <em>package-lock.json</em>.</p>&#13;
&#13;
<p>When you install a package, npm downloads its files and places them in a folder named <em>node_modules</em>. For example, if you install Lodash in a project folder named <em>test-site</em>, the Lodash script files will be placed in the folder <em>test-site/node_modules/lodash</em>.</p>&#13;
&#13;
<p>You can remove a package by name using <code>npm uninstall</code>:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm uninstall lodash</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475193524136">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>The genius of npm (or any package manager) becomes apparent when you have a typical web project with half a dozen or more packages, each of which depends on additional packages. Because all these dependencies are tracked in the <em>package-lock.json</em> file, it’s easy to figure out what a web application needs. You can see a full report by executing this command from your project folder:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm list</pre>&#13;
&#13;
<p>It’s also easy to re-download these packages on a new computer. For example, if you copy your website to another computer with the <em>package.json</em> and <em>package-lock.json</em> files, but without the <em>node_modules</em> folder, you can install all the dependent packages like this:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm install</pre>&#13;
&#13;
<p><a data-primary="global versus local installation of developer tools" data-type="indexterm" id="idm45475193497400"/><a data-primary="local versus global installation of developer tools" data-type="indexterm" id="idm45475193496472"/>So far, you’ve seen how to install packages <em>locally</em> (as part of the current web application). npm also allows packages to be installed <em>globally</em> (in a system-specific folder, so the same version is available to all the web applications on your computer). For most software packages, local installation is best. It gives you the flexibility to control the exact version of a package that you use, and it lets you use different versions of the same package with different applications, so you never break compatibility. (This potential problem becomes magnified when one package depends on the specific version of <em>another</em> package.) However, global installation is useful for certain types of packages, particularly development tools that have command-line utilities. Some examples of packages that are sometimes installed globally include <code>create-react-app</code> (used to create a new React project), <code>http-server</code> (used to run a test web server), <code>typescript</code> (used to compile TypeScript code into JavaScript), and <code>jest</code> (used to run automated tests on your code).</p>&#13;
&#13;
<p>To see all the global npm packages installed on your computer, run this command:</p>&#13;
&#13;
<pre data-type="programlisting">`npm list -g --depth 0`</pre>&#13;
&#13;
<p>Here, the <code>--depth</code> parameter makes sure that you only see the top layer of global packages, not the other packages that these global packages use. npm has additional features that we won’t cover here, including the ability to:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><a data-primary="dependencies, managing" data-type="indexterm" id="idm45475193488552"/>Designate some dependencies as <em>developer dependencies</em>, meaning they’re required for development but not deployment (like a unit testing tool). You’ll see this technique in Recipes <a data-type="xref" data-xrefstyle="select:labelnumber" href="#setting_up_test_server"/> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#using_eslint"/>.</p>&#13;
</li>&#13;
<li>&#13;
<p>Audit your dependencies by searching the npm registry for reports of known vulnerabilities, which it may be able to fix by <a href="https://oreil.ly/XJkEM">installing new versions</a>.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<ul class="pagebreak-before less_space">&#13;
<li>&#13;
<p>Run command-line tasks through a bundled utility called npx. You can even launch tasks automatically by adding them to <em>package.json</em>, like prepping your site for production deployment or starting a web server during development testing. You’ll see this technique with the test server in <a data-type="xref" href="#setting_up_test_server">“Setting Up a Local Test Server”</a>.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>npm isn’t the only package manager that JavaScript developers use. Yarn is a similar package manager that was initially developed by Facebook. It has a performance edge in some scenarios, due to the way that it downloads packages in parallel and uses caching. Historically, it’s also enforced stricter security checks. There’s no reason <em>not</em> to use Yarn, but npm remains significantly more popular in the JavaScript <span class="keep-together">community</span>.</p>&#13;
&#13;
<p>To learn everything there is to know about npm, you can spend some quality time with the <a href="https://docs.npmjs.com">npm developer docs</a>. You can also take a peek at <a href="https://yarnpkg.com">Yarn</a>.<a data-primary="" data-startref="ix_node_npm_down" data-type="indexterm" id="idm45475193475576"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Extra: Understanding package.json" data-type="sect2"><div class="sect2" id="package_json">&#13;
<h2>Extra: Understanding package.json</h2>&#13;
&#13;
<p><a data-primary="Node" data-secondary="package.json file" data-type="indexterm" id="ix_node_json"/><a data-primary="package.json file" data-type="indexterm" id="ix_pack_json"/><a data-primary="files" data-secondary="package.json file" data-type="indexterm" id="ix_files_json"/>The <em>package.json</em> file is an application configuration file that was introduced with Node, but is now used for a variety of purposes. It stores descriptive information about your project, its creator, and its license, which becomes important if you ever decide to publish your project as a package on npm (a topic covered in <a data-type="xref" href="ch18.html#converting_library_node_module">“Converting Your Library into a Node Module”</a>). The <em>package.json</em> file also tracks your dependencies (the packages your application uses) and can store extra configuration steps for debugging and deployment.</p>&#13;
&#13;
<p>It’s a good practice to begin by creating a <em>package.json</em> file whenever you start a new project. You can create the file by hand, or using the <code>npm init -y</code> command, which is what we use in the examples in this chapter. Your newly generated file will look something like this (assuming your project folder is named <em>test_site</em>):</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nt">"name"</code><code class="p">:</code> <code class="s2">"test_site"</code><code class="p">,</code>&#13;
  <code class="nt">"version"</code><code class="p">:</code> <code class="s2">"1.0.0"</code><code class="p">,</code>&#13;
  <code class="nt">"description"</code><code class="p">:</code> <code class="s2">""</code><code class="p">,</code>&#13;
  <code class="nt">"main"</code><code class="p">:</code> <code class="s2">"index.js"</code><code class="p">,</code>&#13;
  <code class="nt">"scripts"</code><code class="p">:</code> <code class="p">{</code>&#13;
    <code class="nt">"test"</code><code class="p">:</code> <code class="s2">"echo \"Error: no test specified\" &amp;&amp; exit 1"</code>&#13;
  <code class="p">},</code>&#13;
  <code class="nt">"keywords"</code><code class="p">:</code> <code class="p">[],</code>&#13;
  <code class="nt">"author"</code><code class="p">:</code> <code class="s2">""</code><code class="p">,</code>&#13;
  <code class="nt">"license"</code><code class="p">:</code> <code class="s2">"ISC"</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>As you may notice, the <em>package.json</em> file uses the JSON (JavaScript Object Notation) format. It holds a comma-separated list of property settings, all wrapped inside <code>{}</code> braces. You can edit <em>package.json</em> in your code editor at any time.</p>&#13;
&#13;
<p>When you install a package with npm, that dependency is recorded in <em>package.json</em> using a property named <code>dependencies</code>. For example, if you install Lodash, the <span class="keep-together"><em>package.json</em></span> file will look like this:</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nt">"name"</code><code class="p">:</code> <code class="s2">"test_site"</code><code class="p">,</code>&#13;
  <code class="nt">"version"</code><code class="p">:</code> <code class="s2">"1.0.0"</code><code class="p">,</code>&#13;
  <code class="nt">"description"</code><code class="p">:</code> <code class="s2">""</code><code class="p">,</code>&#13;
  <code class="nt">"main"</code><code class="p">:</code> <code class="s2">"index.js"</code><code class="p">,</code>&#13;
  <code class="nt">"scripts"</code><code class="p">:</code> <code class="p">{</code>&#13;
    <code class="nt">"test"</code><code class="p">:</code> <code class="s2">"echo \"Error: no test specified\" &amp;&amp; exit 1"</code>&#13;
  <code class="p">},</code>&#13;
  <code class="nt">"keywords"</code><code class="p">:</code> <code class="p">[],</code>&#13;
  <code class="nt">"author"</code><code class="p">:</code> <code class="s2">""</code><code class="p">,</code>&#13;
  <code class="nt">"license"</code><code class="p">:</code> <code class="s2">"ISC"</code><code class="p">,</code>&#13;
  <code class="nt">"dependencies"</code><code class="p">:</code> <code class="p">{</code>&#13;
    <code class="nt">"lodash"</code><code class="p">:</code> <code class="s2">"^4.17.20"</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Don’t confuse <em>package.json</em> with <em>package-lock.json</em>. The <em>package.json</em> file stores basic project settings and lists all the packages you use. The <em>package-lock.json</em> file specifies the exact version and checksum of every package you use (and the version and checksum of each package <em>those</em> packages use). For example, here’s the automatically created <em>package-lock.json</em> file after you install Lodash:</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nt">"name"</code><code class="p">:</code> <code class="s2">"test-site"</code><code class="p">,</code>&#13;
  <code class="nt">"version"</code><code class="p">:</code> <code class="s2">"1.0.0"</code><code class="p">,</code>&#13;
  <code class="nt">"lockfileVersion"</code><code class="p">:</code> <code class="mi">1</code><code class="p">,</code>&#13;
  <code class="nt">"requires"</code><code class="p">:</code> <code class="kc">true</code><code class="p">,</code>&#13;
  <code class="nt">"dependencies"</code><code class="p">:</code> <code class="p">{</code>&#13;
    <code class="nt">"lodash"</code><code class="p">:</code> <code class="p">{</code>&#13;
      <code class="nt">"version"</code><code class="p">:</code> <code class="s2">"4.17.20"</code><code class="p">,</code>&#13;
      <code class="nt">"resolved"</code><code class="p">:</code> <code class="s2">"https://registry.npmjs.org/lodash/-/lodash-4.17.20.tgz"</code><code class="p">,</code>&#13;
      <code class="nt">"integrity"</code><code class="p">:</code> <code class="s2">"sha512-PlhdFcillOINfeV7Ni6oF1TAEayyZBoZ8bcshTHqOYJYlrqzRK5h</code>&#13;
<code class="s2">agpagky5o4HfCzzd1TRkXPMFq6cKk9rGmA=="</code>&#13;
    <code class="p">}</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>In other words, <em>package-lock.json</em> “locks” your packages to a specific version. This is useful if you’re deploying your project to another computer, and you want to install exactly the same versions of every package that you used during development.</p>&#13;
&#13;
<p>There are two common reasons you might edit your application’s <em>package.json</em> file. First, you might want to add more descriptive details for completeness before you share the project with anyone else. You’ll definitely want to make sure this information is correct if you’re planning to share your package in the npm registry (<a data-type="xref" href="ch18.html#converting_library_node_module">“Converting Your Library into a Node Module”</a>). Second, you might decide to configure command-line tasks for debugging, like starting a test server (<a data-type="xref" href="#setting_up_test_server">“Setting Up a Local Test Server”</a>). For a complete, property-by-property description of what you can put in <em>package.json</em>, refer to the <a href="https://oreil.ly/n9PkO">npm documentation</a>.<a data-primary="" data-startref="ix_files_json" data-type="indexterm" id="idm45475191024104"/><a data-primary="" data-startref="ix_node_json" data-type="indexterm" id="idm45475191023096"/><a data-primary="" data-startref="ix_pack_json" data-type="indexterm" id="idm45475191022152"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Updating a Package with npm" data-type="sect1"><div class="sect1" id="updating_npm_package">&#13;
<h1>Updating a Package with npm</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475191019912">&#13;
<h2>Problem</h2>&#13;
&#13;
<p>You want to update an npm package to a newer version.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475191018264">&#13;
<h2>Solution</h2>&#13;
&#13;
<p><a data-primary="Node" data-secondary="updating package with npm" data-type="indexterm" id="ix_node_update_npm"/>For minor updates, use <code>npm update</code>. You can name the specific package you want to update, or ask npm to check for new versions of <em>every</em> package your site uses, and update them all in one fell swoop:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm update</pre>&#13;
&#13;
<p>npm will examine the <em>package.json</em> file and update every dependency and subdependency. It will also download any missing packages. Finally, it will update the <em>package-lock.json</em> file to match the new versions.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475191012376">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p><a data-primary="semver (semantic versioning)" data-type="indexterm" id="idm45475191010936"/>It’s a good practice to regularly update the packages you use. However, not all updates can happen automatically. npm updates follow the rules of <em>semver</em> (semantic versioning). npm will install updates that have greater patch numbers (for example, updating <code>2.1.2</code> to <code>2.1.3</code>) or minor version numbers (<code>2.1.2</code> to <code>2.2.0</code>), but it won’t upgrade a dependency if the new release changes the major version number (<code>2.1.2</code> to <code>3.0.0</code>). This behavior guards against breaking changes when you update or deploy your application.</p>&#13;
&#13;
<p>You can review what updates are available for all of your dependencies using the <code>npm outdated</code> command:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm outdated</pre>&#13;
&#13;
<p>This produces output like this:</p>&#13;
&#13;
<pre data-type="programlisting">Package                Current   Wanted   Latest  Location&#13;
-------                -------   ------   ------  --------&#13;
eslint                  7.18.0   7.25.0   7.25.0  my-site&#13;
eslint-plugin-promise    4.2.1    4.3.1    5.1.0  my-site&#13;
lodash                 4.17.20  4.17.21  4.17.21  npm-test</pre>&#13;
&#13;
<p>The <code>Wanted</code> column shows available updates that will be installed the next time you run <code>npm update</code>. The <code>Latest</code> column shows the most recent version of the package. In the example above, both <code>lodash</code> and <code>eslint</code> can be updated to the latest package version. But the <code>eslint-plugin-promise</code> package will only be updated to version 4.3.1. The latest version, 5.1.0, changes the major version number, which means that according to the rules of semver it can’t be applied automatically.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>This is a slight simplification, because npm gives you the ability to specify versioning policies more specifically in the <em>package.json</em> file. But in practice, this is the way that almost all npm updates will work. For more information about npm versioning, see <a href="https://oreil.ly/NX8js">the npm documentation</a>.</p>&#13;
</div>&#13;
&#13;
<p>If you want to update a dependency to use a new major version, you need to do it deliberately. Options include editing the <em>package.json</em> file by hand (slightly painful) or using a tool that can do it for you, like <a href="https://oreil.ly/0JcMt"><code>npm-check-updates</code></a>. The <code>npm-check-updates</code> tool allows you to review your dependencies, see what updates are available, and choose to update the <em>package.json</em> file to allow a new major version update. Once you’ve done that, call <code>npm update</code> to download the new version.<a data-primary="" data-startref="ix_dev_environ_npm_pckge" data-type="indexterm" id="idm45475190994232"/><a data-primary="" data-startref="ix_npm_pckge_install" data-type="indexterm" id="idm45475190993192"/><a data-primary="" data-startref="ix_node_npm_install2" data-type="indexterm" id="idm45475190992248"/><a data-primary="" data-startref="ix_node_update_npm" data-type="indexterm" id="idm45475190991304"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Setting Up a Local Test Server" data-type="sect1"><div class="sect1" id="setting_up_test_server">&#13;
<h1>Setting Up a Local Test Server</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475190988872">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="test server setup" data-type="indexterm" id="ix_test_server_setup2"/><a data-primary="development environment, setting up" data-secondary="test server setup" data-type="indexterm" id="ix_test_server_setup"/>You want to test your web pages during development, without local security restrictions, and without deploying them to a live web server.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475190984968">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Install a local test server on your computer. The test server will handle requests and send web pages to your browser, just like a real web server. The only difference is that the test server won’t accept remote connections from other computers.</p>&#13;
&#13;
<p><a data-primary="lite-server" data-type="indexterm" id="ix_lite_server"/>There are many choices for a test server (see the Discussion section). However, two simple, reliable choices are the <code>http-server</code> and <code>lite-server</code> packages that you can install through npm. We use <code>lite-server</code> here, because it adds a live update feature that automatically refreshes the page in the browser when you save changed code in your editor.</p>&#13;
&#13;
<p>Before you install <code>lite-server</code>, it helps to have a sample web page to request. If you haven’t already done so, make a project folder and configure it with the <code>npm init -y</code> command (<a data-type="xref" href="#installing_npm_package">“Downloading a Package with npm”</a>). Then, add a file named <em>index.html</em> with a basic content. If you’re in a hurry, here’s a minimal but valid HTML document you can use to test where your code is running:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="nt">&lt;html</code> <code class="na">lang=</code><code class="s">"en"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;head&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"utf-8"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;title&gt;</code>Test Page<code class="nt">&lt;/title&gt;</code>&#13;
  <code class="nt">&lt;/head&gt;</code>&#13;
  <code class="nt">&lt;body&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>This is the index page<code class="nt">&lt;/p&gt;</code>&#13;
    <code class="nt">&lt;script&gt;</code>&#13;
<code class="k">if</code> <code class="p">(</code><code class="nb">window</code><code class="p">.</code><code class="nx">location</code><code class="p">.</code><code class="nx">protocol</code> <code class="o">===</code> <code class="s1">'file:'</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Running as local file!'</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
<code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nb">window</code><code class="p">.</code><code class="nx">location</code><code class="p">.</code><code class="nx">host</code><code class="p">.</code><code class="nx">startsWith</code><code class="p">(</code><code class="s1">'localhost'</code><code class="p">))</code> <code class="p">{</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Running on a local server'</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
<code class="k">else</code> <code class="p">{</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Running on a remote web server'</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
    <code class="nt">&lt;/script&gt;</code>&#13;
  <code class="nt">&lt;/body&gt;</code>&#13;
<code class="nt">&lt;/html&gt;</code></pre>&#13;
&#13;
<p>Now you’re ready to make this document accessible to your browser through a test server.</p>&#13;
&#13;
<p>To install <code>lite-server</code>, use npm with the <code>--save-dev</code> option. That way it’s marked as a <em>developer dependency</em> that won’t be deployed in a production build.</p>&#13;
&#13;
<pre data-type="programlisting">npm install lite-server --save-dev</pre>&#13;
&#13;
<p>Now you can run <code>lite-server</code> directly from a terminal window using npm’s package runner, <code>npx</code>:</p>&#13;
&#13;
<pre data-type="programlisting">npx lite-server</pre>&#13;
&#13;
<p>This launches <code>lite-server</code>, opens a new browser tab, and requests <em>http://localhost:3000</em> (where <code>3000</code> is whatever port <code>lite-server</code> acquires dynamically). The <code>lite-server</code> attempts to return <em>index.html</em>, or just displays “Cannot GET /” if you don’t have a file with that name. If you used the sample page from this section, you’ll see the “This is the index page” message on the page and “Running on a local server” in the developer console. If you don’t have an <em>index.html</em> page in your test site, you can load up a different page by editing the URL in the address bar (for example, <em>http://localhost:3000/someOtherPage.html</em>).</p>&#13;
&#13;
<p>Now try making some changes. The <code>lite-server</code> instance watches your project folder. Whenever you change a file, it automatically forces the browser to refresh the page. In the terminal, you’ll see a “Reloading Browsers” message whenever this <span class="keep-together">happens</span>.</p>&#13;
&#13;
<p>To end the server, press Ctrl+C at the terminal (Command-C on a Macintosh) and answer <code>Y</code>. Or, close the terminal window (or use the Kill Terminal trashcan icon in VS Code).</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Behind the scenes, <code>lite-server</code> uses a popular browser automation tool called <a href="https://oreil.ly/tAwyk">BrowserSync</a> to implement its live reloading. The only requirement is that your web page must have a <code>&lt;body&gt;</code> section. (Create a super-simple test page without that detail, and you won’t see the automatic refreshing behavior.)</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475190984376">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>You can save a web page on your local computer, open it in a web browser, and run its code. However, web browsers greatly restrict pages that are opened from the local filesystem. Entire features are unavailable and will fail quietly (like web workers, ES modules, and certain Canvas operations). To avoid hitting these security barriers or—even worse—being confused at why code isn’t working the way you expect, it’s always better to run your web pages from a test web server.</p>&#13;
&#13;
<p>While testing, it’s common to use a development server. There are many options, and your decision will depend somewhat on the other server-side technologies that you plan to use. For example, if you want to run PHP code in your web pages, you’ll need a web server that supports it. If you plan to build part of the backend of your application using JavaScript or a JavaScript-powered server-side framework like Express, you’ll need to use Node.js. But if you’re running web pages with traditional client-side JavaScript, a simple server that sends static files is enough, like <code>http-server</code> or <code>lite-server</code>. There are many more and code editors often have their own plug-in-based test server. For example, if you’re using Visual Studio Code you can search the extension library for the popular <a href="https://oreil.ly/NIrRK">Live Server plug-in</a>.</p>&#13;
&#13;
<p><a data-primary="development run task" data-type="indexterm" id="idm45475190850616"/>In the Solution section, you saw how to run <code>lite-server</code> with <code>npx</code>. However, a more convenient setup is to make a <em>development run task</em> that automatically starts the server. You can do that by editing the <em>package.json</em> file and adding the following instruction to the <code>scripts</code> section:</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code>&#13;
<code class="err">...</code>&#13;
  <code class="nt">"scripts"</code><code class="p">:</code> <code class="p">{</code>&#13;
    <code class="nt">"dev"</code><code class="p">:</code> <code class="s2">"lite-server"</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>The <code>scripts</code> section holds executable tasks that you want to run regularly. These might include verifying your code with a linter, checking it into source control, packaging your files for deployment, or running a unit test. You can add as many scripts as you need—for example, it’s common to use one task to run your application, another to test it with an automated testing tool (<a data-type="xref" href="ch10.html#unit_testing">“Writing Unit Tests for Your Code”</a>), another to prepare it for distribution, and so on. In this example, the script is named <code>dev</code>, which is a convention that identifies a task you plan to use while developing your application.</p>&#13;
&#13;
<p>Once you’ve defined a script in <em>package.json</em>, you can run it with the <code>npm run</code> command at the terminal:</p>&#13;
&#13;
<pre data-type="programlisting">npm run dev</pre>&#13;
&#13;
<p>This launches <code>lite-server</code> with <code>npx</code>.</p>&#13;
&#13;
<p>Some code editors have additional support for this configuration detail. For example, if you open the <em>package.json</em> file in VS Code you’ll see that a “Debug” link is added just above the <code>dev</code> setting. Click this link and VS Code opens a new terminal and launches <code>lite-server</code> automatically.<a data-primary="" data-startref="ix_test_server_setup" data-type="indexterm" id="idm45475190827384"/><a data-primary="" data-startref="ix_test_server_setup2" data-type="indexterm" id="idm45475190826376"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475190855320">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>To learn more about using Node as a test server, see the recipes in <a data-type="xref" href="ch17.html#ch17">Chapter 17</a>. For more information about running tasks with npm, you can read <a href="https://oreil.ly/nq31H">this good overview</a>.<a data-primary="" data-startref="ix_lite_server" data-type="indexterm" id="idm45475190822648"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Enforcing Code Standards with a Linter" data-type="sect1"><div class="sect1" id="using_eslint">&#13;
<h1>Enforcing Code Standards with a Linter</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475190819960">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="code" data-secondary="enforcing standards with linter" data-type="indexterm" id="ix_code_eslint"/><a data-primary="linter, enforcing code standards with" data-type="indexterm" id="ix_linter_dev_env"/><a data-primary="ESLint" data-type="indexterm" id="ix_eslint_code"/><a data-primary="development environment, setting up" data-secondary="enforcing code standards with linter" data-type="indexterm" id="ix_dev_environ_linter"/>You want to standardize your JavaScript code, follow best practices, and avoid common pitfalls that can lead to bugs.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475190813880">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Check your code with a <em>linter</em>, which warns you when you deviate from the rules you’ve chosen to follow. The most popular JavaScript linter is ESLint.</p>&#13;
&#13;
<p>To use ESLint, you first need npm (see <a data-type="xref" href="#installing_node_npm">“Installing the npm Package Manager (with Node.js)”</a>). Open a terminal window in your project folder. If you haven’t already created the <em>package.json</em> file, get npm to create it now:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm init -y</pre>&#13;
&#13;
<p>Next, install the <code>eslint</code> package using the <code>--save-dev</code> option, because you want ESLint to be a <em>developer dependency</em> that’s installed on developer computers, but not deployed to a production server:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm install eslint --save-dev</pre>&#13;
&#13;
<p>If you don’t already have an ESLint configuration file, you need to create one now. Use npx to run the ESLint setup:</p>&#13;
&#13;
<pre data-type="programlisting">$ npx eslint --init</pre>&#13;
&#13;
<p>ESLint will ask you a series of questions to assess the type of rules it should enforce. Often, it presents a small menu of choices, and you must use the arrow keys to pick the option you want.</p>&#13;
&#13;
<p>The first question is “How would you like to use ESLint?” Here you have three options, arranged from least strict to most strict:</p>&#13;
<dl>&#13;
<dt>Check syntax only</dt>&#13;
<dd>&#13;
<p>Uses ESLint to catch errors. It’s not any stricter than the error-highlighting feature in most code editors.</p>&#13;
</dd>&#13;
<dt>Check syntax and find problems</dt>&#13;
<dd>&#13;
<p>Enforces <a href="https://eslint.org/docs/rules">ESLint’s recommended practices</a> (the ones marked with a checkmark). This is an excellent starting point, and you can override individual rules to your preference later on.</p>&#13;
</dd>&#13;
<dt><a data-primary="Airbnb JavaScript Style Guide" data-type="indexterm" id="idm45475190745256"/>Check syntax, find problems, and enforce code style</dt>&#13;
<dd>&#13;
<p>Is a good choice if you want to use a specific JavaScript style guide, like <a href="https://github.com/airbnb/javascript">Airbnb</a>, to enforce a broader set of style conventions. If you choose this option, you’ll be asked to pick the style guide later in the process.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>Next, you’ll be asked a series of technical questions: are you using modules, the React or Vue framework, or the TypeScript language? Choose JavaScript modules to get support for the ES6 modules standard described in <a data-type="xref" href="ch08.html#using_es6_modules">“Organizing Your JavaScript Classes with Modules”</a>, and choose No for other questions unless you’re using the technology in question.</p>&#13;
&#13;
<p>Next, you’ll be asked “Where does your code run?” Choose Browser for a traditional website with client-side JavaScript code (the usual), or Node if you’re building a server-side application that runs in the Node.js server.</p>&#13;
&#13;
<p>If you’ve chosen to use a style guide, JavaScript will now prompt you to pick one from a small list of choices. It then installs these rules automatically using one or more separate packages, provided you allow it.</p>&#13;
&#13;
<p>Finally, ESLint asks “What format do you want your config file to be in?” All the format choices work equally well. We prefer to use JSON for symmetry with the <em>package.json</em> file, in which case ESList stores its configuration in a file named <em>.eslintrc.json</em>. If you use a JavaScript configuration file, the extension is <em>.js</em>, and if you choose a YAML configuration file, the extension is <em>.yaml</em>.</p>&#13;
&#13;
<p>Here’s what you’ll see in the <em>.eslintrc.json</em> file if you’ve asked ESLint to “check syntax and find problems” without the addition of a separate style guide:</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nt">"env"</code><code class="p">:</code> <code class="p">{</code>&#13;
      <code class="nt">"browser"</code><code class="p">:</code> <code class="kc">true</code><code class="p">,</code>&#13;
      <code class="nt">"es2021"</code><code class="p">:</code> <code class="kc">true</code>&#13;
    <code class="p">},</code>&#13;
    <code class="nt">"extends"</code><code class="p">:</code> <code class="s2">"eslint:recommended"</code><code class="p">,</code>&#13;
    <code class="nt">"parserOptions"</code><code class="p">:</code> <code class="p">{</code>&#13;
      <code class="nt">"ecmaVersion"</code><code class="p">:</code> <code class="mi">12</code><code class="p">,</code>&#13;
      <code class="nt">"sourceType"</code><code class="p">:</code> <code class="s2">"module"</code>&#13;
    <code class="p">},</code>&#13;
    <code class="nt">"rules"</code><code class="p">:</code> <code class="p">{</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now you can ESLint to check your files in the terminal:</p>&#13;
&#13;
<pre data-type="programlisting">npx eslint my-script.js</pre>&#13;
&#13;
<p>But a far more practical option is to use a plug-in that integrates ESLint with your code editor. All the code editors introduced in <a data-type="xref" href="#choosing_code_editor">“Choosing a Code Editor”</a> support ESLint, and you can browse the full list of <a href="https://oreil.ly/isQMA">ESLint-supporting plug-ins</a>.</p>&#13;
&#13;
<p>To add ESLint to your code editor, go to its plug-in library. For example, in Visual Studio Code you begin by clicking <strong>Extensions</strong> in the left panel, and then searching the library for “eslint,” then clicking <strong>Install</strong>. Once you’ve installed ESLint, you will need to officially allow it through the plug-in’s settings page (or by clicking the lightbulb icon that appears when you open a code file in the editor, and then choosing <strong>Allow</strong>). You may also need to install ESLint globally across your entire computer so the plug-in can find it:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm install -g eslint</pre>&#13;
&#13;
<p>Once ESLint is enabled, you’ll see the squiggly underlines that denote ESLint errors and warnings. <a data-type="xref" href="#vs_eslint">Figure 1-4</a> shows an example where ESLint detects a <code>case</code> in a <code>switch</code> statement that falls through to the next <code>case</code>, which isn’t allowed in ESLint’s standard settings. The “eslint” label in the pop-up identifies that this message is from the ESLint plug-in, not VS Code’s standard error checking.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>If ESLint isn’t catching the issues that you expect it to catch, it could be due to <em>another</em> error in your file, possibly even one in a different section of code. Try resolving any outstanding issues, and then recheck your file.</p>&#13;
</div>&#13;
&#13;
<figure class="no-frame"><div class="figure" id="vs_eslint">&#13;
<img alt="jsc3 0104" src="assets/jsc3_0104.png"/>&#13;
<h6><span class="label">Figure 1-4. </span>ESLint flags an error in VS Code</h6>&#13;
</div></figure>&#13;
&#13;
<p>Click <strong>Quick Fix</strong> (or the lightbulb icon in the margin) to learn more about the problem or attempt a fix (if possible). You can also disable checking for this issue in the current line or file, in which case your override is recorded in a special comment. For example, this disables the rule against declaring variables that you don’t use:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="cm">/* eslint-disable no-unused-vars */</code></pre>&#13;
&#13;
<p>If you must override ESLint with comments, it’s probably best to be as targeted and judicious as possible. Instead of disabling checking for an entire file, override it for a single, specific line, like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// eslint-disable-next-line no-unused-vars</code>&#13;
<code class="kd">let</code> <code class="nx">futureUseVariable</code><code class="p">;</code></pre>&#13;
&#13;
<p>or this (replacing <code>eslint-disable-next-line</code> with <code>eslint-disable-line</code>):</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">let</code> <code class="nx">futureUseVariable</code><code class="p">;</code>  <code class="c1">// eslint-disable-line no-unused-vars</code></pre>&#13;
&#13;
<p>If you want to resume checking for the issue, just remove the comment.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475190812968">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>JavaScript is a permissive language that gives developers a great deal of flexibility. Sometimes this flexibility can lead to problems. For example, it can hide errors or cause ambiguity that makes the code harder to understand. A linter works to prevent these problems by enforcing a range of standards, even if they don’t correspond to outright errors. It flags potential issues in the making, and suspicious practices that don’t trigger your code editor’s error checker but may eventually come back to haunt you.</p>&#13;
&#13;
<p>ESLint is an <em>opinionated</em> linter, which means it flags issues that you may not consider problems, like variables you declare but don’t use, parameter values you change in a function, empty conditional blocks, and regular expressions that include literal spaces (to name just a few). If you want to allow some of these, you have the power to override any of these settings in the ESLint configuration file (or on a file-by-file or line-by-line basis with a comment). But usually you’ll just decide to change your ways to get along, knowing that ESLint’s choices will eventually avoid a future headache.</p>&#13;
&#13;
<p>ESLint also has the ability to correct certain types of errors automatically, and enforce style conventions (like tabs versus spaces, single quotes versus double quotes, brace and indent styles, and so on). Using the ESLint plug-in for an editor like VS Code, you can configure it to perform these corrections automatically when you save your file. Or, you can use ESLint to flag potential problems only, and use a formatter (<a data-type="xref" href="#using_prettier">“Styling Code Consistently with a Formatter”</a>) to enforce code style conventions.</p>&#13;
&#13;
<p>If you work in a team, you may simply receive a preordained ESLint configuration file to use. If not, you need to decide which set of ESLint defaults to follow. You can lean more about <a href="https://eslint.org/docs/rules">ESLint recommended set</a> (used in this recipe), which provides examples of nonconforming code for every issue the ESLint can check. <a data-primary="" data-startref="ix_dev_environ_linter" data-type="indexterm" id="idm45475190679784"/><a data-primary="" data-startref="ix_linter_dev_env" data-type="indexterm" id="idm45475190678808"/><a data-primary="" data-startref="ix_code_eslint" data-type="indexterm" id="idm45475190616216"/>If you want to use a more thorough JavaScript style guide, we recommend the popular <a href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide</a>, which can be installed automatically with <code>eslint -init</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Styling Code Consistently with a Formatter" data-type="sect1"><div class="sect1" id="using_prettier">&#13;
<h1>Styling Code Consistently with a Formatter</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475190612584">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="formatting" data-secondary="code" data-type="indexterm" id="ix_format_code"/><a data-primary="code" data-secondary="styling consistently with formatter" data-type="indexterm" id="ix_code_formatter"/><a data-primary="development environment, setting up" data-secondary="styling code consistently with formatter" data-type="indexterm" id="ix_dev_environ_formatter"/>You want to format your JavaScript consistently to improve readability and reduce ambiguity.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475190589352">&#13;
<h2>Solution</h2>&#13;
&#13;
<p><a data-primary="Prettier code formatter" data-type="indexterm" id="idm45475190587944"/>Use the Prettier code formatter to automatically format your code according to the rules you’ve established. Prettier enforces consistency on style details like indentation, use of single and double quotes, spacing inside brackets, spacing for function <span class="keep-together">parameter</span> lists, and the wrapping of long code lines. But unlike a linter (<a data-type="xref" href="#using_eslint">“Enforcing Code Standards with a Linter”</a>), Prettier doesn’t flag these issues for you to fix them. Instead, it applies its formatting automatically every time you save your JavaScript code, HTML markup, or CSS style rules.</p>&#13;
&#13;
<p>Although Prettier exists as a package you can install with npm and use at the command line, it’s much more useful to use a plug-in for your code editor. All the code editors introduced in  <a data-type="xref" href="#choosing_code_editor">“Choosing a Code Editor”</a> have a Prettier plug-in. Most of them are listed <a href="https://oreil.ly/weRb5">at the Prettier website</a>.</p>&#13;
&#13;
<p>To add Prettier to your code editor, go to its plug-in library. For example, in Visual Studio Code you click <strong>Extensions</strong> in the left panel, search the library for “prettier,” and then click <strong>Install</strong>.</p>&#13;
&#13;
<p>Once you’ve installed Prettier, you’ll be able to use it when you’re editing a code file. Right-click next to your code in the editor and choose <strong>Format Document</strong>. You can configure the plug-in settings to change a small set of options (like the maximum allowed width before code lines are split, and whether you prefer spaces to tabs).</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>In VS Code, you can also configure Prettier to run automatically every time you save a file. To activate this behavior, choose <strong>File &gt; Preferences &gt; Settings</strong>, go to the <strong>Text Editor &gt; Formatting</strong> section, and choose <strong>Format On Save</strong>.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475190561320">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Although many code editors have their own automatic formatting features, a code formatter goes beyond these. For example, the Prettier formatter strips away any custom formatting. It parses all the code and reformats it according to the conventions you’ve set, with almost no consideration to how it was originally written. (Blank lines and object literals are the only two exceptions.) This approach guarantees that the same code is always presented in the same way, and that code from different developers is completely consistent. And like a linter, the rules for a code formatter are defined in a configuration file, which means you can easily distribute them to different members of a team, even if they’re using different code editors.</p>&#13;
&#13;
<p>The Prettier formatter takes particular care with line breaks. By default, the maximum line length is set to 80, but Prettier will allows some lines to stretch a bit longer if it avoids a confusing line break. And if a line break is required, Prettier does it intelligently. For example, it would prefer to fit a function call into one line:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">myFunction</code><code class="p">(</code><code class="nx">argA</code><code class="p">(),</code> <code class="nx">argB</code><code class="p">(),</code> <code class="nx">argC</code><code class="p">());</code></pre>&#13;
&#13;
<p>But if that isn’t practical, it doesn’t just wrap the code however it fits. It chooses the most pleasing arrangement it understands:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">myFunction</code><code class="p">(</code>&#13;
  <code class="nx">reallyLongArg</code><code class="p">(),</code>&#13;
  <code class="nx">omgSoManyParameters</code><code class="p">(),</code>&#13;
  <code class="nx">IShouldRefactorThis</code><code class="p">(),</code>&#13;
  <code class="nx">isThereSeriouslyAnotherOne</code><code class="p">()</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>Of course, no matter how intelligent a formatter like Prettier is, you may prefer your own idiosyncratic code arrangements. It’s sometimes said that “Nobody loves what Prettier does to their syntax. Everyone loves what Prettier does to their coworkers’ syntax.” In other words, the value of an aggressive, opinionated formatter like Prettier is the way it unifies different developers, cleans up legacy code, and irons out bizarre habits. And if you decide to use Prettier, you’ll have the unchecked freedom to write your code without thinking about spacing, line breaks, or presentation. In the end, your code will still be converted to the same canonical form.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>If you’re not entirely certain that you want to use a code formatter, or you’re not sure how to configure its settings, spend some time in the <a href="https://oreil.ly/TKam1">Prettier playground</a> to explore how it works.</p>&#13;
</div>&#13;
&#13;
<p><a data-primary="ESLint" data-type="indexterm" id="idm45475190535656"/>A linter like ESLint and a formatter like Prettier have some overlap. However, their goals are different and their use is complementary. If you’re using both ESLint and Prettier, you should keep the ESLint rules that catch suspicious coding practices, but disable the ones that enforce formatting conventions about indents, quotes, and spacing. Fortunately, this is easy to do by adding an extra ESLint configuration rule that turns off potential settings that could conflict with Prettier. And the easiest way to do that is by adding the <code>eslint-config-prettier</code> package to your project:</p>&#13;
&#13;
<pre data-type="programlisting">$ npm install --save-dev eslint-config-prettier</pre>&#13;
&#13;
<p>Lastly, you need to add <code>prettier</code> to the <code>extends</code> section in your <em>.eslintrc.json</em> file. The <code>extends</code> section will hold a list wrapped in square brackets, and <code>prettier</code> should be at the very end. Here’s an example:</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code><code>&#13;
  </code><code class="nt">"env"</code><code class="p">:</code><code> </code><code class="p">{</code><code>&#13;
      </code><code class="nt">"browser"</code><code class="p">:</code><code> </code><code class="kc">true</code><code class="p">,</code><code>&#13;
      </code><code class="nt">"es2021"</code><code class="p">:</code><code> </code><code class="kc">true</code><code>&#13;
    </code><code class="p">}</code><code class="p">,</code><code>&#13;
    </code><strong><code class="nt">"extends"</code><code class="p">:</code><code> </code><code class="p">[</code><code class="s2">"eslint:recommended"</code><code class="p">,</code><code> </code><code class="s2">"prettier"</code><code class="p">]</code></strong><code class="p">,</code><code>&#13;
    </code><code class="nt">"parserOptions"</code><code class="p">:</code><code> </code><code class="p">{</code><code>&#13;
      </code><code class="nt">"ecmaVersion"</code><code class="p">:</code><code> </code><code class="mi">12</code><code class="p">,</code><code>&#13;
      </code><code class="nt">"sourceType"</code><code class="p">:</code><code> </code><code class="s2">"module"</code><code>&#13;
    </code><code class="p">}</code><code class="p">,</code><code>&#13;
    </code><code class="nt">"rules"</code><code class="p">:</code><code> </code><code class="p">{</code><code>&#13;
  </code><code class="p">}</code><code>&#13;
</code><code class="p">}</code></pre>&#13;
&#13;
<p>To review the most recent installation instructions, check out the documentation for the <a href="https://oreil.ly/AgxiF"><code>eslint-config-prettier</code> package</a>.<a data-primary="" data-startref="ix_dev_environ_formatter" data-type="indexterm" id="idm45475190470824"/><a data-primary="" data-startref="ix_code_formatter" data-type="indexterm" id="idm45475190469848"/><a data-primary="" data-startref="ix_format_code" data-type="indexterm" id="idm45475190411224"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Experimenting in a JavaScript Playground" data-type="sect1"><div class="sect1" id="using_javascript_playground">&#13;
<h1>Experimenting in a JavaScript Playground</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475190419192">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="playgrounds" data-type="indexterm" id="ix_playground_ch1"/><a data-primary="JavaScript" data-secondary="playground" data-type="indexterm" id="ix_js_playgrnd"/><a data-primary="development environment, setting up" data-secondary="experimenting in playground" data-type="indexterm" id="ix_dev_console_playgrnd"/><a data-primary="code" data-secondary="JavaScript playground" data-type="indexterm" id="ix_code_js_playground"/>You want to quickly test or share a code idea without building a project and spinning up your desktop code editor.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475190386104">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use a JavaScript <em>playground</em>, which is a website where you can edit and run JavaScript code. There are well over a dozen JavaScript playgrounds, but <a data-type="xref" href="#js_playgrounds">Table 1-4</a> lists five of the most popular.</p>&#13;
<table id="js_playgrounds">&#13;
<caption><span class="label">Table 1-4. </span>JavaScript playgrounds</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Website</th>&#13;
<th>Notes</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><a href="https://jsfiddle.net">JSFiddle</a></p></td>&#13;
<td><p>Arguably the first JavaScript playground, JSFiddle is still at the forefront with features for simulating asynchronous calls and GitHub integration.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="https://jsbin.com">JS Bin</a></p></td>&#13;
<td><p>A classic playground with a simple tab-based interface that lets you pop different sections (JavaScript, HTML, CSS) into view one at a time. The code for JS Bin is also available as an open source project.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="https://codepen.io">CodePen</a></p></td>&#13;
<td><p>One of the more attractively designed playgrounds, with an emphasis on the social (popular examples are promoted in the CodePen community). Its polished interface is particularly suitable for novice users.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="http://codesandbox.io">CodeSandbox</a></p></td>&#13;
<td><p>One of the newer playgrounds, it uses an IDE-like layout that feels a lot like a web-hosted version of Visual Studio Code.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><a href="https://glitch.com">Glitch</a></p></td>&#13;
<td><p>Another IDE-in-a-browser, Glitch is notable for its VS Code plug-in, which lets you switch between editing in a browser playground or using your desktop editor on the same project.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>All these JavaScript playgrounds are powerful, practical choices. They all work similarly, although they can look strikingly different. For example, compare the dense developer cockpit of JSFiddle (<a data-type="xref" href="#jsfiddle">Figure 1-5</a>) to the more spaced-out editor in CodePen (<a data-type="xref" href="#codepen">Figure 1-6</a>).</p>&#13;
&#13;
<figure class="no-frame width-90"><div class="figure" id="jsfiddle">&#13;
<img alt="jsc3 0105" src="assets/jsc3_0105.png"/>&#13;
<h6><span class="label">Figure 1-5. </span>The JavaScript playground JSFiddle</h6>&#13;
</div></figure>&#13;
&#13;
<figure class="no-frame width-90"><div class="figure" id="codepen">&#13;
<img alt="jsc3 0106" src="assets/jsc3_0106.png"/>&#13;
<h6><span class="label">Figure 1-6. </span>A simple example in CodePen</h6>&#13;
</div></figure>&#13;
&#13;
<p>Here’s how you use a JavaScript playground. When you visit the site, you can start coding immediately at a blank page. Even though your JavaScript, HTML, and CSS are presented separately, you don’t need to explicitly add a <code>&lt;script&gt;</code> element to connect your JavaScript or a <code>&lt;link&gt;</code> element for your style sheet. These details are already filled into the markup of your page or, more commonly, are an implicit part of boilerplate that’s hidden behind the scenes.</p>&#13;
&#13;
<p>All JavaScript playgrounds let you see the page you’re working on beside your code window. In some (like CodePen), the preview is refreshed automatically as you make changes. In others (like JSFiddle), you need to explicitly click a Play or Run button to reload your page. If you write messages with <code>console.log()</code>, some JavaScript playgrounds send that directly to the browser console (like CodePen), while others can also show it in a dedicated panel that’s visible on the page (like JSFiddle).</p>&#13;
&#13;
<p>When you’re finished you can save your work, at which point you receive a newly generated, shareable link. However, it’s a better idea to sign up for an account first, so you’re able to return to the JavaScript playground, find all the examples you’ve created, and edit them. (If you save an example anonymously, you can’t edit it, although you can use it as a starting point to build another example.) All the playgrounds listed in <a data-type="xref" href="#js_playgrounds">Table 1-4</a> let you create an account and save your work for free.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The exact terminology for the kind of example you create in a JavaScript playground varies based on the site. It might be called a fiddle, a pen, a snippet, or something else.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475190385512">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>JavaScript playgrounds are a useful idea that’s been picked up by more than a dozen websites. Almost all of them share some important characteristics:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>They’re free to use. However, many have a subscription option for premium features, like being able to save your work and keep it private.</p>&#13;
</li>&#13;
<li>&#13;
<p>You can save your work indefinitely. This is particularly handy if you want to share a quick mock-up or collaborate on a new experiment with others.</p>&#13;
</li>&#13;
<li>&#13;
<p>They support a wide range of popular JavaScript libraries and frameworks. For example, you can quickly add Lodash, React, or jQuery to your example, just by picking it from a list.</p>&#13;
</li>&#13;
<li>&#13;
<p>You can edit HTML, JavaScript, and CSS all in one window. Depending on the playground, it may be divided into panels that are all visible at once (like JSFiddle) or tabs that you switch between (like JS Bin). Or, it may be customizable (like CodePen).</p>&#13;
</li>&#13;
<li>&#13;
<p>They provide some level of autocompletion, error checking, and syntax highlighting (colorizing different code ingredients), although it’s not as complete as what you’ll get in a desktop code editor.</p>&#13;
</li>&#13;
<li>&#13;
<p>They provide a preview of your page so you can jump easily between coding and testing.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>JavaScript playgrounds also have limits. For example, you may not be able to host other resources like images, interact with backend services like databases, or use asynchronous requests with <code>fetch</code>.</p>&#13;
&#13;
<p><a data-primary="cloud-based programming environments" data-type="indexterm" id="idm45475190345944"/>JavaScript playgrounds should also be distinguished from full cloud-based programming environments. For example, you can use VS Code online in a completely hosted  environment called <a href="https://oreil.ly/Vo95d">GitHub Codespaces</a>, or <a href="https://oreil.ly/tvTZq">AWS Cloud9 from Amazon</a>, or <a href="https://oreil.ly/fqWuW">Google Cloud</a>. <a data-primary="" data-startref="ix_js_playgrnd" data-type="indexterm" id="idm45475190342632"/><a data-primary="" data-startref="ix_playground_ch1" data-type="indexterm" id="idm45475190341624"/><a data-primary="" data-startref="ix_code_js_playground" data-type="indexterm" id="idm45475190340680"/><a data-primary="" data-startref="ix_dev_console_playgrnd" data-type="indexterm" id="idm45475190339736"/><a data-primary="" data-startref="ix_dev_environ_setup" data-type="indexterm" id="idm45475190338792"/>None of these products are free, but all are appealing if you want to set up a specific development environment that you can use in your browser, on different devices, and with no setup or performance concerns.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>