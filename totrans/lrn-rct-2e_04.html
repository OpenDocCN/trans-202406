<html><head></head><body><section data-pdf-bookmark="Chapter 4. How React Works" data-type="chapter" epub:type="chapter"><div class="chapter" id="how-react-works">&#13;
<h1><span class="label">Chapter 4. </span>How React Works</h1>&#13;
&#13;
&#13;
<p>So far on your journey, you’ve brushed up on the latest syntax. You’ve&#13;
reviewed the functional programming patterns that guided React’s&#13;
creation. These steps have prepared you to take the next step, to do what you&#13;
came here to do: to learn how React works. Let’s get into writing some&#13;
real React code.</p>&#13;
&#13;
<p>When you work with React, it’s more than likely that you’ll be creating&#13;
your apps with JSX. JSX is a tag-based JavaScript syntax&#13;
that looks a lot like HTML. It’s a syntax we’ll dive deep into in the&#13;
next chapter and continue to use for the rest of the book. To truly&#13;
understand React, though, we need to understand its most atomic units:&#13;
React elements. From there, we’ll get into React elements. From there, we’ll get into React components by looking at how we can create custom components that compose other components and elements.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Page Setup" data-type="sect1"><div class="sect1" id="page-setup">&#13;
<h1>Page Setup</h1>&#13;
&#13;
<p>In<a data-primary="React" data-secondary="how it works" data-tertiary="page setup" data-type="indexterm" id="idm45901647722472"/><a data-primary="page setup" data-type="indexterm" id="idm45901647721192"/> order to work with React in the browser, we need to include two&#13;
libraries: React and<a data-primary="ReactDOM" data-secondary="purpose of" data-type="indexterm" id="idm45901647720392"/> ReactDOM. React is the library for creating views.&#13;
ReactDOM is the library used to actually render the UI in the browser.&#13;
Both libraries are available as scripts from the unpkg CDN (links are included in the following code). Let’s set up&#13;
an HTML document:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="nt">&lt;html&gt;</code>&#13;
  <code class="nt">&lt;head&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"utf-8"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;title&gt;</code>React Samples<code class="nt">&lt;/title&gt;</code>&#13;
  <code class="nt">&lt;/head&gt;</code>&#13;
  <code class="nt">&lt;body&gt;</code>&#13;
    <code class="c">&lt;!-- Target container --&gt;</code>&#13;
    <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"root"</code><code class="nt">&gt;&lt;/div&gt;</code>&#13;
&#13;
    <code class="c">&lt;!-- React library &amp; ReactDOM (Development Version)--&gt;</code>&#13;
    <code class="nt">&lt;script</code>&#13;
<code class="nt">  </code><code class="na">src=</code><code class="s">"https://unpkg.com/react@16/umd/react.development.js"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;/script&gt;</code>&#13;
    <code class="nt">&lt;script</code>&#13;
<code class="nt">  </code><code class="na">src=</code><code class="s">"https://unpkg.com/react-dom@16/umd/react-dom.development.js"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;/script&gt;</code>&#13;
&#13;
    <code class="nt">&lt;script&gt;</code>&#13;
      <code class="c1">// Pure React and JavaScript code</code>&#13;
    <code class="nt">&lt;/script&gt;</code>&#13;
  <code class="nt">&lt;/body&gt;</code>&#13;
<code class="nt">&lt;/html&gt;</code></pre>&#13;
&#13;
<p>These are the minimum requirements for working with React in the&#13;
browser. You can place your JavaScript in a separate file, but it must&#13;
be loaded somewhere in the page after React has been loaded. We’re<a data-primary="React" data-secondary="introduction to" data-tertiary="versions" data-type="indexterm" id="idm45901649797640"/><a data-primary="development environment" data-secondary="React Developer Tools" data-type="indexterm" id="idm45901647627480"/> going&#13;
to be using the development version of React to see all of the error&#13;
messages and warnings in the browser console. You can choose to use the&#13;
minified production version using <em>react.production.min.js</em> and&#13;
<em>react-dom.production.min.js</em>, which will strip away those warnings.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="React Elements" data-type="sect1"><div class="sect1" id="react-elements">&#13;
<h1>React Elements</h1>&#13;
&#13;
<p>HTML<a data-primary="React elements" data-type="indexterm" id="relements04"/><a data-primary="React" data-secondary="how it works" data-tertiary="React elements" data-type="indexterm" id="Rhowelement04"/> is simply a set of instructions that a browser follows when&#13;
constructing the DOM. The elements that make&#13;
up an HTML document become DOM elements when the browser loads HTML and&#13;
renders the user interface.</p>&#13;
&#13;
<p>Let’s say you have to construct an HTML hierarchy for a recipe. A&#13;
possible solution for such a task might look something like this:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;section</code> <code class="na">id=</code><code class="s">"baked-salmon"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;h1&gt;</code>Baked Salmon<code class="nt">&lt;/h1&gt;</code>&#13;
  <code class="nt">&lt;ul</code> <code class="na">class=</code><code class="s">"ingredients"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>2 lb salmon<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>5 sprigs fresh rosemary<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>2 tablespoons olive oil<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>2 small lemons<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>1 teaspoon kosher salt<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>4 cloves of chopped garlic<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;/ul&gt;</code>&#13;
  <code class="nt">&lt;section</code> <code class="na">class=</code><code class="s">"instructions"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;h2&gt;</code>Cooking Instructions<code class="nt">&lt;/h2&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>Preheat the oven to 375 degrees.<code class="nt">&lt;/p&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>Lightly coat aluminum foil with oil.<code class="nt">&lt;/p&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>Place salmon on foil<code class="nt">&lt;/p&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>Cover with rosemary, sliced lemons, chopped garlic.<code class="nt">&lt;/p&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>Bake for 15-20 minutes until cooked through.<code class="nt">&lt;/p&gt;</code>&#13;
    <code class="nt">&lt;p&gt;</code>Remove from oven.<code class="nt">&lt;/p&gt;</code>&#13;
  <code class="nt">&lt;/section&gt;</code>&#13;
<code class="nt">&lt;/section&gt;</code></pre>&#13;
&#13;
<p>In HTML, elements relate to one another in a hierarchy that resembles a&#13;
family tree. We could say that the root element (in this case, a section)&#13;
has three children: a heading, an unordered list of ingredients, and a&#13;
section for the instructions.</p>&#13;
&#13;
<p>In the past, websites consisted of independent HTML pages. When the user&#13;
navigated these pages, the browser would request and load different HTML&#13;
documents. The invention of AJAX (Asynchronous JavaScript and XML)&#13;
brought us the single-page application, or&#13;
<a href="https://oreil.ly/z6Saj">SPA</a>. Since&#13;
browsers could request and load tiny bits of data using AJAX, entire web&#13;
applications could now run out of a single page and rely on JavaScript&#13;
to update the user interface.</p>&#13;
&#13;
<p>In an SPA, the browser initially loads one HTML document. As users&#13;
navigate through the site, they actually stay on the same page.&#13;
JavaScript destroys and creates a new user interface as the user&#13;
interacts with the application. It may feel as though you’re jumping&#13;
from page to page, but you’re actually still on the same HTML page, and&#13;
JavaScript is doing the heavy lifting.</p>&#13;
&#13;
<p>The <a href="https://mzl.la/2m1oQDJ">DOM API</a> is a collection of objects that&#13;
JavaScript can use to interact with the browser to modify the DOM. If&#13;
you’ve used <code>document.createElement</code> or <code>document.appendChild</code>, you’ve worked with the DOM API.</p>&#13;
&#13;
<p>React is a library that’s designed to update the browser DOM for us. We&#13;
no longer have to be concerned with the complexities associated with&#13;
building high-performing SPAs because React can do that for us. With&#13;
React, we do not interact with the DOM API directly. Instead, we provide&#13;
instructions for what we want React to build, and React will take care of&#13;
rendering and reconciling the elements we’ve instructed it to&#13;
create.</p>&#13;
&#13;
<p>The browser DOM is made up of DOM elements. Similarly, the React DOM is&#13;
made up of React elements. DOM elements and React elements may look the&#13;
same, but they’re actually quite different. A React element is a&#13;
description of what the actual DOM element should look like. In other&#13;
words, React elements are the instructions for how the browser DOM&#13;
should be created.</p>&#13;
&#13;
<p>We<a data-primary="React.createElement" data-type="indexterm" id="createelement04"/> can create a React element to represent an <code>h1</code> using&#13;
<code>React.createElement</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"h1"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">id</code><code class="o">:</code> <code class="s2">"recipe-0"</code> <code class="p">},</code> <code class="s2">"Baked Salmon"</code><code class="p">);</code></pre>&#13;
&#13;
<p class="pagebreak-before">The first argument defines the type of element we want to create.&#13;
In this case, we want to create an <code>h1</code> element. The second argument&#13;
represents the element’s properties. This <code>h1</code> currently has an <code>id</code> of&#13;
<code>recipe-0</code>. The third argument represents the element’s children: any&#13;
nodes that are inserted between the opening and closing tag (in this&#13;
case, just some text).</p>&#13;
&#13;
<p>During rendering, React will convert this element to an actual DOM&#13;
element:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;h1</code> <code class="na">id=</code><code class="s">"recipe-0"</code><code class="nt">&gt;</code>Baked Salmon<code class="nt">&lt;/h1&gt;</code></pre>&#13;
&#13;
<p>The properties are similarly applied to the new DOM element: the&#13;
properties are added to the tag as attributes, and the child text is&#13;
added as text within the element. A React element is just a JavaScript&#13;
literal that tells React how to construct the DOM element.</p>&#13;
&#13;
<p>If you were to log this element, it would look like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nx">$$typeof</code><code class="o">:</code> <code class="nx">Symbol</code><code class="p">(</code><code class="nx">React</code><code class="p">.</code><code class="nx">element</code><code class="p">),</code>&#13;
  <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"h1"</code><code class="p">,</code>&#13;
  <code class="s2">"key"</code><code class="o">:</code> <code class="kc">null</code><code class="p">,</code>&#13;
  <code class="s2">"ref"</code><code class="o">:</code> <code class="kc">null</code><code class="p">,</code>&#13;
  <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code><code class="nx">id</code><code class="o">:</code> <code class="s2">"recipe-0"</code><code class="p">,</code> <code class="nx">children</code><code class="o">:</code> <code class="s2">"Baked Salmon"</code><code class="p">},</code>&#13;
  <code class="s2">"_owner"</code><code class="o">:</code> <code class="kc">null</code><code class="p">,</code>&#13;
  <code class="s2">"_store"</code><code class="o">:</code> <code class="p">{}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>This is the structure of a React element. There are fields that are used&#13;
by React: <code>_owner</code>, <code>_store</code>, and <code>$$typeof</code>. The <code>key</code> and <code>ref</code> fields are&#13;
important to React elements, but we’ll introduce those later. For now,&#13;
let’s take a closer look at the <code>type</code> and <code>props</code> fields.</p>&#13;
&#13;
<p>The <code>type</code> property of the React element tells React what type of HTML&#13;
or SVG element to create. The <code>props</code> property represents the data and&#13;
child elements required to construct a DOM element. The <code>children</code>&#13;
property is for displaying other nested elements as text.</p>&#13;
<div data-type="note" epub:type="note"><h1>Creating Elements</h1>&#13;
<p>We’re taking a peek at the object that <code>React.createElement</code> returns.&#13;
You won’t actually create these elements by hand; instead, you’ll use the&#13;
<code>React.createElement</code> function.<a data-primary="" data-startref="Rhowelement04" data-type="indexterm" id="idm45901647405192"/><a data-primary="" data-startref="relements04" data-type="indexterm" id="idm45901647404184"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="ReactDOM" data-type="sect1"><div class="sect1" id="reactdom">&#13;
<h1>ReactDOM</h1>&#13;
&#13;
<p>Once<a data-primary="React" data-secondary="how it works" data-tertiary="ReactDOM" data-type="indexterm" id="Rhowdome04"/> we’ve created a React element, we’ll want to see it in the&#13;
browser. ReactDOM contains the tools necessary to render React elements&#13;
in the browser. ReactDOM<a data-primary="ReactDOM" data-secondary="render method" data-type="indexterm" id="idm45901647399384"/> is where we’ll find the <code>render</code> method.</p>&#13;
&#13;
<p>We can render a React element, including its children, to the DOM with&#13;
<code>ReactDOM.render</code>. The element we want to render is passed as the&#13;
first argument, and the second argument is the target node, where we&#13;
should render the element:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">dish</code> <code class="o">=</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"h1"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Baked Salmon"</code><code class="p">);</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code><code class="nx">dish</code><code class="p">,</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">));</code></pre>&#13;
&#13;
<p>Rendering the title element to the DOM would add an <code>h1</code> element to the&#13;
<code>div</code> with the <code>id</code> of <code>root</code>, which we would already have defined in&#13;
our HTML. We build this <code>div</code> inside the <code>body</code> tag:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;body&gt;</code>&#13;
  <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"root"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;h1&gt;</code>Baked Salmon<code class="nt">&lt;/h1&gt;</code>&#13;
  <code class="nt">&lt;/div&gt;</code>&#13;
<code class="nt">&lt;/body&gt;</code></pre>&#13;
&#13;
<p>Anything<a data-primary="ReactDOM" data-secondary="ReactDOM package" data-type="indexterm" id="idm45901647323016"/> related to rendering elements to the DOM is found in the&#13;
<code>ReactDOM</code> package. In versions of React earlier than React 16, you&#13;
could only render one element to the DOM. Today, it’s possible to render&#13;
arrays as well. When the ability to do this was announced at ReactConf&#13;
2017, everyone clapped and screamed. It was a big deal. This is what&#13;
that looks like:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">dish</code> <code class="o">=</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"h1"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Baked Salmon"</code><code class="p">);</code>&#13;
<code class="kr">const</code> <code class="nx">dessert</code> <code class="o">=</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"h2"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Coconut Cream Pie"</code><code class="p">);</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">([</code><code class="nx">dish</code><code class="p">,</code> <code class="nx">dessert</code><code class="p">],</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">));</code></pre>&#13;
&#13;
<p>This will render both of these elements as siblings inside of the <code>root</code>&#13;
container. We hope you just clapped and screamed!</p>&#13;
&#13;
<p>In the next section, we’ll get an understanding of how to use&#13;
<code>props.children</code>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Children" data-type="sect2"><div class="sect2" id="children">&#13;
<h2>Children</h2>&#13;
&#13;
<p>React<a data-primary="ReactDOM" data-secondary="rendering child elements" data-type="indexterm" id="RDchild04"/><a data-primary="child elements" data-type="indexterm" id="childelem04"/> renders child elements using <code>props.children</code>. In the previous&#13;
section, we rendered a text element as a child of the <code>h1</code> element, and&#13;
thus <code>props.children</code> was set to <code>Baked Salmon</code>. We could render other&#13;
React elements as children, too, creating a tree of elements. This is why&#13;
we use the term<a data-primary="element trees" data-type="indexterm" id="idm45901647226488"/> <em>element tree</em>: the tree has one root element from which&#13;
many branches grow.</p>&#13;
&#13;
<p class="pagebreak-before">Let’s consider the unordered list that contains ingredients:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;ul&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>2 lb salmon<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>5 sprigs fresh rosemary<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>2 tablespoons olive oil<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>2 small lemons<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>1 teaspoon kosher salt<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>4 cloves of chopped garlic<code class="nt">&lt;/li&gt;</code>&#13;
<code class="nt">&lt;/ul&gt;</code></pre>&#13;
&#13;
<p>In this sample, the unordered list is the root element, and it has six&#13;
children. We can represent this <code>ul</code> and its children with&#13;
<code>React.createElement</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
  <code class="s2">"ul"</code><code class="p">,</code>&#13;
  <code class="kc">null</code><code class="p">,</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 lb salmon"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"5 sprigs fresh rosemary"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 tablespoons olive oil"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 small lemons"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 teaspoon kosher salt"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"4 cloves of chopped garlic"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>Every additional argument sent to the <code>createElement</code> function is&#13;
another child element. React creates an array of these child elements&#13;
and sets the value of <code>props.children</code> to that array.</p>&#13;
&#13;
<p>If we were to inspect the resulting React element, we would see each&#13;
list item represented by a React element and added to an array called&#13;
<code>props.children</code>. If you console log this element:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">list</code> <code class="o">=</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
  <code class="s2">"ul"</code><code class="p">,</code>&#13;
  <code class="kc">null</code><code class="p">,</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 lb salmon"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"5 sprigs fresh rosemary"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 tablespoons olive oil"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 small lemons"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 teaspoon kosher salt"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"4 cloves of chopped garlic"</code><code class="p">)</code>&#13;
<code class="p">);</code>&#13;
&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">list</code><code class="p">);</code></pre>&#13;
&#13;
<p>The result will look like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="p">{</code>&#13;
    <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"ul"</code><code class="p">,</code>&#13;
    <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code>&#13;
    <code class="s2">"children"</code><code class="o">:</code> <code class="p">[</code>&#13;
    <code class="p">{</code> <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"li"</code><code class="p">,</code> <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code> <code class="s2">"children"</code><code class="o">:</code> <code class="s2">"2 lb salmon"</code> <code class="p">}</code> <code class="err">…</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"li"</code><code class="p">,</code> <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code> <code class="s2">"children"</code><code class="o">:</code> <code class="s2">"5 sprigs fresh rosemary"</code><code class="p">}</code> <code class="err">…</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"li"</code><code class="p">,</code> <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code> <code class="s2">"children"</code><code class="o">:</code> <code class="s2">"2 tablespoons olive oil"</code> <code class="p">}</code> <code class="err">…</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"li"</code><code class="p">,</code> <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code> <code class="s2">"children"</code><code class="o">:</code> <code class="s2">"2 small lemons"</code><code class="p">}</code> <code class="err">…</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"li"</code><code class="p">,</code> <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code> <code class="s2">"children"</code><code class="o">:</code> <code class="s2">"1 teaspoon kosher salt"</code><code class="p">}</code> <code class="err">…</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="s2">"type"</code><code class="o">:</code> <code class="s2">"li"</code><code class="p">,</code> <code class="s2">"props"</code><code class="o">:</code> <code class="p">{</code> <code class="s2">"children"</code><code class="o">:</code> <code class="s2">"4 cloves of chopped garlic"</code><code class="p">}</code> <code class="err">…</code> <code class="p">}</code>&#13;
    <code class="p">]</code>&#13;
    <code class="p">...</code>&#13;
    <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>We can now see that each list item is a child. Earlier in this chapter,&#13;
we introduced HTML for an entire recipe rooted in a <code>section</code> element.&#13;
To create this using React, we’ll use a series of <code>createElement</code> calls:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
  <code class="s2">"section"</code><code class="p">,</code>&#13;
  <code class="p">{</code> <code class="nx">id</code><code class="o">:</code> <code class="s2">"baked-salmon"</code> <code class="p">},</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"h1"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Baked Salmon"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
    <code class="s2">"ul"</code><code class="p">,</code>&#13;
    <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 lb salmon"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"5 sprigs fresh rosemary"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 tablespoons olive oil"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 small lemons"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 teaspoon kosher salt"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"4 cloves of chopped garlic"</code><code class="p">)</code>&#13;
  <code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
    <code class="s2">"section"</code><code class="p">,</code>&#13;
    <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"instructions"</code> <code class="p">},</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"h2"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Cooking Instructions"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"p"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Preheat the oven to 375 degrees."</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"p"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Lightly coat aluminum foil with oil."</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"p"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Place salmon on foil."</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
      <code class="s2">"p"</code><code class="p">,</code>&#13;
      <code class="kc">null</code><code class="p">,</code>&#13;
      <code class="s2">"Cover with rosemary, sliced lemons, chopped garlic."</code>&#13;
    <code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
      <code class="s2">"p"</code><code class="p">,</code>&#13;
      <code class="kc">null</code><code class="p">,</code>&#13;
      <code class="s2">"Bake for 15-20 minutes until cooked through."</code>&#13;
    <code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"p"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"Remove from oven."</code><code class="p">)</code>&#13;
  <code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
<div data-type="note" epub:type="note"><h1>className in React</h1>&#13;
<p>Any<a data-primary="className" data-type="indexterm" id="idm45901646830408"/> element that has an HTML <code>class</code> attribute is using <code>className</code> for&#13;
that property instead of <code>class</code>. Since <code>class</code> is a reserved word in&#13;
JavaScript, we have to use <code>className</code> to define the <code>class</code> attribute&#13;
of an HTML element.&#13;
This sample is what pure React looks like. Pure React is ultimately what&#13;
runs in the browser. A React app is a tree of React elements all&#13;
stemming from a single root element. React elements are the instructions&#13;
 React will use to build a UI in the browser.<a data-primary="" data-startref="RDchild04" data-type="indexterm" id="idm45901646589560"/><a data-primary="" data-startref="childelem04" data-type="indexterm" id="idm45901646588584"/></p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Constructing elements with data" data-type="sect3"><div class="sect3" id="constructing-elements-with-data">&#13;
<h3>Constructing elements with data</h3>&#13;
&#13;
<p>The<a data-primary="ReactDOM" data-secondary="constructing elements with data" data-type="indexterm" id="idm45901646586008"/> major advantage of using React is its ability to separate data from&#13;
UI elements. Since React is just JavaScript, we can add JavaScript logic&#13;
to help us build the React<a data-primary="component trees" data-secondary="building" data-type="indexterm" id="idm45901646584616"/> component tree. For example, ingredients can&#13;
be stored in an array, and we can map that array to the React elements.</p>&#13;
&#13;
<p>Let’s go back and think about the unordered list for a moment:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
  <code class="s2">"ul"</code><code class="p">,</code>&#13;
  <code class="kc">null</code><code class="p">,</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 lb salmon"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"5 sprigs fresh rosemary"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 tablespoons olive oil"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 small lemons"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 teaspoon kosher salt"</code><code class="p">),</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"4 cloves of chopped garlic"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>The data used in this list of ingredients can easily be represented&#13;
using a JavaScript array:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">items</code> <code class="o">=</code> <code class="p">[</code>&#13;
  <code class="s2">"2 lb salmon"</code><code class="p">,</code>&#13;
  <code class="s2">"5 sprigs fresh rosemary"</code><code class="p">,</code>&#13;
  <code class="s2">"2 tablespoons olive oil"</code><code class="p">,</code>&#13;
  <code class="s2">"2 small lemons"</code><code class="p">,</code>&#13;
  <code class="s2">"1 teaspoon kosher salt"</code><code class="p">,</code>&#13;
  <code class="s2">"4 cloves of chopped garlic"</code>&#13;
<code class="p">];</code></pre>&#13;
&#13;
<p>We want to use this data to generate the correct number of list items&#13;
without having to hard-code each one. We can map over the array and&#13;
create list items for as many ingredients as there are:</p>&#13;
&#13;
<pre class="pagebreak-before" data-code-language="javascript" data-type="programlisting"><code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
  <code class="s2">"ul"</code><code class="p">,</code>&#13;
  <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
  <code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">(</code><code class="nx">ingredient</code> <code class="o">=&gt;</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="nx">ingredient</code><code class="p">))</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>This syntax creates a React element for each ingredient in the array.&#13;
Each string is displayed in the list item’s children as text. The value&#13;
for each ingredient is displayed as the list item.</p>&#13;
&#13;
<p>When running this code, you’ll see a console warning like the one shown in <a data-type="xref" href="#console_warning">Figure 4-1</a>.</p>&#13;
&#13;
<figure><div class="figure" id="console_warning">&#13;
<img alt="image" src="assets/lrc2_0401.png"/>&#13;
<h6><span class="label">Figure 4-1. </span>Console warning</h6>&#13;
</div></figure>&#13;
&#13;
<p>When we build a list of child elements by iterating through an array,&#13;
React likes each of those elements to have a <code>key</code> property. The <code>key</code>&#13;
property is used by React to help it update the DOM efficiently. You can&#13;
make this warning go away by adding a unique <code>key</code> property to each of&#13;
the list item elements. You can use the array index for each ingredient&#13;
as that unique value:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
  <code class="s2">"ul"</code><code class="p">,</code>&#13;
  <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
  <code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">key</code><code class="o">:</code> <code class="nx">i</code> <code class="p">},</code> <code class="nx">ingredient</code><code class="p">)</code>&#13;
  <code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>We’ll cover keys in more detail when we discuss JSX, but adding this to&#13;
each list item will clear the console warning.<a data-primary="" data-startref="Rhowdome04" data-type="indexterm" id="idm45901646229464"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="React Components" data-type="sect1"><div class="sect1" id="react-components">&#13;
<h1>React Components</h1>&#13;
&#13;
<p>No<a data-primary="React components" data-type="indexterm" id="reactcomp04"/><a data-primary="React" data-secondary="how it works" data-tertiary="React components" data-type="indexterm" id="Rhowcomp04"/> matter its size, its contents, or what technologies are used to&#13;
create it, a user interface is made up of parts. Buttons. Lists.&#13;
Headings. All of these parts, when put together, make up a user&#13;
interface. Consider a recipe application with three different recipes.&#13;
The data is different in each box, but the parts needed to create a&#13;
recipe are the same (see <a data-type="xref" href="#recipes_app">Figure 4-2</a>).</p>&#13;
&#13;
<figure><div class="figure" id="recipes_app">&#13;
<img alt="image" src="assets/lrc2_0402.png"/>&#13;
<h6><span class="label">Figure 4-2. </span>Recipes app</h6>&#13;
</div></figure>&#13;
&#13;
<p>In React, we describe each of these parts as a <em>component</em>. Components&#13;
allow us to reuse the same structure, and then we can populate those&#13;
structures with different sets of data.</p>&#13;
&#13;
<p>When considering a user interface you want to build with React,&#13;
look for opportunities to break down your elements into reusable pieces.&#13;
For example, the recipes in <a data-type="xref" href="#recipes_list">Figure 4-3</a> have a title, ingredients list, and&#13;
instructions. All are part of a larger recipe or app component. We could&#13;
create a component for each of the highlighted parts: ingredients,&#13;
instructions, and so on.</p>&#13;
&#13;
<figure><div class="figure" id="recipes_list">&#13;
<img alt="image" src="assets/lrc2_0403.png"/>&#13;
<h6><span class="label">Figure 4-3. </span>Each component is outlined: <code>App</code>, <code>IngredientsList</code>, <code>Instructions</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>Think about how scalable this is. If we want to display one recipe, our&#13;
component structure will support this. If we want to display 10,000&#13;
recipes, we’ll just create 10,000 new instances of that component.</p>&#13;
&#13;
<p>We’ll create a component by writing a function. That function will&#13;
return a reusable part of a user interface. Let’s create a function that&#13;
returns an unordered list of ingredients. This time, we’ll make dessert&#13;
with a function called <code>IngredientsList</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">IngredientsList</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
    <code class="s2">"ul"</code><code class="p">,</code>&#13;
    <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 cup unsalted butter"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 cup crunchy peanut butter"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 cup brown sugar"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 cup white sugar"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2 eggs"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"2.5 cups all purpose flour"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"1 teaspoon baking powder"</code><code class="p">),</code>&#13;
    <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="s2">"0.5 teaspoon salt"</code><code class="p">)</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="nx">IngredientsList</code><code class="p">,</code> <code class="kc">null</code><code class="p">,</code> <code class="kc">null</code><code class="p">),</code>&#13;
  <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>The component’s name is <code>IngredientsList</code>, and the function outputs&#13;
elements that look like this:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;IngredientsList&gt;</code>&#13;
  <code class="nt">&lt;ul</code> <code class="na">className=</code><code class="s">"ingredients"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>1 cup unsalted butter<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>1 cup crunchy peanut butter<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>1 cup brown sugar<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>1 cup white sugar<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>2 eggs<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>2.5 cups all purpose flour<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>1 teaspoon baking powder<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li&gt;</code>0.5 teaspoon salt<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;/ul&gt;</code>&#13;
<code class="nt">&lt;/IngredientsList&gt;</code></pre>&#13;
&#13;
<p>This is pretty cool, but we’ve hardcoded this data into the component.&#13;
What if we could build one component and then pass data into&#13;
that component as properties? And then what if that component could&#13;
render the data dynamically? Maybe someday that will happen!</p>&#13;
&#13;
<p>Just kidding—that day is now. Here’s an array of <code>secretIngredients</code> needed to put&#13;
together a recipe:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">secretIngredients</code> <code class="o">=</code> <code class="p">[</code>&#13;
  <code class="s2">"1 cup unsalted butter"</code><code class="p">,</code>&#13;
  <code class="s2">"1 cup crunchy peanut butter"</code><code class="p">,</code>&#13;
  <code class="s2">"1 cup brown sugar"</code><code class="p">,</code>&#13;
  <code class="s2">"1 cup white sugar"</code><code class="p">,</code>&#13;
  <code class="s2">"2 eggs"</code><code class="p">,</code>&#13;
  <code class="s2">"2.5 cups all purpose flour"</code><code class="p">,</code>&#13;
  <code class="s2">"1 teaspoon baking powder"</code><code class="p">,</code>&#13;
  <code class="s2">"0.5 teaspoon salt"</code>&#13;
<code class="p">];</code></pre>&#13;
&#13;
<p>Then we’ll adjust the <code>IngredientsList</code> component to map over these&#13;
<code>items</code>, constructing an <code>li</code> for however many items are in the <code>items</code>&#13;
array:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">IngredientsList</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
    <code class="s2">"ul"</code><code class="p">,</code>&#13;
    <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
    <code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code>&#13;
      <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">key</code><code class="o">:</code> <code class="nx">i</code> <code class="p">},</code> <code class="nx">ingredient</code><code class="p">)</code>&#13;
    <code class="p">)</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Then we’ll pass those <code>secretIngredients</code> as a property called <code>items</code>, which is the second argument used in <code>createElement</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code>&#13;
  <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="nx">IngredientsList</code><code class="p">,</code> <code class="p">{</code> <code class="nx">items</code><code class="o">:</code> <code class="nx">secretIngredients</code> <code class="p">},</code> <code class="kc">null</code><code class="p">),</code>&#13;
  <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>Now, let’s look at the DOM. The data property <code>items</code> is an array with&#13;
eight ingredients. Because we made the <code>li</code> tags using a loop, we were&#13;
able to add a unique key using the index of the loop:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;IngredientsList</code> <code class="na">items=</code><code class="s">"[...]"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;ul</code> <code class="na">className=</code><code class="s">"ingredients"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"0"</code><code class="nt">&gt;</code>1 cup unsalted butter<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"1"</code><code class="nt">&gt;</code>1 cup crunchy peanut butter<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"2"</code><code class="nt">&gt;</code>1 cup brown sugar<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"3"</code><code class="nt">&gt;</code>1 cup white sugar<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"4"</code><code class="nt">&gt;</code>2 eggs<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"5"</code><code class="nt">&gt;</code>2.5 cups all purpose flour<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"6"</code><code class="nt">&gt;</code>1 teaspoon baking powder<code class="nt">&lt;/li&gt;</code>&#13;
    <code class="nt">&lt;li</code> <code class="na">key=</code><code class="s">"7"</code><code class="nt">&gt;</code>0.5 teaspoon salt<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;/ul&gt;</code>&#13;
<code class="nt">&lt;/IngredientsList&gt;</code></pre>&#13;
&#13;
<p>Creating our component this way will make the component more flexible.&#13;
Whether the <code>items</code> array is one item or a hundred items long, the component&#13;
will render each as a list item.</p>&#13;
&#13;
<p>Another adjustment we can make here is to reference the <code>items</code> array from&#13;
React props. Instead of mapping over the global <code>items</code>, we’ll make&#13;
<code>items</code> available on the <code>props</code> object. Start by passing <code>props</code> to the&#13;
function, then mapping over <code>props.items</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">IngredientsList</code><code class="p">(</code><code class="nx">props</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
    <code class="s2">"ul"</code><code class="p">,</code>&#13;
    <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
    <code class="nx">props</code><code class="p">.</code><code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code>&#13;
      <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">key</code><code class="o">:</code> <code class="nx">i</code> <code class="p">},</code> <code class="nx">ingredient</code><code class="p">)</code>&#13;
    <code class="p">)</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>We could also clean up the code a bit by destructuring <code>items</code> from&#13;
<code>props</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">IngredientsList</code><code class="p">({</code> <code class="nx">items</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
    <code class="s2">"ul"</code><code class="p">,</code>&#13;
    <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
    <code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code>&#13;
      <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">key</code><code class="o">:</code> <code class="nx">i</code> <code class="p">},</code> <code class="nx">ingredient</code><code class="p">)</code>&#13;
    <code class="p">)</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Everything that’s associated with the UI for <code>IngredientsList</code> is&#13;
encapsulated into one component. Everything we need is right there.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="React Components: A Historical Tour" data-type="sect2"><div class="sect2" id="react-components-a-historical-tour">&#13;
<h2>React Components: A Historical Tour</h2>&#13;
&#13;
<p>Before there were function components, there were other ways to create&#13;
components. While we won’t spend a great deal of time on these&#13;
approaches, it’s important to understand the history of React&#13;
components, particularly when dealing with these APIs in legacy&#13;
codebases. Let’s take a little historical tour of React APIs of times&#13;
gone by.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Tour stop 1: createClass" data-type="sect3"><div class="sect3" id="tour-stop-1-createclass">&#13;
<h3>Tour stop 1: createClass</h3>&#13;
&#13;
<p>When<a data-primary="React.createClass" data-type="indexterm" id="idm45901645614024"/> React was first made open source in 2013, there was one way to create a&#13;
component: <code>createClass</code>. The use of <code>React.createClass</code> to create a&#13;
component looks like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">IngredientsList</code> <code class="o">=</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createClass</code><code class="p">({</code>&#13;
  <code class="nx">displayName</code><code class="o">:</code> <code class="s2">"IngredientsList"</code><code class="p">,</code>&#13;
  <code class="nx">render</code><code class="p">()</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
      <code class="s2">"ul"</code><code class="p">,</code>&#13;
      <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
      <code class="k">this</code><code class="p">.</code><code class="nx">props</code><code class="p">.</code><code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code>&#13;
        <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">key</code><code class="o">:</code> <code class="nx">i</code> <code class="p">},</code> <code class="nx">ingredient</code><code class="p">)</code>&#13;
      <code class="p">)</code>&#13;
    <code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">});</code></pre>&#13;
&#13;
<p>Components that used <code>createClass</code> would have a <code>render()</code> method that&#13;
described the React element(s) that should be returned and rendered. The&#13;
idea of the component was the same: we’d describe a reusable bit of UI&#13;
to render.</p>&#13;
&#13;
<p>In React 15.5 (April 2017), React started throwing warnings if&#13;
<code>createClass</code> was used. In React 16 (September 2017),&#13;
<code>React.createClass</code> was officially deprecated and was moved to its own&#13;
package, <code>create-react-class</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Tour stop 2: class components" data-type="sect3"><div class="sect3" id="tour-stop-2-class-components">&#13;
<h3>Tour stop 2: class components</h3>&#13;
&#13;
<p>When<a data-primary="React.Component API" data-type="indexterm" id="idm45901645535448"/> class syntax was added to JavaScript with ES 2015, React&#13;
introduced a new method for creating React components. The&#13;
<code>React.Component</code> API allowed you to use class syntax to create a new&#13;
component instance:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">class</code> <code class="nx">IngredientsList</code> <code class="kr">extends</code> <code class="nx">React</code><code class="p">.</code><code class="nx">Component</code> <code class="p">{</code>&#13;
  <code class="nx">render</code><code class="p">()</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code>&#13;
      <code class="s2">"ul"</code><code class="p">,</code>&#13;
      <code class="p">{</code> <code class="nx">className</code><code class="o">:</code> <code class="s2">"ingredients"</code> <code class="p">},</code>&#13;
      <code class="k">this</code><code class="p">.</code><code class="nx">props</code><code class="p">.</code><code class="nx">items</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code>&#13;
        <code class="nx">React</code><code class="p">.</code><code class="nx">createElement</code><code class="p">(</code><code class="s2">"li"</code><code class="p">,</code> <code class="p">{</code> <code class="nx">key</code><code class="o">:</code> <code class="nx">i</code> <code class="p">},</code> <code class="nx">ingredient</code><code class="p">)</code>&#13;
      <code class="p">)</code>&#13;
    <code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>It’s still possible to create a React component using class syntax, but&#13;
be forewarned that <code>React.Component</code> is on the path to deprecation as well.&#13;
Although it’s still supported, you can expect this to go the way of&#13;
<code>React.createClass</code>, another old friend who shaped you but who you won’t&#13;
see as often because they moved away and you moved on. From now on,&#13;
we’ll use functions to create components in this book and only briefly&#13;
point out older patterns for reference.<a data-primary="" data-startref="Rhowcomp04" data-type="indexterm" id="idm45901645436216"/><a data-primary="" data-startref="reactcomp04" data-type="indexterm" id="idm45901645435368"/><a data-primary="" data-startref="createelement04" data-type="indexterm" id="idm45901645434424"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>