<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 10. Numbers Matter: Numbers and Statics"><div class="chapter" id="numbers_matter_numbers_and_statics">
<h1><span class="label">Chapter 10. </span>Numbers Matter: Numbers and Statics</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0275-01.png" alt="image" width="619" height="829"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="final keyword" data-secondary="variables" id="idm46038392962192"/><a data-type="indexterm" data-primary="static final variables" id="idm46038392960976"/><a data-type="indexterm" data-primary="variables" data-secondary="final" id="idm46038392960144"/><strong>Do the Math.</strong> But there’s more to working with numbers than just doing primitive arithmetic. You might want to get the absolute value of a number, or round a number, or find the larger of two numbers. You might want your numbers to print with exactly two decimal places, or you might want to put commas into your large numbers to make them easier to read. And what about parsing a String into a number? Or turning a number into a String? Someday you’re gonna want to put a bunch of numbers into a collection like ArrayList that takes only objects. You’re in luck. Java and the Java API are full of handy number-tweaking capabilities and methods, ready and easy to use. But most of them are <strong>static</strong>, so we’ll start by learning what it means for a variable or method to be static, including constants in Java, also known as static <em>final</em> variables.</p>
<section data-type="sect1" data-pdf-bookmark="MATH methods: as close as you’ll ever get to a global method"><div class="sect1" id="math_methods_as_close_as_youapostrophell">
<h1>MATH methods: as close as you’ll ever get to a <em>global</em> method</h1>
<p><a data-type="indexterm" data-primary="classes" data-secondary="Math" id="idm46038393132640"/><a data-type="indexterm" data-primary="instance variables" data-secondary="lack of in Math class" id="idm46038393130624"/><a data-type="indexterm" data-primary="Math class" id="idm46038392958112"/><a data-type="indexterm" data-primary="methods" data-secondary="static" id="idm46038392947120"/>Except there’s no global <em>anything</em> in Java. But think about this: what if you have a method whose behavior doesn’t depend on an instance variable value. Take the round() method in the Math class, for example. It does the same thing every time—rounds a floating-point number (the argument to the method) to the nearest integer. Every time. If you had 10,000 instances of class Math, and ran the round(42.2) method, you’d get an integer value of 42. Every time. In other words, the method acts on the argument but is never affected by an instance variable state. The only value that changes the way the round() method runs is the argument passed to the method!</p>
<p>Doesn’t it seem like a waste of perfectly good heap space to make an instance of class Math simply to run the round() method? And what about <em>other</em> Math methods like min(), which takes two numerical primitives and returns the smaller of the two? Or max(). Or abs(), which returns the absolute value of a number.</p>
<p><strong><em>These methods never use instance variable values</em></strong>. In fact, the Math class doesn’t <em>have</em> any instance variables. So there’s nothing to be gained by making an instance of class Math. So guess what? You don’t have to. As a matter of fact, you can’t.</p>
<p><strong>If you try to make an instance of class Math:</strong></p>
<pre data-type="programlisting"><strong>Math mathObject = new Math();</strong></pre>
<p><strong>You’ll get this error:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0276-02.png" alt="image" width="1135" height="388"/>
<h6/>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#646466;">Methods in the Math class don’t use any instance variable values. And because the methods are “static,” you don’t need to have an <u>instance</u> of Math. All you need is the Math <u>class</u>.</span></p>
</div>
<figure class="informal"><div class="figure">
<img src="Images/f0276-01.png" alt="image" width="472" height="357"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The difference between regular (non-static) and static methods"><div class="sect1" id="the_difference_between_regular_left_pare">
<h1>The difference between regular (non-static) and static methods</h1>
<p>Java is object-oriented, but once in a while you have a special case, typically a utility method (like the Math methods), where there is no need to have an instance of the class. The keyword <strong><code>static</code></strong> lets a method run <strong><em>without any instance of the class</em></strong>. A static method means “behavior not dependent on an instance variable, so no instance/object is required. Just the class.”</p>
<figure class="informal"><div class="figure">
<img src="Images/f0277-01.png" alt="image" width="1506" height="1302"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0278-01.png" alt="image" width="400" height="217"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0278-02.png" alt="image" width="400" height="152"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What it means to have a class with static methods"><div class="sect1" id="what_it_means_to_have_a_class_with_stati">
<h1>What it means to have a class with static methods</h1>
<p><a data-type="indexterm" data-primary="abstract classes" data-secondary="and static methods" id="idm46038392922080"/><a data-type="indexterm" data-primary="constructors" data-secondary="private" id="idm46038392920944"/><a data-type="indexterm" data-primary="private constructor" id="idm46038392919840"/>Often (although not always), a class with static methods is not meant to be instantiated. In <a data-type="xref" href="ch08.xhtml#serious_polymorphism_interfaces_and_abst">Chapter 8</a>, <em>Serious Polymorphism</em>, we talked about abstract classes, and how marking a class with the <strong><code>abstract</code></strong> modifier makes it impossible for anyone to say “new” on that class type. In other words, <strong><em>it’s impossible to instantiate an abstract class.</em></strong></p>
<p>But you can restrict other code from instantiating a <em>non</em>-abstract class by marking the constructor <strong><code>private</code></strong>. Remember, a <em>method</em> marked private means that only code from within the class can invoke the method. A <em>constructor</em> marked private means essentially the same thing—only code from within the class can invoke the constructor. Nobody can say “new” from <em>outside</em> the class. That’s how it works with the Math class, for example. The constructor is private; you cannot make a new instance of Math. The compiler knows that your code doesn’t have access to that private constructor.</p>
<p>This does <em>not</em> mean that a class with one or more static methods should never be instantiated. In fact, every class you put a main() method in is a class with a static method in it!</p>
<p>Typically, you make a main() method so that you can launch or test another class, nearly always by instantiating a class in main and then invoking a method on that new instance.</p>
<p>So you’re free to combine static and non-static methods in a class, although even a single non-static method means there must be <em>some</em> way to make an instance of the class. The only ways to get a new object are through “new” or deserialization (or something called the Java Reflection API that we don’t go into). No other way. But exactly <em>who</em> says new can be an interesting question, and one we’ll look at a little later in this chapter.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Static methods can’t use non-static (instance) variables!"><div class="sect1" id="static_methods_canapostrophet_use_non-st">
<h1>Static methods can’t use non-static (instance) variables!</h1>
<p><a data-type="indexterm" data-primary="instance variables" data-secondary="inability to use with static methods" id="idm46038393002144"/>Static methods run without knowing about any particular instance of the static method’s class. And as you saw on the previous pages, there might not even <em>be</em> any instances of that class. Since a static method is called using the <em>class</em> (<strong><em>Math</em></strong>.random()) as opposed to an <em>instance reference</em> (<strong><em>t2</em></strong>.play()), a static method can’t refer to any instance variables of the class. The static method doesn’t know <em>which</em> instance’s variable value to use.</p>
<p><strong>If you try to compile this code:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0279-01.png" alt="image" width="1002" height="532"/>
<h6/>
</div></figure>
<p><strong>You’ll get this error:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0279-02.png" alt="image" width="646" height="392"/>
<h6/>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#646466;">If you try to use an instance variable  from inside a static method, the compiler thinks, “I don’t know which object’s instance variable you’re talking about!” If you have ten Duck objects on the heap, a static method doesn’t know about any of them.</span></p>
</div>
<figure class="informal"><div class="figure">
<img src="Images/f0279-03.png" alt="image" width="770" height="580"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Static methods can’t use non-static methods, either!"><div class="sect1" id="static_methods_canapostrophet_us_id00002">
<h1>Static methods can’t use non-static <u>methods</u>, either!</h1>
<p><a data-type="indexterm" data-primary="methods" data-secondary="calling non-static from static" id="idm46038392901424"/>What do non-static methods do? <strong><em>They usually use instance variable state to affect the behavior of the method.</em></strong> A getName() method returns the value of the name variable. Whose name? The object used to invoke the getName() method.</p>
<p><strong>This won’t compile:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0280-01.png" alt="image" width="824" height="585"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0280-02.png" alt="image" width="948" height="793"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00023">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: What if you try to call a non-static method from a static method, but the non-static method doesn’t use any instance variables. Will the compiler allow that?</strong></p>
<p><strong>A:</strong> No. The compiler knows that whether you do or do not use instance variables in a non-static method, you <em>can</em>. And think about the implications...if you were allowed to compile a scenario like that, then what happens if in the future you want to change the implementation of that non-static method so that one day it <em>does</em> use an instance variable? Or worse, what happens if a subclass <em>overrides</em> the method and uses an instance variable in the overriding version?</p>
<p><strong>Q: I could swear I’ve seen code that calls a static method using a reference variable instead of the class name.</strong></p>
<p><strong>A:</strong> You <em>can</em> do that, but as your mother always told you, “Just because it’s legal doesn’t mean it’s good.” Although it <em>works</em> to call a static method using any instance of the class, it makes for misleading (less-readable) code. You <em>can</em> say,</p>
<pre data-type="programlisting"><strong>Duck d = new Duck();</strong>
<strong>String[] s = {};</strong>
<strong>ed.main(s);</strong></pre>
<p>This code is legal, but the compiler just resolves it back to the real class anyway (“OK, <em>d</em> is of type Duck, and main() is static, so I’ll call the static main() in class Duck”). In other words, using <em>d</em> to invoke main() doesn’t imply that main() will have any special knowledge of the object that <em>d</em> is referencing. It’s just an alternate <em>way</em> to invoke a static method, but the method is still static!</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Static variable: value is the same for ALL instances of the class"><div class="sect1" id="static_variable_value_is_the_same_for_al">
<h1>Static variable: value is the same for ALL instances of the class</h1>
<p><a data-type="indexterm" data-primary="Duck constructor" id="idm46038392879408"/>Imagine you wanted to count how many Duck instances are being created while your program is running. How would you do it? Maybe an instance variable that you increment in the constructor?</p>
<figure class="informal"><div class="figure">
<img src="Images/f0281-01.png" alt="image" width="620" height="218"/>
<h6/>
</div></figure>
<p>No, that wouldn’t work because duckCount is an instance variable, and starts at 0 for each Duck. You could try calling a method in some other class, but that’s kludgey. You need a class that’s got only a single copy of the variable, and all instances share that one copy.</p>
<p>That’s what a static variable gives you: a value shared by all instances of a class. In other words, one value per <em>class</em>, instead of one value per <em>instance</em>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0281-02.png" alt="image" width="682" height="776"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0281-03.png" alt="image" width="1044" height="744"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0282-01.png" alt="image" width="777" height="951"/>
<h6/>
</div></figure>
<p><span style="color:#636466;"><strong>Static variables are shared.</strong></span></p>
<p><a data-type="indexterm" data-primary="constructors" data-secondary="private" id="idm46038392873952"/><a data-type="indexterm" data-primary="private constructor" id="idm46038392872752"/><span style="color:#636466;"><strong>All instances of the same class share a single copy of the static variables.</strong></span></p>
<p>instance variables: 1 per <strong>instance</strong></p>
<p>static variables: 1 per <strong>class</strong></p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="brain_barbell">
<h5>Brain Barbell</h5>
<figure class="informal"><div class="figure">
<img src="Images/f0282-02.png" alt="image" width="150" height="88"/>
<h6/>
</div></figure>
<p>Earlier in this chapter, we saw that a private constructor means that the class can’t be instantiated from code running outside the class. In other words, only code from within the class can make a new instance of a class with a private constructor. (There’s a kind of chicken-and-egg problem here.)</p>
<p>What if you want to write a class in such a way that only ONE instance of it can be created, and anyone who wants to use an instance of the class will always use that one, single instance?</p>
</div></aside>
<section data-type="sect2" data-pdf-bookmark="Initializing a static variable"><div class="sect2" id="initializing_a_static_variable">
<h2>Initializing a static variable</h2>
<p><a data-type="indexterm" data-primary="classes" data-secondary="and static variables" id="idm46038392877744"/><a data-type="indexterm" data-primary="default value" data-secondary="static variable" id="idm46038392862816"/><a data-type="indexterm" data-primary="initializing" data-secondary="static variables" id="idm46038392861712"/><a data-type="indexterm" data-primary="static variables" id="idm46038392860608"/><a data-type="indexterm" data-primary="static variables" data-secondary="initializing" id="idm46038392859776"/><a data-type="indexterm" data-primary="values, variable" data-secondary="static variables" id="idm46038392858672"/><a data-type="indexterm" data-primary="variables" data-secondary="static" data-see="static variables" id="idm46038392857568"/>Static variables are initialized when a <em>class is loaded</em>. A class is loaded because the JVM decides it’s time to load it. Typically, the JVM loads a class because somebody’s trying to make a new instance of the class, for the first time, or use a static method or variable of the class. As a programmer, you also have the option of telling the JVM to load a class, but you’re not likely to need to do that. In nearly all cases, you’re better off letting the JVM decide when to <em>load</em> the class.</p>
<p>And there are two guarantees about static initialization:</p>
<ul>
<li><p>Static variables in a class are initialized before any <em>object</em> of that class can be created.</p></li>
<li><p>Static variables in a class are initialized before any <em>static method</em> of the class runs.</p></li>
</ul>
<figure class="informal"><div class="figure">
<img src="Images/f0283-01.png" alt="image" width="1378" height="747"/>
<h6/>
</div></figure>
<p>If you don’t explicitly initialize a static variable (by assigning it a value at the time you declare it), it gets a default value, so int variables are initialized to zero, which means we didn’t need to explicitly say playerCount = 0. Declaring, but not initializing, a static variable means the static variable will get the default value for that variable type, in exactly the same way that instance variables are given default values when declared.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id00000028">
<p><strong>All static variables in a class are initialized <em>before</em> any object of that class can be created.</strong></p>
</div></aside>
<figure class="informal"><div class="figure">
<img src="Images/f0283-02.png" alt="image" width="466" height="338"/>
<h6/>
</div></figure>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="static final variables are constants"><div class="sect1" id="static_final_variables_are_constants">
<h1>static <u>final</u> variables are constants</h1>
<p><a data-type="indexterm" data-primary="constants" id="idm46038392836848"/><a data-type="indexterm" data-primary="final keyword" data-secondary="variables" id="idm46038392836112"/><a data-type="indexterm" data-primary="static final variables" id="idm46038392835008"/><a data-type="indexterm" data-primary="static initializer" id="idm46038392834176"/><a data-type="indexterm" data-primary="variables" data-secondary="final" id="idm46038392833344"/>A variable marked <strong><code>final</code></strong> means that—once initialized—it can never change. In other words, the value of the static final variable will stay the same as long as the class is loaded. Look up Math.PI in the API, and you’ll find:</p>
<pre data-type="programlisting"><strong>public static final double PI = 3.141592653589793;</strong></pre>
<p>The variable is marked <strong><code>public</code></strong> so that any code can access it.</p>
<p>The variable is marked <strong><code>static</code></strong> so that you don’t need an instance of class Math (which, remember, you’re not allowed to create).</p>
<p>The variable is marked <strong><code>final</code></strong> because PI doesn’t change (as far as Java is concerned).</p>
<p>There is no other way to designate a variable as a constant, but there is a naming convention that helps you to recognize one. <strong><em>Constant variable names are usually in all caps!</em></strong></p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id00000029">
<p><strong>A <em>static initializer</em> is a block of code that runs when a class is loaded, before any other code can use the class, so it’s a great place to initialize a <u>static</u> final variable.</strong></p>
<pre data-type="programlisting"><strong>class ConstantInit1 {</strong>
    <strong>final static int X;</strong>
    <strong>static {</strong>
      <strong>X = 42;</strong>
    <strong>}</strong>
<strong>}</strong></pre>
</div></aside>
<p><strong>Initialize a <em>final</em> static variable:</strong></p>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/1.png" alt="Images" width="20" height="21"/></span> <strong>At the time you declare it:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0284-01.png" alt="image" width="626" height="258"/>
<h6/>
</div></figure>
<p><strong>OR</strong></p></li>
<li><p><span class="inlineimage"><img src="Images/2.png" alt="Images" width="20" height="21"/></span> <strong>In a static initializer:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0284-02.png" alt="image" width="561" height="392"/>
<h6/>
</div></figure></li>
</ul>
<p><strong>If you don’t give a value to a final variable in one of those two places:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0284-03.png" alt="image" width="513" height="126"/>
<h6/>
</div></figure>
<p><strong>The compiler will catch it:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0284-04.png" alt="image" width="682" height="391"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="final isn’t just for static variables..."><div class="sect1" id="final_isnapostrophet_just_for_static_var">
<h1>final isn’t just for static variables...</h1>
<p><a data-type="indexterm" data-primary="classes" data-secondary="final" id="idm46038392808000"/><a data-type="indexterm" data-primary="final keyword" data-secondary="classes" id="idm46038392801488"/><a data-type="indexterm" data-primary="final keyword" data-secondary="methods" id="idm46038392800384"/><a data-type="indexterm" data-primary="methods" data-secondary="final" id="idm46038392799280"/>You can use the keyword <strong><code>final</code></strong> to modify non-static variables too, including instance variables, local variables, and even method parameters. In each case, it means the same thing: the value can’t be changed. But you can also use final to stop someone from overriding a method or making a subclass.</p>
<p><strong>non-static final variables</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0285-01.png" alt="image" width="722" height="548"/>
<h6/>
</div></figure>
<p><strong>final method</strong></p>
<pre data-type="programlisting">class Poof {
  <strong>final</strong> void calcWhuffie() {
    // important things
    // that must never be overridden
  }
}</pre>
<p><strong>final class</strong></p>
<pre data-type="programlisting"><strong>final</strong> class MyMostPerfectClass {
   // cannot be extended
}</pre>
<blockquote>
<p><strong><span style="color:#636466;">A final</span> variable <span style="color:#636466;">means you can’t</span>  change <span style="color:#636466;">its value.</span></strong></p>
</blockquote>
<blockquote>
<p><strong><span style="color:#636466;">A final</span> method <span style="color:#636466;">means you can’t</span> override <span style="color:#636466;">the method.</span></strong></p>
</blockquote>
<blockquote>
<p><strong><span style="color:#636466;">A final</span> class <span style="color:#636466;">means you can’</span> extend <span style="color:#636466;">the class (i.e., you can’t make a subclass).</span></strong></p>
</blockquote>
<figure class="informal"><div class="figure">
<img src="Images/f0285-03.png" alt="image" width="485" height="764"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00024">
<h5>there are no Dumb Questions</h5>
<p><a data-type="indexterm" data-primary="classes" data-secondary="final" id="idm46038392779600"/><a data-type="indexterm" data-primary="final keyword" data-secondary="classes" id="idm46038392778432"/><a data-type="indexterm" data-primary="methods" data-secondary="and static variables" id="idm46038392777328"/><a data-type="indexterm" data-primary="static variables" data-secondary="and non-static methods" id="idm46038392776224"/><strong>Q: A static method can’t access a non-static variable. But can a non-static method access a static variable?</strong></p>
<p><strong>A:</strong> Of course. A non-static method in a class can always call a static method in the class or access a static variable of the class.</p>
<p><strong>Q: Why would I want to make a class final? Doesn’t that defeat the whole purpose of OO?</strong></p>
<p><strong>A:</strong> Yes and no. A typical reason for making a class final is for security. You can’t, for example, make a subclass of the String class. Imagine the havoc if someone extended the String class and substituted their own String subclass objects, polymorphically, where String objects are expected. If you need to count on a particular implementation of the methods in a class, make the class final.</p>
<p><strong>Q: Isn’t it redundant to have to mark the methods final if the class is final?</strong></p>
<p><strong>A:</strong> If the class is final, you don’t need to mark the methods final. Think about it—if a class is final, it can never be subclassed, so none of the methods can ever be overridden.</p>
<p>On the other hand, if you  <em>do</em> want to allow others to extend your class and you want them to be able to override some, but not all, of the methods, then don’t mark the class final, but go in and selectively mark specific methods as final. A final method means that a subclass can’t override that particular method.</p>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="bullet_points-id00011">
<h5>Bullet Points</h5>
<ul>
<li><p>A <strong><em>static method</em></strong> should be called using the class name rather than an object reference variable:</p>
<pre data-type="programlisting"><strong>Math.random()</strong> versus <strong>myFoo.go()</strong></pre></li>
<li><p>A static method can be invoked without any instances of the method’s class on the heap.</p></li>
<li><p>A static method is good for a utility method that does not (and will never) depend on a particular instance variable value.</p></li>
<li><p>A static method is not associated with a particular instance—only the class—so it cannot access any instance variable values of its class. It wouldn’t know <em>which</em> instance’s values to use.</p></li>
<li><p>A static method cannot access a non-static method, since non-static methods are usually associated with instance variable state.</p></li>
<li><p>If you have a class with only static methods and you do not want the class to be instantiated, you can mark the constructor private.</p></li>
<li><p>A <strong><em>static variable</em></strong> is a variable shared by all members of a given class. There is only one copy of a static variable in a class, rather than one copy <em>per each object</em> for instance variables.</p></li>
<li><p>A static method can access a static variable.</p></li>
<li><p>To make a constant in Java, mark a variable as both static and final.</p></li>
<li><p>A final static variable must be assigned a value either at the time it is declared or in a static initializer:</p>
<pre data-type="programlisting"><strong>static {</strong>
   <strong>DOG_CODE = 420;</strong>
<strong>}</strong></pre></li>
<li><p>The naming convention for constants (final static variables) is to make the name all uppercase and use underscores (_) to separate the words.</p></li>
<li><p>A final variable value cannot be changed once it has been assigned.</p></li>
<li><p>Assigning a value to a final <em>instance</em> variable must be either at the time it is declared or in the constructor.</p></li>
<li><p>A final method cannot be overridden.</p></li>
<li><p>A final class cannot be extended (subclassed).</p></li>
</ul>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00021">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Sharpen Your Pencil" id="idm46038392745520"/><strong>What’s Legal?</strong></p>
<p>Given everything you’ve just learned about static and final, which of these would compile?</p>
<figure class="informal"><div class="figure">
<img src="Images/f0287-01.png" alt="image" width="214" height="269"/>
<h6/>
</div></figure>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/1.png" alt="Images" width="20" height="21"/></span></p>
<pre data-type="programlisting"><strong>public class Foo {</strong>
  <strong>static int x;</strong>

  <strong>public void go() {</strong>
    <strong>System.out.println(x);</strong>
  <strong>}</strong>
<strong>}</strong></pre></li>
<li><p><span class="inlineimage"><img src="Images/2.png" alt="Images" width="20" height="21"/></span></p>
<pre data-type="programlisting"><strong>public class Foo2 {</strong>
  <strong>int x;</strong>

  <strong>public static void go() {</strong>
    <strong>System.out.println(x);</strong>
  <strong>}</strong>
<strong>}</strong></pre></li>
<li><p><span class="inlineimage"><img src="Images/3.png" alt="Images" width="20" height="21"/></span></p>
<pre data-type="programlisting"><strong>public class Foo3 {</strong>
  <strong>final int x;</strong>

  <strong>public void go() {</strong>
    <strong>System.out.println(x);</strong>
  <strong>}</strong>
<strong>}</strong></pre></li>
<li><p><span class="inlineimage"><img src="Images/4.png" alt="Images" width="20" height="20"/></span></p>
<pre data-type="programlisting"><strong>public class Foo4 {</strong>
  <strong>static final int x = 12;</strong>

  <strong>public void go() {</strong>
    <strong>System.out.println(x);</strong>
  <strong>}</strong>
<strong>}</strong></pre></li>
<li><p><span class="inlineimage"><img src="Images/5.png" alt="Images" width="20" height="20"/></span></p>
<pre data-type="programlisting"><strong>public class Foo5 {</strong>
  <strong>static final int x = 12;</strong>

  <strong>public void go(final int x) {</strong>
    <strong>System.out.println(x);</strong>
  <strong>}</strong>
<strong>}</strong></pre></li>
<li><p><span class="inlineimage"><img src="Images/6.png" alt="Images" width="20" height="20"/></span></p>
<pre data-type="programlisting"><strong>public class Foo6 {</strong>
  <strong>int x = 12;</strong>

  <strong>public static void go(final int x) {</strong>
    <strong>System.out.println(x);</strong>
  <strong>}</strong>
<strong>}</strong></pre>
</li>
</ul>
</div></aside>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#sharpen_your_pencil_left_parenthesisfrom">“Sharpen your pencil”</a>.</strong></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Math methods"><div class="sect1" id="math_methods">
<h1>Math methods</h1>
<p><a data-type="indexterm" data-primary="Math.abs()" id="idm46038392706512"/><a data-type="indexterm" data-primary="Math class" id="idm46038392696336"/><a data-type="indexterm" data-primary="Math.random()" id="idm46038392695504"/><a data-type="indexterm" data-primary="methods" data-secondary="Math class" id="idm46038392694672"/>Now that we know how static methods work, let’s look at some static methods in class Math. This isn’t all of them, just the highlights. Check your API for the rest including cos(), sin(), tan(), ceil(), floor(), and asin().</p>
<figure class="informal"><div class="figure">
<img src="Images/f0288-01.png" alt="image" width="748" height="758"/>
<h6/>
</div></figure>
<p><strong>Math.abs()</strong></p>
<p>Returns a double that is the absolute value of the argument. The method is overloaded, so if you pass it an int, it returns an int. Pass it a double, it returns a double.</p>
<pre data-type="programlisting"><strong>int x = Math.abs(-240);      // returns 240</strong>
<strong>double d = Math.abs(240.45); // returns 240.45</strong></pre>
<p><strong>Math.random()</strong></p>
<p>Returns a double between (and including) 0.0 through (but not including) 1.0.</p>
<pre data-type="programlisting"><strong>double r1 = Math.random();</strong>
<strong>int r2 = (int) (Math.random() * 5);</strong></pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#636466;">We’ve been using this method so far, but there’s also java.util.Random, which is a bit nicer to use.</span></p>
</div>
<p><a data-type="indexterm" data-primary="Math.max()" id="idm46038392688704"/><a data-type="indexterm" data-primary="Math.min()" id="idm46038392687936"/><a data-type="indexterm" data-primary="Math.round()" id="idm46038392687424"/><a data-type="indexterm" data-primary="Math.sqrt()" id="idm46038392686816"/><strong>Math.round()</strong></p>
<p>Returns an int or a long (depending on whether the argument is a float or a double) rounded to the nearest integer value.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0289-01.png" alt="image" width="998" height="266"/>
<h6/>
</div></figure>
<p><strong>Math.min()</strong></p>
<p>Returns a value that is the minimum of the two arguments. The method is overloaded to take ints, longs, floats, or doubles.</p>
<pre data-type="programlisting"><strong>int x = Math.min(24,240);               // returns 24</strong>
<strong>double y = Math.min(90876.5, 90876.49); // returns 90876.49</strong></pre>
<p><strong>Math.max()</strong></p>
<p>Returns a value that is the maximum of the two arguments. The method is overloaded to take ints, longs, floats, or doubles.</p>
<pre data-type="programlisting"><strong>int x = Math.max(24,240);               // returns 240</strong>
<strong>double y = Math.max(90876.5, 90876.49); // returns 90876.5</strong></pre>
<p><strong>Math.sqrt()</strong></p>
<p>Returns the positive square root of the argument. The method takes a double, but of course you can pass in anything that fits in a double.</p>
<pre data-type="programlisting"><strong>double x = Math.sqrt(9);    //return 3</strong>
<strong>double y = Math.sqrt(42.0); // returns 6.48074069840786</strong></pre>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Wrapping a primitive"><div class="sect1" id="wrapping_a_primitive">
<h1>Wrapping a primitive</h1>
<p><a data-type="indexterm" data-primary="primitive variables" data-secondary="wrapping" id="idm46038392674912"/><a data-type="indexterm" data-primary="unwrapping a value" id="idm46038392673936"/><a data-type="indexterm" data-primary="values, variable" data-secondary="wrapping and unwrapping" id="idm46038392673200"/><a data-type="indexterm" data-primary="wrapper constructor" id="idm46038392672016"/><a data-type="indexterm" data-primary="wrappers" data-secondary="for primitive types" id="idm46038392671184"/>Sometimes you want to treat a primitive like an object. For example, collections like ArrayList only work with Objects:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0290-01.png" alt="image" width="333" height="144"/>
<h6/>
</div></figure>
<p>There’s a wrapper class for every primitive type, and since the wrapper classes are in the java.lang package, you don’t need to import them. You can recognize wrapper classes because each one is named after the primitive type it wraps, but with the first letter capitalized to follow the class naming convention.</p>
<p>Oh yeah, for reasons absolutely nobody on the planet is certain of, the API designers decided not to map the names <em>exactly</em> from primitive type to class type. You’ll see what we mean:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0290-02.png" alt="image" width="847" height="719"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0290-03.png" alt="image" width="250" height="166"/>
<h6/>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#636466;">When you need to treat a primitive like an object, wrap it.</span></p>
</div>
<figure class="informal"><div class="figure">
<img src="Images/f0290-04.png" alt="image" width="382" height="286"/>
<h6/>
</div></figure>
<p>Note: the picture at the top is a chocolate in a foil wrapper. Get it? Wrapper? Some people think it looks like a baked potato, but that works too.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0291-01.png" alt="image" width="760" height="901"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Java will Autobox primitives for you"><div class="sect1" id="java_will_autobox_primitives_for_you">
<h1>Java will <u>Autobox</u> primitives for you</h1>
<p><a data-type="indexterm" data-primary="ArrayList" data-secondary="autoboxing" id="idm46038392659008"/><a data-type="indexterm" data-primary="autoboxing of primitive types" id="idm46038392658032"/>In The Olden Days (pre–Java 5), we did have to do all this ourselves, manually wrapping and unwrapping primitives. Fortunately, now it’s all done for us <em>automatically</em>.</p>
<p>Let’s see what happens when we want to make an ArrayList to hold ints.</p>
<p><strong>An ArrayList of primitive ints</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0291-02.png" alt="image" width="1214" height="458"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00025">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Why not declare an ArrayList&lt;int&gt; if you want to hold ints?</strong></p>
<p><strong>A:</strong> Because... <em>you can’t.</em> At least, not in the versions of Java this book covers (the language is constantly evolving and things may change!). Remember, the rule for generic types is that you can specify only class or interface types, <em>not primitives</em>. So ArrayList&lt;int&gt; will not compile. But as you can see from the code above, it doesn’t really matter, since the compiler lets you put ints into the ArrayList&lt;Integer&gt;. In fact, there’s really no way to <em>prevent</em> you from putting primitives into an ArrayList where the type of the list is the type of that primitive’s wrapper, since autoboxing will happen automatically. So, you can put boolean primitives in an ArrayList&lt;Boolean&gt; and chars into an ArrayList&lt;Character&gt;.</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Autoboxing works almost everywhere"><div class="sect1" id="autoboxing_works_almost_everywhere">
<h1>Autoboxing works almost everywhere</h1>
<p><a data-type="indexterm" data-primary="arguments" data-secondary="autoboxing" id="idm46038394042576"/><a data-type="indexterm" data-primary="Boolean expressions" data-secondary="autoboxing with" id="idm46038394040864"/><a data-type="indexterm" data-primary="methods" data-secondary="autoboxing" id="idm46038392650816"/><a data-type="indexterm" data-primary="return values, autoboxing with" id="idm46038392649824"/>Autoboxing lets you do more than just the obvious wrapping and unwrapping to use primitives in a collection...it also lets you use either a primitive or its wrapper type virtually anywhere one or the other is expected. Think about that!</p>
<p><strong>Fun with autoboxing</strong></p>
<table class="border">
<tbody>
<tr>
<td><strong>Method arguments</strong><br/>If a method takes a wrapper type, you can pass a reference to a wrapper or a primitive of the matching type. And of course the reverse is true—if a method takes a primitive, you can pass in either a compatible primitive or a reference to a wrapper of that primitive type.</td>
<td>
<figure class="informal"><div class="figure">
<img src="Images/f0292-01.png" alt="image" width="631" height="274"/>
<h6/>
</div></figure></td>
</tr>
<tr>
<td><strong>Return values</strong><br/>If a method declares a primitive return type, you can return either a compatible primitive or a reference to the wrapper of that primitive type. And if a method declares a wrapper return type, you can return either a reference to the wrapper type or a primitive of the matching type.</td>
<td><figure class="informal"><div class="figure">
<img src="Images/f0292-02.png" alt="image" width="357" height="302"/>
<h6/>
</div></figure></td>
</tr>
<tr>
<td><strong>Boolean expressions</strong><br/>Any place a boolean value is expected, you can use either an expression that evaluates to a boolean (4 &gt; 2), a primitive boolean, or a reference to a Boolean wrapper.</td>
<td><figure class="informal"><div class="figure">
<img src="Images/f0292-03.png" alt="image" width="683" height="341"/>
<h6/>
</div></figure></td>
</tr>
<tr>
<td><strong>Operations on numbers</strong><br/>This is probably the strangest one—yes, you can use a wrapper type as an operand in operations where the primitive type is expected. That means you can apply, say, the increment operator against a reference to an Integer object!<br/>But don’t worry—this is just a compiler trick. The language wasn’t modified to make the operators work on objects; the compiler simply converts the object to its primitive type before the operation. It sure looks weird, though.<br/>Integer i = new Integer(42); i++;<br/>And that means you can also do things like:<br/>Integer j = new Integer(5); Integer k = j + 3;</td>
<td><figure class="informal"><div class="figure">
<img src="Images/f0293-01.png" alt="image" width="309" height="271"/>
<h6/>
</div></figure></td>
</tr>
<tr>
<td><strong>Assignments</strong><br/>You can assign either a wrapper or primitive to a variable declared as a matching wrapper or primitive. For example, a primitive int variable can be assigned to an Integer reference variable, and vice versa—a reference to an Integer object can be assigned to a variable declared as an int primitive.</td>
<td><figure class="informal"><div class="figure">
<img src="Images/f0293-02.png" alt="image" width="481" height="276"/>
<h6/>
</div></figure></td>
</tr>
</tbody>
</table>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00022">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="assignment" data-secondary="autoboxing" id="idm46038392633552"/><a data-type="indexterm" data-primary="exercises" data-secondary="Sharpen Your Pencil" id="idm46038392632576"/><a data-type="indexterm" data-primary="operators" data-secondary="and autoboxing" id="idm46038392631600"/>Will this code compile? Will it run? If it runs, what will it do?</p>
<p>Take your time and think about this one; it brings up an implication of autoboxing that we didn’t talk about.</p>
<p>You’ll have to go to your compiler to find the answers. (Yes, we’re forcing you to experiment, for your own good, of course.)</p>
<pre data-type="programlisting"><strong>public class TestBox {</strong>
  <strong>private Integer i;</strong>
  <strong>private int j;</strong>

  <strong>public static void main(String[] args) {</strong>
    <strong>TestBox t = new TestBox();</strong>
    <strong>t.go();</strong>
  <strong>}</strong>

  <strong>public void go() {</strong>
    <strong>j = i;</strong>
    <strong>System.out.println(j);</strong>
    <strong>System.out.println(i);</strong>
  <strong>}</strong>
<strong>}</strong></pre>
</div></aside>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Yours to solve.</strong></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="But wait! There’s more! Wrappers have static utility methods too!"><div class="sect1" id="but_waitexclamation_mark_therea-id0001">
<h1>But wait! There’s more! Wrappers have static utility methods too!</h1>
<p><a data-type="indexterm" data-primary="exceptions" data-secondary="NumberFormatException" id="idm46038392618192"/><a data-type="indexterm" data-primary="NumberFormatException" id="idm46038392616992"/><a data-type="indexterm" data-primary="parse methods" id="idm46038392616160"/><a data-type="indexterm" data-primary="static methods" data-secondary="and wrappers" id="idm46038392615328"/><a data-type="indexterm" data-primary="Strings" data-secondary="wrapping and unwrapping" id="idm46038392614224"/>Besides acting like a normal class, the wrappers have a bunch of really useful static methods.</p>
<p>For example, the <em>parse</em> methods take a String and give you back a primitive value.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0294-01.png" alt="image" width="745" height="232"/>
<h6/>
</div></figure>
<p><strong>Converting a String to a primitive value is easy:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0294-02.png" alt="image" width="1070" height="279"/>
<h6/>
</div></figure>
<p><strong>But if you try to do this:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0294-03.png" alt="image" width="1008" height="141"/>
<h6/>
</div></figure>
<p><strong>You’ll get a runtime exception:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0294-04.png" alt="image" width="942" height="392"/>
<h6/>
</div></figure>
<p><strong>Every method or constructor that parses a String can throw a NumberFormatException</strong><strong>. It’s a runtime exception, so you don’t have to handle or declare it. But you might want to.</strong></p>
<p>(We’ll talk about exceptions in <a data-type="xref" href="ch13.xhtml#risky_behavior_exception_handling">Chapter 13</a>, <em>Risky Behavior</em>.)</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="And now in reverse...turning a primitive number into a String"><div class="sect1" id="and_now_in_reversehellipturning_a_primit">
<h1>And now in reverse...turning a primitive number into a String</h1>
<p>You may want to turn a number into a String, for example when you want to show this number to a user or put it into a message. There are several ways to turn a number into a String. The easiest is to simply concatenate the number to an existing String.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0295-01.png" alt="image" width="1226" height="391"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0295-02.png" alt="image" width="598" height="1123"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0295-03.png" alt="image" width="505" height="1046"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Number formatting"><div class="sect1" id="number_formatting">
<h1>Number formatting</h1>
<p><a data-type="indexterm" data-primary="commas, formatting large numbers with" id="idm46038392593872"/><a data-type="indexterm" data-primary="Formatter class" id="idm46038392593136"/><a data-type="indexterm" data-primary="formatting numbers" id="idm46038392592400"/><a data-type="indexterm" data-primary="numbers, formatting" id="idm46038392591664"/><a data-type="indexterm" data-primary="printf()" id="idm46038392590928"/><a data-type="indexterm" data-primary="String.format() method" id="idm46038392590192"/><a data-type="indexterm" data-primary="underscores for large numbers, formatting" id="idm46038392589456"/>In Java, formatting numbers and dates doesn’t have to be coupled with I/O. Think about it. One of the most typical ways to display numbers to a user is through a GUI. You put Strings into a scrolling text area, or maybe a table. If formatting was built only into print statements, you’d never be able to format a number into a nice String to display in a GUI.</p>
<p>The Java API provides powerful and flexible formatting using the Formatter class in java.util. But often you don’t need to create and call methods on the Formatter class yourself, because the Java API has convenience methods in some of the I/O classes (including printf()) and the String class. So it can be a simple matter of calling a static String.format() method and passing it the thing you want formatted along with formatting instructions.</p>
<p>Of course, you do have to know how to supply the formatting instructions, and that takes a little effort unless you’re familiar with the <strong><em>printf()</em></strong> function in C/C++. Fortunately, even if you <em>don’t</em> know printf(), you can simply follow recipes for the most basic things (that we’re showing in this chapter). But you <em>will</em> want to learn how to format if you want to mix and match to get <em>anything</em> you want.</p>
<p>We’ll start here with a basic example and then look at how it works. (Note: we’ll revisit formatting again in <a data-type="xref" href="ch16.xhtml#saving_objects_left_parenthesisand_textr">Chapter 16</a>, <em>Saving Objects</em>.)</p>
<p><strong>Making big numbers more readable with underscores, a quick detour</strong></p>
<p>Before we get into formatting numbers, let’s take a small, useful detour. Sometimes you’ll want to declare variables with large initial values. Let’s look at three declarations that assign the same large value, a billion, to long primitives:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0296-01.png" alt="image" width="1309" height="131"/>
<h6/>
</div></figure>
<p><strong>Formatting a number to use commas</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0296-02.png" alt="image" width="1140" height="568"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Formatting deconstructed..."><div class="sect1" id="formatting_deconstructedhellip">
<h1>Formatting deconstructed...</h1>
<p><a data-type="indexterm" data-primary="% percent sign in format String" id="idm46038392565648"/><a data-type="indexterm" data-primary="arguments" data-secondary="number formatting" id="idm46038392564912"/><a data-type="indexterm" data-primary="format specifiers" id="idm46038392563936"/><a data-type="indexterm" data-primary="percent sign (%) in format String" id="idm46038392563200"/><a data-type="indexterm" data-primary="Strings" data-secondary="percent sign (%) in" id="idm46038392562464"/>At the most basic level, formatting consists of two main parts (there is more, but we’ll start with this to keep it cleaner):</p>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/1.png" alt="Images" width="20" height="21"/></span> <strong>Formatting instructions</strong></p>
<p>You use special format specifiers that describe how the argument should be formatted.</p></li>
<li><p><span class="inlineimage"><img src="Images/2.png" alt="Images" width="20" height="21"/></span> <strong>The argument to be formatted.</strong></p>
<p>Although there can be more than one argument, we’ll start with just one. The argument type can’t be just <em>anything</em>...it has to be something that can be formatted using the format specifiers in the formatting instructions. For example, if your formatting instructions specify a <em>floating-point number</em>, you can’t pass in a Dog or even a String that looks like a floating-point number.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0297-01.png" alt="image" width="727" height="325"/>
<h6/>
</div></figure></li>
</ul>
<p><strong>What do these instructions actually say?</strong></p>
<p>“Take the second argument to this method, and format it as a <strong>d</strong>ecimal integer and insert <strong>commas</strong>.”</p>
<p><strong>How do they say that?</strong></p>
<p>On the next page we’ll look in more detail at what the syntax “%,d” actually means, but for starters, any time you see the percent sign (%) in a format String (which is always the first argument to a format() method), think of it as representing a variable, and the variable is the other argument to the method. The rest of the characters after the percent sign describe the formatting instructions for the argument.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#636466;">Note: if you already know printf() from c/C++, you can probably just skim the next few pages. Otherwise, read carefully!</span></p>
</div>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The percent (%) says, “insert argument here” (and format it using these instructions)"><div class="sect1" id="the_percent_left_parenthesispercentright">
<h1>The percent (%) says, “insert argument here” (and format it using these instructions)</h1>
<p><a data-type="indexterm" data-primary="commas, formatting large numbers with" id="idm46038392542976"/><a data-type="indexterm" data-primary="format()" id="idm46038392542464"/>The first argument to a format() method is called the format String, and it can actually include characters that you just want printed as-is, without extra formatting. When you see the % sign, though, think of the percent sign as a variable that represents the other argument to the method.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0298-01.png" alt="image" width="1441" height="612"/>
<h6/>
</div></figure>
<p>The “%” sign tells the formatter to insert the other method argument (the second argument to format(), the number) here, AND format it using the “.2f” characters after the percent sign. Then the rest of the format String, “bugs to fix,” is added to the final output.</p>
<p><strong>Adding a comma</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0298-02.png" alt="image" width="1310" height="324"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0299-01.png" alt="image" width="811" height="862"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The format String uses its own little language syntax"><div class="sect1" id="the_format_string_uses_its_own_little_la">
<h1>The format String uses its own little language syntax</h1>
<p>You obviously can’t put just <em>anything</em> after the “%” sign. The syntax for what goes after the percent sign follows very specific rules, and describes how to format the argument that gets inserted at that point in the result (formatted) String.</p>
<p>You’ve already seen some examples:</p>
<p><strong>%,d</strong>  means “insert commas and format the number as a decimal integer.”</p>
<p>and</p>
<p><strong>%.2f</strong> means “format the number as a floating point with a precision of two decimal places.”</p>
<p>and</p>
<p><strong>%,.2f</strong>  means “insert commas and format the number as a floating point with a precision of two decimal places.”</p>
<p>Really the question is: “How do I know what to put after the percent sign to get it to do what I want?” And that includes knowing the symbols (like “d” for decimal and “f” for floating point) as well as the order in which the instructions must be placed following the percent sign. For example, if you put the comma after the “d” like “%d,” instead of “%,d” it won’t work!</p>
<p>Or will it? What do you think this will do:</p>
<pre data-type="programlisting"><strong>String.format("I have %.2f, bugs to fix.", 476578.09876);</strong></pre>
<p>(We’ll answer that on the next page.)</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The format specifier"><div class="sect1" id="the_format_specifier">
<h1>The format specifier</h1>
<p><a data-type="indexterm" data-primary="format specifiers" id="idm46038392527088"/>Everything after the percent sign up to and including the type indicator (like “d” or “f”) is part of the formatting instructions. After the type indicator, the formatter assumes the next set of characters is meant to be part of the output String, until or unless it hits another percent (%) sign. Hmmmm...is that even possible? Can you have more than one formatted argument variable? Put that thought on hold for right now; we’ll come back to it in a few minutes. For now, let’s look at the syntax for the format specifiers—the things that go after the percent (%) sign and describe how the argument should be formatted.</p>
<p><strong>A format specifier can have up to five different parts (not including the “%”). Everything in brackets [ ] below is optional, so only the percent (%) and the type are required. But the order is also mandatory, so any parts you DO use must go in this order.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0300-01.png" alt="image" width="1431" height="425"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0300-02.png" alt="image" width="1214" height="403"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The only required specifier is for TYPE"><div class="sect1" id="the_only_required_specifier_is_for_type">
<h1>The only required specifier is for TYPE</h1>
<p><a data-type="indexterm" data-primary="character (%c) formatting type" id="idm46038392515968"/><a data-type="indexterm" data-primary="decimal (%d) formatting type" id="idm46038392509696"/><a data-type="indexterm" data-primary="floating point (%f) formatting type" id="idm46038392508960"/><a data-type="indexterm" data-primary="hexadecimal (%x) formatting type" id="idm46038392508224"/><a data-type="indexterm" data-primary="type modifiers, number formats" id="idm46038392507488"/>Although type is the only required specifier, remember that if you <em>do</em> put in anything else, type must always come last! There are more than a dozen different type modifiers (not including dates and times; they have their own set), but most of the time you’ll probably use %d (decimal) or %f (floating point). And typically you’ll combine %f with a precision indicator to set the number of decimal places you want in your output.</p>
<p><strong>The TYPE is mandatory, everything else is optional.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0301-01.png" alt="image" width="900" height="1132"/>
<h6/>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#646466;">You must include a type in your format instructions, and if you specify things besides type, the type must always come <u>last</u>. Most of the time, you’ll probably format numbers using either “d” for decimal or “f” for floating point.</span></p>
</div>
<p>The argument must be a byte, short, char, or int (including both primitive and wrapper types).</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What happens if I have more than one argument?"><div class="sect1" id="what_happens_if_i_have_more_than_one_arg">
<h1>What happens if I have more than one argument?</h1>
<p><a data-type="indexterm" data-primary="argument list" id="idm46038392500768"/><a data-type="indexterm" data-primary="arguments" data-secondary="number formatting" id="idm46038392496576"/><a data-type="indexterm" data-primary="date formatting" id="idm46038392495840"/><a data-type="indexterm" data-primary="varargs (variable argument lists)" id="idm46038392495008"/>Imagine you want a String that looks like this:</p>
<p>“The rank is <strong><em>20,456,654</em></strong> out of <strong><em>100,567,890.24</em></strong>.”</p>
<p>But the numbers are coming from variables. What do you do? You simply add <em>two</em> arguments after the format String (first argument), so that means your call to format() will have three arguments instead of two. And inside that first argument (the format String), you’ll have two different format specifiers (two things that start with “%”). The first format specifier will insert the second argument to the method, and the second format specifier will insert the third argument to the method. In other words, the variable insertions in the format String use the order in which the other arguments are passed into the format() method.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0302-01.png" alt="image" width="1417" height="491"/>
<h6/>
</div></figure>
<p>As you’ll see when we get to date formatting, you might actually want to apply different formatting specifiers to the same argument. That’s probably hard to imagine until you see how <em>date</em> formatting (as opposed to the <em>number</em> formatting we’ve been doing) works. Just know that in a minute, you’ll see how to be more specific about which format specifiers are applied to which arguments.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00026">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Um, there’s something REALLY strange going on here. Just how many arguments <em>can</em> I pass? I mean, how many overloaded format() methods are IN the String class? So, what happens if I want to pass, say, ten different arguments to be formatted for a single output String?</strong></p>
<p><strong>A:</strong> Good catch. Yes, there <em>is</em> something strange going on, and no there are <em>not</em> a bunch of overloaded format() methods to take a different number of possible arguments. In order to support this formatting (printf-like) API in Java, the language needed another feature— <em>variable argument lists</em> (called <em>varargs</em> for short). We’ll talk about varargs more in <a data-type="xref" href="app02.xhtml#appendix_b_the_top_ten-ish_topics_that_d">Appendix B</a>.</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Just one more thing...static imports"><div class="sect1" id="just_one_more_thinghellipstatic_imports">
<h1>Just one more thing...static <u>imports</u></h1>
<p><a data-type="indexterm" data-primary="imports, static" id="idm46038393788464"/><a data-type="indexterm" data-primary="static imports" id="idm46038393787680"/>Static imports are a real mixed blessing. Some people love this idea, some people hate it. Static imports exist to make your code a little shorter. If you hate to type or hate long lines of code, you might just like this feature. The downside to static imports is that—if you’re not careful—using them can make your code a lot harder to read.</p>
<p>The basic idea is that whenever you’re using a static class, a static variable, or an enum (more on those later), you can import them and save yourself some typing.</p>
<p><strong>Without static imports:</strong></p>
<pre data-type="programlisting">class NoStatic {

  public static void main(String[] args) {

    <span style="background-color:#E0E1E2;"><strong>System</strong></span>.out.println("sqrt " + <span style="background-color:#E0E1E2;"><strong>Math</strong></span>.sqrt(2.0));

    <span style="background-color:#E0E1E2;"><strong>System</strong></span>.out.println("tan " + <span style="background-color:#E0E1E2;"><strong>Math</strong></span>.tan(60));
  }
}</pre>
<p><strong>Same code, with static imports:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0303-01.png" alt="image" width="1431" height="1143"/>
<h6/>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#646466;">Use carefully: Static imports can make your code confusing to read. Always re-read your code after using a static import and think: “Will I understand this in six months time?”</span></p>
</div>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="caveats_ampersand_gotchas">
<h5>Caveats &amp; Gotchas</h5>
<ul>
<li><p>Using a static import removes the information about which class the static came from. We’d advise using static imports only when the static method or variable still means something when it’s not prefixed with the class name.</p></li>
<li><p>A big issue with static imports is that it ’s easy to create naming conflicts. For example, if you have two different classes with an “add()” method, how will you and the compiler know which one to use? So it’s best not to use a static import if it’s possible to create a conflict.</p></li>
<li><p>Notice that you can use wildcards (.*), in your static import declaration.</p></li>
</ul>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Fireside Chats"><div class="sect1" id="fireside_chats-id00001">
<h1>Fireside Chats</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0304-01.png" alt="image" width="395" height="169"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="Fireside Chats" data-secondary="instance versus static variables" id="idm46038392573520"/><a data-type="indexterm" data-primary="instance variables" data-secondary="versus static variables" id="idm46038392954448"/><a data-type="indexterm" data-primary="static variables" data-secondary="versus instance variables" id="idm46038392953344"/>Tonight’s Talk: <strong>An instance variable takes cheap shots at a static variable</strong></p>
<table class="border">
<thead>
<tr>
<th>Instance Variable</th>
<th>Static Variable</th>
</tr>
</thead>
<tbody>
<tr>
<td>I don’t even know why we’re doing this. Everyone knows static variables are just used for constants. And how many of those are there? I think the whole API must have, what, four? And it’s not like anybody ever uses them.</td>
<td/>
</tr>
<tr>
<td/>
<td>You really should check your facts. When was the last time you looked at the API? It’s frickin’ loaded with statics! It even has entire classes dedicated to holding constant values. There’s a class called SwingConstants, for example, that’s just full of them.</td>
</tr>
<tr>
<td>Full of it. Yeah, you can say that again. OK, so there are a few in the Swing library, but everybody knows Swing is just a special case.</td>
<td/>
</tr>
<tr>
<td/>
<td>It might be a special case, but it’s a really important one! And what about the Color class? What a pain if you had to remember the RGB values to make the standard colors! But the color class already has constants defined for blue, purple, white, red, etc. Very handy.</td>
</tr>
<tr>
<td>Ok, but besides a few GUI things, give me an example of just one static variable that anyone would actually use. In the real world.</td>
<td/>
</tr>
<tr>
<td/>
<td>How’s System.out for starters? The out in System.out is a static variable of the System class. You personally don’t make a new instance of the System; you just ask the System class for its out variable.</td>
</tr>
<tr>
<td>Well, that’s another special case. And nobody uses that except for debugging anyway.</td>
<td/>
</tr>
<tr>
<td/>
<td>Oh, like debugging isn’t important?<br/>And here’s something that probably never crossed your narrow mind—let’s face it, static variables are more efficient. One per class instead of one per instance. The memory savings might be huge!</td>
</tr>
<tr>
<td>Um, aren’t you forgetting something?</td>
<td/>
</tr>
<tr>
<td/>
<td>What?</td>
</tr>
<tr>
<td>Static variables are about as un-OO as it gets!! Gee, why not just go take a giant backward step and do some procedural programming while we’re at it.</td>
<td/>
</tr>
<tr>
<td/>
<td>What do you mean <em>un-</em>OO?</td>
</tr>
<tr>
<td>You’re like a global variable, and any programmer worth their sticker-covered laptop knows that’s usually a Bad Thing.</td>
<td/>
</tr>
<tr>
<td/>
<td>I am NOT a global variable. There’s no such thing. I live in a class! That’s pretty OO you know, a CLASS. I’m not just sitting out there in space somewhere; I’m a natural part of the state of an object; the only difference is that I’m shared by all instances of a class. Very efficient.</td>
</tr>
<tr>
<td>Yeah, you live in a class, but they don’t call it <em>Class</em>-Oriented programming. That’s just stupid. You’re a relic. Something to help the old-timers make the leap to Java.</td>
<td/>
</tr>
<tr>
<td/>
<td>Alright just stop right there. THAT is definitely not true. Some static variables are absolutely crucial to a system. And even the ones that aren’t crucial sure are handy.</td>
</tr>
<tr>
<td>Well, OK, every once in a while sure, it makes sense to use a static, but let me tell you, abuse of static variables (and methods) is the mark of an immature OO programmer. A designer should be thinking about <em>object</em> state, not <em>class</em> state.</td>
<td/>
</tr>
<tr>
<td/>
<td>Why do you say that? And what’s wrong with static methods?</td>
</tr>
<tr>
<td>Static methods are the worst things of all, because it usually means the programmer is thinking procedurally instead of about objects doing things based on their unique object state.</td>
<td/>
</tr>
<tr>
<td/>
<td>Sure, I know that objects should be the focus of an OO design, but just because there are some clueless programmers out there...don’t throw the baby out with the bytecode. There’s a time and place for statics, and when you need one, nothing else beats it.</td>
</tr>
<tr>
<td>Riiiiiight. Whatever you need to tell yourself.</td>
<td/>
</tr>
</tbody>
</table>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Exercise"><div class="sect1" id="exercise-id000300">
<h1>Exercise</h1>
<figure class="informal"><div class="figure">
<img src="Images/exercise.png" alt="image" width="150" height="126"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="BE the compiler"><div class="sect2" id="be_the_compiler-id00002">
<h2>BE the compiler</h2>
<figure class="informal"><div class="figure">
<img src="Images/f0306-02.png" alt="image" width="339" height="385"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Be the..." id="idm46038392452672"/><strong>The Java file on this page represents a complete program. Your job is to play compiler and determine whether this file will compile. If it won’t compile, how would you fix it? When it runs, what would be its output?</strong></p>
<pre data-type="programlisting">class StaticSuper {
  static {
    System.out.println("super static block");
  }

  StaticSuper () {
    System.out.println("super constructor");
  }
}

public class StaticTests extends StaticSuper {
  static int rand;

  static {
    rand = (int) (Math.random() * 6);
    System.out.println("static block " + rand);
  }

  StaticTests() {
    System.out.println("constructor");
  }

  public static void main(String[] args) {
    System.out.println("in main");
    StaticTests st = new StaticTests();
  }
}</pre>
<p>Which of these is the output?</p>
<p><strong>Possible Output</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0306-04.png" alt="image" width="502" height="356"/>
<h6/>
</div></figure>
<p><strong>Possible Output</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0306-05.png" alt="image" width="502" height="356"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#be_the_compiler_left_parenthesisfrom_pag">“BE the compiler”</a>.</strong></p>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="True or False" id="idm46038392442080"/>This chapter explored the wonderful, static world of Java. Your job is to decide whether each of the following statements is true or false.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="True or False"><div class="sect2" id="true_or_false">
<h2>True or False</h2>
<figure class="informal"><div class="figure">
<img src="Images/hand.png" alt="image" width="22" height="27"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/hand1.png" alt="image" width="22" height="27"/>
<h6/>
</div></figure>
<ol>
<li><p>To use the Math class, the first step is to make an instance of it.</p></li>
<li><p>You can mark a constructor with the <strong><code>static</code></strong> keyword.</p></li>
<li><p>Static methods don’t have access to instance variable state of the “this” object.</p></li>
<li><p>It is good practice to call a static method using a reference variable.</p></li>
<li><p>Static variables could be used to count the instances of a class.</p></li>
<li><p>Constructors are called before static variables are initialized.</p></li>
<li><p>MAX_SIZE would be a good name for a static final variable.</p></li>
<li><p>A static initializer block runs before a class’s constructor runs.</p></li>
<li><p>If a class is marked final, all of its methods must be marked final.</p></li>
<li><p>A final method can be overridden only if its class is extended.</p></li>
<li><p>There is no wrapper class for boolean primitives.</p></li>
<li><p>A wrapper is used when you want to treat a primitive like an object.</p></li>
<li><p>The parseXxx methods always return a String.</p></li>
<li><p>Formatting classes (which are decoupled from I/O) are in the java.format package.</p></li>
</ol>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#true_or_false_left_parenthesisfr-id0002">“True or False”</a>.</strong></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Exercise Solution"><div class="sect1" id="exercise_solution-id000200">
<h1>Exercise Solution</h1>
<section data-type="sect2" data-pdf-bookmark="Sharpen your pencil"><div class="sect2" id="sharpen_your_pencil_left_parenthesisfrom">
<h2>Sharpen your pencil</h2>
<p>(from <a data-type="xref" href="#sharpen_your_pencil-id00021">“Sharpen your pencil”</a>)</p>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p>1, 4, 5, and 6 are legal.<br/>2 doesn’t compile because the static method references a non-static instance variable.<br/>3 doesn’t compile because the instance variable is final but hasn’t been initialized.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="BE the compiler"><div class="sect2" id="be_the_compiler_left_parenthesisfrom_pag">
<h2>BE the compiler</h2>
<p>(from <a data-type="xref" href="#be_the_compiler-id00002">“BE the compiler”</a>)</p>
<pre data-type="programlisting">StaticSuper <strong>()</strong> {
  System.out.println(
    "super constructor");
}</pre>
<p>StaticSuper is a constructor and must have ( ) in its signature. Notice that as the output below demonstrates, the static blocks for both classes run before either of the constructors run.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0308-02.png" alt="image" width="502" height="495"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="True or False"><div class="sect2" id="true_or_false_left_parenthesisfr-id0002">
<h2>True or False</h2>
<p>(from <a data-type="xref" href="#true_or_false">“True or False”</a>)</p>
<table class="border">
<tbody>
<tr>
<td><ol>
<li><p>To use the Math class, the first step is to make an instance of it.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="2">
<li><p>You can mark a constructor with the keyword “static.”</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="3">
<li><p>Static methods don’t have access to an object’s instance variables.</p></li>
</ol></td>
<td><strong>True</strong></td>
</tr>
<tr>
<td><ol start="4">
<li><p>It is good practice to call a static method using a reference variable.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="5">
<li><p>Static variables could be used to count the instances of a class.</p></li>
</ol></td>
<td><strong>True</strong></td>
</tr>
<tr>
<td><ol start="6">
<li><p>Constructors are called before static variables are initialized.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="7">
<li><p>MAX_SIZE would be a good name for a static final variable.</p></li>
</ol></td>
<td><strong>True</strong></td>
</tr>
<tr>
<td><ol start="8">
<li><p>A static initializer block runs before a class’s constructor runs.</p></li>
</ol></td>
<td><strong>True</strong></td>
</tr>
<tr>
<td><ol start="9">
<li><p>If a class is marked final, all of its methods must be marked final.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="10">
<li><p>A final method can be overridden only if its class is extended.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="11">
<li><p>There is no wrapper class for boolean primitives.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="12">
<li><p>A wrapper is used when you want to treat a primitive like an object.</p></li>
</ol></td>
<td><strong>True</strong></td>
</tr>
<tr>
<td><ol start="13">
<li><p>The parseXxx methods always return a String.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
<tr>
<td><ol start="14">
<li><p>Formatting classes (which are decoupled from I/O) are in the java.format package.</p></li>
</ol></td>
<td><strong>False</strong></td>
</tr>
</tbody>
</table>
</div></section>
</div></section>
</div></section></div></body></html>