<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 5. Extra-Strength Methods: Writing A Program"><div class="chapter" id="extra-strength_methods_writing_a_program">
<h1><span class="label">Chapter 5. </span>Extra-Strength Methods: Writing A Program</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0095-01.png" alt="image" width="516" height="582"/>
<h6/>
</div></figure>
<p><strong>Let’s put some muscle in our <span style="color:#9D9EA0;">methods</span>.</strong> We dabbled with variables, played with a few objects, and wrote a little code. But we were weak. We need more tools. Like <strong>operators</strong>. We need more operators so we can do something a little more interesting than, say, <em>bark</em>. And <strong>loops</strong>. We need loops, but what’s with the wimpy <em>while</em> loops? We need <strong><em>for</em></strong> loops if we’re really serious. Might be useful to <strong>generate random numbers</strong>. Better learn that too. And why don’t we learn it all by <em>building</em> something real, to see what it’s like to write (and test) a program from scratch. <strong>Maybe a game</strong>, like Battleships. That’s a heavy-lifting task, so it’ll take <em>two</em> chapters to finish. We’ll build a simple version in this chapter and then build a more powerful deluxe version in <a data-type="xref" href="ch06.xhtml#using_the_java_library_get_to_know_the_j">Chapter 6</a>, <em>Using the Java Library</em>.</p>
<section data-type="sect1" data-pdf-bookmark="Let’s build a Battleship-style game: “Sink a Startup”"><div class="sect1" id="letapostrophes_build_a_battleship-style">
<h1>Let’s build a Battleship-style game: “Sink a Startup”</h1>
<p><a data-type="indexterm" data-primary="Sink a Startup game" id="idm46038395951904"/>It’s you against the computer, but unlike the real Battleship game, in this one you don’t place any ships of your own. Instead, your job is to sink the computer’s ships in the fewest number of guesses.</p>
<p>Oh, and we aren’t sinking ships. We’re killing ill-advised, Silicon Valley Startups (thus establishing business relevancy so you can expense the cost of this book).</p>
<p><strong>Goal:</strong> Sink all of the computer’s Startups in the fewest number of guesses. You’re given a rating or level, based on how well you perform.</p>
<p><strong>Setup:</strong> When the game program is launched, the computer places three Startups on a <strong>virtual 7 x 7 grid</strong>. When that’s complete, the game asks for your first guess.</p>
<p><strong>How you play:</strong> We haven’t learned to build a GUI yet, so this version works at the command line. The computer will prompt you to enter a guess (a cell) that you’ll type at the command line as “A3,” “C5,” etc.). In response to your guess, you’ll see a result at the command-line, either “hit,” “miss,” or “You sunk poniez” (or whatever the lucky Startup of the day is). When you’ve sent all three Startups to that big 404 in the sky, the game ends by printing out your rating.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0096-01.png" alt="image" width="481" height="476"/>
<h6/>
</div></figure>
<p><strong>You’re going to build the Sink a Startup game, with a 7 x 7 grid and three Startups. Each Startup takes up three cells.</strong></p>
<p><strong>part of a game interaction</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0096-02.png" alt="image" width="447" height="805"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="First, a high-level design"><div class="sect1" id="firstcomma_a_high-level_design">
<h1>First, a high-level design</h1>
<p><a data-type="indexterm" data-primary="flowchart for Sink a Startup" id="idm46038395938208"/>We know we’ll need classes and methods, but what should they be? To answer that, we need more information about what the game should do.</p>
<p>First, we need to figure out the general flow of the game. Here’s the basic idea:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0097-02.png" alt="image" width="474" height="996"/>
<h6><span class="label">Figure 5-1. </span>Whoa. A real flow chart.</h6>
</div></figure>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/1circlea.png" alt="Images" width="23" height="23"/></span> User starts the game.</p>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/acirclea.png" alt="Images" width="20" height="20"/></span> Game creates three Startups</p></li>
<li><p><span class="inlineimage"><img src="Images/acircleb.png" alt="Images" width="20" height="20"/></span> Game places the three Startups onto a virtual grid</p></li>
</ul></li>
<li><p><span class="inlineimage"><img src="Images/1circleb.png" alt="Images" width="23" height="23"/></span> Game play begins.</p>
<p>Repeat the following until there are no more Startups:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0097-01.png" alt="image" width="358" height="218"/>
<h6/>
</div></figure></li>
<li><p><span class="inlineimage"><img src="Images/1circlec.png" alt="Images" width="23" height="23"/></span> Game finishes.</p>
<p>Give the user a rating based on the number of guesses.</p></li>
</ul>
<p>Now we have an idea of the kinds of things the program needs to do. The next step is figuring out what kind of <strong>objects</strong> we’ll need to do the work. Remember, think like Brad rather than Laura (who we met in <a data-type="xref" href="ch02.xhtml#a_trip_to_objectville_classes_and_object">Chapter 2</a>, <em>A Trip to Objectville</em>); focus first on the <strong><em>things</em></strong> in the program rather than the <strong><em>procedures.</em></strong></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The “Simple Startup Game” a gentler introduction"><div class="sect1" id="the_quotation_marksimple_startup_gamequo">
<h1>The “Simple Startup Game” a gentler introduction</h1>
<p><a data-type="indexterm" data-primary="Simple Startup Game" id="idm46038395915360"/>It looks like we’re gonna need at least two classes, a Game class and a Startup class. But before we build the fullmonty <strong><em>Sink a Startup</em></strong> game, we’ll start with a strippeddown, simplified version, <strong><em>Simple Startup Game</em></strong>. We’ll build the simple version in <em>this</em> chapter, followed by the deluxe version that we build in the <em>next</em> chapter.</p>
<p>Everything is simpler in this game. Instead of a 2-D grid, we hide the Startup in just a single <em>row</em>. And instead of <em>three</em> Startups, we use <em>one</em>.</p>
<p>The goal is the same, though, so the game still needs to make a Startup instance, assign it a location somewhere in the row, get user input, and when all of the Startup’s cells have been hit, the game is over. This simplified version of the game gives us a big head start on building the full game. If we can get this small one working, we can scale it up to the more complex one later.</p>
<p>In this simple version, the game class has no instance variables, and all the game code is in the main() method. In other words, when the program is launched and main() begins to run, it will make the one and only Startup instance, pick a location for it (three consecutive cells on the single virtual seven-cell row), ask the user for a guess, check the guess, and repeat until all three cells have been hit.</p>
<p>Keep in mind that the virtual row is...<em>virtual</em>. In other words, it doesn’t exist anywhere in the program. As long as both the game and the user know that the Startup is hidden in three consecutive cells out of a possible seven (starting at zero), the row itself doesn’t have to be represented in code. You might be tempted to build an array of seven ints and then assign the Startup to three of the seven elements in the array, but you don’t need to. All we need is an array that holds just the three cells the Startup occupies.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0098-02.png" alt="image" width="368" height="386"/>
<h6/>
</div></figure>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/1circlea.png" alt="Images" width="23" height="23"/></span> <strong>Game starts</strong> and creates ONE Startup and gives it a location on three cells in the single row of seven cells.</p>
<p>Instead of “A2,” “C4,” and so on, the locations are just integers (for example: 1,2,3 are the cell locations in this picture):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0098-01.png" alt="image" width="484" height="72"/>
<h6/>
</div></figure></li>
<li><p><span class="inlineimage"><img src="Images/1circleb.png" alt="Images" width="23" height="23"/></span> <strong>Game play begins.</strong> Prompt user for a guess; then check to see if it hit any of the Startup’s three cells. If a hit, increment the numOfHits variable.</p></li>
<li><p><span class="inlineimage"><img src="Images/1circlec.png" alt="Images" width="23" height="23"/></span> <strong>Game finishes</strong> when all three cells have been hit (the numOfHits variable value is 3), and the user is told how many guesses it took to sink the Startup.</p></li>
</ul>
<p><strong>A complete game interaction</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0098-03.png" alt="image" width="313" height="349"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Developing a Class"><div class="sect1" id="developing_a_class">
<h1>Developing a Class</h1>
<p><a data-type="indexterm" data-primary="classes" data-secondary="Simple Startup Game" id="idm46038395878880"/><a data-type="indexterm" data-primary="prep code" id="idm46038395877648"/><a data-type="indexterm" data-primary="pseudocode" data-see="prep code" id="idm46038395876816"/><a data-type="indexterm" data-primary="test code" id="idm46038395875712"/>As a programmer, you probably have a methodology/process/approach to writing code. Well, so do we. Our sequence is designed to help you see (and learn) what we’re thinking as we work through coding a class. It isn’t necessarily the way we (or <em>you</em>) write code in the Real World. In the Real World, of course, you’ll follow the approach your personal preferences, project, or employer dictate. We, however, can do pretty much whatever we want. And when we create a Java class as a “learning experience,” we usually do it like this:</p>
<ul style="list-style-type:none">
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> Figure out what the class is supposed to <em>do</em>.</p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> List the <strong>instance variables and methods.</strong></p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> Write <strong>prep code</strong> for the methods. (You’ll see this in just a moment.)</p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> Write <strong>test code</strong> for the methods.</p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> <strong>Implement</strong> the class.</p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> <strong>Test</strong> the methods.</p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> <strong>Debug</strong> and <strong>reimplement</strong> as needed.</p></li>
<li><p><span class="inlineimage"><img src="Images/box.png" alt="Images" width="15" height="15"/></span> Express gratitude that we don’t have to test our so-called <em>learning experience</em> app on actual live users.</p></li>
</ul>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="brain_power-id00001">
<h5>BRAIN POWER</h5>
<figure class="informal"><div class="figure">
<img src="Images/brain.png" alt="image" width="80" height="71"/>
<h6/>
</div></figure>
<p><strong>Flex those dendrites.</strong></p>
<p><strong>How would you decide which class or classes to build <em>first</em>, when you’re writing a program? Assuming that all but the tiniest programs need more than one class (if you’re following good OO principles and not having <em>one</em> class do many different jobs), where do you start?</strong></p>
</div></aside>
<figure class="informal"><div class="figure">
<img src="Images/f0099-03.png" alt="image" width="571" height="664"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="The three things we’ll write for each class:"><div class="sect2" id="the_three_things_weapostrophell_write_fo">
<h2>The three things we’ll write for each class:</h2>
<figure class="informal"><div class="figure">
<img src="Images/f0099-01.png" alt="image" width="405" height="66"/>
<h6/>
</div></figure>
<p>This bar is displayed on the next set of pages to tell you which part you’re working on. For example, if you see this picture at the top of a page, it means you’re working on prep code for the SimpleStartup class.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0099-02.png" alt="image" width="288" height="121"/>
<h6/>
</div></figure>
<p><strong>prep code</strong></p>
<p>A form of pseudocode, to help you focus on the logic without stressing about sy ntax.</p>
<p><strong>test code</strong></p>
<p>A class or methods that will test the real code and validate that it’s doing the right thing.</p>
<p><strong>real code</strong></p>
<p>The actual implementation of the class. This is where we write real Java code.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0100-02.png" alt="image" width="289" height="342"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="prep code" data-secondary="SimpleStartup class" id="idm46038395837456"/>You’ll get the idea of how prep code (our version of pseudocode) works as you read through this example. It’s sort of halfway between real Java code and a plain English description of the class. Most prep code includes three parts: instance variable declarations, method declarations, method logic. The most important part of prep code is the method logic, because it defines <em>what</em> has to happen, which we later translate into <em>how</em> when we actually write the method code.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0100-01.png" alt="image" width="1000" height="1124"/>
<h6/>
</div></figure>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Writing the method implementations"><div class="sect1" id="writing_the_method_implementations">
<h1>Writing the method implementations</h1>
<p><a data-type="indexterm" data-primary="Extreme Programming" id="idm46038395832416"/><a data-type="indexterm" data-primary="methods" data-secondary="test coding" id="idm46038395831504"/><a data-type="indexterm" data-primary="TDD (Test-Driven Development)" id="idm46038395830400"/><a data-type="indexterm" data-primary="Test-Driven Development" data-see="TDD" id="idm46038395829600"/><strong>Let’s write the real method code now and get this puppy working.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0101-01.png" alt="image" width="637" height="586"/>
<h6/>
</div></figure>
<p>Before we start coding the methods, though, let’s back up and write some code to <em>test</em> the methods. That’s right, we’re writing the test code <em>before</em> there’s anything to test!</p>
<p>The concept of writing the test code first is one of the practices of Test-Driven Development (TDD), and it can make it easier (and faster) for you to write your code. We’re not necessarily saying you should use TDD, but we do like the part about writing tests first. And TDD just <em>sounds</em> cool.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="test_driven_development_left_parenthesis">
<h5>Test-Driven Development (TDD)</h5>
<p>Back in 1999, Extreme Programming (XP) was a newcomer to the software development methodology world. One of the central ideas in XP was to write test code before writing the actual code. Since then, the idea of writing test code first has spun off of XP and become the core of a newer, more popular subset of XP called TDD. (Yes, yes, we know we’ve just grossly oversimplified this, please cut us a little slack here.)</p>
<p>TDD is a LARGE topic, and we’re only going to scratch the surface in this book. But we hope that the way we’re going about developing the “Sink a Startup” game gives you some sense of TDD.</p>
<p>Check out <em>Test Driven Development: By Example</em> by Kent Beck if you want to learn more about how TDD works.</p>
<p>Here is a partial list of key ideas in TDD:</p>
<ul>
<li><p>Write the test code first.</p></li>
<li><p>Develop in iteration cycles.</p></li>
<li><p>Keep it (the code) simple.</p></li>
<li><p>Refactor (improve the code) whenever and wherever you notice the opportunity.</p></li>
<li><p>Don’t release anything until it passes all the tests.</p></li>
<li><p>Don’t put in anything that’s not in the spec (no matter how tempted you are to put in functionality “for the future”).</p></li>
<li><p>No killer schedules; work regular hours.</p></li>
</ul>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Writing test code for the SimpleStartup class"><div class="sect1" id="writing_test_code_for_the_simplestartup">
<h1>Writing test code for the SimpleStartup class</h1>
<p><a data-type="indexterm" data-primary="checkYourself()" id="idm46038395815760"/><a data-type="indexterm" data-primary="methods" data-secondary="SimpleStartup class test code" id="idm46038395814992"/><a data-type="indexterm" data-primary="setLocationCells()" id="idm46038395813920"/>We need to write test code that can make a SimpleStartup object and run its methods. For the SimpleStartup class, we really care about only the <em>checkYourself()</em> method, although we <em>will</em> have to implement the <em>setLocationCells()</em> method in order to get the <em>checkYourself()</em> method to run correctly.</p>
<p>Take a good look at the prep code below for the <em>checkYourself()</em> method (the <em>setLocationCells()</em> method is a no-brainer setter method, so we’re not worried about it, but in a “real” application we might want a more robust “setter” method, which we <em>would</em> want to test).</p>
<p>Then ask yourself, “If the checkYourself() method were implemented, what test code could I write that would prove to me the method is working correctly?”</p>
<section data-type="sect2" data-pdf-bookmark="Based on this prep code:"><div class="sect2" id="based_on_this_prep_code">
<h2>Based on this prep code:</h2>
<pre data-type="programlisting"><strong>METHOD</strong> String checkYourself(int userGuess)
 <strong>GET</strong> the user guess as an int parameter
 <strong>REPEAT</strong> with each of the location cells in the int array
   // <strong><em>COMPARE</em></strong> the user guess to the location cell
   <strong>IF</strong> the user guess matches
      <strong>INCREMENT</strong> the number of hits
      <strong><em>// FIND OUT</em></strong> if it was the last location cell:
      <strong>IF</strong> number of hits is 3, <strong>RETURN</strong> “Kill” as the result
      <strong>ELSE</strong> it was not a kill, so <strong>RETURN</strong> “Hit”
      END IF
   <strong>ELSE</strong> the user guess did not match, so <strong>RETURN</strong> “Miss”
   END IF
  END REPEAT
END METHOD</pre>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Here’s what we should test:"><div class="sect2" id="hereapostrophes_what_we_should_test">
<h2>Here’s what we should test:</h2>
<ol>
<li><p>Instantiate a SimpleStartup object.</p></li>
<li><p>Assign it a location (an array of 3 ints, like {2, 3, 4}).</p></li>
<li><p>Create an int to represent a user guess (2, 0, etc.).</p></li>
<li><p>Invoke the checkYourself() method passing it the fake user guess.</p></li>
<li><p>Print out the result to see if it’s correct (“passed” or “failed”).</p></li>
</ol>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00006">
<h5>there are no Dumb Questions</h5>
<p><a data-type="indexterm" data-primary="objects" data-secondary="instantiating" id="idm46038395806864"/><a data-type="indexterm" data-primary="SimpleStartupTestDrive class" id="idm46038395789504"/><strong>Q: Maybe I’m missing something here, but how exactly do you run a test on something that doesn’t yet exist!?</strong></p>
<p><strong>A:</strong> You don’t. We never said you start by <em>running</em> the test; you start by <em>writing</em> the test. At the time you write the test code, you won’t have anything to run it against, so you probably won’t be able to compile it until you write “stub” code that can compile, but that will always cause the test to fail (like, return null).</p>
<p><strong>Q: Then I still don’t see the point. Why not wait until the code is written, and then whip out the test code?</strong></p>
<p><strong>A: The act of thinking through (and writing) the test code helps clarify your thoughts about what the method itself needs to do.</strong></p>
<p>As soon as your implementation code is done, you already have test code just waiting to validate it. Besides, you <em>know</em> if you don’t do it now, you’ll <em>never</em> do it. There’s always something more interesting to do.</p>
<p>Ideally, write a little test code, then write <em>only</em> the implementation code you need in order to pass that test. Then write a little <em>more</em> test code and write <em>only</em> the new implementation code needed to pass <em>that</em> new test. At each test iteration, you run <em>all</em> the previously written tests to prove that your latest code additions don’t break previously tested code.</p>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Test code for the SimpleStartup class"><div class="sect1" id="test_code_for_the_simplestartup_class">
<h1>Test code for the SimpleStartup class</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0103-01.png" alt="image" width="698" height="785"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Yours to solve.</strong></p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00006">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p>In the next couple of pages we implement the SimpleStartup class, and then later we return to the test class.  Looking at our test code above, what else should be added? What are we <em>not</em> testing in this code that we <em>should</em> be testing for? Write your ideas (or lines of code) below:</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The checkYourself() method"><div class="sect1" id="the_checkyourselfleft_parenthesisright_p">
<h1>The checkYourself() method</h1>
<p><a data-type="indexterm" data-primary="checkYourself()" id="idm46038396007072"/>There isn’t a perfect mapping from prep code to Java code; you’ll see a few adjustments. The prep code gave us a much better idea of <em>what</em> the code needs to do, and now we have to figure out the Java code that can do the <em>how.</em></p>
<p>In the back of your mind, be thinking about parts of this code you might want (or need) to improve. The numbers <img src="Images/1.png" alt="image" width="20" height="21"/> are for things (syntax and language features) you haven’t seen yet. They’re explained on the opposite page.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0104-01.png" alt="image" width="1010" height="735"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Just the new stuff"><div class="sect1" id="just_the_new_stuff">
<h1>Just the new stuff</h1>
<p><a data-type="indexterm" data-primary="break statements" id="idm46038395765056"/><a data-type="indexterm" data-primary="for loops" data-secondary="SimpleStartup class" id="idm46038395764000"/><a data-type="indexterm" data-primary="loops" data-secondary="for" id="idm46038395762896"/><a data-type="indexterm" data-primary="operators" data-secondary="post-increment" id="idm46038395761792"/><a data-type="indexterm" data-primary="post-increment operator" id="idm46038395760688"/>The things we haven’t seen before are on this page. Stop worrying! There are more details later in the chapter. This is just enough to get you going.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0105-01.png" alt="image" width="890" height="879"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00007">
<h5>there are no Dumb Questions</h5>
<p><a data-type="indexterm" data-primary="++ -- (increment/decrement)" id="idm46038395756016"/><a data-type="indexterm" data-primary="enhanced for loop" id="idm46038395754816"/><a data-type="indexterm" data-primary="for loops" data-secondary="enhanced" id="idm46038395753984"/><a data-type="indexterm" data-primary="increment/decrement operators (++ and --)" id="idm46038395752880"/><a data-type="indexterm" data-primary="loops" data-secondary="for" id="idm46038395752080"/><a data-type="indexterm" data-primary="operators" data-secondary="increment/decrement (++ and --)" id="idm46038395750976"/><strong>Q: In the beginning of the book, there was an example of a <em>for</em> loop that was really different from this one—are there two different styles of <em>for</em> loops?</strong></p>
<p><strong>A:</strong> Yes! From the first version of Java there has been a single kind of <em>for</em> loop (explained later in this chapter) that looks like this:</p>
<pre data-type="programlisting">for (int i = 0; i &lt; 10; i++)
{
    // do something 10 times
}</pre>
<p>You can use this format for any kind of loop you need. But... since Java 5, you can also use the <em>enhanced</em> for loop (that’s the official description) when your loop needs to iterate over the elements in an array (or <em>another</em> kind of collection, as you’ll see in the <em>next</em> chapter). You can always use the plain old for loop to iterate over an array, but the <em>enhanced</em> for loop makes it easier.</p>
<p><strong>Q: If you can add one to an int by using ++, can you also subtract one in some way?</strong></p>
<p><strong>A:</strong> Yep absolutely. Hopefully it’s not too surprising to find out that the syntax is -- (two minuses), like this:</p>
<pre data-type="programlisting">countdown = i--;</pre>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Final code for SimpleStartup and SimpleStartupTestDrive"><div class="sect1" id="final_code_for_simplestartup_and_simples">
<h1>Final code for SimpleStartup and SimpleStartupTestDrive</h1>
<pre data-type="programlisting">public class <strong>SimpleStartupTestDrive</strong> {
  public static void <strong>main</strong>(String[] args) {
    SimpleStartup dot = new SimpleStartup();
    int[] locations = {2, 3, 4};
    dot.setLocationCells(locations);
    int userGuess = 2;
    String result = dot.checkYourself(userGuess);
    String testResult = "failed";
    if (result.equals("hit")) {
      testResult = "passed";
    }
    System.out.println(testResult);
  }
}</pre>
<hr/>
<pre data-type="programlisting">class <strong>SimpleStartup</strong> {
  private int[] locationCells;
  private int numOfHits = 0;

  public void <strong>setLocationCells</strong>(int[] locs) {
    locationCells = locs;
  }

  public String <strong>checkYourself</strong>(int guess) {
    String result = "miss";
    for (int cell : locationCells) {
      if (guess == cell) {
        result = "hit";
        numOfHits++;
        break;
      } // <span style="color:#636466;">end if</span>
    } <span style="color:#636466;">// end for</span>
    if (numOfHits ==
        locationCells.length) {
      result = "kill";
    } <span style="color:#636466;">// end if</span>
    System.out.println(result);
    return result;
  } <span style="color:#636466;">// end method</span>
} <span style="color:#636466;">// close class</span></pre>
<p>There’s a little bug lurking here. It compiles and runs, but...don’t worry about it for now, but we <em>will</em> have to face it a little later.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id00000010">
<p><strong>What should we see when we run this code?</strong></p>
<p>The test code makes a SimpleStartup object and gives it a location at 2,3,4. Then it sends a fake user guess of “2” into the checkYouself() method. If the code is working correctly, we should see the result print out:</p>
<pre data-type="programlisting">% java SimpleStartupTestDrive
hit
passed</pre>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00007">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Sharpen Your Pencil" id="idm46038395843984"/>We built the test class and the SimpleStartup class. But we still haven’t made the actual <em>game.</em> Given the code on the opposite page and the spec for the actual game, write in your ideas for prep code for the game class. We’ve given you a few lines here and there to get you started. The actual game code is on the next page, so <strong><em>don’t turn the page until you do this exercise!</em></strong></p>
<p>You should have somewhere between 12 and 18 lines (including the ones we wrote, but <em>not</em> including lines that have only a curly brace).</p>
<p><strong>METHOD</strong> <em><strong>public static void main (String [] args)</strong></em></p>
<p><strong>DECLARE</strong> an int variable to hold the number of user guesses, <em>named numOfGuesses</em></p>
<p><strong>COMPUTE</strong> a random number between 0 and 4 that will be the starting location cell position</p>
<p><strong>WHILE</strong> the Startup is still alive:</p>
<p><strong>GET</strong> user input from the command line</p>
<p><strong>The SimpleStartupGame needs to do this:</strong></p>
<ol>
<li><p>Make the single SimpleStartup object.</p></li>
<li><p>Make a location for it (three consecutive cells on a single row of seven virtual cells).</p></li>
<li><p>Ask the user for a guess.</p></li>
<li><p>Check the guess.</p></li>
<li><p>Repeat until the Startup is sunk.</p></li>
<li><p>Tell the user how many guesses it took.</p></li>
</ol>
<p><strong>A complete game interaction</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0107-01.png" alt="image" width="282" height="349"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Yours to solve.</strong></p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Prep code for the SimpleStartupGame class Everything happens in main()"><div class="sect1" id="prep_code_for_the_simplestartupgame_clas">
<h1>Prep code for the SimpleStartupGame class Everything happens in main()</h1>
<p><a data-type="indexterm" data-primary="main()" data-secondary="SimpleStartupGame class" id="idm46038395715168"/><a data-type="indexterm" data-primary="SimpleStartupGame class" id="idm46038395714064"/>There are some things you’ll have to take on faith. For example, we have one line of prep code that says “GET user input from command line.” Let me tell you, that’s a little more than we want to implement from scratch right now. But happily, we’re using OO. And that means you get to ask some <em>other</em> class/object to do something for you, without worrying about <strong><em>how</em></strong> it does it. When you write prep code, you should assume that <em>somehow</em> you’ll be able to do whatever you need to do, so you can put all your brainpower into working out the logic.</p>
<pre data-type="programlisting"><strong><em>public static void main (String [] args)</em></strong>
   <strong>DECLARE</strong> an int variable to hold the number of user guesses, named numOfGuesses, and set it to 0
   <strong>MAKE</strong> a new SimpleStartup instance
   <strong>COMPUTE</strong> a random number between 0 and 4 that will be the starting location cell position
   <strong>MAKE</strong> an int array with 3 ints using the randomly generated number, that number incremented by 1, and that number incremented by 2 (example: 3,4,5)
   <strong>INVOKE</strong> the setLocationCells() method on the SimpleStartup instance
   <strong>DECLARE</strong> a boolean variable representing the state of the game, named <em>isAlive.</em> <strong>SET</strong> it to true

   <strong>WHILE</strong> the Startup is still alive (isAlive == true):
     <strong>GET</strong> user input from the command line
     <strong><em>// CHECK</em></strong> the user guess
     <strong>INVOKE</strong> the <em>checkYourself()</em> method on the SimpleStartup instance
     <strong>INCREMENT</strong> <em>numOfGuesses</em> variable
     <em><strong>// CHECK</strong></em> for Startup death
    <strong>IF</strong> result is “kill”
          <strong>SET</strong> isAlive to false (which means we won’t enter the loop again)
          <strong>PRINT</strong> the number of user guesses
    END IF
   END WHILE
END METHOD</pre>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="metacognitive_tip-id00002">
<h5>metacognitive tip</h5>
<figure class="informal"><div class="figure">
<img src="Images/f0108-01.png" alt="image" width="165" height="190"/>
<h6/>
</div></figure>
<p>Don’t work one part of the brain for too long a stretch at one time. Working just the left side of the brain for more than 30 minutes is like working just your left <em>arm</em> for 30 minutes. Give each side of your brain a break by switching sides at regular intervals. When you shift to one side, the other side gets to rest and recover. Left-brain activities include things like step-by-step sequences, logical problem-solving, and analysis, while the right-brain kicks in for metaphors, creative problem-solving, pattern-matching, and visualizing.</p>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="bullet_points-id00005">
<h5>BULLET POINTS</h5>
<ul>
<li><p>Your Java program should start with a high-level design.</p></li>
<li><p>Typically you’ll write three things when you create a new class:</p>
<ul>
<li><p><code><strong><em>prep code</em></strong></code></p></li>
<li><p><code><strong><em>test code</em></strong></code></p></li>
<li><p><code><strong><em>real (Java) code</em></strong></code></p></li>
</ul></li>
<li><p>Prep code should describe <em>what</em> to do, not <em>how</em> to do it. Implementation comes later.</p></li>
<li><p>Use the prep code to help design the test code.</p></li>
<li><p>A class can have one superclass only.</p></li>
<li><p>Write test code <em>before</em> you implement the methods.</p></li>
<li><p>Choose <em>for</em> loops over <em>while</em> loops when you know how many times you want to repeat the loop code.</p></li>
<li><p>The enhanced for loop is an easy way to loop over an array or collection.</p></li>
<li><p>Use the <em>increment</em> operator to add 1 to a variable (x++;).</p></li>
<li><p>Use the <em>decrement</em> operator to subtract 1 from a variable (x--;).</p></li>
<li><p>Use <em>break</em> to leave a loop early (i.e., even if the boolean test condition is still true).</p></li>
</ul>
</div></aside>
<figure class="informal"><div class="figure">
<img src="Images/f0109-01.png" alt="image" width="847" height="583"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The game’s main() method"><div class="sect1" id="the_gameapostrophes_mainleft_parenthesis">
<h1>The game’s main() method</h1>
<p><a data-type="indexterm" data-primary="main()" data-secondary="SimpleStartupGame class" id="idm46038395689456"/>Just as you did with the SimpleStartup class, be thinking about parts of this code you might want (or need) to improve. The numbered things <img src="Images/1.png" alt="image" width="20" height="21"/> are for stuff we want to point out. They’re explained on the opposite page. Oh, if you’re wondering why we skipped the test code phase for this class, we don’t need a test class for the game. It has only one method, so what would you do in your test code? Make a separate class that would call main() on this class? We didn’t bother, we’ll just run this to test it.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0110-01.png" alt="image" width="1021" height="926"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="random() and getUserInput()"><div class="sect1" id="randomleft_parenthesisright_parenthesis">
<h1>random() and getUserInput()</h1>
<p><a data-type="indexterm" data-primary="casting" id="idm46038395833648"/><a data-type="indexterm" data-primary="classes" data-secondary="Random" id="idm46038395663792"/><a data-type="indexterm" data-primary="Math.random()" id="idm46038395662816"/><a data-type="indexterm" data-primary="nextInt()" id="idm46038395662080"/><a data-type="indexterm" data-primary="random()" id="idm46038395661344"/><a data-type="indexterm" data-primary="Random class" id="idm46038395660576"/><a data-type="indexterm" data-primary="random number generators" id="idm46038395659744"/>Two things that need a bit more explaining are on this page. This is just a quick look to keep you going; more details on the GameHelper class are at the end of this chapter.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0111-01.png" alt="image" width="942" height="390"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id00000011">
<p>Math.random() has been around forever, so you’ll see code like this in the Real World. These days you can use java.util.Random’s nextInt() method instead, which is more convenient (you don’t have to cast the result to an int).</p>
<p>The Random class is in a different <u>package.</u> Since we haven’t covered importing packages yet (it’s in the next chapter), we’ve used Math.random() instead.</p>
</div></aside>
<figure class="informal"><div class="figure">
<img src="Images/f0111-02.png" alt="image" width="947" height="441"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="One last class: GameHelper"><div class="sect1" id="one_last_class_gamehelper">
<h1>One last class: GameHelper</h1>
<p><a data-type="indexterm" data-primary="GameHelper class" id="idm46038395654512"/><a data-type="indexterm" data-primary="getUserInput()" id="idm46038395653776"/><strong>We made the <em>Startup</em> class.</strong></p>
<p><strong>We made the <em>game</em> class.</strong></p>
<p><strong>All that’s left is the <em>helper</em> class</strong>—the one with the getUserInput() method. The code to get command-line input is more than we want to explain right now. It opens up topics best left for later. (Later, as in <a data-type="xref" href="ch16.xhtml#saving_objects_left_parenthesisand_textr">Chapter 16</a>, <em>Saving Objects.</em>)</p>
<p>Just copy* the code below and compile it into a class named GameHelper. Drop all three class files (SimpleStartup, SimpleStartupGame, GameHelper) into the same directory, and make it your working directory.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0112-01.png" alt="image" width="476" height="304"/>
<h6/>
</div></figure>
<pre data-type="programlisting">import java.util.Scanner;

public class GameHelper {
  public int getUserInput(String prompt) {
    System.out.print(prompt + ": ");
    Scanner scanner = new Scanner(System.in);
    return scanner.nextInt();
  }
}</pre>
<figure class="informal"><div class="figure">
<img src="Images/f0112-02.png" alt="image" width="496" height="553"/>
<h6/>
</div></figure>
<p>* We know how much you enjoy typing, but for those rare moments when you’d rather do something else, we’ve made the Ready-Bake Code available on <em><a href="https://oreil.ly/hfJava_3e_examples">https://oreil.ly/hfJava_3e_examples</a>.</em></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Let’s play"><div class="sect1" id="letapostrophes_play">
<h1>Let’s play</h1>
<p>Here’s what happens when we run it and enter the numbers 1,2,3,4,5,6. Lookin’ good.</p>
<p><strong>A complete game interaction</strong></p>
<p>(your mileage may vary)</p>
<figure class="informal"><div class="figure">
<img src="Images/f0113-01.png" alt="image" width="313" height="534"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What’s this? A bug ?"><div class="sect1" id="whatapostrophes_thisquestion_mark_a_bug">
<h1>What’s this? A bug ?</h1>
<section data-type="sect2" data-pdf-bookmark="Gasp!"><div class="sect2" id="gaspexclamation_mark">
<h2>Gasp!</h2>
<p>Here’s what happens when we enter 1,1,1.</p>
<p><strong>A different game interaction</strong> (yikes)</p>
<figure class="informal"><div class="figure">
<img src="Images/f0113-02.png" alt="image" width="312" height="324"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00008">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0113-03.png" alt="image" width="212" height="228"/>
<h6/>
</div></figure>
<p><strong>It’s a cliff-hanger!</strong></p>
<p>Will we <strong><em>find</em></strong> the bug?</p>
<p>Will we <strong><em>fix</em></strong> the bug?</p>
<p>Stay tuned for the next chapter, where we answer these questions and more...</p>
<p>And in the meantime, see if you can come up with ideas for what went wrong and how to fix it.</p>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Yours to solve.</strong></p>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="More about for loops"><div class="sect1" id="more_about_for_loops">
<h1>More about <u>for</u> loops</h1>
<p><a data-type="indexterm" data-primary="conditional test, for loop" id="idm46038395624272"/><a data-type="indexterm" data-primary="for loops" id="idm46038395623632"/><a data-type="indexterm" data-primary="iteration expression, for loops" id="idm46038395622800"/><a data-type="indexterm" data-primary="loops" data-secondary="for" id="idm46038395622000"/>We’ve covered all the game code for <em>this</em> chapter (but we’ll pick it up again to finish the deluxe version of the game in the next chapter). We didn’t want to interrupt your work with some of the details and background info, so we put it back here. We’ll start with the details of for loops, and if you’ve seen this kind of syntax in another programming language, just skim these last few pages...</p>
<section data-type="sect2" data-pdf-bookmark="Regular (non-enhanced) for loops"><div class="sect2" id="regular_left_parenthesisnon-enhancedrigh">
<h2>Regular (non-enhanced) for loops</h2>
<figure class="informal"><div class="figure">
<img src="Images/f0114-01.png" alt="image" width="616" height="237"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0114-02.png" alt="image" width="221" height="742"/>
<h6/>
</div></figure>
<p><strong>What it means in plain English:</strong> “Repeat 100 times.”</p>
<p><strong>How the compiler sees it:</strong></p>
<ul>
<li><p>create a variable <em>i</em> and set it to 0.</p></li>
<li><p>repeat while <em>i</em> is less than 100.</p></li>
<li><p>at the end of each loop iteration, add 1 to <em>i</em>.</p></li>
</ul>
<p><strong>Part One: <em>initialization</em></strong></p>
<p>Use this part to declare and initialize a variable to use within the loop body. You’ll most often use this variable as a counter. You can actually initialize more than one variable here, but it’s much more common to use a single variable.</p>
<p><strong>Part Two: <em>boolean test</em></strong></p>
<p>This is where the conditional test goes. Whatever’s in there, it <em>must</em> resolve to a boolean value (you know, <strong><em>true</em></strong> or <strong><em>false</em></strong>). You can have a test, like (x &gt;= 4), or you can even invoke a method that returns  a boolean.</p>
<p><strong>Part Three: <em>iteration expression</em></strong></p>
<p>In this part, put one or more things you want to happen with each trip through the loop. Keep in mind that this stuff happens at the <em>end</em> of each loop.</p>
<p><strong>repeat for 100 reps:</strong></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Trips through a loop"><div class="sect1" id="trips_through_a_loop">
<h1>Trips through a loop</h1>
<pre data-type="programlisting">for (int i = 0; i &lt; 8; i++) {
   System.out.println(i);
}
System.out.println("done");</pre>
<figure class="informal"><div class="figure">
<img src="Images/f0115-01.png" alt="image" width="382" height="406"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Difference between for and while"><div class="sect2" id="difference_between_for_and_while">
<h2>Difference between <span style="color:#636466;"><u>for</u></span> and <span style="color:#636466;"><u>while</u></span></h2>
<p><a data-type="indexterm" data-primary="++ -- (increment/decrement)" id="idm46038395594528"/><a data-type="indexterm" data-primary="increment/decrement operators (++ and --)" id="idm46038395593728"/><a data-type="indexterm" data-primary="loops" data-secondary="while" id="idm46038395592928"/><a data-type="indexterm" data-primary="operators" data-secondary="increment/decrement (++ and --)" id="idm46038395591824"/><a data-type="indexterm" data-primary="while loops" id="idm46038395590752"/>A <em>while</em> loop has only the boolean test; it doesn’t have a built-in initialization or iteration expression. A <em>while</em> loop is good when you don’t know how many times to loop and just want to keep going while some condition is true. But if you <em>know</em> how many times to loop (e.g., the length of an array, 7 times, etc.), a <em>for</em> loop is cleaner. Here’s the loop above rewritten using <em>while:</em></p>
<figure class="informal"><div class="figure">
<img src="Images/f0115-02.png" alt="image" width="401" height="199"/>
<h6/>
</div></figure>
<p><strong>output:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0115-03.png" alt="image" width="245" height="334"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id00000012">
<p><strong>++ --</strong></p>
<p><strong>Pre and Post Increment/Decrement Operator</strong></p>
<p>The shortcut for adding or subtracting 1 from a variable:</p>
<pre data-type="programlisting">x++;</pre>
<p>is the same as:</p>
<pre data-type="programlisting">x = x + 1;</pre>
<p>They both mean the same thing in this context: “add 1 to the current value of x” or <strong><em>“increment</em></strong> x by 1” And:</p>
<pre data-type="programlisting">x--;</pre>
<p>is the same as:</p>
<pre data-type="programlisting">x = x - 1;</pre>
<p>Of course that’s never the whole story. The placement of the operator (either before or after the variable) can affect the result. Putting the operator <em>before</em> the variable (for example, ++x), means, “<em>first</em>, increment x by 1, and <em>then</em> use this new value of x.”  This only matters when the ++x is part of some larger expression rather than just a single statement.</p>
<pre data-type="programlisting">int x = 0;     int z = ++x;</pre>
<p>produces:   x is 1, z is  1</p>
<p>But putting the ++ <em>after</em> the x gives you a different result:</p>
<pre data-type="programlisting">int x = 0;     int z = x++;</pre>
<p>Once this code has run, x is 1, but <strong><em>z is 0</em></strong>!  z gets the value of <em>x</em>, and <em>then x</em> is incremented.</p>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The enhanced for loop"><div class="sect1" id="the_enhanced_for_loop">
<h1>The <u>enhanced</u> for loop</h1>
<p><a data-type="indexterm" data-primary="collections" data-secondary="enhanced for loop" id="idm46038395565856"/><a data-type="indexterm" data-primary="declarations" data-secondary="variable" id="idm46038395564800"/><a data-type="indexterm" data-primary="enhanced for loop" id="idm46038395563696"/><a data-type="indexterm" data-primary="for loops" data-secondary="enhanced" id="idm46038395562864"/><a data-type="indexterm" data-primary="iteration variable declaration, enhanced for loop" id="idm46038395561760"/><a data-type="indexterm" data-primary="variables" data-secondary="declaring" id="idm46038395560960"/>The Java language added a second kind of <em>for</em> loop called the <em>enhanced for</em> back in Java 5. This makes it easier to iterate over all the elements in an array or other kinds of collections (you’ll learn about <em>other</em> collections in the next chapter). That’s really all that the enhanced for gives you—a simpler way to walk through all the elements in the collection. We’ll see the enhanced for loop in the next chapter too, when we talk about collections that <em>aren’t</em> arrays.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0116-01.png" alt="image" width="955" height="342"/>
<h6/>
</div></figure>
<p><strong>What it means in plain English:</strong> “For each element in nameArray, assign the element to the ‘name’ variable, and run the body of the loop.”</p>
<p><strong>How the compiler sees it:</strong></p>
<ul>
<li><p>Create a String variable called <em>name</em> and set it to null.</p></li>
<li><p>Assign the first value in <em>nameArray</em> to name.</p></li>
<li><p>Run the body of the loop (the code block bounded by curly braces).</p></li>
<li><p>Assign the next value in <em>nameArray</em> to name.</p></li>
<li><p>Repeat while <em>there are still elements</em> in the array.</p></li>
</ul>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#636466;">Note: depending on the programming language they’ve used in the past, some people refer to the enhanced for as the “for each” or the “for in” loop, because that’s how it reads: “for EACH thing IN the collection...”</span></p>
</div>
<p><strong>Part One: <em>iteration variable declaration</em></strong></p>
<p>Use this part to declare and initialize a variable to use within the loop body. With each iteration of the loop, this variable will hold a different element from the collection. The type of this variable must be compatible with the elements in the array! For example, you can’t declare an <em>int</em> iteration variable to use with a <em>String[] array.</em></p>
<p><strong>Part Two: <em>the actual collection</em></strong></p>
<p>This must be a reference to an array or other collection. Again, don’t worry about the <em>other</em> non-array kinds of collections yet—you’ll see them in the next chapter.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Casting primitives"><div class="sect1" id="casting_primitives">
<h1>Casting primitives</h1>
<p><a data-type="indexterm" data-primary="casting" id="idm46038398077552"/>Before we finish the chapter, we want to tie up a loose end. When we used Math.random(), we had to <em>cast</em> the result to an int. Casting one numeric type to another can change the value itself. It’s important to understand the rules so you’re not surprised by this.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0117-01.png" alt="image" width="528" height="453"/>
<h6/>
</div></figure>
<p>In <a data-type="xref" href="ch03.xhtml#know_your_variables_primitives_and_refer">Chapter 3</a>, <em>Know Your Variables</em>, we talked about the sizes of the various primitives and how you can’t shove a big thing directly into a small thing:</p>
<pre data-type="programlisting">    long y = 42;
    int x = y;       // won’t compile</pre>
<p>A long is bigger than an int, and the compiler can’t be sure where that long has been. It might have been out partying with the other longs, and taking on really big values. To force the compiler to jam the value of a bigger primitive variable into a smaller one, you can use the cast operator. It looks like this:</p>
<pre data-type="programlisting">    long y = 42;     // so far so good
    int x = (int) y; // x = 42 cool!</pre>
<p>Putting in the cast tells the compiler to take the value of y, chop it down to int size, and set x equal to whatever is left. If the value of y was bigger than the maximum value of x, then what’s left will be a weird (but calculable*) number:</p>
<pre data-type="programlisting">    long y = 40002;       // 40002 exceeds the 16-bit limit of a short
    short x = (short) y;  // x now equals -25534!</pre>
<p>Still, the point is that the compiler lets you do it. And let’s say you have a floating-point number and you just want to get at the whole number (int) part of it:</p>
<pre data-type="programlisting">    float f = 3.14f;
    int x = (int) f;   //  x will equal 3</pre>
<p>And don’t even think about casting anything to a boolean or vice versa—just walk away.</p>
<p><em>*It involves sign bits, binary, “two’s complement,” and other geekery.</em></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Exercise"><div class="sect1" id="exercise-id000008">
<h1>Exercise</h1>
<figure class="informal"><div class="figure">
<img src="Images/exercise.png" alt="image" width="150" height="126"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="BE the JVM"><div class="sect2" id="be_the_jvm-id000008">
<h2>BE the JVM</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-05.png" alt="image" width="208" height="241"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Be the..." id="idm46038395528160"/><strong>The Java file on this page represents a complete source file. Your job is to play JVM and determine what would be the output when the program runs.</strong></p>
<pre data-type="programlisting">class Output {
  public static void main(String[] args) {
    Output output = new Output();
    output.go();
  }

  void go() {
    int value = 7;
    for (int i = 1; i &lt; 8; i++) {
      value++;
      if (i &gt; 4) {
        System.out.print(++value + " ");
      }
      if (value &gt; 14) {
        System.out.println(" i = " + i);
        break;
      }
    }
  }
}</pre>
<figure class="informal"><div class="figure">
<img src="Images/f0118-01.png" alt="image" width="305" height="171"/>
<h6/>
</div></figure>
<p><strong>-or-</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0118-02.png" alt="image" width="305" height="171"/>
<h6/>
</div></figure>
<p><strong>-or-</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0118-03.png" alt="image" width="306" height="170"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#be_the_jvm_left_parenthesisfrom_page_118">“Be the JVM”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Code Magnets"><div class="sect2" id="code_magnets-id000002">
<h2>Code Magnets</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-02.png" alt="image" width="100" height="146"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Code Magnets" id="idm46038395513232"/>A working Java program is all scrambled up on the fridge. Can you reconstruct the code snippets to make a working Java program that produces the output listed below? Some of the curly braces fell on the floor and they were too small to pick up, so feel free to add as many of those as you need!</p>
<figure class="informal"><div class="figure">
<img src="Images/f0119-02.png" alt="image" width="1030" height="775"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0119-01.png" alt="image" width="305" height="223"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#code_magnets_left_parenthesisfrom_page_1">“Code Magnets”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="JavaCross"><div class="sect2" id="javacross-id00001">
<h2>JavaCross</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0120-01.png" alt="image" width="698" height="625"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="puzzles" data-secondary="JavaCross" id="idm46038395498096"/>How does a crossword puzzle help you learn Java? Well, all of the words <strong>are</strong> Java related.  In addition, the clues provide metaphors, puns, and the like.  These mental twists and turns burn alternate routes to Java knowledge right into your brain!</p>
<p><strong>Across</strong></p>
<p>1. Fancy computer word for build</p>
<p>4. Multipart loop</p>
<p>6. Test first</p>
<p>7. 32 bits</p>
<p>10. Method’s answer</p>
<p>11. Prep code-esque</p>
<p>13. Change</p>
<p>15. The big toolkit</p>
<p>17. An array unit</p>
<p>18. Instance or local</p>
<p>20. Automatic toolkit</p>
<p>22. Looks like a primitive, but..</p>
<p>25. Un-castable</p>
<p>26. Math method</p>
<p>28. Iterate over me</p>
<p>29. Leave early</p>
<p><strong>Down</strong></p>
<p>2. Increment type</p>
<p>3. Class’s workhorse</p>
<p>5. Pre is a type of _____</p>
<p>6. For’s iteration ______</p>
<p>7. Establish first value</p>
<p>8. While or For</p>
<p>9. Update an instance variable</p>
<p>12. Toward blastoff</p>
<p>14. A cycle</p>
<p>16. Talkative package</p>
<p>19. Method messenger (abbrev.)</p>
<p>21. As if</p>
<p>23. Add after</p>
<p>24. Pi house</p>
<p>26. Compile it and ____</p>
<p>27. ++ quantity</p>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#javacross_left_parenthesisfrom_page_120r">“JavaCross”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Mixed Messages"><div class="sect2" id="mixed_messages-id00003">
<h2>Mixed Messages</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="puzzles" data-secondary="Mixed Messages" id="idm46038395474720"/>A short Java program is listed below.  One block of the program is missing.  Your challenge is to <strong>match the candidate block of code</strong> (on the left) <strong>with the output</strong> that you’d see if the block were inserted.  Not all the lines of output will be used, and some of the lines of output might be used more than once.  Draw lines connecting the candidate blocks of code with their matching command-line output.</p>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Answers in <a data-type="xref" href="#mixed_messages_left_parenthesisfro-id100">“Mixed Messages”</a>.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0121-01.png" alt="image" width="601" height="482"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0121-02.png" alt="image" width="591" height="358"/>
<h6/>
</div></figure>
<p><span style="color:#636466;">Match each candidate with one of the possible outputs</span></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Exercise Solutions"><div class="sect1" id="exercise_solutions-id00500">
<h1>Exercise Solutions</h1>
<figure class="informal"><div class="figure">
<img src="Images/common-03.png" alt="image" width="100" height="85"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Be the JVM"><div class="sect2" id="be_the_jvm_left_parenthesisfrom_page_118">
<h2>Be the JVM</h2>
<p>(from <a data-type="xref" href="#be_the_jvm-id000008">“BE the JVM”</a>)</p>
<pre data-type="programlisting">class Output {

  public static void main(String[] args) {
    Output output = new Output();
    output.go();
  }

void go() {
  int value = 7;
  for (int i = 1; i &lt; 8; i++) {
    value++;
    if (i &gt; 4) {
      System.out.print(++value + " ");
    }
    if (value &gt; 14) {
      System.out.println(" i = " + i);
      break;
    }
   }
  }
}</pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><strong>Did you remember to factor in the break statement? How did that affect the output?</strong></p>
</div>
<figure class="informal"><div class="figure">
<img src="Images/f0122-01.png" alt="image" width="307" height="171"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Code Magnets"><div class="sect2" id="code_magnets_left_parenthesisfrom_page_1">
<h2>Code Magnets</h2>
<p>(from <a data-type="xref" href="#code_magnets-id000002">“Code Magnets”</a>)</p>
<pre data-type="programlisting">class MultiFor {

  public static void main(String[] args) {
    for (int i = 0; i &lt; 4; i++) {
    
     for (int j = 4; j &gt; 2; j--) {
       System.out.println(i + " " + j);
     }

     if (i == 1) {
       i++;
     }
   }
  }
}</pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><strong>What would happen if this code block came before the ‘j’ for loop?</strong></p>
</div>
<figure class="informal"><div class="figure">
<img src="Images/f0122-02.png" alt="image" width="304" height="223"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Puzzle Solutions"><div class="sect2" id="puzzle_solutions-id00002">
<h2>Puzzle Solutions</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="JavaCross"><div class="sect2" id="javacross_left_parenthesisfrom_page_120r">
<h2>JavaCross</h2>
<p>(from <a data-type="xref" href="#javacross-id00001">“JavaCross”</a>)</p>
<figure class="informal"><div class="figure">
<img src="Images/f0123-01.png" alt="image" width="594" height="531"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Mixed Messages"><div class="sect2" id="mixed_messages_left_parenthesisfro-id100">
<h2>Mixed Messages</h2>
<p>(from <a data-type="xref" href="#mixed_messages-id00003">“Mixed Messages”</a>)</p>
<p/>
<figure class="informal"><div class="figure">
<img src="Images/f0123-02.png" alt="image" width="591" height="358"/>
<h6/>
</div></figure>
</div></section>
</div></section>
</div></section></div></body></html>