<html><head></head><body><section data-pdf-bookmark="Appendix A. Installing HAProxy" data-type="appendix" epub:type="appendix"><div class="appendix" id="appendix_install_haproxy">&#13;
<h1><span class="label">Appendix A. </span>Installing HAProxy</h1>&#13;
&#13;
&#13;
<p>HAProxy is a reverse proxy, useful <a data-primary="HAProxy" data-secondary="installing" data-type="indexterm" id="hap_install"/>for intercepting requests before they’re delivered to application code. It’s used in this book to offload some tasks that otherwise shouldn’t be handled by a Node.js process.</p>&#13;
&#13;
<p>If you use Linux, you have a few options. The first option is to try to use your distro’s software installer to install <code>haproxy</code> directly. This might be as easy as <strong><code>sudo apt install haproxy</code></strong>. However, this may install a version of HAProxy that is too old. If the version of HAProxy that your distro provides is older than <em>v2</em>, which you can check by running <strong><code>haproxy -v</code></strong> after install, then you’ll need to install it another way.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Linux: Build from Source" data-type="sect1"><div class="sect1" id="idm46291172211000">&#13;
<h1>Linux: Build from Source</h1>&#13;
&#13;
<p>This first method will download the <a data-primary="Linux" data-secondary="HAProxy" data-type="indexterm" id="idm46291172209640"/>official source code package from the <a href="http://haproxy.org"><em class="hyperlink">http://haproxy.org</em></a> website. Then, extract the contents, compile the application, and perform an install. This approach will also install the <code>man</code> pages, which will provide useful documentation. Run these commands to download and compile HAProxy:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nv">$ </code>sudo apt install libssl-dev <code class="c"># Debian / Ubuntu</code>&#13;
<code class="nv">$ </code>curl -O http://www.haproxy.org/download/2.1/src/haproxy-2.1.8.tar.gz&#13;
<code class="nv">$ </code>tar -xf haproxy-2.1.8.tar.gz&#13;
<code class="nv">$ </code><code class="nb">cd </code>haproxy-2.1.8&#13;
<code class="nv">$ </code>make -j4 <code class="nv">TARGET</code><code class="o">=</code>linux-glibc <code class="nv">USE_ZLIB</code><code class="o">=</code>yes <code class="nv">USE_OPENSSL</code><code class="o">=</code>yes&#13;
<code class="nv">$ </code>sudo make install</pre>&#13;
&#13;
<p>If you get errors during compilation, then you may need to use your distro’s package manager to install missing packages.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Linux: Install Precompiled Binary" data-type="sect1"><div class="sect1" id="idm46291172195240">&#13;
<h1>Linux: Install Precompiled Binary</h1>&#13;
&#13;
<p>However, if you’d prefer to avoid the process of compiling software, you may instead choose to download a precompiled binary. I wasn’t able to track down an official one, so here’s a version that I’ve compiled locally and uploaded to my web server. Run the following commands to download, extract, and install the precompiled binary:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nv">$ </code>curl -O https://thomashunter.name/pkg/haproxy-2.1.8-linux.tar.gz&#13;
<code class="nv">$ </code>tar -xf haproxy-2.1.8-linux.tar.gz&#13;
<code class="nv">$ </code>./haproxy -v <code class="c"># test</code>&#13;
<code class="nv">$ </code>sudo mv ./haproxy /usr/bin/haproxy&#13;
<code class="nv">$ </code>sudo chown root:root /usr/bin/haproxy</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="macOS: Install via Homebrew" data-type="sect1"><div class="sect1" id="appendix_install_haproxy_macos">&#13;
<h1>macOS: Install via Homebrew</h1>&#13;
&#13;
<p>If you use macOS, I <a data-primary="macOS" data-secondary="HAProxy install" data-type="indexterm" id="idm46291172172472"/>highly recommend installing <a class="orm:hideurl" href="https://brew.sh">Homebrew</a> if you haven’t already. Homebrew usually has recent versions of software available and will contain a modern version of HAProxy. With Homebrew, you can install HAProxy by running the following <a data-primary="HAProxy" data-secondary="installing" data-startref="hap_install" data-type="indexterm" id="idm46291172184344"/>command:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nv">$ </code>brew install haproxy@2.1.8&#13;
<code class="nv">$ </code>haproxy -v <code class="c"># test</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>