<html><head></head><body><div id="sbo-rt-content"><section data-type="appendix" epub:type="appendix" data-pdf-bookmark="Appendix A. Final Code Kitchen"><div class="appendix" id="appendix_a_final_code_kitchen">
<h1><span class="label">Appendix A. </span>Final Code Kitchen</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0673-01.png" alt="image" width="1036" height="813"/>
<h6/>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#646466;"><strong>Finally, the complete version of the BeatBox!</strong></span></p>
<p><span style="color:#646466;"><strong>It connects to a simple MusicServer so that you can send and receive beat patterns with other clients.</strong></span></p>
</div>
<section data-type="sect1" data-pdf-bookmark="Final BeatBox client program"><div class="sect1" id="final_beatbox_client_program">
<h1>Final BeatBox client program</h1>
<p><a data-type="indexterm" data-primary="BeatBox app" data-secondary="client program" id="idm46038386606224"/><a data-type="indexterm" data-primary="Code Kitchens" id="idm46038386602880"/><a data-type="indexterm" data-primary="Code Kitchens" data-secondary="BeatBox app" id="idm46038386602368"/><a data-type="indexterm" data-primary="GUI" data-secondary="BeatBox app" id="idm46038386601392"/>Most of this code is the same as the code from the Code Kitchens in the previous chapters, so we don’t annotate the whole thing again. The new parts include:</p>
<p>GUI: Two new components are added for the text area that displays incoming messages (actually a scrolling list) and the text field.</p>
<p>NETWORKING: Just like the SimpleChatClient in this chapter, the BeatBox now connects to the server and gets an input and output stream.</p>
<p>MULTITHREADED: Again, just like the SimpleChatClient, we start a “reader” job that keeps looking for incoming messages from the server. But instead of just text, the messages coming in include TWO objects: the String message and the serialized array (the thing that holds the state of all the checkboxes).</p>
<p>All the code is available at <em><a href="https://oreil.ly/hfJava_3e_examples">https://oreil.ly/hfJava_3e_examples</a></em>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0674-01.png" alt="image" width="991" height="780"/>
<h6/>
</div></figure>
<p/>
<figure class="informal"><div class="figure"><img src="Images/f0675-01.png" alt="image" width="978" height="1204"/>
<h6/>
</div></figure>
<p/>
<figure class="informal"><div class="figure"><img src="Images/f0676-01.png" alt="image" width="983" height="1223"/>
<h6/>
</div></figure>
<p/>
<figure class="informal"><div class="figure"><img src="Images/f0677-01.png" alt="image" width="1449" height="1682"/>
<h6/>
</div></figure>
<p/>
<figure class="informal"><div class="figure"><img src="Images/f0678-01.png" alt="image" width="1001" height="973"/>
<h6/>
</div></figure>
<p/>
<figure class="informal"><div class="figure"><img src="Images/f0679-01.png" alt="image" width="1006" height="569"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00045">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="60" height="12"/></span> <strong>Yours to solve.</strong></p>
<p>What are some of the ways you can improve this program?</p>
<p>Here are a few ideas to get you started:</p>
<ol>
<li><p>Once you select a pattern, whatever current pattern was playing is blown away. If that was a new pattern you were working on (or a modification of another one), you’re out of luck. You might want to pop up a dialog box that asks the user if he’d like to save the current pattern.</p></li>
<li><p>If you fail to type in a command-line argument, you just get an exception when you run it! Put something in the main method that checks to see if you’ve passed in a command-line argument. If the user doesn’t supply one, either pick a default or print out a message that says they need to run it again, but this time with an argument for their screen name.</p></li>
<li><p>It might be nice to have a feature where you can click a button and it will generate a random pattern for you. You might hit on one you really like. Better yet, have another feature that lets you load in existing “foundation” patterns, like one for jazz, rock, reggae, etc., that the user can add to.</p></li>
</ol>
<p>You don’t have to type all the code in! You can clone it from the repository at All the code is available at <em><a href="https://oreil.ly/hfJava_3e_examples">https://oreil.ly/hfJava_3e_examples</a></em>.</p>
<p>There’s also an alternative BeatBox solution, which uses Maps and Lists instead of the arrays used in this solution. There’s more than one way to solve any problem!</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Final BeatBox server program"><div class="sect1" id="final_beatbox_server_program">
<h1>Final BeatBox server program</h1>
<p><a data-type="indexterm" data-primary="BeatBox app" data-secondary="server program" id="idm46038387066272"/>Most of this code is identical to the SimpleChatServer we made in <a data-type="xref" href="ch17.xhtml#make_a_connection_networking_and_threads">Chapter 17</a>, <em>Make a Connection</em>. The only difference, in fact, is that this server receives, and then re-sends, two serialized objects instead of a plain String (although one of the serialized objects happens to <em>be</em> a String).</p>
<figure class="informal"><div class="figure">
<img src="Images/f0681-01.png" alt="image" width="983" height="936"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0682-01.png" alt="image" width="968" height="622"/>
<h6/>
</div></figure>
</div></section>
</div></section></div></body></html>