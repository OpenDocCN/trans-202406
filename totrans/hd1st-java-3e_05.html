<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Know Your Variables: Primitives and References"><div class="chapter" id="know_your_variables_primitives_and_refer">
<h1><span class="label">Chapter 3. </span>Know Your Variables: Primitives and References</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0049-01.png" alt="image" width="581" height="469"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="object references" data-see="reference variables" id="idm46038397132864"/><a data-type="indexterm" data-primary="operators" data-seealso="primitive variables" id="idm46038397131824"/><a data-type="indexterm" data-primary="primitive variables" id="idm46038397130720"/><a data-type="indexterm" data-primary="reference variables" id="idm46038397129888"/><a data-type="indexterm" data-primary="variables" data-secondary="primitive" data-see="primitive variables" id="idm46038397129056"/><a data-type="indexterm" data-primary="variables" data-secondary="reference" data-see="reference variables" id="idm46038397127680"/>Variables can store two types of things: <span style="color:#9D9EA0;">primitives</span> and <span style="color:#9D9EA0;">references</span>. So far you’ve used variables in two places—as object <strong>state</strong> (instance variables) and as <strong>local</strong> variables (variables declared within a <em>method</em>). Later, we’ll use variables as <strong>arguments</strong> (values sent to a method by the calling code), and as <strong>return types</strong> (values sent back to the caller of the method). You’ve seen variables declared as simple <strong>primitive</strong> integer values (type <code>int</code>). You’ve seen variables declared as something more <strong>complex</strong> like a String or an array.  But <strong>there’s gotta be more to life</strong> than integers, Strings, and arrays. What if you have a PetOwner object with a Dog instance variable? Or a Car with an Engine? In this chapter we’ll unwrap the mysteries of Java types (like the difference between primited and references) and look at what you can <em>declare</em> as a variable, what you can <em>put</em> in a variable, and what you can <em>do</em> with a variable. And we’ll finally see what life is <em>truly</em> like on the garbage-collectible heap.</p>
<section data-type="sect1" data-pdf-bookmark="Declaring a variable"><div class="sect1" id="declaring_a_variable">
<h1>Declaring a variable</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0050-01.png" alt="image" width="495" height="868"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="classes" data-secondary="and types" id="idm46038397115040"/><a data-type="indexterm" data-primary="declarations" data-secondary="variable" id="idm46038397113984"/><a data-type="indexterm" data-primary="naming" data-secondary="variables" id="idm46038397112880"/><a data-type="indexterm" data-primary="primitive variables" data-secondary="declaring" id="idm46038397111776"/><a data-type="indexterm" data-primary="types" data-secondary="variables" id="idm46038397110672"/><a data-type="indexterm" data-primary="variables" data-secondary="naming" id="idm46038397109568"/><strong>Java cares about type.</strong> It won’t let you do something bizarre and dangerous like stuff a Giraffe reference into a Rabbit variable—what happens when someone tries to ask the so-called <em>Rabbit</em> to <code>hop()</code>? And it won’t let you put a floating-point number into an integer variable, unless you <em>tell the compiler</em> that you know you might lose precision (like, everything after the decimal point).</p>
<p>The compiler can spot most problems:</p>
<pre data-type="programlisting"><strong>Rabbit hopper = new Giraffe();</strong></pre>
<p>Don’t expect that to compile. <em>Thankfully</em>.</p>
<p>For all this type-safety to work, you must declare the type of your variable. Is it an integer? a Dog? A single character? Variables come in two flavors: <strong><em>primitive</em></strong> and <strong><em>object reference</em></strong>. Primitives hold fundamental values (think: simple bit patterns) including integers, booleans, and floating-point numbers. Object references hold, well, <em>references</em> to <em>objects</em> (gee, didn’t <em>that</em> clear it up).</p>
<p>We’ll look at primitives first and then move on to what an object reference really means. But regardless of the type, you must follow two declaration rules:</p>
<p>Besides a type, a variable needs a name so that you can use that name in code.</p>
<hr/>
<p><strong>variables must have a <span style="color:#9D9EA0;">type</span></strong></p>
<hr/>
<p>Besides a type, a variable needs a name so that you can use that name in code.</p>
<hr/>
<p><strong>variables must have a <span style="color:#9D9EA0;">name</span></strong></p>
<hr/>
<figure class="informal"><div class="figure">
<img src="Images/f0050-02.png" alt="image" width="317" height="94"/>
<h6/>
</div></figure>
<p>Note: When you see a statement like: “an object of <strong>type</strong> X,” think of <em>type</em> and <em>class</em> as synonyms. (We’ll refine that a little more in later chapters.)</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="“I’d like a double mocha, no, make it an int.”"><div class="sect1" id="quotation_markiapostrophed_like_a_double">
<h1>“I’d like a double mocha, no, make it an int.”</h1>
<p><a data-type="indexterm" data-primary="boolean primitive type" id="idm46038397089824"/><a data-type="indexterm" data-primary="byte primitive type" id="idm46038397088864"/><a data-type="indexterm" data-primary="char primitive type" id="idm46038397088032"/><a data-type="indexterm" data-primary="double primitive type" id="idm46038397087200"/><a data-type="indexterm" data-primary="float primitive type" id="idm46038397086368"/><a data-type="indexterm" data-primary="int primitive type" id="idm46038397085536"/><a data-type="indexterm" data-primary="long primitive type" id="idm46038397084704"/><a data-type="indexterm" data-primary="numeric primitive types" id="idm46038397083872"/><a data-type="indexterm" data-primary="primitive variables" id="idm46038397083040"/><a data-type="indexterm" data-primary="primitive variables" data-secondary="ranges for variables" id="idm46038397082208"/><a data-type="indexterm" data-primary="short primitive type" id="idm46038397081104"/>When you think of Java variables, think of cups. Coffee cups, tea cups, giant cups that hold lots and lots of your favorite drink, those big cups the popcorn comes in at the movies, cups with wonderful tactile handles, and cups with metallic trim that you learned can never, ever go in the microwave.</p>
<p><strong>A variable is just a cup. A container. It <em>holds</em> something.</strong></p>
<p>It has a size and a type. In this chapter, we’re going to look first at the variables (cups) that hold <strong>primitives</strong>: then a little later we’ll look at cups that hold <em>references to objects</em>. Stay with us here on the whole cup analogy—as simple as it is right now, it’ll give us a common way to look at things when the discussion gets more complex. And that’ll happen soon.</p>
<p>Primitives are like the cups they have at the coffee shop. If you’ve been to a Starbucks, you know what we’re talking about here. They come in different sizes, and each has a name like “short,” “tall,” and, “I’d like a ‘grande’ mocha half-caff with extra whipped cream.”</p>
<p>You might see the cups displayed on the counter so you can order appropriately:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0051-03.png" alt="image" width="356" height="211"/>
<h6/>
</div></figure>
<p>And in Java, primitives come in different sizes, and those sizes have names. When you declare any variable in Java, you must declare it with a specific type. The four containers here are for the four integer primitives in Java.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0051-04.png" alt="image" width="352" height="211"/>
<h6/>
</div></figure>
<p>Each cup holds a value, so for Java primitives, rather than saying, “I’d like a tall french roast,” you say to the compiler, “I’d like an int variable with the number 90 please.” Except for one tiny difference...in Java you also have to give your cup a <em>name</em>. So it’s actually, “I’d like an int please, with the value of 2486, and name the variable <strong><em>height</em></strong>.” Each primitive variable has a fixed number of bits (cup size). The sizes for the six numeric primitives in Java are shown below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0051-05.png" alt="image" width="249" height="180"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0051-01.png" alt="image" width="161" height="179"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Primitive Types"><div class="sect2" id="primitive_types">
<h2>Primitive Types</h2>
<table class="border">
<tbody>
<tr>
<td>Type</td>
<td>Bit Depth</td>
<td>Value Range</td>
</tr>
</tbody>
</table>
<p><strong>boolean and char</strong></p>
<table class="border">
<tbody>
<tr>
<td>boolean</td>
<td>(JVM-specific)</td>
<td><strong><em>true</em></strong> or <strong><em>false</em></strong></td>
</tr>
<tr>
<td>char 16</td>
<td>bits</td>
<td>0 to 65535</td>
</tr>
</tbody>
</table>
<p><strong>numeric (all are signed)</strong></p>
<p><strong><em>integer</em></strong></p>
<table class="border">
<tbody>
<tr>
<td>byte</td>
<td>8 bits</td>
<td>-128 to 127</td>
</tr>
<tr>
<td>short</td>
<td>16 bits</td>
<td>-32768 to 32767</td>
</tr>
<tr>
<td>int</td>
<td>32 bits</td>
<td>-2147483648 to 2147483647</td>
</tr>
<tr>
<td>long</td>
<td>64 bits</td>
<td>-huge to huge</td>
</tr>
</tbody>
</table>
<p><strong><em>floating point</em></strong></p>
<table class="border">
<tbody>
<tr>
<td>float</td>
<td>32 bits</td>
<td>varies</td>
</tr>
<tr>
<td>double</td>
<td>64 bits</td>
<td>varies</td>
</tr>
</tbody>
</table>
<hr/>
<p><strong>Primitive declarations with assignments:</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0051-02.png" alt="image" width="255" height="543"/>
<h6/>
</div></figure>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="You really don’t want to spill that..."><div class="sect1" id="you_really_donapostrophet_want_to_spill">
<h1>You really don’t want to spill that...</h1>
<p><strong>Be sure the value can fit into the variable.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0052-01.png" alt="image" width="394" height="453"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="assignment" data-secondary="primitive variables" id="idm46038397034720"/><a data-type="indexterm" data-primary="exercises" data-secondary="Sharpen Your Pencil" id="idm46038397033408"/><a data-type="indexterm" data-primary="literals, assigning values" id="idm46038397032304"/><a data-type="indexterm" data-primary="spillage, variable values" id="idm46038397031504"/><a data-type="indexterm" data-primary="variables" data-secondary="assigning values to" id="idm46038397030704"/>You can’t put a large value into a small cup.</p>
<p>Well, OK, you can, but you’ll lose some. You’ll get, as we say, <em>spillage</em>. The compiler tries to help prevent this if it can tell from your code that something’s not going to fit in the container (variable/cup) you’re using.</p>
<p>For example, you can’t pour an int-full of stuff into a byte-sized container, as follows:</p>
<pre data-type="programlisting">int x = 24;
byte b = x;
//won’t work!!</pre>
<p>Why doesn’t this work, you ask? After all, the value of <em>x</em> is 24, and 24 is definitely small enough to fit into a byte. <em>You</em> know that, and <em>we</em> know that, but all the compiler cares about is that you’re trying to put a big thing into a small thing, and there’s the <em>possibility</em> of spilling. Don’t expect the compiler to know what the value of <em>x</em> is, even if you happen to be able to see it literally in your code.</p>
<p><strong>You can assign a value to a variable in one of several ways including:</strong></p>
<ul>
<li><p>type a <em>literal</em> value after the equals sign (x=<em>12</em>, isGood = <strong><em>true</em></strong>, etc.)</p></li>
<li><p>assign the value of one variable to another (x = y)</p></li>
<li><p>use an expression combining the two (x = y + <strong><em>43</em></strong>)</p></li>
</ul>
<p>In the examples below, the literal values are in bold italics:</p>
<table class="border">
<tbody>
<tr>
<td>int size = <strong><em>32</em></strong>;</td>
<td>declare an int named <em>size</em>, assign it the value <em>32</em></td>
</tr>
<tr>
<td><code>char initial = <strong><em>'j';</em></strong></code></td>
<td>declare a char named <em>initial</em>, assign it the value <em>‘j’</em></td>
</tr>
<tr>
<td><code>double d = <strong><em>456.709;</em></strong></code></td>
<td>declare a double named <em>d</em>, assign it the value <em>456.709</em></td>
</tr>
<tr>
<td><code>boolean isLearning;</code></td>
<td>declare a boolean named <em>isCrazy</em> (no assignment)</td>
</tr>
<tr>
<td><code>isLearning = <strong><em>true;</em></strong></code></td>
<td>assign the value <em>true</em> to the previously declared <em>isCrazy</em></td>
</tr>
<tr>
<td><code>int y = x + <strong><em>456</em></strong>;</code></td>
<td>declare an int named <em>y</em>, assign it the value that is the sum of whatever <em>x</em> is now plus <em>456</em></td>
</tr>
</tbody>
</table>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00003">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p>The compiler won’t let you put a value from a large cup into a small one. But what about the other way—pouring a small cup into a big one? <strong><em>No problem.</em></strong></p>
<p>Based on what you know about the size and type of the primitive variables, see if you can figure out which of these are legal and which aren’t. We haven’t covered all the rules yet, so on some of these you’ll have to use your best judgment. <strong><em>Tip:</em></strong> The compiler always errs on the side of safety.</p>
<hr/>
<p>From the following list, <strong><em>Circle</em></strong> the statements that would be legal if these lines were in a single method:</p>
<ol>
<li><p><code>int x = 34.5;</code></p></li>
<li><p><code>boolean boo = x;</code></p></li>
<li><p><code>int g = 17;</code></p></li>
<li><p><code>int y = g;</code></p></li>
<li><p><code>y = y + 10;</code></p></li>
<li><p><code>short s;</code></p></li>
<li><p><code>s = y;</code></p></li>
<li><p><code>byte b = 3;</code></p></li>
<li><p><code>byte v = b;</code></p></li>
<li><p><code>short n = 12;</code></p></li>
<li><p><code>v = n;</code></p></li>
<li><p><code>byte k = 128;</code></p></li>
</ol>
<p><span class="inlineimage"><img src="Images/arr1.png" alt="Images" width="137" height="12"/></span> <strong>Answers in <a data-type="xref" href="#exercisesolutions">“Exercise Solutions”</a>.</strong></p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Back away from that keyword!"><div class="sect1" id="back_away_from_that_keywordexclamation_m">
<h1>Back away from that keyword!</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0053-01.png" alt="image" width="497" height="475"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="boolean primitive type" id="idm46038396977200"/><a data-type="indexterm" data-primary="byte primitive type" id="idm46038396976416"/><a data-type="indexterm" data-primary="char primitive type" id="idm46038396975584"/><a data-type="indexterm" data-primary="double primitive type" id="idm46038396974752"/><a data-type="indexterm" data-primary="float primitive type" id="idm46038396973920"/><a data-type="indexterm" data-primary="int primitive type" id="idm46038396973088"/><a data-type="indexterm" data-primary="keywords in Java" id="idm46038396972256"/><a data-type="indexterm" data-primary="long primitive type" id="idm46038396971424"/><a data-type="indexterm" data-primary="naming" data-secondary="variables" id="idm46038396970592"/><a data-type="indexterm" data-primary="primitive variables" data-secondary="as reserved words" id="idm46038396969488"/><a data-type="indexterm" data-primary="reserved words" id="idm46038396968384"/><a data-type="indexterm" data-primary="short primitive type" id="idm46038396967552"/>You know you need a name and a type for your variables.</p>
<p>You already know the primitive types.</p>
<p><strong><em>But what can you use as names?</em></strong> The rules are simple. You can name a class, method, or variable according to the following rules (the real rules are slightly more flexible, but these will keep you safe):</p>
<ul>
<li><p><strong>It must start with a letter, underscore (_), or dollar sign ($). You can’t start a name with a number.</strong></p></li>
<li><p><strong>After the first character, you can use numbers as well. Just don’t start it with a number.</strong></p></li>
<li><p><strong>It can be anything you like, subject to those two rules, just so long as it isn’t one of Java’s reserved words.</strong></p></li>
</ul>
<p>Reserved words are keywords (and other things) that the compiler recognizes. And if you really want to play confuse-a-compiler, then just <em>try</em> using a reserved word as a name.</p>
<p>You’ve already seen some reserved words:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0053-02.png" alt="image" width="705" height="177"/>
<h6/>
</div></figure>
<p>But there are a lot more we haven’t discussed yet. Even if you don’t need to know what they mean, you still need to know you can’t use ’em yourself. <strong><em>Do not—</em></strong><em>under any circumstances</em>—<strong><em>try to memorize these now.</em></strong> To make room for these in your head, you’d probably have to lose something else. Like where your car is parked. Don’t worry, by the end of the book you’ll have most of them down cold.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0053-03.png" alt="image" width="266" height="459"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="This table reserved"><div class="sect1" id="this_table_reserved">
<h1>This table reserved</h1>
<table class="border">
<tbody>
<tr>
<td><span style="color:#9D9EA0;">_</span></td>
<td><span style="color:#9D9EA0;">catch</span></td>
<td><span style="color:#9D9EA0;">double</span></td>
<td><span style="color:#9D9EA0;">float</span></td>
<td><span style="color:#9D9EA0;">int</span></td>
<td><span style="color:#9D9EA0;">private</span></td>
<td><span style="color:#9D9EA0;">super</span></td>
<td><span style="color:#9D9EA0;">true</span></td>
</tr>
<tr>
<td><span style="color:#9D9EA0;">abstract</span></td>
<td><span style="color:#9D9EA0;">char</span></td>
<td><span style="color:#9D9EA0;">else</span></td>
<td><span style="color:#9D9EA0;">for</span></td>
<td><span style="color:#9D9EA0;">interface</span></td>
<td><span style="color:#9D9EA0;">protected</span></td>
<td><span style="color:#9D9EA0;">switch</span></td>
<td><span style="color:#9D9EA0;">try</span></td>
</tr>
<tr>
<td><span style="color:#9D9EA0;">assert</span></td>
<td><span style="color:#9D9EA0;">class</span></td>
<td><span style="color:#9D9EA0;">enum</span></td>
<td><span style="color:#9D9EA0;">goto</span></td>
<td><span style="color:#9D9EA0;">long</span></td>
<td><span style="color:#9D9EA0;">public</span></td>
<td><span style="color:#9D9EA0;">synchronized</span></td>
<td><span style="color:#9D9EA0;">void</span></td>
</tr>
<tr>
<td><span style="color:#9D9EA0;">boolean</span></td>
<td><span style="color:#9D9EA0;">const</span></td>
<td><span style="color:#9D9EA0;">extends</span></td>
<td><span style="color:#9D9EA0;">if</span></td>
<td><span style="color:#9D9EA0;">native</span></td>
<td><span style="color:#9D9EA0;">return</span></td>
<td><span style="color:#9D9EA0;">this</span></td>
<td><span style="color:#9D9EA0;">volatile</span></td>
</tr>
<tr>
<td><span style="color:#9D9EA0;">break</span></td>
<td><span style="color:#9D9EA0;">continue</span></td>
<td><span style="color:#9D9EA0;">false</span></td>
<td><span style="color:#9D9EA0;">implements</span></td>
<td><span style="color:#9D9EA0;">new</span></td>
<td><span style="color:#9D9EA0;">short</span></td>
<td><span style="color:#9D9EA0;">throw</span></td>
<td><span style="color:#9D9EA0;">while</span></td>
</tr>
<tr>
<td><span style="color:#9D9EA0;">byte</span></td>
<td><span style="color:#9D9EA0;">default</span></td>
<td><span style="color:#9D9EA0;">final</span></td>
<td><span style="color:#9D9EA0;">import</span></td>
<td><span style="color:#9D9EA0;">null</span></td>
<td><span style="color:#9D9EA0;">static</span></td>
<td><span style="color:#9D9EA0;">throws</span></td>
<td/>
</tr>
<tr>
<td><span style="color:#9D9EA0;">case</span></td>
<td><span style="color:#9D9EA0;">do</span></td>
<td><span style="color:#9D9EA0;">finally</span></td>
<td><span style="color:#9D9EA0;">instanceof</span></td>
<td><span style="color:#9D9EA0;">package</span></td>
<td><span style="color:#9D9EA0;">strictfp</span></td>
<td><span style="color:#9D9EA0;">transient</span></td>
<td/>
</tr>
</tbody>
</table>
<p>Java’s keywords, reserved words, and special identifiers. If you use these for names, the compiler will probably be very, <em>very</em> upset.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Controlling your Dog object"><div class="sect1" id="controlling_your_dog_object">
<h1>Controlling your Dog object</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0054-01.png" alt="image" width="703" height="891"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary=". (dot operator)" id="idm46038396905392"/><a data-type="indexterm" data-primary="declarations" data-secondary="variable" id="idm46038396904592"/><a data-type="indexterm" data-primary="dot operator (.)" id="idm46038396903456"/><a data-type="indexterm" data-primary="variables" data-secondary="declaring" id="idm46038396902624"/>You know how to declare a primitive variable and assign it a value. But now what about non-primitive variables? In other words, <em>what about objects?</em></p>



<hr/>
<ul>
<li><p>There is actually no such thing as an <span style="color:#9D9EA0;">object</span> variable.</p></li>
<li><p>There’s only an object <span style="color:#9D9EA0;">reference</span> variable.</p></li>
<li><p>An object reference variable holds bits that represent a way to <em>access</em> an object.</p></li>
<li><p>It doesn’t hold the object itself, but it holds something like a pointer. Or an address. Except, in Java we don’t really know <em>what</em> is inside a reference variable. We <em>do</em> know that whatever it is, it represents one and only one object. And the JVM knows how to use the reference to get to the object.</p></li>
</ul>
<hr/>
<p>You can’t stuff an object into a variable. We often think of it that way...we say things like, “I passed the String to the System.out.println() method.” Or, “The method returns a Dog” or, “I put a new Foo object into the variable named myFoo.”</p>
<p>But that’s not what happens. There aren’t giant expandable cups that can grow to the size of any object. Objects live in one place and one place only—the garbage-collectible heap! (You’ll learn more about that later in this chapter.)</p>
<p>Although a primitive variable is full of bits representing the actual <strong><em>value</em></strong> of the variable, an object reference variable is full of bits representing <strong><em>a way to get to the object.</em></strong></p>
<p>You use the dot operator (.) on a reference variable to say, “use the thing <em>before</em> the dot to get me the thing <em>after</em> the dot.” For example:</p>
<pre data-type="programlisting"><strong>myDog.bark();</strong></pre>
<p>means, “use the object referenced by the variable myDog to invoke the bark() method.” When you use the dot operator on an object reference variable, think of it like pressing a button on the remote control for that object.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-01.png" alt="image" width="414" height="230"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="An object reference is just another variable value"><div class="sect1" id="an_object_reference_is_just_another_vari">
<h1>An object reference is just another variable value</h1>
<p><a data-type="indexterm" data-primary="assignment" data-secondary="object" id="idm46038396884768"/><a data-type="indexterm" data-primary="assignment" data-secondary="reference variables" id="idm46038396883760"/><a data-type="indexterm" data-primary="objects" data-secondary="assignment" id="idm46038396882560"/><a data-type="indexterm" data-primary="objects" data-secondary="creating" id="idm46038396881456"/><a data-type="indexterm" data-primary="values, variable" id="idm46038396880352"/><a data-type="indexterm" data-primary="values, variable" data-secondary="object reference as" id="idm46038396879520"/><strong>Something that goes in a cup.</strong></p>
<p><strong>Only this time, the value is a remote control.</strong></p>
<hr/>
<p><strong>Primitive Variable</strong></p>
<pre data-type="programlisting"><strong>byte x = 7;</strong></pre>
<p>The bits representing 7 go into the variable (00000111).</p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-02.png" alt="image" width="152" height="127"/>
<h6/>
</div></figure>
<hr/>
<p><strong>Reference Variable</strong></p>
<pre data-type="programlisting">Dog myDog = new Dog();</pre>
<p>The bits representing a way to get to the Dog object go into the variable.</p>
<p><strong><em>The Dog object itself does not go into the variable!</em></strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-03.png" alt="image" width="153" height="192"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id0000005">
<p>With primitive variables, the value of the variable is...the <em>value</em> (5, -26.7, a’).</p>
<p>With reference variables, the value of the variable is...bits representing <em>a way to get to a specific object.</em></p>
<p>You don’t know (or care) how any particular JVM implements object references. Sure, they might be a pointer to a pointer to...but even if you <em>know</em>, you still can’t use the bits for anything other than accessing an object.</p>
</div></aside>
<p>We don’t care how many 1s and 0s there are in a reference variable. It’s up to each JVM and the phase of the moon.</p>
<p><strong>The 3 steps of object declaration, creation and assignment</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-01a.png" alt="image" width="388" height="71"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/1circlea.png" alt="Images" width="23" height="23"/></span> <strong>Declare a reference variable</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-04.png" alt="image" width="74" height="149"/>
<h6/>
</div></figure>
<pre data-type="programlisting">Dog myDog = <span style="color:#9D9EA0;">new Dog();</span></pre>
<p>Tells the JVM to allocate space for a reference variable, and names that variable <em>myDog</em>. The reference variable is, forever, of type Dog. In other words, a remote control that has buttons to control a Dog, but not a Cat or a Button or a Socket.</p>
<p><span class="inlineimage"><img src="Images/1circleb.png" alt="Images" width="23" height="23"/></span> <strong>Create an object</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-05.png" alt="image" width="160" height="198"/>
<h6/>
</div></figure>
<pre data-type="programlisting"><span style="color:#9D9EA0;">Dog myDog</span> = new Dog();</pre>
<p>Tells the JVM to allocate space for a new Dog object on the heap (we’ll learn a lot more about that process, especially in <a data-type="xref" href="ch09.xhtml#life_and_death_of_an_object_constructors">Chapter 9</a>, <em>Life and Death of an Object</em>).</p>
<p><span class="inlineimage"><img src="Images/1circlec.png" alt="Images" width="23" height="23"/></span> <strong>Link the object and the reference</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0055-06.png" alt="image" width="281" height="299"/>
<h6/>
</div></figure>
<pre data-type="programlisting"><span style="color:#9D9EA0;">Dog myDog</span> = <span style="color:#9D9EA0;">new Dog();</span></pre>
<p>Assigns the new Dog to the reference variable myDog. In other words, <strong><em>programs the remote control.</em></strong></p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00003">
<h5>there are no Dumb Questions</h5>
<p><a data-type="indexterm" data-primary="C programming language" id="idm46038396840304"/><a data-type="indexterm" data-primary="reference variables" data-secondary="HeadFirst interview" id="idm46038396839408"/><a data-type="indexterm" data-primary="reference variables" data-secondary="size of" id="idm46038396838304"/><strong>Q: How big is a reference variable?</strong></p>
<p><strong>A:</strong> You don’t know. Unless you’re cozy with someone on the JVM’s development team, you don’t know how a reference is represented. There are pointers in there somewhere, but you can’t access them. You won’t need to. (OK, if you insist, you might as well just imagine it to be a 64-bit value.) But when you’re talking about memory allocation issues, your Big Concern should be about how many <em>objects</em> (as opposed to object <em>references</em>) you’re creating and how big <em>they</em> (the <em>objects</em>) really are.</p>
<p><strong>Q: So, does that mean that all object references are the same size, regardless of the size of the actual objects to which they refer?</strong></p>
<p><strong>A:</strong> Yep. All references for a given JVM will be the same size regardless of the objects they reference, but each JVM might have a different way of representing references, so references on one JVM may be smaller or larger than references on another JVM.</p>
<p><strong>Q: Can I do arithmetic on a reference variable, increment it, you know—C stuff?</strong></p>
<p><strong>A:</strong> Nope. Say it with me again, “Java is not C.”</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Java Exposed"><div class="sect1" id="java_exposed">
<h1>Java Exposed</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0081-01.png" alt="image" width="149" height="128"/>
<h6/>
</div></figure>
<p><strong>This week’s interview: Object Reference</strong></p>
<p><strong>HeadFirst:</strong> So, tell us, what’s life like for an object reference?</p>
<p><strong>Reference:</strong> Pretty simple, really. I’m a remote control, and I can be programmed to control different objects.</p>
<p><strong>HeadFirst:</strong> Do you mean different objects even while you’re running? Like, can you refer to a Dog and then five minutes later refer to a Car?</p>
<p><strong>Reference:</strong> Of course not. Once I’m declared, that’s it. If I’m a Dog remote control, then I’ll never be able to point (oops—my bad, we’re not supposed to say <em>point</em>), I mean, <em>refer</em> to anything but a Dog.</p>
<p><strong>HeadFirst:</strong> Does that mean you can refer to only one Dog?</p>
<p><strong>Reference:</strong> No. I can be referring to one Dog, and then five minutes later I can refer to some <em>other</em> Dog. As long as it’s a Dog, I can be redirected (like reprogramming your remote to a different TV) to it. Unless...no never mind.</p>
<p><strong>HeadFirst:</strong> No, tell me. What were you gonna say?</p>
<p><strong>Reference:</strong> I don’t think you want to get into this now, but I’ll just give you the short version—if I’m marked as <em>final</em>, then once I am assigned a Dog, I can never be reprogrammed to anything else but <em>that</em> one and only Dog. In other words, no other object can be assigned to me.</p>
<p><strong>HeadFirst:</strong> You’re right, we don’t want to talk about that now. OK, so unless you’re <em>final</em>, then you can refer to one Dog and then refer to a different Dog later. Can you ever refer to <em>nothing at all</em>? Is it possible to not be programmed to anything?</p>
<p><strong>Reference:</strong> Yes, but it disturbs me to talk about it.</p>
<p><strong>HeadFirst:</strong> Why is that?</p>
<p><strong>Reference:</strong> Because it means I’m <code>null</code>, and that’s upsetting to me.</p>
<p><strong>HeadFirst:</strong> You mean, because then you have no value?</p>
<p><strong>Reference:</strong> Oh, <code>null</code> <em>is</em> a value. I’m still a remote control, but it’s like you brought home a new universal remote control and you don’t have a TV. I’m not programmed to control anything. They can press my buttons all day long, but nothing good happens. I just feel so...useless. A waste of bits. Granted, not that many bits, but still. And that’s not the worst part. If I am the only reference to a particular object and then I’m set to <code>null</code> (deprogrammed), it means that now <em>nobody</em> can get to that object I had been referring to.</p>
<p><strong>HeadFirst:</strong> And that’s bad because...</p>
<p><strong>Reference:</strong> You have to <em>ask</em>? Here I’ve developed a relationship with this object, an intimate connection, and then the tie is suddenly, cruelly, severed. And I will never see that object again, because now it’s eligible for [producer, cue tragic music] <em>garbage collection</em>. Sniff. But do you think programmers ever consider <em>that</em>? Snif. Why, <em>why</em> can’t I be a primitive? <em>I hate being a reference.</em> The responsibility, all the broken attachments...</p>
<section data-type="sect2" data-pdf-bookmark="Life on the garbage-collectible heap"><div class="sect2" id="life_on_the_garbage-collectible_heap">
<h2>Life on the garbage-collectible heap</h2>
<figure class="informal"><div class="figure">
<img src="Images/f0057-01.png" alt="image" width="621" height="372"/>
<h6/>
</div></figure>
<pre data-type="programlisting">Book b = new Book();
Book c = new Book();</pre>
<p><a data-type="indexterm" data-primary="garbage collection" id="idm46038396782944"/><a data-type="indexterm" data-primary="heap" id="idm46038396782096"/><a data-type="indexterm" data-primary="reference variables" data-secondary="garbage-collection heap" id="idm46038396781264"/>Declare two Book reference variables. Create two new Book objects. Assign the Book objects to the reference variables.</p>
<p>The two Book objects are now living on the heap.</p>
<p>References: 2</p>
<p>Objects: 2</p>
<hr/>
<figure class="informal"><div class="figure">
<img src="Images/f0057-02.png" alt="image" width="620" height="413"/>
<h6/>
</div></figure>
<hr/>
<pre data-type="programlisting">Book d = c;</pre>
<p>Declare a new Book reference variable. Rather than creating a new, third Book object, assign the value of variable <strong><em>c</em></strong> to variable <strong><em>d.</em></strong> But what does this mean? It’s like saying “Take the bits in c, make a copy of them, and stick that copy into <strong><em>d.”</em></strong></p>
<p><strong>Both <em>c</em> and <em>d</em> refer to the same object.</strong></p>
<p><strong>The <em>c</em> and <em>d</em> variables hold two different copies of the same value. Two remotes programmed to one TV.</strong></p>
<p>References: 3</p>
<p>Objects: 2</p>
<hr/>
<figure class="informal"><div class="figure">
<img src="Images/f0057-03.png" alt="image" width="620" height="387"/>
<h6/>
</div></figure>
<pre data-type="programlisting">c = b;</pre>
<p>Assign the value of variable <em>b</em> to variable <em>c</em>. By now you know what this means. The bits inside variable <em>b</em> are copied, and that new copy is stuffed into variable <em>c.</em></p>
<p><strong>Both b and c refer to the same object.</strong></p>
<p><strong>The c variable no longer refers to its old Book object.</strong></p>
<p>References: 3</p>
<p>Objects: 2</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Life and death on the heap"><div class="sect2" id="life_and_death_on_the_heap">
<h2>Life and death on the heap</h2>
<figure class="informal"><div class="figure">
<img src="Images/f0058-01.png" alt="image" width="619" height="378"/>
<h6/>
</div></figure>
<pre data-type="programlisting">Book b = new Book();
Book c = new Book();</pre>
<p><a data-type="indexterm" data-primary="null reference" id="idm46038396757232"/><a data-type="indexterm" data-primary="reference variables" data-secondary="null reference" id="idm46038396756128"/>Declare two Book reference variables. Create two new Book objects. Assign the Book objects to the reference variables.</p>
<p>The two book objects are now living on the heap.</p>
<p>Active References: 2</p>
<p>Reachable Objects: 2</p>
<hr/>
<figure class="informal"><div class="figure">
<img src="Images/f0058-02.png" alt="image" width="620" height="392"/>
<h6/>
</div></figure>
<pre data-type="programlisting"><strong>b = c;</strong></pre>
<p>Assign the value of variable <em><strong>c</strong></em> to variable <em><strong>b.</strong></em> The bits inside variable <em><strong>c</strong></em> are copied, and that new copy is stuffed into variable <em><strong>b.</strong></em> Both variables hold identical values.</p>
<p><strong>Both b and c refer to the same object. Object 1 is abandoned and eligible for Garbage Collection (GC).</strong></p>
<p>Active References: 2</p>
<p>Reachable Objects: 1</p>
<p>Abandoned Objects: 1</p>
<p>The first object that <em><strong>b</strong></em> referenced, Object 1, has no more references. It’s <em>unreachable.</em></p>
<figure class="informal"><div class="figure">
<img src="Images/f0058-03.png" alt="image" width="647" height="394"/>
<h6/>
</div></figure>
<hr/>
<pre data-type="programlisting"><strong>c = null;</strong></pre>
<p>Assign the value <code>null</code> to variable <strong><em>c.</em></strong> This makes <strong><em>c</em></strong> a <em>null reference</em>, meaning it doesn’t refer to anything. But it’s still a reference variable, and another Book object can still be assigned to it.</p>
<p><strong>Object 2 still has an active reference (b), and as long as it does, the object is not eligible for GC.</strong></p>
<p>Active References: 1</p>
<p><em>null</em> References: 1</p>
<p>Reachable Objects: 1</p>
<p>Abandoned Objects: 1</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="An array is like a tray of cups"><div class="sect1" id="an_array_is_like_a_tray_of_cups">
<h1>An array is like a tray of cups</h1>
<p><a data-type="indexterm" data-primary="arrays" id="idm46038396734240"/><a data-type="indexterm" data-primary="arrays" data-secondary="elements of as objects" id="idm46038396733520"/><a data-type="indexterm" data-primary="int array variable" id="idm46038396732656"/><a data-type="indexterm" data-primary="primitive variables" data-secondary="in arrays" id="idm46038396731936"/><a data-type="indexterm" data-primary="variables" id="idm46038396730832"/><a data-type="indexterm" data-primary="variables" data-secondary="in arrays" id="idm46038396730000"/>The Java standard library includes lots of sophisticated data structures including maps, trees, and sets (see <a data-type="xref" href="app02.xhtml#appendix_b_the_top_ten-ish_topics_that_d">Appendix B</a>), but arrays are great when you just want a quick, ordered, efficient list of things. Arrays give you fast random access by letting you use an index position to get to any element in the array.</p>
<p>Every element in an array is just a variable. In other words, one of the eight primitive variable types (think: Large Furry Dog) or a reference variable. Anything you would put in a <em>variable</em> of that type can be assigned to an <em>array element</em> of that type. So in an array of type int (int[]), each element can hold an int. In a Dog array (Dog[]) each element can hold...a Dog? No, remember that a reference variable just holds a reference (a remote control), not the object itself. So in a Dog array, each element can hold a <em>remote control</em> to a Dog. Of course, we still have to make the Dog objects...and you’ll see all that on the next page.</p>
<p>Be sure to notice one key thing in the picture—<strong><em>the array is an object, even though it’s an array of primitives.</em></strong></p>
<p><span class="inlineimage"><img src="Images/1circlea.png" alt="Images" width="23" height="23"/></span> Declare an int array variable. An array variable is a remote control to an array object.</p>
<pre data-type="programlisting"><strong>int[] nums;</strong></pre>
<p><span class="inlineimage"><img src="Images/1circleb.png" alt="Images" width="23" height="23"/></span> Create a new int array with a length of 7, and assign it to the previously declared <code>int[]</code> variable <code>nums</code></p>
<pre data-type="programlisting"><strong>nums = new int[7];</strong></pre>
<p><span class="inlineimage"><img src="Images/1circlec.png" alt="Images" width="23" height="23"/></span> Give each element in the array some int value. Remember, elements in an int array are just int <em>variables.</em></p>
<figure class="informal"><div class="figure">
<img src="Images/f0059-01.png" alt="image" width="255" height="232"/>
<h6/>
</div></figure>
<p><span style="color:#9D9EA0;">Arrays are always objects, whether they’re declared to hold primitives or object references.</span></p>
<figure class="informal"><div class="figure">
<img src="Images/f0059-02.png" alt="image" width="667" height="495"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Arrays are objects too"><div class="sect1" id="arrays_are_objects_too">
<h1>Arrays are objects too</h1>
<p>You can have an array object that’s declared to <em>hold</em> primitive values. In other words, the array object can have <em>elements</em> that are primitives, but the array itself is <em>never</em> a primitive. <strong>Regardless of what the array holds, the array itself is always an object!</strong></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Make an array of Dogs"><div class="sect1" id="make_an_array_of_dogs">
<h1>Make an array of Dogs</h1>
<p><a data-type="indexterm" data-primary="assignment" id="idm46038396706112"/><a data-type="indexterm" data-primary="assignment" data-secondary="arrays" id="idm46038396705056"/><a data-type="indexterm" data-primary="objects" data-secondary="array elements as" id="idm46038396703952"/><span class="inlineimage"><img src="Images/1circlea.png" alt="Images" width="23" height="23"/></span> Declare a Dog array variable</p>
<pre data-type="programlisting"><strong>Dog[] pets;</strong></pre>
<p><span class="inlineimage"><img src="Images/1circleb.png" alt="Images" width="23" height="23"/></span> Create a new Dog array with a length of 7, and assign it to the previously declared <code>Dog[]</code> variable <code>pets</code></p>
<pre data-type="programlisting"><strong>pets = new Dog[7];</strong></pre>
<p><strong>What’s missing?</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0060-01.png" alt="image" width="743" height="436"/>
<h6/>
</div></figure>
<p><strong>Dogs! We have an array of Dog references, but no actual Dog <em>objects!</em></strong></p>
<hr/>
<p><span class="inlineimage"><img src="Images/1circlec.png" alt="Images" width="23" height="23"/></span> Create new Dog objects, and assign them to the array elements.</p>
<p>Remember, elements in a Dog array are just Dog reference <em>variables.</em> We still need Dogs!</p>
<pre data-type="programlisting"><strong>pets[0] = new Dog();</strong>
<strong>pets[1] = new Dog();</strong></pre>
<figure class="informal"><div class="figure">
<img src="Images/f0060-02.png" alt="image" width="714" height="601"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="sharpen_your_pencil-id00004">
<h5>Sharpen your pencil</h5>
<figure class="informal"><div class="figure">
<img src="Images/pencil.png" alt="image" width="122" height="80"/>
<h6/>
</div></figure>
<p>What is the current value of pets[2]? ___________</p>
<p>What code would make pets[3] refer to one of the two existing Dog objects?</p>
<p>_______________________</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Control your Dog (with a reference variable)"><div class="sect1" id="control_your_dog_left_parenthesiswith_a">
<h1>Control your Dog (with a reference variable)</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0061-01.png" alt="image" width="438" height="416"/>
<h6/>
</div></figure>
<pre data-type="programlisting"><strong>Dog fido = new Dog();</strong>
<strong>fido.name = "Fido";</strong></pre>
<p><a data-type="indexterm" data-primary=". (dot operator)" id="idm46038396678176"/><a data-type="indexterm" data-primary="arrays" data-secondary="dot operator in" id="idm46038396676960"/><a data-type="indexterm" data-primary="dot operator (.)" id="idm46038396675856"/><a data-type="indexterm" data-primary="naming" data-secondary="variables" id="idm46038396675024"/><a data-type="indexterm" data-primary="reference variables" data-secondary="in arrays" id="idm46038396673920"/><a data-type="indexterm" data-primary="variables" data-secondary="naming" id="idm46038396672816"/>We created a Dog object and used String the dot operator on the reference variable <strong><em>fido</em></strong> to access the name variable.*</p>
<p>We can use the <strong><em>fido</em></strong> reference to get the dog to bark() or eat() or chaseCat().</p>
<figure class="informal"><div class="figure">
<img src="Images/f0061-02.png" alt="image" width="220" height="317"/>
<h6/>
</div></figure>
<pre data-type="programlisting"><strong>fido.bark();</strong>

<strong>fido.chaseCat();</strong></pre>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="id0000006">
<p><strong>Java cares about type.</strong></p>
<p><strong>Once you’ve declared an array, you can’t put anything in it except things that are of a compatible ar ray type.</strong></p>
<p>For example, you can’t put a Cat into a Dog array (it would be pretty awful if someone thinks that only Dogs are in the array, so they ask each one to bark, and then to their horror discover there’s a cat lurking.)  And you can’t stick a <code>double</code> into an <code>int</code> array (spillage, remember?). You can, however, put a <code>byte</code> into an <code>int</code> array, because a <code>byte</code> will always fit into an <code>int</code>-sized cup. This is known as an <strong>implicit widening</strong>. We’ll get into the details later; for now just remember that the compiler won’t let you put the wrong thing in an array, based on the array’s declared type.</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What happens if the Dog is in a Dog array?"><div class="sect1" id="what_happens_if_the_dog_is_in_a_dog_arra">
<h1>What happens if the Dog is in a Dog array?</h1>
<p>We know we can access the Dog’s instance variables and methods using the dot operator, but <em>on what?</em></p>
<p>When the Dog is in an array, we don’t have an actual variable name (like <strong><em>fido</em></strong>). Instead we use array notation and push the remote control button (dot operator) on an object at a particular index (position) in the array:</p>
<pre data-type="programlisting"><strong>Dog[] myDogs = new Dog[3];</strong>

<strong>myDogs[0] = new Dog();</strong>

<strong>myDogs[0].name = "Fido";</strong>

<strong>myDogs[0].bark();</strong></pre>
<p>*Yes we know we’re not demonstrating encapsulation here, but we’re trying to keep it simple. For now. We’ll do encapsulation in <a data-type="xref" href="ch04.xhtml#how_objects_behave_methods_use_instance">Chapter 4</a>.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A Dog example"><div class="sect1" id="a_dog_example">
<h1>A Dog example</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0062-02.png" alt="image" width="154" height="216"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0062-01.png" alt="image" width="590" height="1090"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="Strings" id="idm46038396652928"/><strong>Output</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0062-03.png" alt="image" width="362" height="268"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="bullet_points-id00002">
<h5>Bullet Points</h5>
<ul>
<li><p>Variables come in two flavors: primitive and reference.</p></li>
<li><p>Variables must always be declared with a name and a type.</p></li>
<li><p>A primitive variable value is the bits representing the value (5, ‘a’, true, 3.1416, etc.).</p></li>
<li><p>A reference variable value is the bits representing a way to get to an object on the heap.</p></li>
<li><p>A reference variable is like a remote control. Using the dot operator (.) on a reference variable is like pressing a button on the remote control to access a method or instance variable.</p></li>
<li><p>A reference variable has a value of <code>null</code> when it is not referencing any object.</p></li>
<li><p>An array is always an object, even if the array is declared to hold primitives. There is no such thing as a primitive array, only an array that <em>holds</em> primitives.</p></li>
</ul>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Exercise"><div class="sect1" id="exercise-id00001">
<h1>Exercise</h1>
<figure class="informal"><div class="figure">
<img src="Images/common-03.png" alt="image" width="100" height="85"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="BE the Compiler"><div class="sect2" id="be_the_compiler-id00001">
<h2>BE the Compiler</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-05.png" alt="image" width="208" height="241"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Be the..." id="idm46038396635904"/><strong>Each of the Java files on this page represents a complete source file. Your job is to play compiler and determine whether each of these files will compile and run without exception. If they won’t, how would you fix them?</strong></p>
<p><strong>A</strong></p>
<pre data-type="programlisting">class Books {
  String title;
  String author;
}

class BooksTestDrive {
  public static void main(String[] args) {
    Books[] myBooks = new Books[3];
    int x = 0;
    myBooks[0].title = "The Grapes of Java";
    myBooks[1].title = "The Java Gatsby";
    myBooks[2].title = "The Java Cookbook";
    myBooks[0].author = "bob";
    myBooks[1].author = "sue";
    myBooks[2].author = "ian";

    while (x &lt; 3) {
      System.out.print(myBooks[x].title);
      System.out.print(" by ");
      System.out.println(myBooks[x].author);
      x = x + 1;
    }
  }
}</pre>
<p><strong>B</strong></p>
<pre data-type="programlisting">class Hobbits {
  String name;

  public static void main(String[] args) {
    Hobbits[] h = new Hobbits[3];
    int z = 0;

    while (z &lt; 4) {
      z = z + 1;
      h[z] = new Hobbits();
      h[z].name = "bilbo";
      if (z == 1) {
        h[z].name = "frodo";
      }
      if (z == 2) {
        h[z].name = "sam";
      }
      System.out.print(h[z].name + " is a ");
      System.out.println("good Hobbit name");
    }
  }
}</pre>
<p><span class="inlineimage"><img src="Images/arr1.png" alt="Images" width="137" height="12"/></span> <strong>Answers in <a data-type="xref" href="#exercisesolutions">“Exercise Solutions”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Code Magnets"><div class="sect2" id="code_magnets-id000001">
<h2>Code Magnets</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-02.png" alt="image" width="100" height="146"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Code Magnets" id="idm46038396625088"/>A working Java program is all scrambled up on the fridge. Can you reconstruct the code snippets to make a working Java program that produces the output listed below? Some of the curly braces fell on the floor and they were too small to pick up, so feel free to add as many of those as you need!</p>
<figure class="informal"><div class="figure">
<img src="Images/f0064-01a.png" alt="image" width="1022" height="1124"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0064-01.png" alt="image" width="304" height="171"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr1.png" alt="Images" width="137" height="12"/></span> <strong>Answers in <a data-type="xref" href="#code_magnets_left_parenthesisfrom_page_6">“Code Magnets”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Pool Puzzle"><div class="sect2" id="pool_puzzle-id00001">
<h2>Pool Puzzle</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/common-06.png" alt="image" width="147" height="133"/>
<h6/>
</div></figure>
<p>Your <strong><em>job</em></strong> is to take code snippets from the pool and place them into the blank lines in the code. You <strong>may</strong> use the same snippet more than once, and you won’t need to use all the snippets. Your <strong><em>goal</em></strong> is to make a class that will compile and run and produce the output listed.</p>
<p><strong>Output</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0065-01.png" alt="image" width="343" height="218"/>
<h6/>
</div></figure>
<p><strong>Bonus Question!</strong></p>
<p>For extra bonus points, use snippets from the pool to fill in the missing output (above).</p>
<figure class="informal"><div class="figure">
<img src="Images/f0065-02.png" alt="image" width="545" height="806"/>
<h6/>
</div></figure>
<p><strong>Note: Each snippet from the pool can be used more than once!</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0065-03.png" alt="image" width="946" height="374"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr1.png" alt="Images" width="137" height="12"/></span> <strong>Answers in <a data-type="xref" href="#pool_puzzle_left_parenthesisfrom_page_65">“Pool Puzzle”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="A Heap o’ Trouble"><div class="sect2" id="a_heap_oapostrophe_trouble">
<h2>A Heap o’ Trouble</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="puzzles" data-secondary="Heap o’ Trouble" id="idm46038396594816"/>A short Java program is listed to the right.   When “// do stuff” is reached, some objects and some reference variables will have been created.  Your task is to determine which of the reference variables refer to which objects.  Not all the reference variables will be used, and some objects might be referred to more than once.   Draw lines connecting the reference variables with their matching objects.</p>
<p><strong><em>Tip:</em></strong> Unless you’re way smarter than we are, you probably need to draw diagrams like the ones in <a data-type="xref" href="#life_on_the_garbage-collectible_heap">“Life on the garbage-collectible heap”</a>–60 of this chapter.  Use a pencil so you can draw and then erase reference links (the arrows going from a reference remote control to an object).</p>
<figure class="informal"><div class="figure">
<img src="Images/f0066-01.png" alt="image" width="617" height="559"/>
<h6/>
</div></figure>
<table class="border">
<thead>
<tr>
<th>Reference Variables:</th>
<th>HeapQuiz Objects:</th>
</tr>
</thead>
<tbody>
<tr>
<td><figure class="informal"><div class="figure">
<img src="Images/f0066-02.png" alt="image" width="138" height="462"/>
<h6/>
</div></figure></td>
<td><figure class="informal"><div class="figure">
<img src="Images/f0066-03.png" alt="image" width="160" height="414"/>
<h6/>
</div></figure></td>
</tr>
</tbody>
</table>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><strong>Match each reference variable with matching object(s).</strong></p>
<p><strong>You might not have to use every reference.</strong></p>
</div>
<p><span class="inlineimage"><img src="Images/arr1.png" alt="Images" width="137" height="12"/></span> <strong>Answers in <a data-type="xref" href="#a_heap_oapostrophe_trouble_left_parenthe">“A Heap o’ Trouble”</a>.</strong></p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="The case of the pilfered references"><div class="sect2" id="the_case_of_the_pilfered">
<h2>The case of the pilfered references</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="puzzles" id="idm46038396565392"/><a data-type="indexterm" data-primary="puzzles" data-secondary="Five-Minute Mystery" id="idm46038396564464"/>It was a dark and stormy night. Tawny strolled into the programmers’ bullpen like she owned the place. She knew that all the programmers would still be hard at work, and she wanted help. She needed a new method added to the pivotal class that was to be loaded into the client’s new top-secret Java-enabled cell phone. Heap space in the cell phone’s memory was tight, and everyone knew it. The normally raucous buzz in the bullpen fell to silence as Tawny eased her way to the white board. She sketched a quick overview of the new method’s functionality and slowly scanned the room. “Well folks, it’s crunch time,” she purred. “Whoever creates the most memory efficient version of this method is coming with me to the client’s launch party on Maui tomorrow...to help me install the new software.”</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Five-Minute Mystery"><div class="sect2" id="five_minute_mystery">
<h2>Five-Minute Mystery</h2>
<figure class="informal"><div class="figure">
<img src="Images/f0067-01.png" alt="image" width="212" height="163"/>
<h6/>
</div></figure>
<p>The next morning Tawny glided into the bullpen. “Ladies and Gentlemen,” she smiled, “the plane leaves in a few hours, show me what you’ve got!” Bob went first; as he began to sketch his design on the white board, Tawny said, “Let’s get to the point Bob, show me how you handled updating the list of contact objects.” Bob quickly drew a code fragment on the board:</p>
<pre data-type="programlisting">    Contact [] contacts = new Contact[10];
    while (x &lt; 10 ) {   // make 10 contact objects
      contacts[x] = new Contact();
      x = x + 1;
    }
    // do complicated Contact list updating with contacts</pre>
<p>“Tawny, I know we’re tight on memory, but your spec said that we had to be able to access individual contact information for all ten allowable contacts; this was the best scheme I could cook up,” said Bob. Kate was next, already imagining coconut cocktails at the party, “Bob,” she said, “your solution’s a bit kludgy, don’t you think?” Kate smirked, “Take a look at this baby”:</p>
<pre data-type="programlisting">    Contact contactRef;
    while ( x &lt; 10 ) {   // make 10 contact objects
      contactRef = new Contact();
      x = x + 1;
    }
    // do complicated Contact list updating with contactRef</pre>
<p>“I saved a bunch of reference variables worth of memory, Bob-o-rino, so put away your sunscreen,” mocked Kate. “Not so fast Kate!” said Tawny, “you’ve saved a little memory, but Bob’s coming with me.”</p>
<p><strong><em>Why did Tawny choose Bob’s method over Kate’s, when Kate’s used less memory?</em></strong></p>
<p><span class="inlineimage"><img src="Images/arr1.png" alt="Images" width="137" height="12"/></span> <strong>Answers in <a data-type="xref" href="#five_minute_mystery_left_parenthesis-10">“Five-Minute Mystery”</a>.</strong></p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Exercise Solutions"><div class="sect1" id="exercisesolutions">
<h1>Exercise Solutions</h1>
<figure class="informal"><div class="figure">
<img src="Images/common-03.png" alt="image" width="100" height="85"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Sharpen your pencil"><div class="sect2" id="sharpen_your_pencil_left_parenthes-id400">
<h2>Sharpen your pencil</h2>
<p>(from <a data-type="xref" href="#sharpen_your_pencil-id00003">“Sharpen your pencil”</a>)</p>
<p/>
<figure class="informal"><div class="figure">
<img src="Images/f0068-01.png" alt="image" width="505" height="167"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Code Magnets"><div class="sect2" id="code_magnets_left_parenthesisfrom_page_6">
<h2>Code Magnets</h2>
<p>(from <a data-type="xref" href="#code_magnets-id000001">“Code Magnets”</a>)</p>
<pre data-type="programlisting">class TestArrays {
  public static void main(String[] args) {
    int[] index = new int[4];
    index[0] = 1;
    index[1] = 3;
    index[2] = 0;
    index[3] = 2;
    String[] islands = new String[4];
    islands[0] = "Bermuda";
    islands[1] = "Fiji";
    islands[2] = "Azores";
    islands[3] = "Cozumel";
    int y = 0;
    int ref;
    while (y &lt; 4) {
      ref = index[y];
      System.out.print("island = ");
      System.out.println(islands[ref]);
      y = y + 1;
    }
  }
}</pre>
<figure class="informal"><div class="figure">
<img src="Images/f0068-03.png" alt="image" width="305" height="170"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="BE the Compiler"><div class="sect2" id="be_the_compiler_left_parenthesisfro-2000">
<h2>BE the Compiler</h2>
<p>(from <a data-type="xref" href="#be_the_compiler-id00001">“BE the Compiler”</a>)</p>
<p><strong>A</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0068-04.png" alt="image" width="443" height="640"/>
<h6/>
</div></figure>
<p><strong>B</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0068-05.png" alt="image" width="459" height="515"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Puzzle Solutions"><div class="sect2" id="puzzle_solutions">
<h2>Puzzle Solutions</h2>
<figure class="informal"><div class="figure">
<img src="Images/common-04.png" alt="image" width="110" height="75"/>
<h6/>
</div></figure>
<section data-type="sect3" data-pdf-bookmark="Pool Puzzle"><div class="sect3" id="pool_puzzle_left_parenthesisfrom_page_65">
<h3>Pool Puzzle</h3>
<p>(from <a data-type="xref" href="#pool_puzzle-id00001">“Pool Puzzle”</a>)</p>
<pre data-type="programlisting">class Triangle {
  double area;
  int height;
  int length;

  public static void main(String[] args) {
    <strong>int x = 0;</strong>
    <strong>Triangle[] ta = new Triangle[4];</strong>
    while (<strong>x &lt; 4</strong>) {
      <strong>ta[x] = new Triangle();</strong>
      <strong>ta[x].</strong>height = (x + 1) * 2;
      <strong>ta[x].</strong>length = x + 4;
      <strong>ta[x].setArea();</strong>
      System.out.print("triangle " + x + 
                       ", area");
      System.out.println(" = " + <strong>ta[x].</strong>area);
      <strong>x = x + 1;</strong>
    }
    <strong>int y = x;</strong>
    x = 27;
    Triangle t5 = ta[2];
    ta[2].area = 343;
    System.out.print("y = " + y);
    System.out.println(", t5 area = " + 
                       t5.area);
  }

  void setArea() {
    <strong>area</strong> = (height * length) / 2;
  }
}</pre>
<figure class="informal"><div class="figure">
<img src="Images/f0069-01.png" alt="image" width="249" height="159"/>
<h6/>
</div></figure>
</div></section>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Five-Minute Mystery"><div class="sect2" id="five_minute_mystery_left_parenthesis-10">
<h2>Five-Minute Mystery</h2>
<p>(from <a data-type="xref" href="#five_minute_mystery">“Five-Minute Mystery”</a>)</p>
<p><strong>The case of the pilfered references</strong></p>
<p>Tawny could see that Kate’s method had a serious flaw. It’s true that she didn’t use as many reference variables as Bob, but there was no way to access any but the last of the Contact objects that her method created. With each trip through the loop, she was assigning a new object to the one reference variable, so the previously referenced object was abandoned on the heap—<em>unreachable</em>. Without access to nine of the ten objects created, Kate’s method was useless.</p>
<p>(The software was a huge success, and the client gave Tawny and Bob an extra week in Hawaii. We’d like to tell you that by finishing this book you too will get stuff like that.)</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="A Heap o’ Trouble"><div class="sect2" id="a_heap_oapostrophe_trouble_left_parenthe">
<h2>A Heap o’ Trouble</h2>
<p>(from <a data-type="xref" href="#a_heap_oapostrophe_trouble">“A Heap o’ Trouble”</a>)</p>
<table class="border">
<tbody>
<tr>
<td><strong>Reference Variables:</strong></td>
<td><strong>HeapQuiz Objects:</strong></td>
</tr>
<tr>
<td colspan="2"><figure class="informal"><div class="figure">
<img src="Images/f0069-02.png" alt="image" width="453" height="443"/>
<h6/>
</div></figure>
</td>
</tr>
</tbody>
</table>
</div></section>
</div></section>
</div></section></div></body></html>