<html><head></head><body><section data-pdf-bookmark="Chapter 10. Transitioning and Animation in Vue" data-type="chapter" epub:type="chapter"><div class="chapter" id="unique_chapter_id_09">&#13;
<h1><span class="label">Chapter 10. </span>Transitioning and Animation in Vue</h1>&#13;
&#13;
&#13;
<p>We have explored all the crucial aspects of building a working Vue application, including handling routes and data flow with proper state management. This chapter will explore a unique Vue feature for enhancing the user experience: animation and transitions, using transition components, hooks, and CSS.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Understanding CSS Transitions and CSS Animations" data-type="sect1"><div class="sect1" id="id111">&#13;
<h1>Understanding CSS Transitions and CSS Animations</h1>&#13;
&#13;
<p>CSS animations are the visual effects of a state change on a specific element or component, with no limit on the number of states. A CSS animation can start automatically and go into a loop without explicit triggering. In contrast, CSS transition is an animation that responds to a change <em>between two states only</em>, from average to hover for a button or from hidden to visible for a tooltip. To define a CSS animation, we often use the <code>@keyframes</code> rule and then apply it to the target element using the &#13;
<span class="keep-together"><code>animation</code></span> property. For example, we can define a simple animation effect for a &#13;
<span class="keep-together">button</span><a data-primary="animation property" data-type="indexterm" id="id1464"/><a data-primary="animations" data-secondary="defining" data-type="indexterm" id="id1465"/><a data-primary="@keyframes, animations and transitions" data-primary-sortas="keyframes, animations and transitions" data-type="indexterm" id="id1466"/><a data-primary="transitions" data-secondary="understanding" data-type="indexterm" id="id1467"/><a data-primary="animations" data-seealso="transitions" data-type="indexterm" id="id1468"/>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">@keyframes</code> <code class="nt">pulse</code> <code class="p">{</code>&#13;
  <code class="nt">0%</code> <code class="p">{</code>&#13;
    <code class="k">box-shadow</code><code class="o">:</code> <code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="m">0px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code> <code class="m">0</code><code class="o">,</code> <code class="m">0</code><code class="o">,</code> <code class="m">0</code><code class="o">.</code><code class="m">5</code><code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
  <code class="nt">100%</code> <code class="p">{</code>&#13;
    <code class="k">box-shadow</code><code class="o">:</code> <code class="m">0</code> <code class="m">0</code> <code class="m">0</code> <code class="m">20px</code> <code class="n">rgba</code><code class="p">(</code><code class="m">0</code><code class="o">,</code> <code class="m">0</code><code class="o">,</code> <code class="m">0</code><code class="o">,</code> <code class="m">0</code><code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.button</code> <code class="p">{</code>&#13;
  <code class="k">animation</code><code class="o">:</code> <code class="n">pulse</code> <code class="m">2s</code> <code class="n">infinite</code><code class="p">;</code>&#13;
  <code class="k">box-shadow</code><code class="o">:</code> <code class="m">0px</code> <code class="m">0px</code> <code class="m">1px</code> <code class="m">1px</code> <code class="m">#0000001</code><code class="n">a</code><code class="p">;</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>We defined a simple animation effect, <code>pulse</code>, and applied it to any element with <code>button</code> class, where the box shadow will expand and shrink in a loop, lasting two seconds. This effect will run infinitely if the element exists in the DOM.</p>&#13;
&#13;
<figure><div class="figure" id="figure_c10_04">&#13;
<img alt="A screenshot displays a button with a pulse effect" src="assets/lvue_1001.png"/>&#13;
<h6><span class="label">Figure 10-1. </span>Indefinite pulse animation effect</h6>&#13;
</div></figure>&#13;
&#13;
<p>Meanwhile, we can use the <code>transition</code> property to define a transition effect for a specific element when the user hovers over it<a data-primary="transition property" data-type="indexterm" id="id1469"/><a data-primary="transitions" data-secondary="defining" data-type="indexterm" id="id1470"/>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nc">.button</code> <code class="p">{</code>&#13;
  <code class="k">transition</code><code class="o">:</code> <code class="n">background</code><code class="o">-</code><code class="n">color</code> <code class="m">0.5s</code> <code class="n">ease</code><code class="o">-</code><code class="n">in</code><code class="o">-</code><code class="n">out</code><code class="p">;</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.button</code><code class="nd">:hover</code> <code class="p">{</code>&#13;
  <code class="k">background-color</code><code class="o">:</code> <code class="m">#ff0000</code><code class="p">;</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>In this code, we created a simple transition effect for the <code>button</code> element: the background color will change from the default color to red on hovering, with a delay of <code>0.5</code> seconds, with a smoothing effect of <code>ease-in-out</code>. Alternatively, we can also use JavaScript and other animation libraries to define transition and animation programmatically using JavaScript<a data-primary="JavaScript" data-secondary="transitions and animations" data-type="indexterm" id="id1471"/>.</p>&#13;
&#13;
<p>Transition and animation offer users a significantly smoother experience when using the application. However, working with transition and animation can sometimes be challenging. As a framework focusing on the view layer, Vue provides a set of APIs to help us create smooth, beautiful animations and transition effects for components and routes, with CSS and/or JavaScript, in a more straightforward manner. One is the <code>transition</code> component, which we will discuss in the following section.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Transition Component in Vue.js" data-type="sect1"><div class="sect1" id="id112">&#13;
<h1>Transition Component in Vue.js</h1>&#13;
&#13;
<p>The <code>transition</code> component is a wrapper component that allows us to create a transition for a single element with two available transition states: enter and leave. The component provides a prop <code>name</code> as the name of the desired transition effect. Vue will compute the relevant transition classes with the <code>name</code> as their prefix and the direction state of the transition (<code>to</code>, <code>active</code>, or <code>from</code>) as their suffix, as seen here<a data-primary="transition component" data-type="indexterm" id="ix-ani-tran1"/><a data-primary="transitions" data-secondary="with transition component" data-secondary-sortas="transition component" data-type="indexterm" id="ix-ani-tran1a"/><a data-primary="slidein transition effect" data-type="indexterm" id="ix-ani-tran2"/>:</p>&#13;
&#13;
<pre data-type="programlisting">&lt;name&gt;-[enter | leave]-&lt;transition-direction-state&gt;</pre>&#13;
&#13;
<p class="pagebreak-before">For example, we can use a <code>slidein</code> transition effect on an element:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">transition</code> <code class="na">name</code><code class="o">=</code><code class="s">"slidein"</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">ul</code> <code class="na">class</code><code class="o">=</code><code class="s">"pizza-list"</code><code class="p">&gt;</code>&#13;
        /** code for rendering pizza's card... */&#13;
    <code class="p">&lt;/</code><code class="nt">ul</code><code class="p">&gt;</code>&#13;
  <code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>Vue will generate a set of classes, which are described in <a data-type="xref" href="#table_chap08_01">TableÂ 10-1</a><a data-primary="classes" data-secondary="transitions" data-type="indexterm" id="id1472"/><a data-primary="transitions" data-secondary="class selectors table" data-type="indexterm" id="id1473"/><a data-primary=".slidein-enter-active class selector" data-primary-sortas="slidein-enter-active" data-type="indexterm" id="id1474"/><a data-primary=".slidein-enter-from class selector" data-primary-sortas="slidein-enter-from" data-type="indexterm" id="id1475"/><a data-primary=".slidein-enter-to class selector" data-primary-sortas="slidein-enter-to" data-type="indexterm" id="id1476"/><a data-primary=".slidein-leave-active class selector" data-primary-sortas="slidein-leave-active" data-type="indexterm" id="id1477"/><a data-primary=".slidein-leave-from class selector" data-primary-sortas="slidein-leave-from" data-type="indexterm" id="id1478"/><a data-primary=".slidein-leave-to class selector" data-primary-sortas="slidein-leave-to" data-type="indexterm" id="id1479"/>.</p>&#13;
<table id="table_chap08_01">&#13;
<caption><span class="label">Table 10-1. </span>Generated transition classes for the slide-in transition effect</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Classes</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>&#13;
<span class="keep-together"><code>.slidein-enter-from</code></span></p></td>&#13;
<td><p>Class selector for the starting state of the entering transition</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>&#13;
<span class="keep-together"><code>.slidein-enter-active</code></span></p></td>&#13;
<td><p>Class selector for defining the duration and delay of transition when the element is actively entering transition</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>&#13;
<span class="keep-together"><code>.slidein-enter-to</code></span></p></td>&#13;
<td><p>Class selector for the ending state of the entering transition</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>&#13;
<span class="keep-together"><code>slidein-leave-from</code></span></p></td>&#13;
<td><p>Class selector for the starting state of the leaving transition</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>&#13;
<span class="keep-together"><code>slidein-leave-to</code></span></p></td>&#13;
<td><p>Class selector for the ending state of the leaving transition</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>&#13;
<span class="keep-together"><code>slidein-leave-active</code></span></p></td>&#13;
<td><p>Class selector for defining the duration and delay of transition when the element is active in the middle of leaving transition</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>The <em>enter state</em> means the element starts the process of transitioning to visible mode in the browserâs display, while the <em>leave state</em> indicates the opposite. We can combine with <code>v-show</code>, which toggles the elementâs CSS <code>display</code> property, or <code>v-if</code> attribute, which inserts the piece to the DOM conditionally. We will add the <code>v-show</code> to the <code>ul</code> component of our code example<a data-primary="display property and conditional display of elements with v-show" data-type="indexterm" id="id1480"/><a data-primary="enter state, transitions" data-type="indexterm" id="id1481"/><a data-primary="leave state, transitions" data-type="indexterm" id="id1482"/><a data-primary="toggling" data-secondary="transition effects" data-type="indexterm" id="id1483"/><a data-primary="transitions" data-secondary="enter state" data-type="indexterm" id="id1484"/><a data-primary="transitions" data-secondary="leave state" data-type="indexterm" id="id1485"/><a data-primary="v-if" data-secondary="transitions" data-type="indexterm" id="id1486"/><a data-primary="v-show" data-secondary="transitions" data-type="indexterm" id="id1487"/>:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">transition</code> <code class="na">name</code><code class="o">=</code><code class="s">"slidein"</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">ul</code> <code class="na">class</code><code class="o">=</code><code class="s">"pizza-list"</code> <code class="na">v-show</code><code class="o">=</code><code class="s">"showList"</code><code class="p">&gt;</code>&#13;
        /** code for rendering pizza's card... */&#13;
    <code class="p">&lt;/</code><code class="nt">ul</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>Now we can use the previous classes to define the transition named <code>slidein</code> with the CSS <code>transition</code> property and the target CSS property or properties to perform the effect.</p>&#13;
&#13;
<p>The following is an example implementation for the slide-in transition effect:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nc">.slidein-enter-to</code> <code class="p">{</code>&#13;
  <code class="k">transform</code><code class="o">:</code> <code class="n">translateX</code><code class="p">(</code><code class="m">0</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.slidein-enter-from</code> <code class="p">{</code>&#13;
  <code class="k">transform</code><code class="o">:</code> <code class="n">translateX</code><code class="p">(</code><code class="m">-100%</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.slidein-leave-to</code> <code class="p">{</code>&#13;
  <code class="k">transform</code><code class="o">:</code> <code class="n">translateX</code><code class="p">(</code><code class="m">100%</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.slidein-leave-from</code> <code class="p">{</code>&#13;
  <code class="k">transform</code><code class="o">:</code> <code class="n">translateX</code><code class="p">(</code><code class="m">0</code><code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.slidein-enter-active</code><code class="o">,</code>&#13;
<code class="nc">.slidein-leave-active</code> <code class="p">{</code>&#13;
  <code class="k">transition</code><code class="o">:</code> <code class="n">transform</code> <code class="m">0.5s</code><code class="p">;</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>In this code, before the entering transition, the browser will reposition the <code>ul</code> element horizontally to the left of the viewport using <code>translateX(-100%)</code>, then move it back to the correct position with <code>translateX(0)</code> in <code>slidein-enter-to</code>. The same applies to the leaving transition, except that the element will move to the viewportâs right instead of the left. Both changes will be on the <code>transform</code> property, with a duration of 0.5 seconds, as stated in the <code>slidein-enter-active</code> and <code>slidein-leave-active</code> classes<a data-primary="transform property" data-type="indexterm" id="id1488"/>.</p>&#13;
&#13;
<p>To see the effect in action, we can add a small timeout to change the value of the <code>searchResults</code> data property<a data-primary="timeouts" data-secondary="transitions and animations" data-type="indexterm" id="id1489"/>:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">ref</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"vue"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">showList</code> <code class="o">=</code> <code class="nx">ref</code><code class="p">(</code><code class="kc">false</code><code class="p">);</code>&#13;
&#13;
<code class="nx">setTimeout</code><code class="p">(()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">showList</code><code class="p">.</code><code class="nx">value</code> <code class="o">=</code> <code class="kc">true</code><code class="p">;</code>&#13;
<code class="p">},</code> <code class="mi">1000</code><code class="p">);</code></pre>&#13;
&#13;
<p>The Vue engine will add or remove each class as appropriate. We add another timeout to change the value of <code>showList</code> back to <code>false</code>, and Vue will trigger the transition effect again, except it is for the leave state (<a data-type="xref" href="#figure_c10_01">FigureÂ 10-2</a>).</p>&#13;
&#13;
<p>We have implemented a simple effect using the <code>transition</code> component with a single impact of <code>slidein</code>. How about combining different effects, such as <code>slidein</code> for the entering state and <code>rotate</code> for the leaving state? For such cases we use custom transition class attributes, which we will discuss in the next section.</p>&#13;
&#13;
<figure><div class="figure" id="figure_c10_01">&#13;
<img alt="A screenshot displays some transition effect browser performs for a list of elements" src="assets/lvue_1002.png"/>&#13;
<h6><span class="label">Figure 10-2. </span>Transition effect for the pizza list when <code>showList</code> is <code>true</code></h6>&#13;
</div></figure>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using Custom Transition Class Attributes" data-type="sect2"><div class="sect2" id="id113">&#13;
<h2>Using Custom Transition Class Attributes</h2>&#13;
&#13;
<p>Besides auto-generating the classes according to the <code>name</code> attribute, Vue also lets us specify the custom classes for each transition class using the following relevant props: <code>enter-class</code>, <code>enter-active-class</code>, <code>enter-to-class</code>, <code>leave-class</code>, <code>leave-active-class</code>, and <code>leave-to-class</code>. For example, we can define the custom classes for the <code>rotate</code> transition effect on leaving the state<a data-primary="attributes" data-secondary="transition attributes" data-type="indexterm" id="id1490"/><a data-primary="classes" data-secondary="transitions" data-type="indexterm" id="id1491"/><a data-primary="enter-active-class transition attribute" data-type="indexterm" id="id1492"/><a data-primary="enter-class transition attribute" data-type="indexterm" id="id1493"/><a data-primary="enter-to-class transition attribute" data-type="indexterm" id="id1494"/><a data-primary="leave-active-class transition attribute" data-type="indexterm" id="id1495"/><a data-primary="leave-class transition attribute" data-type="indexterm" id="id1496"/><a data-primary="leave-to-class transition attribute" data-type="indexterm" id="id1497"/><a data-primary="rotate transition effect" data-type="indexterm" id="id1498"/><a data-primary="transitions" data-secondary="custom class attributes" data-type="indexterm" id="id1499"/>:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">transition</code> <code class="na">name</code><code class="o">=</code><code class="s">"slidein"</code> <code class="na">leave-active-class</code><code class="o">=</code><code class="s">"rotate"</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">ul</code> <code class="na">class</code><code class="o">=</code><code class="s">"pizza-list"</code> <code class="na">v-show</code><code class="o">=</code><code class="s">"showList"</code><code class="p">&gt;</code>&#13;
        /** code for rendering pizza's card... */&#13;
    <code class="p">&lt;/</code><code class="nt">ul</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>In the <code>style</code> section, we use <code>@keyframes</code> controls to define the animation effect for the <code>rotate</code> transition with keyframe offsets of 0%, 50%, 90% and 100%<a data-primary="@keyframes, animations and transitions" data-primary-sortas="keyframes, animations and transitions" data-type="indexterm" id="id1500"/>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="k">@keyframes</code> <code class="nt">rotate</code> <code class="p">{</code>&#13;
  <code class="nt">0%</code> <code class="p">{</code>&#13;
    <code class="k">transform</code><code class="o">:</code> <code class="n">rotate</code><code class="p">(</code><code class="m">0</code><code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
  <code class="nt">50%</code> <code class="p">{</code>&#13;
    <code class="k">transform</code><code class="o">:</code> <code class="n">rotate</code><code class="p">(</code><code class="m">45deg</code><code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
  <code class="nt">90%</code> <code class="p">{</code>&#13;
    <code class="k">transform</code><code class="o">:</code> <code class="n">rotate</code><code class="p">(</code><code class="m">90deg</code><code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
  <code class="nt">100%</code> <code class="p">{</code>&#13;
    <code class="k">transform</code><code class="o">:</code> <code class="n">rotate</code><code class="p">(</code><code class="m">180deg</code><code class="p">);</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Then we can assign the animation effect <code>rotate</code> to <code>animation</code> property of the <code>rotate</code> class, at a duration of 0.5 seconds:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nc">.rotate</code> <code class="p">{</code>&#13;
  <code class="k">animation</code><code class="o">:</code> <code class="n">rotate</code> <code class="m">0.5s</code><code class="p">;</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Letâs set the initial value of <code>showList</code> to <code>true</code> and a timeout of <code>1000</code> milliseconds to change it to <code>false</code>. While the effect on entering for the <code>ul</code> element is still <code>slidein</code>, the effect on leaving is now an animation of rotation starting from 45 degrees, then 90 degrees, and finally 180 degrees<a data-primary="timeouts" data-secondary="transitions and animations" data-type="indexterm" id="id1501"/>. See <a data-type="xref" href="#figure_c10_02">FigureÂ 10-3</a> for an illustration.</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">ref</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"vue"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">showList</code> <code class="o">=</code> <code class="nx">ref</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code>&#13;
&#13;
<code class="nx">setTimeout</code><code class="p">(()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">showList</code><code class="p">.</code><code class="nx">value</code> <code class="o">=</code> <code class="kc">false</code><code class="p">;</code>&#13;
<code class="p">},</code> <code class="mi">1000</code><code class="p">);</code></pre>&#13;
&#13;
<figure><div class="figure" id="figure_c10_02">&#13;
<img alt="A screenshot displays some rotation effect browser performs for a list of elements" src="assets/lvue_1003.png"/>&#13;
<h6><span class="label">Figure 10-3. </span>Rotating effect on transition using keyframes</h6>&#13;
</div></figure>&#13;
&#13;
<p>You can assign multiple classes to these props, separated by a single space, to apply various effects to a specific transition state. This feature is helpful when you want to integrate animation from external CSS libraries, such as Bootstrap, Tailwind CSS, or Bulma, with their classes<a data-primary="libraries, third-party" data-secondary="animations and transitions" data-type="indexterm" id="id1502"/>.</p>&#13;
&#13;
<p>Our component now has the transition effect whenever toggling the value of <code>showList</code>. However, we often want to animate the element when it appears on the screen after the page is loaded and without additional interaction. To do so, we can use the <code>appear</code> prop.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Adding Transition Effect on the Initial Render with appear" data-type="sect2"><div class="sect2" id="id114">&#13;
<h2>Adding Transition Effect on the Initial Render with appear</h2>&#13;
&#13;
<p>When we set the <code>appear</code> prop to <code>true</code> on the <code>transition</code> element, Vue will automatically add the <code>enter-active</code> and <code>enter-to</code> classes to the component when mounting to the DOM, triggering the transition effect. For instance, to have the <code>slidein</code> impact applied on the initial render of the <code>ul</code> component, we only need to add <code>appear</code> prop to the <code>transition</code> element<a data-primary="appear prop" data-type="indexterm" id="id1503"/><a data-primary="transitions" data-secondary="on initial render" data-secondary-sortas=" initial render" data-type="indexterm" id="id1504"/><a data-primary="transitions" data-secondary="third-party libraries" data-type="indexterm" id="id1505"/><a data-primary="attributes" data-secondary="transition attributes" data-type="indexterm" id="id1506"/>:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">transition</code> <code class="na">name</code><code class="o">=</code><code class="s">"slidein"</code> <code class="na">appear</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">ul</code> <code class="na">class</code><code class="o">=</code><code class="s">"pizza-list"</code><code class="p">&gt;</code>&#13;
        /** code for rendering pizza's card... */&#13;
    <code class="p">&lt;/</code><code class="nt">ul</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>The browser now will apply the <code>slidein</code> effect on the UIâs initial appearance of the <code>ul</code> element.</p>&#13;
&#13;
<p>We have learned how to use the <code>transition</code> component to create a smooth transition effect for a single element. However, this component is not useful when we want to animate multiple parts simultaneously and in an orderly fashion. To do this, we have <code>transition-group</code>, which we will discuss next<a data-primary="" data-startref="ix-ani-tran1" data-type="indexterm" id="id1507"/><a data-primary="" data-startref="ix-ani-tran1a" data-type="indexterm" id="id1508"/>.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Building Transition for a Group of Elements" data-type="sect1"><div class="sect1" id="id115">&#13;
<h1>Building Transition for a Group of Elements</h1>&#13;
&#13;
<p>The <code>transition-group</code> component is a particular version of the <code>transition</code>, aiming to provide animation support to a group of elements. It accepts the same props as <code>transition</code> and is  handy when we want to animate each item in a list, such as a list of pizzas or users. Nevertheless, unlike the <code>transition</code> element, <code>transition-group</code> supports rendering a wrapper element using the <code>tag</code> prop, and all the child elements will receive the same transition classes but not the wrapper (if one exists)<a data-primary="transitions" data-secondary="groups of elements" data-type="indexterm" id="ix-ani-tran3"/><a data-primary="key attribute" data-secondary="group transitions" data-type="indexterm" id="ix-ani-tran3a"/><a data-primary="transition-group" data-type="indexterm" id="ix-ani-tran3b"/>.</p>&#13;
&#13;
<p>Take our list of pizzas, for instance. We can use the <code>transition-group</code> to animate each pizza card with the <code>fadein</code> effect when it appears on screen and wrap the cards under a <code>ul</code> element:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">transition-group</code> <code class="na">name</code><code class="o">=</code><code class="s">"fadein"</code> <code class="na">tag</code><code class="o">=</code><code class="s">"ul"</code> <code class="na">appear</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">li</code> <code class="na">v-for</code><code class="o">=</code><code class="s">"pizza in searchResults"</code> <code class="na">:key</code><code class="o">=</code><code class="s">"pizza.id"</code><code class="p">&gt;</code>&#13;
        <code class="p">&lt;</code><code class="nt">PizzaCard</code> <code class="na">:pizza</code><code class="o">=</code><code class="s">"pizza"</code> <code class="p">/&gt;</code>&#13;
    <code class="p">&lt;/</code><code class="nt">li</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">transition-group</code><code class="p">&gt;</code></pre>&#13;
<div data-type="warning" epub:type="warning"><h1>Using <code>key</code> Attribute</h1>&#13;
<p>You must use the <code>key</code> attribute on each list element for Vue to track the changes in the list and apply the transition effect accordingly.</p>&#13;
</div>&#13;
&#13;
<p>Vue will add the relevant classes <code>fadein-enter-active</code>, <code>fadein-enter-to</code>, <code>fadein-leave-active</code>, <code>fadein-leave-to</code> to each <code>li</code> element, which we define with the following CSS rules<a data-primary="fadein-enter-active transition attribute" data-type="indexterm" id="id1509"/><a data-primary="fadein-enter-to transition attribute" data-type="indexterm" id="id1510"/><a data-primary="fadein-leave-active transition attribute" data-type="indexterm" id="id1511"/><a data-primary="fadein-leave-to transition attribute" data-type="indexterm" id="id1512"/>:</p>&#13;
&#13;
<pre data-code-language="css" data-type="programlisting"><code class="nc">.fadein-enter-active</code><code class="o">,</code>&#13;
<code class="nc">.fadein-leave-active</code> <code class="p">{</code>&#13;
  <code class="k">transition</code><code class="o">:</code> <code class="n">all</code> <code class="m">2s</code><code class="p">;</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nc">.fadein-enter-from</code><code class="o">,</code>&#13;
<code class="nc">.fadein-leave-to</code> <code class="p">{</code>&#13;
  <code class="k">opacity</code><code class="o">:</code> <code class="m">0</code><code class="p">;</code>&#13;
  <code class="k">transform</code><code class="o">:</code> <code class="n">translateX</code><code class="p">(</code><code class="m">20px</code><code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Thatâs it. Each pizza card in our list now appears with a fading effect and a slight slide-in transition from the right when loading the component for the first time. Whenever we filter the list using the search box, the new cards will appear with the same effect, while the old cards will disappear with the opposite effect: fading out and sliding out to the right (<a data-type="xref" href="#figure_c10_03">FigureÂ 10-4</a>).</p>&#13;
&#13;
<figure><div class="figure" id="figure_c10_03">&#13;
<img alt="A screenshot displays products fading away on search term typed" src="assets/lvue_1004.png"/>&#13;
<h6><span class="label">Figure 10-4. </span>Fading effect on searching in list</h6>&#13;
</div></figure>&#13;
<div data-type="tip"><h1>Adding More Effects on the Movement</h1>&#13;
<p>You can also add more effects to the moving items using the <code>&lt;effect&gt;-move</code> class (like <code>fadein-move</code>). This solution can be smoother when things move around in the list<a data-primary="effect-move class" data-type="indexterm" id="id1513"/><a data-primary="fadein-move class" data-type="indexterm" id="id1514"/>.</p>&#13;
</div>&#13;
&#13;
<p>So far so good. We have explored how to use <code>transition</code> and <code>transition-group</code> components. The next step is to learn how to combine these components with the <code>router-view</code> element to create a smooth transition when navigating between routes<a data-primary="" data-startref="ix-ani-tran3" data-type="indexterm" id="id1515"/><a data-primary="" data-startref="ix-ani-tran3a" data-type="indexterm" id="id1516"/><a data-primary="" data-startref="ix-ani-tran3b" data-type="indexterm" id="id1517"/><a data-primary="router-view element and transitions" data-type="indexterm" id="id1518"/>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Creating Route Transitions" data-type="sect1"><div class="sect1" id="id116">&#13;
<h1>Creating Route Transitions</h1>&#13;
&#13;
<p>Beginning with Vue Router 4.0, we no longer can wrap the <code>router-view</code> component with the <code>transition</code> element. Instead, we combine the usage of the <code>Component</code> prop exposed by the <code>v-lot</code> API from the <code>router-view</code>, and the dynamic <code>component</code>, as shown in the following code<a data-primary="v-lot" data-type="indexterm" id="id1519"/><a data-primary="routing" data-secondary="route transitions" data-type="indexterm" id="id1520"/><a data-primary="transitions" data-secondary="route transitions" data-type="indexterm" id="id1521"/>:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">router-view</code> <code class="na">v-slot</code><code class="o">=</code><code class="s">"{ Component }"</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">transition</code> <code class="na">name</code><code class="o">=</code><code class="s">"slidein"</code><code class="p">&gt;</code>&#13;
        <code class="p">&lt;</code><code class="nt">component</code> <code class="na">:is</code><code class="o">=</code><code class="s">"Component"</code> <code class="p">/&gt;</code>&#13;
    <code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">router-view</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>The <code>Component</code> prop refers to the target component that Vue renders in place of the <code>router-view</code> placeholder. We can then use the <code>component</code> element to generate the component dynamically and wrap it with the <code>transition</code> element to apply the &#13;
<span class="keep-together"><code>slidein</code></span> effect. By doing so, whenever we navigate a different route, there will be an animation effect: sliding in for the page entering and sliding out for the page leaving.</p>&#13;
&#13;
<p>There is a minor issue here, however. When we navigate a different route, note that the new pageâs content may appear before the previous pageâs content finishes the animation for leaving and disappears. In such cases, we can use <code>mode</code> prop with the value <code>out-in</code> to ensure the new content will enter and start animating only after the previous content has disappeared entirely from the screen<a data-primary="mode prop, route transitions" data-type="indexterm" id="id1522"/>:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">router-view</code> <code class="na">v-slot</code><code class="o">=</code><code class="s">"{ Component }"</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">transition</code> <code class="na">name</code><code class="o">=</code><code class="s">"slidein"</code> <code class="na">mode</code><code class="o">=</code><code class="s">"out-in"</code><code class="p">&gt;</code>&#13;
        <code class="p">&lt;</code><code class="nt">component</code> <code class="na">:is</code><code class="o">=</code><code class="s">"Component"</code> <code class="p">/&gt;</code>&#13;
    <code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">router-view</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>Now, whenever we navigate to a different route, such as moving from <code>/</code> to <code>/about</code>, the About view will appear only after the Home view disappears.</p>&#13;
&#13;
<p>To this point, we have explored how to create transition effects using <code>name</code> and custom transition classes. While these are sufficient to create smooth transition effects with custom animation classes for our application in most scenarios, we may find other cases where we want to use third-party JavaScript animation libraries for better transition effects. We need a different approach for such cases, allowing us to plug in custom animation control using JavaScript. We will learn how to do that in the next section<a data-primary="animations" data-secondary="third-party libraries" data-type="indexterm" id="ix-ani-tran4"/><a data-primary="JavaScript" data-secondary="transitions and animations" data-type="indexterm" id="ix-ani-tran4a"/><a data-primary="libraries, third-party" data-secondary="animations and transitions" data-type="indexterm" id="ix-ani-tran4b"/><a data-primary="transitions" data-secondary="third-party libraries" data-type="indexterm" id="ix-ani-tran4c"/>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using Transition Events to Control Animation" data-type="sect1"><div class="sect1" id="id117">&#13;
<h1>Using Transition Events to Control Animation</h1>&#13;
&#13;
<p>In contrast to the custom classes, Vue exposes some appropriate transition events for both transition components to emit. These events are <code>before-enter</code>, <code>enter</code>, <code>after-enter</code>, and <code>enter-cancelled</code> for the entering state of an element, and <code>before-leave</code>, <code>leave</code>, <code>after-leave</code>, and <code>leave-cancelled</code> for its leaving form. We can bind these events to the desired callbacks and control the transition effect using JavaScript<a data-primary="after-enter transition event" data-type="indexterm" id="id1523"/><a data-primary="after-leave transition event" data-type="indexterm" id="id1524"/><a data-primary="before-leave transition event" data-type="indexterm" id="id1525"/><a data-primary="before-enter transition event" data-type="indexterm" id="id1526"/><a data-primary="animations" data-secondary="controlling with transition events" data-type="indexterm" id="id1527"/><a data-primary="events" data-secondary="controlling animations with transition events" data-type="indexterm" id="id1528"/><a data-primary="enter transition event" data-type="indexterm" id="id1529"/><a data-primary="leave-cancelled transition event" data-type="indexterm" id="id1530"/><a data-primary="leave transition event" data-type="indexterm" id="id1531"/><a data-primary="transitions" data-secondary="controlling animations with transition events" data-type="indexterm" id="id1532"/><a data-primary="classes" data-secondary="transitions" data-type="indexterm" id="id1533"/><a data-primary="enter-cancelled transition event" data-type="indexterm" id="id1534"/>.</p>&#13;
&#13;
<p>For instance, we can use the <code>before-enter</code>, <code>enter</code>, <code>afterEnter</code> events to control the animation of the <code>slidein</code> effect on a page transitioning:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">router-view</code> <code class="na">v-slot</code><code class="o">=</code><code class="s">"{ Component }"</code><code class="p">&gt;</code>&#13;
    <code class="p">&lt;</code><code class="nt">transition</code>&#13;
    <code class="err">@</code><code class="na">before-enter</code><code class="o">=</code><code class="s">"beforeEnter"</code>&#13;
    <code class="err">@</code><code class="na">enter</code><code class="o">=</code><code class="s">"enter"</code>&#13;
    <code class="err">@</code><code class="na">after-enter</code><code class="o">=</code><code class="s">"afterEnter"</code>&#13;
    <code class="na">:css</code><code class="o">=</code><code class="s">"false"</code>&#13;
    <code class="p">&gt;</code>&#13;
        <code class="p">&lt;</code><code class="nt">component</code> <code class="na">:is</code><code class="o">=</code><code class="s">"Component"</code> <code class="p">/&gt;</code>&#13;
    <code class="p">&lt;/</code><code class="nt">transition</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">router-view</code><code class="p">&gt;</code></pre>&#13;
<div data-type="tip"><h1>Using the css Prop</h1>&#13;
<p>When using the callbacks approach, we can use the <code>css</code> prop to disable the default and any possible overlapping CSS transition classes<a data-primary="transitions" data-secondary="disabling default transition classes" data-type="indexterm" id="id1535"/><a data-primary="css prop, disabling default transition classes" data-type="indexterm" id="id1536"/>.</p>&#13;
</div>&#13;
&#13;
<p>In the <code>script</code> section, we can define the callbacks for each event:</p>&#13;
&#13;
<pre data-code-language="typescript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">gsap</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'gsap'</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">beforeEnter</code> <code class="o">=</code> <code class="p">(</code><code class="nx">el</code><code class="o">:</code> <code class="nx">HTMLElement</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">el</code><code class="p">.</code><code class="nx">style</code><code class="p">.</code><code class="nx">transform</code> <code class="o">=</code> <code class="s2">"translateX(20px)"</code><code class="p">;</code>&#13;
  <code class="nx">el</code><code class="p">.</code><code class="nx">style</code><code class="p">.</code><code class="nx">opacity</code> <code class="o">=</code> <code class="s2">"0"</code><code class="p">;</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">enter</code> <code class="o">=</code> <code class="p">(</code><code class="nx">el</code><code class="o">:</code> <code class="nx">HTMLElement</code><code class="p">,</code> <code class="nx">done</code><code class="o">:</code> <code class="nx">gsap</code><code class="p">.</code><code class="nx">Callback</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">gsap</code><code class="p">.</code><code class="nx">to</code><code class="p">(</code><code class="nx">el</code><code class="p">,</code> <code class="p">{</code>&#13;
    <code class="nx">duration</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code>&#13;
    <code class="nx">x</code><code class="o">:</code> <code class="mi">0</code><code class="p">,</code>&#13;
    <code class="nx">opacity</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code>&#13;
    <code class="nx">onComplete</code><code class="o">:</code> <code class="nx">done</code><code class="p">,</code>&#13;
  <code class="p">});</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">afterEnter</code> <code class="o">=</code> <code class="p">(</code><code class="nx">el</code><code class="o">:</code> <code class="nx">HTMLElement</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">el</code><code class="p">.</code><code class="nx">style</code><code class="p">.</code><code class="nx">transform</code> <code class="o">=</code> <code class="s2">""</code><code class="p">;</code>&#13;
  <code class="nx">el</code><code class="p">.</code><code class="nx">style</code><code class="p">.</code><code class="nx">opacity</code> <code class="o">=</code> <code class="s2">""</code><code class="p">;</code>&#13;
<code class="p">};</code></pre>&#13;
&#13;
<p>In this code, we use the <code>gsap</code> (GreenSock Animation Platform) library to animate the element when it enters the DOM. We define the following<a data-primary="gsap (GreenSock Animation Platform) library" data-type="indexterm" id="id1537"/>:</p>&#13;
<dl>&#13;
<dt><code>beforeEnter</code></dt>&#13;
<dd>&#13;
<p>Callback to set the initial state of the element, including setting the <code>opacity</code> to hidden and repositioning the element 20px from the origin</p>&#13;
</dd>&#13;
<dt><code>enter</code></dt>&#13;
<dd>&#13;
<p>Callback to animate the element using <code>gsap.to</code> function<sup><a data-type="noteref" href="ch10.html#id1538" id="id1538-marker">1</a></sup></p>&#13;
</dd>&#13;
<dt><code>afterEnter</code></dt>&#13;
<dd>&#13;
<p>Callback to set the elementâs visibility state and the position after the animation finishes</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>Similarly, we can use the <code>before-leave</code>, <code>leave</code>, and <code>after-leave</code> events to animate the element when it leaves the DOM (such as a sliding-out effect) with the animation library of our choice<a data-primary="" data-startref="ix-ani-tran2" data-type="indexterm" id="id1539"/><a data-primary="" data-startref="ix-ani-tran4" data-type="indexterm" id="id1540"/><a data-primary="" data-startref="ix-ani-tran4a" data-type="indexterm" id="id1541"/><a data-primary="" data-startref="ix-ani-tran4b" data-type="indexterm" id="id1542"/>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="id365">&#13;
<h1>Summary</h1>&#13;
&#13;
<p>In this chapter, we learned how to use the transition component and the available hooks to create smooth transition effects from one route to another. We also learned how to make group transitions and use the transition component to animate elements within a segment.</p>&#13;
&#13;
<p>In the next chapter, we will discover another significant aspect of web development: testing. We will learn how to test composables with Vitest and components with the Vue Test Utils library and then develop a complete end-to-end testing plan with Playwright for our application.</p>&#13;
</div></section>&#13;
<div data-type="footnotes"><p data-type="footnote" id="id1538"><sup><a href="ch10.html#id1538-marker">1</a></sup> This function receives a target element and optional object containing all properties for animation. See <a class="bare" href="https://oreil.ly/XNgFb"><em class="hyperlink">https://oreil.ly/XNgFb</em></a>.</p></div></div></section></body></html>