<html><head></head><body><section data-pdf-bookmark="Chapter 5. React with JSX" data-type="chapter" epub:type="chapter"><div class="chapter" id="react-with-jsx">&#13;
<h1><span class="label">Chapter 5. </span>React with JSX</h1>&#13;
&#13;
&#13;
<p>In the last chapter, we dove deep into how React works, breaking down&#13;
our React applications into small reusable pieces called components. These components render trees of elements and other components. Using the <code>createElement</code> function is a good way to see how React works, but as React developers, that’s not what we do. We don’t go around composing complex, barely readable trees of JavaScript syntax and call it fun. In order to work efficiently with React, we need one more thing: JSX.</p>&#13;
&#13;
<p>JSX combines the <em>JS</em> from JavaScript and the <em>X</em> from XML. It is a JavaScript extension that allows us to define React elements using a tag-based syntax directly within our JavaScript code. Sometimes JSX is confused with HTML because they look similar. JSX is just another way of creating React elements, so you don’t have to pull your hair out looking for the missing comma in a complex <code>createElement</code> call.</p>&#13;
&#13;
<p>In this chapter, we’re going to discuss how to use JSX<a data-primary="JSX language extension" data-secondary="purpose of" data-type="indexterm" id="idm45901645428536"/> to construct a React application.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="React Elements as JSX" data-type="sect1"><div class="sect1" id="react-elements-as-jsx">&#13;
<h1>React Elements as JSX</h1>&#13;
&#13;
<p>Facebook’s React<a data-primary="JSX language extension" data-secondary="React elements as JSX" data-type="indexterm" id="idm45901645425336"/> team released JSX when they released React to provide a&#13;
concise syntax for creating complex DOM trees with attributes. They also&#13;
hoped to make React more readable like HTML and XML. In JSX, an&#13;
element’s type is specified with a tag. The tag’s attributes represent&#13;
the properties. The element’s children can be added between the opening&#13;
and closing tags.</p>&#13;
&#13;
<p class="pagebreak-before">You can also add other JSX elements as children. If you have an&#13;
unordered list, you can add child list item elements to it with JSX&#13;
tags. It looks very similar to HTML:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;ul&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>1 lb Salmon<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>1 cup Pine Nuts<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>2 cups Butter Lettuce<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>1 Yellow Squash<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>1/2 cup Olive Oil<code class="nt">&lt;/li&gt;</code>&#13;
  <code class="nt">&lt;li&gt;</code>3 Cloves of Garlic<code class="nt">&lt;/li&gt;</code>&#13;
<code class="nt">&lt;/ul&gt;</code></pre>&#13;
&#13;
<p>JSX works with components as well. Simply define the component using the&#13;
class name. We pass an array of ingredients to the <code>IngredientsList</code> as&#13;
a property with JSX, as shown in <a data-type="xref" href="#ingredients_jsx">Figure 5-1</a>.</p>&#13;
&#13;
<figure><div class="figure" id="ingredients_jsx">&#13;
<img alt="image" src="assets/lrc2_0501.png"/>&#13;
<h6><span class="label">Figure 5-1. </span>Creating the IngredientsList with JSX</h6>&#13;
</div></figure>&#13;
&#13;
<p>When we pass the array of ingredients to this component, we need to&#13;
surround it with curly braces. This<a data-primary="JavaScript" data-secondary="expressions" data-type="indexterm" id="JSexpress05"/> is called a JavaScript <em>expression</em>,&#13;
and we must use these when passing JavaScript values to components as&#13;
properties. Component properties will take two types: either a string or&#13;
a JavaScript expression. JavaScript expressions can include arrays,&#13;
objects, and even functions. In order to include them, you must surround&#13;
them in curly braces.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="JSX Tips" data-type="sect2"><div class="sect2" id="jsx-tips">&#13;
<h2>JSX Tips</h2>&#13;
&#13;
<p>JSX might look familiar, and most of the rules result in syntax that’s&#13;
similar to HTML. However, there are a few considerations you should&#13;
understand when working with JSX.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Nested components" data-type="sect3"><div class="sect3" id="nested-components">&#13;
<h3>Nested components</h3>&#13;
&#13;
<p>JSX<a data-primary="JSX language extension" data-secondary="JSX tips" data-tertiary="nested components" data-type="indexterm" id="idm45901645353000"/> allows you to add components as children of other components. For&#13;
example, inside the <code>IngredientsList</code>, we can render another component&#13;
called <code>Ingredient</code> multiple times:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;IngredientsList&gt;</code>&#13;
  <code class="nt">&lt;Ingredient</code> <code class="nt">/&gt;</code>&#13;
  <code class="nt">&lt;Ingredient</code> <code class="nt">/&gt;</code>&#13;
  <code class="nt">&lt;Ingredient</code> <code class="nt">/&gt;</code>&#13;
<code class="nt">&lt;/IngredientsList&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="className" data-type="sect3"><div class="sect3" id="classname">&#13;
<h3>className</h3>&#13;
&#13;
<p>Since<a data-primary="JSX language extension" data-secondary="JSX tips" data-tertiary="className" data-type="indexterm" id="idm45901645344664"/><a data-primary="className" data-type="indexterm" id="idm45901645343384"/> <code>class</code> is a reserved word in JavaScript, <code>className</code> is used to&#13;
define the <code>class</code> attribute instead:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;h1</code> <code class="na">className=</code><code class="s">"fancy"</code><code class="nt">&gt;</code>Baked Salmon<code class="nt">&lt;/h1&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="JavaScript expressions" data-type="sect3"><div class="sect3" id="javascript-expressions">&#13;
<h3>JavaScript expressions</h3>&#13;
&#13;
<p>JavaScript<a data-primary="JSX language extension" data-secondary="JSX tips" data-tertiary="JavaScript expressions" data-type="indexterm" id="idm45901645314600"/> expressions are wrapped in curly braces and indicate where&#13;
variables will be evaluated and their resulting values returned. For&#13;
example, if we want to display the value of the <code>title</code> property in an&#13;
element, we can insert that value using a JavaScript expression. The&#13;
variable will be evaluated and its value returned:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">title</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code></pre>&#13;
&#13;
<p>Values<a data-primary="" data-startref="JSexpress05" data-type="indexterm" id="idm45901645281576"/> of types other than string should also appear as JavaScript&#13;
expressions:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">"checkbox"</code> <code class="na">defaultChecked=</code><code class="s">{false}</code> <code class="nt">/&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Evaluation" data-type="sect3"><div class="sect3" id="evaluation">&#13;
<h3>Evaluation</h3>&#13;
&#13;
<p>The<a data-primary="JSX language extension" data-secondary="JSX tips" data-tertiary="evaluation" data-type="indexterm" id="idm45901645239752"/> JavaScript that’s added in between the curly braces will get&#13;
evaluated. This means that operations such as concatenation or addition&#13;
will occur. This also means that functions found in JavaScript&#13;
expressions will be invoked:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;h1&gt;</code>{"Hello" + title}<code class="nt">&lt;/h1&gt;</code>&#13;
&#13;
<code class="nt">&lt;h1&gt;</code>{title.toLowerCase().replace}<code class="nt">&lt;/h1&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mapping Arrays with JSX" data-type="sect2"><div class="sect2" id="mapping-arrays-with-jsx">&#13;
<h2>Mapping Arrays with JSX</h2>&#13;
&#13;
<p>JSX<a data-primary="JSX language extension" data-secondary="mapping arrays with" data-type="indexterm" id="idm45901645251880"/><a data-primary="arrays" data-secondary="mapping with JSX" data-type="indexterm" id="idm45901645250872"/> is JavaScript, so you can incorporate JSX directly inside of&#13;
JavaScript functions. For example, you can map an array to JSX elements:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="o">&lt;</code><code class="nx">ul</code><code class="o">&gt;</code>&#13;
  <code class="p">{</code><code class="nx">props</code><code class="p">.</code><code class="nx">ingredients</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">li</code> <code class="nx">key</code><code class="o">=</code><code class="s2">"{i}"</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
  <code class="p">))}</code>&#13;
<code class="o">&lt;</code><code class="err">/ul&gt;</code></pre>&#13;
&#13;
<p>JSX looks clean and readable, but it can’t be interpreted with a&#13;
browser. All JSX must be converted into <code>createElement</code> calls. Luckily, there’s an excellent tool for this task: Babel.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Babel" data-type="sect1"><div class="sect1" id="babel">&#13;
<h1>Babel</h1>&#13;
&#13;
<p>Many<a data-primary="JSX language extension" data-secondary="Babel" data-type="indexterm" id="idm45901645138664"/><a data-primary="Babel" data-secondary="history of" data-type="indexterm" id="idm45901645137656"/> software languages require you to compile your source code.&#13;
JavaScript is an interpreted language: the browser interprets the code&#13;
as text, so there’s no need to compile JavaScript. However, not all&#13;
browsers support the latest JavaScript syntax, and no browser supports&#13;
JSX syntax. Since we want to use the latest features of JavaScript along&#13;
with JSX, we’re going to need a way to convert our fancy source code&#13;
into something that the browser can interpret. This process is called&#13;
compiling, and it’s what <a href="https://babeljs.io">Babel</a> is designed to do.</p>&#13;
&#13;
<p>The first version of the project was called 6to5, and it was released in&#13;
September 2014. 6to5 was a tool that could be used to convert ES6 syntax&#13;
to ES5 syntax, which was more widely supported by web browsers. As the&#13;
project grew, it aimed to be a platform to support all of the latest&#13;
changes in ECMAScript. It also grew to support converting JSX into&#13;
JavaScript. The project was renamed Babel in February 2015.</p>&#13;
&#13;
<p>Babel is used in production at Facebook, Netflix, PayPal, Airbnb, and&#13;
more. Previously, Facebook had created a JSX transformer that was their&#13;
standard, but it was soon retired in favor of Babel.</p>&#13;
&#13;
<p>There<a data-primary="Babel" data-secondary="working with" data-type="indexterm" id="idm45901645133480"/> are many ways of working with Babel. The easiest way to get&#13;
started is to include a link to the Babel CDN directly in your HTML,&#13;
which will compile any code in script blocks that have a type of&#13;
“text/babel.” Babel will compile the source code on the client before&#13;
running it. Although this may not be the best solution for production,&#13;
it’s a great way to get started with JSX:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="nt">&lt;html&gt;</code>&#13;
  <code class="nt">&lt;head&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"utf-8"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;title&gt;</code>React Examples<code class="nt">&lt;/title&gt;</code>&#13;
  <code class="nt">&lt;/head&gt;</code>&#13;
  <code class="nt">&lt;body&gt;</code>&#13;
    <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"root"</code><code class="nt">&gt;&lt;/div&gt;</code>&#13;
&#13;
    <code class="c">&lt;!-- React Library &amp; React DOM --&gt;</code>&#13;
    <code class="nt">&lt;script</code>&#13;
<code class="nt">  </code><code class="na">src=</code><code class="s">"https://unpkg.com/react@16.8.6/umd/react.development.js"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;/script&gt;</code>&#13;
    <code class="nt">&lt;script</code>&#13;
<code class="nt">  </code><code class="na">src=</code><code class="s">"https://unpkg.com/react-dom@16.8.6/umd/react-dom.development.js"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;/script&gt;</code>&#13;
    <code class="nt">&lt;script</code>&#13;
<code class="nt">  </code><code class="na">src=</code><code class="s">"https://unpkg.com/@babel/standalone/babel.min.js"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;/script&gt;</code>&#13;
&#13;
    <code class="nt">&lt;script </code><code class="na">type=</code><code class="s">"text/babel"</code><code class="nt">&gt;</code>&#13;
      <code class="c1">// JSX code here. Or link to separate JavaScript file that contains JSX.</code>&#13;
    <code class="nt">&lt;/script&gt;</code>&#13;
  <code class="nt">&lt;/body&gt;</code>&#13;
<code class="nt">&lt;/html&gt;</code></pre>&#13;
<div data-type="note" epub:type="note"><h1>Console Warning in the Browser with In-Browser Babel</h1>&#13;
<p>When using the in-browser transformer, you’ll see a warning that says to&#13;
precompile scripts for production. Don’t worry about that warning for the&#13;
purposes of this and any other small demos. We’ll upgrade to&#13;
production-ready Babel later in the chapter.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Recipes as JSX" data-type="sect1"><div class="sect1" id="recipes-as-jsx">&#13;
<h1>Recipes as JSX</h1>&#13;
&#13;
<p>JSX<a data-primary="JSX language extension" data-secondary="recipe examples" data-type="indexterm" id="JSXrecipe05"/> provides us with a nice, clean way to express React elements in our&#13;
code that makes sense to us and is immediately readable by developers.&#13;
The drawback of JSX is that it’s not readable by the browser. Before&#13;
our code can be interpreted by the browser, it needs to be converted&#13;
from JSX into JavaScript.</p>&#13;
&#13;
<p>This data array contains two recipes, and this represents our&#13;
application’s current state:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">data</code> <code class="o">=</code> <code class="p">[</code>&#13;
  <code class="p">{</code>&#13;
    <code class="nx">name</code><code class="o">:</code> <code class="s2">"Baked Salmon"</code><code class="p">,</code>&#13;
    <code class="nx">ingredients</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Salmon"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"l lb"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Pine Nuts"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Butter Lettuce"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">2</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cups"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Yellow Squash"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"med"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Olive Oil"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mf">0.5</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Garlic"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">3</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cloves"</code> <code class="p">}</code>&#13;
    <code class="p">],</code>&#13;
    <code class="nx">steps</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="s2">"Preheat the oven to 350 degrees."</code><code class="p">,</code>&#13;
      <code class="s2">"Spread the olive oil around a glass baking dish."</code><code class="p">,</code>&#13;
      <code class="s2">"Add the yellow squash and place in the oven for 30 mins."</code><code class="p">,</code>&#13;
      <code class="s2">"Add the salmon, garlic, and pine nuts to the dish."</code><code class="p">,</code>&#13;
      <code class="s2">"Bake for 15 minutes."</code><code class="p">,</code>&#13;
      <code class="s2">"Remove from oven. Add the lettuce and serve."</code>&#13;
    <code class="p">]</code>&#13;
  <code class="p">},</code>&#13;
  <code class="p">{</code>&#13;
    <code class="nx">name</code><code class="o">:</code> <code class="s2">"Fish Tacos"</code><code class="p">,</code>&#13;
    <code class="nx">ingredients</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Whitefish"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"l lb"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Cheese"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Iceberg Lettuce"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">2</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cups"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Tomatoes"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">2</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"large"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Tortillas"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">3</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"med"</code> <code class="p">}</code>&#13;
    <code class="p">],</code>&#13;
    <code class="nx">steps</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="s2">"Cook the fish on the grill until cooked through."</code><code class="p">,</code>&#13;
      <code class="s2">"Place the fish on the 3 tortillas."</code><code class="p">,</code>&#13;
      <code class="s2">"Top them with lettuce, tomatoes, and cheese."</code>&#13;
    <code class="p">]</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">];</code></pre>&#13;
&#13;
<p>The data is expressed in an array of two JavaScript objects. Each object&#13;
contains the name of the recipe, a list of the ingredients required, and&#13;
a list of steps necessary to cook the recipe.</p>&#13;
&#13;
<p>We can create a UI for these recipes with two components: a <code>Menu</code>&#13;
component for listing the recipes and a <code>Recipe</code> component that&#13;
describes the UI for each recipe. It’s the <code>Menu</code> component that we’ll&#13;
render to the DOM. We’ll pass our data to the <code>Menu</code> component as a&#13;
property called <code>recipes</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// The data, an array of Recipe objects</code>&#13;
<code class="kr">const</code> <code class="nx">data</code> <code class="o">=</code> <code class="p">[</code> <code class="p">...</code> <code class="p">];</code>&#13;
&#13;
<code class="c1">// A function component for an individual Recipe</code>&#13;
<code class="kd">function</code> <code class="nx">Recipe</code> <code class="p">(</code><code class="nx">props</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="p">...</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="c1">// A function component for the Menu of Recipes</code>&#13;
<code class="kd">function</code> <code class="nx">Menu</code> <code class="p">(</code><code class="nx">props</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="p">...</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="c1">// A call to ReactDOM.render to render our Menu into the current DOM</code>&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code>&#13;
  <code class="o">&lt;</code><code class="nx">Menu</code> <code class="nx">recipes</code><code class="o">=</code><code class="p">{</code><code class="nx">data</code><code class="p">}</code> <code class="nx">title</code><code class="o">=</code><code class="s2">"Delicious Recipes"</code> <code class="o">/&gt;</code><code class="p">,</code>&#13;
  <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>The React elements within the <code>Menu</code> component are expressed as JSX.&#13;
Everything is contained within an <code>article</code> element. A <code>header</code> element,&#13;
an <code>h1</code> element, and a <code>div.recipes</code> element are used to describe the&#13;
DOM for our menu. The value for the <code>title</code> property will be displayed&#13;
as text within the <code>h1</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Menu</code><code class="p">(</code><code class="nx">props</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">article</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">header</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">props</code><code class="p">.</code><code class="nx">title</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/header&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">div</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"recipes"</code> <code class="o">/&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/article&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p class="pagebreak-before">Inside of the <code>div.recipes</code> element, we add a component for each recipe:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="o">&lt;</code><code class="nx">div</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"recipes"</code><code class="o">&gt;</code>&#13;
  <code class="p">{</code><code class="nx">props</code><code class="p">.</code><code class="nx">recipes</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">recipe</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">Recipe</code>&#13;
      <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code>&#13;
      <code class="nx">name</code><code class="o">=</code><code class="p">{</code><code class="nx">recipe</code><code class="p">.</code><code class="nx">name</code><code class="p">}</code>&#13;
      <code class="nx">ingredients</code><code class="o">=</code><code class="p">{</code><code class="nx">recipe</code><code class="p">.</code><code class="nx">ingredients</code><code class="p">}</code>&#13;
      <code class="nx">steps</code><code class="o">=</code><code class="p">{</code><code class="nx">recipe</code><code class="p">.</code><code class="nx">steps</code><code class="p">}</code>&#13;
    <code class="o">/&gt;</code>&#13;
  <code class="p">))}</code>&#13;
<code class="o">&lt;</code><code class="err">/div&gt;</code></pre>&#13;
&#13;
<p>In order to list the recipes within the <code>div.recipes</code> element, we use&#13;
curly braces to add a JavaScript expression that will return an array of&#13;
children. We can use the <code>map</code> function on the <code>props.recipes</code> array to&#13;
return a component for each object within the array. As mentioned&#13;
previously, each recipe contains a name, some ingredients, and cooking&#13;
instructions (steps). We’ll need to pass this data to each <code>Recipe</code> as&#13;
props. Also remember that we should use the <code>key</code> property to uniquely&#13;
identify each <span class="keep-together">element</span>.</p>&#13;
&#13;
<p>You could also refactor this to use spread syntax. The JSX spread&#13;
operator works like the object spread operator. It will add each field&#13;
of the <code>recipe</code> object as a property of the <code>Recipe</code> component. The&#13;
syntax here will supply all properties to the component:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nx">props</code><code class="p">.</code><code class="nx">recipes</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">recipe</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="o">&lt;</code><code class="nx">Recipe</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code> <code class="p">{...</code><code class="nx">recipe</code><code class="p">}</code> <code class="o">/&gt;</code><code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Remember that this shortcut will provide all the properties to the&#13;
<code>Recipe</code> component. This could be a good thing but might also add too&#13;
many properties to the component.</p>&#13;
&#13;
<p>Another place we can make a syntax improvement to our <code>Menu</code> component&#13;
is where we take in the <code>props</code> argument. We can use object&#13;
destructuring to scope the variables to this function. This allows us to&#13;
access the <code>title</code> and <code>recipes</code> variables directly, no longer having to&#13;
prefix them with <code>props</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Menu</code><code class="p">({</code> <code class="nx">title</code><code class="p">,</code> <code class="nx">recipes</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">article</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">header</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">title</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/header&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">div</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"recipes"</code><code class="o">&gt;</code>&#13;
        <code class="p">{</code><code class="nx">recipes</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">recipe</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">Recipe</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code> <code class="p">{...</code><code class="nx">recipe</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/article&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now let’s code the component for each individual recipe:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Recipe</code><code class="p">({</code> <code class="nx">name</code><code class="p">,</code> <code class="nx">ingredients</code><code class="p">,</code> <code class="nx">steps</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">id</code><code class="o">=</code><code class="p">{</code><code class="nx">name</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">().</code><code class="nx">replace</code><code class="p">(</code><code class="sr">/ /g</code><code class="p">,</code> <code class="s2">"-"</code><code class="p">)}</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">ul</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"ingredients"</code><code class="o">&gt;</code>&#13;
        <code class="p">{</code><code class="nx">ingredients</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">li</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">.</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/ul&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"instructions"</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h2</code><code class="o">&gt;</code><code class="nx">Cooking</code> <code class="nx">Instructions</code><code class="o">&lt;</code><code class="err">/h2&gt;</code>&#13;
        <code class="p">{</code><code class="nx">steps</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">step</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">p</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">step</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Each recipe has a string for the name, an array of objects for&#13;
ingredients, and an array of strings for the steps. Using object&#13;
destructuring, we can tell this component to locally scope those fields&#13;
by name so we can access them directly without having to use&#13;
<code>props.name</code>, <code>props.ingredients</code>, or <code>props.steps</code>.</p>&#13;
&#13;
<p>The first JavaScript expression we see is being used to set the&#13;
<code>id</code> attribute for the root <code>section</code> element. It’s converting the&#13;
recipe’s name to a lowercase string and globally replacing spaces with&#13;
dashes. The result is that “Baked Salmon” will be converted to&#13;
“baked-salmon” (and likewise, if we had a recipe with the name “Boston&#13;
Baked Beans,” it would be converted to “boston-baked-beans”) before it’s&#13;
used as the <code>id</code> attribute in our UI. The value for <code>name</code> is also being&#13;
displayed in an <code>h1</code> as a text node.</p>&#13;
&#13;
<p>Inside of the unordered list, a JavaScript expression is mapping each&#13;
ingredient to an <code>li</code> element that displays the name of the ingredient.&#13;
Within our instructions section, we see the same pattern being used to&#13;
return a paragraph element where each step is displayed. These <code>map</code>&#13;
functions are returning arrays of child elements.</p>&#13;
&#13;
<p>The complete code for the application should look like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">data</code> <code class="o">=</code> <code class="p">[</code>&#13;
  <code class="p">{</code>&#13;
    <code class="nx">name</code><code class="o">:</code> <code class="s2">"Baked Salmon"</code><code class="p">,</code>&#13;
    <code class="nx">ingredients</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Salmon"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"l lb"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Pine Nuts"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Butter Lettuce"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">2</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cups"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Yellow Squash"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"med"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Olive Oil"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mf">0.5</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Garlic"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">3</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cloves"</code> <code class="p">}</code>&#13;
    <code class="p">],</code>&#13;
    <code class="nx">steps</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="s2">"Preheat the oven to 350 degrees."</code><code class="p">,</code>&#13;
      <code class="s2">"Spread the olive oil around a glass baking dish."</code><code class="p">,</code>&#13;
      <code class="s2">"Add the yellow squash and place in the oven for 30 mins."</code><code class="p">,</code>&#13;
      <code class="s2">"Add the salmon, garlic, and pine nuts to the dish."</code><code class="p">,</code>&#13;
      <code class="s2">"Bake for 15 minutes."</code><code class="p">,</code>&#13;
      <code class="s2">"Remove from oven. Add the lettuce and serve."</code>&#13;
    <code class="p">]</code>&#13;
  <code class="p">},</code>&#13;
  <code class="p">{</code>&#13;
    <code class="nx">name</code><code class="o">:</code> <code class="s2">"Fish Tacos"</code><code class="p">,</code>&#13;
    <code class="nx">ingredients</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Whitefish"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"l lb"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Cheese"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Iceberg Lettuce"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">2</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cups"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Tomatoes"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">2</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"large"</code> <code class="p">},</code>&#13;
      <code class="p">{</code> <code class="nx">name</code><code class="o">:</code> <code class="s2">"Tortillas"</code><code class="p">,</code> <code class="nx">amount</code><code class="o">:</code> <code class="mi">3</code><code class="p">,</code> <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"med"</code> <code class="p">}</code>&#13;
    <code class="p">],</code>&#13;
    <code class="nx">steps</code><code class="o">:</code> <code class="p">[</code>&#13;
      <code class="s2">"Cook the fish on the grill until hot."</code><code class="p">,</code>&#13;
      <code class="s2">"Place the fish on the 3 tortillas."</code><code class="p">,</code>&#13;
      <code class="s2">"Top them with lettuce, tomatoes, and cheese."</code>&#13;
    <code class="p">]</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">];</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">Recipe</code><code class="p">({</code> <code class="nx">name</code><code class="p">,</code> <code class="nx">ingredients</code><code class="p">,</code> <code class="nx">steps</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">id</code><code class="o">=</code><code class="p">{</code><code class="nx">name</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">().</code><code class="nx">replace</code><code class="p">(</code><code class="sr">/ /g</code><code class="p">,</code> <code class="s2">"-"</code><code class="p">)}</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">ul</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"ingredients"</code><code class="o">&gt;</code>&#13;
        <code class="p">{</code><code class="nx">ingredients</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">li</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">.</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/ul&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"instructions"</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h2</code><code class="o">&gt;</code><code class="nx">Cooking</code> <code class="nx">Instructions</code><code class="o">&lt;</code><code class="err">/h2&gt;</code>&#13;
        <code class="p">{</code><code class="nx">steps</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">step</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">p</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">step</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">Menu</code><code class="p">({</code> <code class="nx">title</code><code class="p">,</code> <code class="nx">recipes</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">article</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">header</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">title</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/header&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">div</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"recipes"</code><code class="o">&gt;</code>&#13;
        <code class="p">{</code><code class="nx">recipes</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">recipe</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">Recipe</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code> <code class="p">{...</code><code class="nx">recipe</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/article&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code>&#13;
  <code class="o">&lt;</code><code class="nx">Menu</code> <code class="nx">recipes</code><code class="o">=</code><code class="p">{</code><code class="nx">data</code><code class="p">}</code> <code class="nx">title</code><code class="o">=</code><code class="s2">"Delicious Recipes"</code> <code class="o">/&gt;</code><code class="p">,</code>&#13;
  <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>When we run this code in the browser, React will construct a UI using&#13;
our instructions with the recipe data as shown in <a data-type="xref" href="#delicious_recipes">Figure 5-2</a>.</p>&#13;
&#13;
<p>If<a data-primary="component trees" data-secondary="inspecting" data-type="indexterm" id="idm45901644234520"/><a data-primary="React Developer Tools" data-type="indexterm" id="idm45901644233512"/> you’re using Google Chrome and have the React Developer Tools&#13;
Extension installed, you can take a look at the present state of the&#13;
component tree. To do this, open the developer tools and select the&#13;
Components tab, as shown in <a data-type="xref" href="#react_tab5">Figure 5-3</a>.</p>&#13;
&#13;
<p>Here we can see the <code>Menu</code> and its child elements. The <code>data</code> array&#13;
contains two objects for recipes, and we have two <code>Recipe</code> elements.&#13;
Each <code>Recipe</code> element has properties for the recipe name, ingredients,&#13;
and steps. The ingredients and steps are passed down to their own components as <code>data</code>.</p>&#13;
&#13;
<p>The components are constructed based on the application’s data being&#13;
passed to the <code>Menu</code> component as a property. If we change the <code>recipes</code>&#13;
array and rerender our <code>Menu</code> component, React will change this DOM as&#13;
efficiently as possible.<a data-primary="" data-startref="JSXrecipe05" data-type="indexterm" id="idm45901643707448"/></p>&#13;
&#13;
<figure><div class="figure" id="delicious_recipes">&#13;
<img alt="image" src="assets/lrc2_0502.png"/>&#13;
<h6><span class="label">Figure 5-2. </span>Delicious Recipes output</h6>&#13;
</div></figure>&#13;
&#13;
<figure><div class="figure" id="react_tab5">&#13;
<img alt="image" src="assets/lrc2_0503.png"/>&#13;
<h6><span class="label">Figure 5-3. </span>Resulting virtual DOM in React Developer Tools</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="React Fragments" data-type="sect1"><div class="sect1" id="react-fragments">&#13;
<h1>React Fragments</h1>&#13;
&#13;
<p>In<a data-primary="fragments" data-type="indexterm" id="frag05"/><a data-primary="JSX language extension" data-secondary="React fragments" data-type="indexterm" id="JSXfragment05"/><a data-primary="React fragments" data-type="indexterm" id="reactfrag05"/> the previous section, we rendered the <code>Menu</code> component, a parent&#13;
component that rendered the <code>Recipe</code> component. We want to take a&#13;
moment to look at a small example of rendering two sibling components&#13;
using a React fragment. Let’s start by creating a new component called&#13;
<code>Cat</code> that we’ll render to the DOM at the <code>root</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Cat</code><code class="p">({</code> <code class="nx">name</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">The</code> <code class="nx">cat</code><code class="err">'</code><code class="nx">s</code> <code class="nx">name</code> <code class="nx">is</code> <code class="p">{</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;;</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code><code class="o">&lt;</code><code class="nx">Cat</code> <code class="nx">name</code><code class="o">=</code><code class="s2">"Jungle"</code> <code class="o">/&gt;</code><code class="p">,</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">));</code></pre>&#13;
&#13;
<p class="pagebreak-before">This will render the <code>h1</code> as expected, but what might happen if we added&#13;
a <code>p</code> tag to the <code>Cat</code> component at the same level as the <code>h1</code>?</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Cat</code><code class="p">({</code> <code class="nx">name</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">The</code> <code class="nx">cat</code><code class="s1">'s name is {name}&lt;/h1&gt;</code>&#13;
<code class="s1">    &lt;p&gt;He'</code><code class="nx">s</code> <code class="nx">good</code><code class="p">.</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Immediately, we’ll see an error in the console that reads&#13;
<code>Adjacent JSX elements must be wrapped in an enclosing tag</code> and&#13;
recommends using a fragment. This is where fragments come into play!&#13;
React will not render two or more adjacent or sibling elements as a&#13;
component, so we used to have to wrap these in an enclosing tag like a&#13;
<code>div</code>. This led to a lot of unnecessary tags being created, though, and a&#13;
bunch of wrappers without much purpose. If we use a React fragment, we&#13;
can mimic the behavior of a wrapper without actually creating a new tag.</p>&#13;
&#13;
<p>Start by wrapping the adjacent tags, the <code>h1</code> and <code>p</code>, with a&#13;
<code>React.Fragment</code> tag:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Cat</code><code class="p">({</code> <code class="nx">name</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">React</code><code class="p">.</code><code class="nx">Fragment</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">The</code> <code class="nx">cat</code><code class="s1">'s name is {name}&lt;/h1&gt;</code>&#13;
<code class="s1">      &lt;p&gt;He'</code><code class="nx">s</code> <code class="nx">good</code><code class="p">.</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/React.Fragment&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Adding this clears the warning. You also can use a fragment shorthand to&#13;
make this look even cleaner:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">Cat</code><code class="p">({</code> <code class="nx">name</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">The</code> <code class="nx">cat</code><code class="s1">'s name is {name}&lt;/h1&gt;</code>&#13;
<code class="s1">      &lt;p&gt;He'</code><code class="nx">s</code> <code class="nx">good</code><code class="p">.</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>If you look at the DOM, the fragment is not visible in the resulting&#13;
tree:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"root"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;h1&gt;</code>The cat's name is Jungle<code class="nt">&lt;/h1&gt;</code>&#13;
  <code class="nt">&lt;p&gt;</code>He's good<code class="nt">&lt;/p&gt;</code>&#13;
<code class="nt">&lt;/div&gt;</code></pre>&#13;
&#13;
<p>Fragments are a relatively new feature of React and do away with the&#13;
need for extra wrapper tags that can pollute the DOM.<a data-primary="" data-startref="frag05" data-type="indexterm" id="idm45901643478280"/><a data-primary="" data-startref="reactfrag05" data-type="indexterm" id="idm45901643477432"/><a data-primary="" data-startref="JSXfragment05" data-type="indexterm" id="idm45901643476520"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Intro to webpack" data-type="sect1"><div class="sect1" id="intro-to-webpack">&#13;
<h1>Intro to webpack</h1>&#13;
&#13;
<p>Once<a data-primary="webpack" data-secondary="introduction to" data-type="indexterm" id="idm45901643434280"/><a data-primary="JSX language extension" data-secondary="webpack" data-tertiary="introduction to" data-type="indexterm" id="idm45901643433272"/> we start working with React in real projects, there are a lot of&#13;
questions to consider: How do we want to deal with JSX and ESNext&#13;
transformation? How can we manage our dependencies? How can we optimize&#13;
our images and CSS?</p>&#13;
&#13;
<p>Many different tools have emerged to answer these questions, including&#13;
Browserify, gulp, Grunt, Prepack, and more. Due to its features and&#13;
widespread adoption by large companies, <em>webpack</em> has also emerged as&#13;
one of the leading tools for bundling.</p>&#13;
&#13;
<p>The React ecosystem has matured to include tools like create-react-app, Gatsby, and Code Sandbox. When you use these tools, a lot of the details about how the code gets compiled are abstracted away. For the remainder of this chapter, we are going to set up our own webpack build. This day in age, understanding that your JavaScript/React code is being compiled by something like webpack is vital, but knowing <em>how</em> to compile your JavaScript/React with something like webpack is not as important. We understand if you want to skip ahead.</p>&#13;
&#13;
<p>Webpack<a data-primary="module bundlers" data-type="indexterm" id="idm45901643428872"/> is billed as a module bundler. A module bundler takes all of our&#13;
different files (JavaScript, LESS, CSS, JSX, ESNext, and so on) and&#13;
turns them into a single file. The two main benefits of <a data-primary="bundling" data-type="indexterm" id="idm45901643427800"/>bundling are&#13;
<em>modularity</em> and <em>network performance</em>.</p>&#13;
&#13;
<p>Modularity will allow you to break down your source code into parts, or&#13;
modules, that are easier to work with, especially in a team environment.</p>&#13;
&#13;
<p>Network performance is gained by only needing to load one dependency in&#13;
the browser: the bundle. Each <code>script</code> tag makes an HTTP request, and&#13;
there’s a latency penalty for each HTTP request. Bundling all the&#13;
dependencies into a single file allows you to load everything with one&#13;
HTTP request, thereby avoiding additional latency.</p>&#13;
&#13;
<p>Aside from code compilation, webpack also can handle:</p>&#13;
<dl>&#13;
<dt>Code splitting</dt>&#13;
<dd>&#13;
<p>Splits<a data-primary="code splitting" data-secondary="definition of term" data-type="indexterm" id="idm45901643404952"/><a data-primary="rollups" data-type="indexterm" id="idm45901643403944"/><a data-primary="layers" data-type="indexterm" id="idm45901643403272"/> up your code into different chunks that can be loaded when you&#13;
need them. Sometimes these are called <em>rollups</em> or <em>layers</em>; the aim is&#13;
to break up code as needed for different pages or devices.</p>&#13;
</dd>&#13;
<dt>Minification</dt>&#13;
<dd>&#13;
<p>Removes<a data-primary="minification" data-type="indexterm" id="idm45901643470072"/> whitespace, line breaks, lengthy variable names, and unnecessary&#13;
code to reduce the file size.</p>&#13;
</dd>&#13;
<dt>Feature Flagging</dt>&#13;
<dd>&#13;
<p>Sends<a data-primary="feature flagging" data-type="indexterm" id="idm45901643467816"/> code to one or more—but not all—environments when testing out&#13;
features.</p>&#13;
</dd>&#13;
<dt>Hot Module Replacement (HMR)</dt>&#13;
<dd>&#13;
<p>Watches<a data-primary="Hot Module Replacement (HMR)" data-type="indexterm" id="idm45901643465704"/> for changes in source code. Changes only the updated modules&#13;
<span class="keep-together">immediately</span>.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>The Recipes app we built earlier in this chapter has some&#13;
limitations that webpack will help us alleviate. Using a tool like&#13;
webpack to statically build client JavaScript makes it possible for&#13;
teams to work together on large-scale web applications. We can also gain&#13;
the following benefits by incorporating the webpack module bundler:</p>&#13;
<dl>&#13;
<dt>Modularity</dt>&#13;
<dd>&#13;
<p>Using<a data-primary="modules" data-type="indexterm" id="idm45901643461560"/> the module pattern to export modules that will later be&#13;
imported or required by another part of the application makes source&#13;
code more approachable. It allows development teams to work&#13;
together, by allowing them to create and work with separate files that&#13;
will be statically combined into a single file before sending to&#13;
production.</p>&#13;
</dd>&#13;
<dt>Composition</dt>&#13;
<dd>&#13;
<p>With modules, we can build small, simple, reusable React components that&#13;
we can compose efficiently into applications. Smaller components are&#13;
easier to comprehend, test, and reuse. They’re also easier to replace&#13;
down the line when enhancing applications.</p>&#13;
</dd>&#13;
<dt>Speed</dt>&#13;
<dd>&#13;
<p>Packaging all the application’s modules and dependencies into a&#13;
single client bundle will reduce the load time of an application&#13;
because there’s latency associated with each HTTP request. Packaging&#13;
everything together in a single file means that the client will only&#13;
need to make a single request. Minifying the code in the bundle will&#13;
improve load time as well.</p>&#13;
</dd>&#13;
<dt>Consistency</dt>&#13;
<dd>&#13;
<p>Since webpack will compile JSX and JavaScript, we can start using&#13;
tomorrow’s JavaScript syntax today. Babel supports a wide range of&#13;
ESNext syntax, which means we don’t have to worry about whether the&#13;
browser supports our code. It allows developers to consistently use&#13;
cutting-edge JavaScript syntax.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Creating the Project" data-type="sect2"><div class="sect2" id="creating-the-project">&#13;
<h2>Creating the Project</h2>&#13;
&#13;
<p>To<a data-primary="JSX language extension" data-secondary="webpack" data-tertiary="project creation" data-type="indexterm" id="JSXwpproject05"/><a data-primary="webpack" data-secondary="project creation" data-type="indexterm" id="Wproject05"/> demonstrate how we might set up a React project from scratch, let’s&#13;
go ahead and create a new folder on our computer called <em>recipes-app</em>:</p>&#13;
&#13;
<pre data-type="programlisting">mkdir recipes-app&#13;
cd recipes-app</pre>&#13;
&#13;
<p class="pagebreak-after">For this project, we’re going to go through the following steps:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Create the project.</p>&#13;
</li>&#13;
<li>&#13;
<p>Break down the recipe app into components that live in different files.</p>&#13;
</li>&#13;
<li>&#13;
<p>Set up a webpack build that incorporates Babel.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
<div data-type="note" epub:type="note"><h1>create-react-app</h1>&#13;
<p>There’s a tool called Create React App that can be used to autogenerate&#13;
a React project with all of this preconfigured. We’re going to take a&#13;
closer look at what’s happening behind the scenes before abstracting&#13;
these steps away with a tool.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1. Create the project" data-type="sect3"><div class="sect3" id="idm45901643327960">&#13;
<h3>1. Create the project</h3>&#13;
&#13;
<p>Next, we’ll create the project and<a data-primary="package.json file" data-type="indexterm" id="idm45901643326232"/> <em>package.json</em> file with npm, sending&#13;
the <code>-y</code> flag to use all of the defaults. We’ll<a data-primary="React" data-secondary="installing" data-type="indexterm" id="idm45901643324504"/><a data-primary="webpack" data-secondary="installing" data-type="indexterm" id="idm45901643323528"/><a data-primary="ReactDOM" data-secondary="installing" data-type="indexterm" id="idm45901643322584"/> also install webpack,&#13;
webpack-cli, react, and react-dom:</p>&#13;
&#13;
<pre data-type="programlisting">npm init -y&#13;
npm install react react-dom serve</pre>&#13;
&#13;
<p>If we’re using npm 5, we don’t need to send the <code>--save</code> flag when&#13;
installing. Next, we’ll create the following directory structure to&#13;
house the components:</p>&#13;
&#13;
<pre data-type="programlisting">recipes-app (folder)&#13;
  &gt; node_modules (already added with npm install command)&#13;
  &gt; package.json (already added with npm init command)&#13;
  &gt; package-lock.json (already added with npm init command)&#13;
  &gt; index.html&#13;
  &gt; /src (folder)&#13;
    &gt; index.js&#13;
    &gt; /data (folder)&#13;
      &gt; recipes.json&#13;
    &gt; /components (folder)&#13;
      &gt; Recipe.js&#13;
      &gt; Instructions.js&#13;
      &gt; Ingredients.js</pre>&#13;
<div data-type="note" epub:type="note"><h1>File Organization</h1>&#13;
<p>There’s no one way to organize the files in a React project. This is&#13;
just one possible strategy.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="2. Break components into modules" data-type="sect3"><div class="sect3" id="idm45901643317128">&#13;
<h3>2. Break components into modules</h3>&#13;
&#13;
<p>Currently, the <code>Recipe</code> component is doing quite a bit. We’re&#13;
displaying the name of the recipe, constructing an unordered list of&#13;
ingredients, and displaying the instructions, with each step getting its&#13;
own paragraph element. This component should be placed in the&#13;
<em>Recipe.js</em> file. In any file where we’re using JSX, we’ll need to&#13;
import React at the top:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/components/Recipe.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="kd">function</code> <code class="nx">Recipe</code><code class="p">({</code> <code class="nx">name</code><code class="p">,</code> <code class="nx">ingredients</code><code class="p">,</code> <code class="nx">steps</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">id</code><code class="o">=</code><code class="s2">"baked-salmon"</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">ul</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"ingredients"</code><code class="o">&gt;</code>&#13;
        <code class="p">{</code><code class="nx">ingredients</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">li</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">.</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/ul&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"instructions"</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h2</code><code class="o">&gt;</code><code class="nx">Cooking</code> <code class="nx">Instructions</code><code class="o">&lt;</code><code class="err">/h2&gt;</code>&#13;
        <code class="p">{</code><code class="nx">steps</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">step</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">p</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">step</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>A more functional approach to the <code>Recipe</code> component would be to break&#13;
it down into smaller, more focused function components and compose them&#13;
together. We can start by pulling the instructions out into their own&#13;
component and creating a module in a separate file we can use for&#13;
any set of instructions.</p>&#13;
&#13;
<p>In that new file called <em>Instructions.js</em>, create the following&#13;
component:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/components/Instructions.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="kd">function</code> <code class="nx">Instructions</code><code class="p">({</code> <code class="nx">title</code><code class="p">,</code> <code class="nx">steps</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"instructions"</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h2</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">title</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h2&gt;</code>&#13;
      <code class="p">{</code><code class="nx">steps</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">s</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
        <code class="o">&lt;</code><code class="nx">p</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">s</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
      <code class="p">))}</code>&#13;
    <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Here, we’ve created a new component called <code>Instructions</code>. We’ll pass&#13;
the title of the instructions and the steps to this component. This way,&#13;
we can reuse this component for “Cooking Instructions,” “Baking&#13;
Instructions,” “Prep Instructions,” or a “Pre-cook Checklist”—anything&#13;
that has steps.</p>&#13;
&#13;
<p>Now think about the ingredients. In the <code>Recipe</code> component, we’re only&#13;
displaying the ingredient names, but each ingredient in the data for the&#13;
recipe has an amount and measurement as well. We’ll create a component&#13;
called <code>Ingredient</code> for this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/components/Ingredient.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="kd">function</code> <code class="nx">Ingredient</code><code class="p">({</code> <code class="nx">amount</code><code class="p">,</code> <code class="nx">measurement</code><code class="p">,</code> <code class="nx">name</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
      <code class="p">{</code><code class="nx">amount</code><code class="p">}</code> <code class="p">{</code><code class="nx">measurement</code><code class="p">}</code> <code class="p">{</code><code class="nx">name</code><code class="p">}</code>&#13;
    <code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Here, we assume each ingredient has an amount, a measurement, and a name.&#13;
We destructure those values from our <code>props</code> object and display them&#13;
each in independent classed <code>span</code> elements.</p>&#13;
&#13;
<p>Using the <code>Ingredient</code> component, we can construct an <code>IngredientsList</code>&#13;
component that can be used any time we need to display a list of&#13;
ingredients:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/components/IngredientsList.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Ingredient</code> <code class="nx">from</code> <code class="s2">"./Ingredient"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="kd">function</code> <code class="nx">IngredientsList</code><code class="p">({</code> <code class="nx">list</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">ul</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"ingredients"</code><code class="o">&gt;</code>&#13;
      <code class="p">{</code><code class="nx">list</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">ingredient</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
        <code class="o">&lt;</code><code class="nx">Ingredient</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code> <code class="p">{...</code><code class="nx">ingredient</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="p">))}</code>&#13;
    <code class="o">&lt;</code><code class="err">/ul&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>In this file, we first import the <code>Ingredient</code> component because we’re&#13;
going to use it for each ingredient. The ingredients are passed to this&#13;
component as an array in a property called <code>list</code>. Each ingredient in&#13;
the <code>list</code> array will be mapped to the <code>Ingredient</code> component. The JSX&#13;
spread operator is used to pass all the data to the <code>Ingredient</code>&#13;
component as props.</p>&#13;
&#13;
<p>Using spread operator:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="o">&lt;</code><code class="nx">Ingredient</code> <code class="p">{...</code><code class="nx">ingredient</code><code class="p">}</code> <code class="o">/&gt;</code></pre>&#13;
&#13;
<p>is another way of expressing:</p>&#13;
&#13;
<pre class="pagebreak-before" data-code-language="javascript" data-type="programlisting"><code class="o">&lt;</code><code class="nx">Ingredient</code>&#13;
  <code class="nx">amount</code><code class="o">=</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">.</code><code class="nx">amount</code><code class="p">}</code>&#13;
  <code class="nx">measurement</code><code class="o">=</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">.</code><code class="nx">measurement</code><code class="p">}</code>&#13;
  <code class="nx">name</code><code class="o">=</code><code class="p">{</code><code class="nx">ingredient</code><code class="p">.</code><code class="nx">name</code><code class="p">}</code>&#13;
<code class="err">/&gt;</code></pre>&#13;
&#13;
<p>So, given an ingredient with these fields:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">let</code> <code class="nx">ingredient</code> <code class="o">=</code> <code class="p">{</code>&#13;
  <code class="nx">amount</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code>&#13;
  <code class="nx">measurement</code><code class="o">:</code> <code class="s2">"cup"</code><code class="p">,</code>&#13;
  <code class="nx">name</code><code class="o">:</code> <code class="s2">"sugar"</code>&#13;
<code class="p">};</code></pre>&#13;
&#13;
<p>We get:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="o">&lt;</code><code class="nx">Ingredient</code> <code class="nx">amount</code><code class="o">=</code><code class="p">{</code><code class="mi">1</code><code class="p">}</code> <code class="nx">measurement</code><code class="o">=</code><code class="s2">"cup"</code> <code class="nx">name</code><code class="o">=</code><code class="s2">"sugar"</code> <code class="o">/&gt;</code></pre>&#13;
&#13;
<p>Now that we have components for ingredients and instructions, we can&#13;
compose <span class="keep-together">recipes</span> using these components:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/components/Recipe.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">IngredientsList</code> <code class="nx">from</code> <code class="s2">"./IngredientsList"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Instructions</code> <code class="nx">from</code> <code class="s2">"./Instructions"</code><code class="p">;</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">Recipe</code><code class="p">({</code> <code class="nx">name</code><code class="p">,</code> <code class="nx">ingredients</code><code class="p">,</code> <code class="nx">steps</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">section</code> <code class="nx">id</code><code class="o">=</code><code class="p">{</code><code class="nx">name</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">().</code><code class="nx">replace</code><code class="p">(</code><code class="sr">/ /g</code><code class="p">,</code> <code class="s2">"-"</code><code class="p">)}</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">name</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">IngredientsList</code> <code class="nx">list</code><code class="o">=</code><code class="p">{</code><code class="nx">ingredients</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Instructions</code> <code class="nx">title</code><code class="o">=</code><code class="s2">"Cooking Instructions"</code> <code class="nx">steps</code><code class="o">=</code><code class="p">{</code><code class="nx">steps</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Recipe</code><code class="p">;</code></pre>&#13;
&#13;
<p>First, we import the components we’re going to use:&#13;
<code>IngredientsList</code> and <code>Instructions</code>. Now we can use them to create the&#13;
<code>Recipe</code> component. Instead of a bunch of complicated code building out&#13;
the entire recipe in one place, we’ve expressed our recipe more&#13;
declaratively by composing smaller components. Not only is the code nice&#13;
and simple, but it also reads well. This shows us that a recipe should&#13;
display the name of the recipe, a list of ingredients, and some cooking&#13;
instructions. We’ve abstracted away what it means to display ingredients&#13;
and instructions into smaller, simple components.</p>&#13;
&#13;
<p>In a modular approach, the <code>Menu</code> component would look pretty similar.&#13;
The key difference is that it would live in its own file, import the&#13;
modules it needs to use, and export itself:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/components/Menu.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Recipe</code> <code class="nx">from</code> <code class="s2">"./Recipe"</code><code class="p">;</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">Menu</code><code class="p">({</code> <code class="nx">recipes</code> <code class="p">})</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">article</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">header</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Delicious</code> <code class="nx">Recipes</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/header&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">div</code> <code class="nx">className</code><code class="o">=</code><code class="s2">"recipes"</code><code class="o">&gt;</code>&#13;
        <code class="p">{</code><code class="nx">recipes</code><code class="p">.</code><code class="nx">map</code><code class="p">((</code><code class="nx">recipe</code><code class="p">,</code> <code class="nx">i</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="p">(</code>&#13;
          <code class="o">&lt;</code><code class="nx">Recipe</code> <code class="nx">key</code><code class="o">=</code><code class="p">{</code><code class="nx">i</code><code class="p">}</code> <code class="p">{...</code><code class="nx">recipe</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="p">))}</code>&#13;
      <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/article&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Menu</code><code class="p">;</code></pre>&#13;
&#13;
<p>We still need to use ReactDOM to render the <code>Menu</code> component. The main&#13;
file for the project is <em>index.js</em>. This will be responsible for&#13;
rendering the component to the DOM.</p>&#13;
&#13;
<p>Let’s create this file:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./src/index.js</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">render</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-dom"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Menu</code> <code class="nx">from</code> <code class="s2">"./components/Menu"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">data</code> <code class="nx">from</code> <code class="s2">"./data/recipes.json"</code><code class="p">;</code>&#13;
&#13;
<code class="nx">render</code><code class="p">(</code><code class="o">&lt;</code><code class="nx">Menu</code> <code class="nx">recipes</code><code class="o">=</code><code class="p">{</code><code class="nx">data</code><code class="p">}</code> <code class="o">/&gt;</code><code class="p">,</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">));</code></pre>&#13;
&#13;
<p>The first four statements import the necessary modules for our app to&#13;
work. Instead of loading <code>react</code> and <code>react-dom</code> via the <code>script</code> tag,&#13;
we import them so webpack can add them to our bundle. We also need the&#13;
<code>Menu</code> component and a sample data array that has been moved to a&#13;
separate module. It still contains two recipes: Baked Salmon and Fish&#13;
Tacos.</p>&#13;
&#13;
<p>All of our imported variables are local to the <em>index.js</em> file. When we&#13;
render the <code>Menu</code> component, we pass the array of recipe data to this&#13;
component as a property.</p>&#13;
&#13;
<p>The data is being pulled from the <em>recipes.json</em> file. This is the same&#13;
data we used earlier in the chapter, but now it’s following valid&#13;
JSON formatting rules:</p>&#13;
&#13;
<pre data-type="programlisting">// ./src/data/recipes.json&#13;
&#13;
[&#13;
  {&#13;
    "name": "Baked Salmon",&#13;
    "ingredients": [&#13;
      { "name": "Salmon", "amount": 1, "measurement": "lb" },&#13;
      { "name": "Pine Nuts", "amount": 1, "measurement": "cup" },&#13;
      { "name": "Butter Lettuce", "amount": 2, "measurement": "cups" },&#13;
      { "name": "Yellow Squash", "amount": 1, "measurement": "med" },&#13;
      { "name": "Olive Oil", "amount": 0.5, "measurement": "cup" },&#13;
      { "name": "Garlic", "amount": 3, "measurement": "cloves" }&#13;
    ],&#13;
    "steps": [&#13;
      "Preheat the oven to 350 degrees.",&#13;
      "Spread the olive oil around a glass baking dish.",&#13;
      "Add the yellow squash and place in the oven for 30 mins.",&#13;
      "Add the salmon, garlic, and pine nuts to the dish.",&#13;
      "Bake for 15 minutes.",&#13;
      "Remove from oven. Add the lettuce and serve."&#13;
    ]&#13;
  },&#13;
  {&#13;
    "name": "Fish Tacos",&#13;
    "ingredients": [&#13;
      { "name": "Whitefish", "amount": 1, "measurement": "lb" },&#13;
      { "name": "Cheese", "amount": 1, "measurement": "cup" },&#13;
      { "name": "Iceberg Lettuce", "amount": 2, "measurement": "cups" },&#13;
      { "name": "Tomatoes", "amount": 2, "measurement": "large" },&#13;
      { "name": "Tortillas", "amount": 3, "measurement": "med" }&#13;
    ],&#13;
    "steps": [&#13;
      "Cook the fish on the grill until cooked through.",&#13;
      "Place the fish on the 3 tortillas.",&#13;
      "Top them with lettuce, tomatoes, and cheese."&#13;
    ]&#13;
  }&#13;
]</pre>&#13;
&#13;
<p>Now that we’ve pulled our code apart into separate modules and files,&#13;
let’s create a build process with webpack that will put everything back&#13;
together into a single file. You may be thinking, “Wait, we just did all&#13;
of that work to break everything apart, and now we’re going to use a&#13;
tool to put it back together? Why on Earth…?” Splitting projects into&#13;
separate files typically makes larger projects easier to manage because&#13;
team members can work on separate components without overlap. It also&#13;
means that files can be easier to test.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="3. Creating the webpack build" data-type="sect3"><div class="sect3" id="idm45901643316216">&#13;
<h3>3. Creating the webpack build</h3>&#13;
&#13;
<p>In order to create a static build process with webpack, we’ll need to&#13;
install a few things. Everything we need can be installed with npm:</p>&#13;
&#13;
<pre data-type="programlisting">npm install --save-dev webpack webpack-cli</pre>&#13;
&#13;
<p>Remember that we’ve already installed React and ReactDOM.</p>&#13;
&#13;
<p>For this modular Recipes app to work, we’re going to need to tell&#13;
webpack how to bundle our source code into a single file. As of version&#13;
4.0.0, webpack does not require a configuration file to bundle a&#13;
project. If we don’t include a config file, webpack will run the&#13;
defaults to package our code. Using a config file, though, means&#13;
we’ll be able to customize our setup. Plus, this shows us some of the&#13;
magic of webpack instead of hiding it away. The default webpack&#13;
configuration file is always <span class="keep-together"><em>webpack.config.js</em></span>.</p>&#13;
&#13;
<p>The starting file for our Recipes app is <em>index.js</em>. It imports React,&#13;
ReactDOM, and the <em>Menu.js</em> file. This is what we want to run in the&#13;
browser first. Wherever webpack finds an <code>import</code> statement, it will&#13;
find the associated module in the filesystem and include it in the&#13;
bundle. <em>index.js</em> imports <em>Menu.js</em>, <em>Menu.js</em> imports <em>Recipe.js</em>,&#13;
<em>Recipe.js</em> imports <em>Instructions.js</em> and <em>IngredientsList.js</em>, and&#13;
<em>IngredientsList.js</em> imports <em>Ingredient.js</em>. Webpack will follow this&#13;
import tree and include all of these necessary modules in our bundle.&#13;
Traversal through all these files creates what’s called a&#13;
<em>dependency graph</em>. A dependency is just something our app needs, like a&#13;
component file, a library file like React, or an image. Picture each&#13;
file we need as a circle on the graph, with webpack drawing all the&#13;
lines between the circles to create the graph. That graph is the bundle.</p>&#13;
<div data-type="note" epub:type="note"><h1>Import Statements</h1>&#13;
<p>We’re<a data-primary="import statements" data-type="indexterm" id="idm45901642397368"/> using <code>import</code> statements, which are not presently supported by&#13;
most browsers or by Node.js. The reason <code>import</code> statements work is&#13;
that Babel will convert them into <code>require('module/path');</code>&#13;
statements in our final code. The <code>require</code> function is how CommonJS&#13;
modules are typically loaded.</p>&#13;
</div>&#13;
&#13;
<p>As webpack builds our bundle, we need to tell it to transform JSX&#13;
to React elements.</p>&#13;
&#13;
<p>The <em>webpack.config.js</em> file is just another module that exports a&#13;
JavaScript literal object that describes the actions webpack should&#13;
take. The configuration file should be saved to the root folder of the&#13;
project, right next to the <em>index.js</em> file:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// ./webpack.config.js</code>&#13;
&#13;
<code class="kd">var</code> <code class="nx">path</code> <code class="o">=</code> <code class="nx">require</code><code class="p">(</code><code class="s2">"path"</code><code class="p">);</code>&#13;
&#13;
<code class="nx">module</code><code class="p">.</code><code class="nx">exports</code> <code class="o">=</code> <code class="p">{</code>&#13;
  <code class="nx">entry</code><code class="o">:</code> <code class="s2">"./src/index.js"</code><code class="p">,</code>&#13;
  <code class="nx">output</code><code class="o">:</code> <code class="p">{</code>&#13;
    <code class="nx">path</code><code class="o">:</code> <code class="nx">path</code><code class="p">.</code><code class="nx">join</code><code class="p">(</code><code class="nx">__dirname</code><code class="p">,</code> <code class="s2">"dist"</code><code class="p">,</code> <code class="s2">"assets"</code><code class="p">),</code>&#13;
    <code class="nx">filename</code><code class="o">:</code> <code class="s2">"bundle.js"</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">};</code></pre>&#13;
&#13;
<p>First, we tell webpack that our client entry file is <em>./src/index.js</em>.&#13;
It will automatically build the dependency graph based on <code>import</code>&#13;
statements starting in that file. Next, we specify that we want to&#13;
output a bundled JavaScript file to <em>./dist/bundle.js</em>. This is where&#13;
webpack will place the final packaged JavaScript.</p>&#13;
&#13;
<p>Next, let’s install the necessary Babel dependencies. We’ll need&#13;
<code>babel-loader</code> and <code>@babel/core</code>:</p>&#13;
&#13;
<pre data-type="programlisting">npm install babel-loader @babel/core --save-dev</pre>&#13;
&#13;
<p>The next set of instructions for webpack consists of a list of loaders&#13;
to run on specified modules. This will be added to the config file under&#13;
the <code>module</code> field:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">module</code><code class="p">.</code><code class="nx">exports</code> <code class="o">=</code> <code class="p">{</code>&#13;
  <code class="nx">entry</code><code class="o">:</code> <code class="s2">"./src/index.js"</code><code class="p">,</code>&#13;
  <code class="nx">output</code><code class="o">:</code> <code class="p">{</code>&#13;
    <code class="nx">path</code><code class="o">:</code> <code class="nx">path</code><code class="p">.</code><code class="nx">join</code><code class="p">(</code><code class="nx">__dirname</code><code class="p">,</code> <code class="s2">"dist"</code><code class="p">,</code> <code class="s2">"assets"</code><code class="p">),</code>&#13;
    <code class="nx">filename</code><code class="o">:</code> <code class="s2">"bundle.js"</code>&#13;
  <code class="p">},</code>&#13;
  <code class="nx">module</code><code class="o">:</code> <code class="p">{</code>&#13;
    <code class="nx">rules</code><code class="o">:</code> <code class="p">[{</code> <code class="nx">test</code><code class="o">:</code> <code class="sr">/\.js$/</code><code class="p">,</code> <code class="nx">exclude</code><code class="o">:</code> <code class="sr">/node_modules/</code><code class="p">,</code> <code class="nx">loader</code><code class="o">:</code> <code class="s2">"babel-loader"</code> <code class="p">}]</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">};</code></pre>&#13;
&#13;
<p>The <code>rules</code> field is an array because there are many types of loaders&#13;
 you can incorporate with webpack. In this example, we’re only&#13;
incorporating the <code>babel-loader</code>. Each loader is a JavaScript object.&#13;
The <code>test</code> field is a regular expression that matches the file path of&#13;
each module that the loader should operate on. In this case, we’re&#13;
running the <code>babel-loader</code> on all imported JavaScript files except those&#13;
found in the <em>node_modules</em> folder.</p>&#13;
&#13;
<p>At this point, we need to specify presets for running Babel. When we set&#13;
a preset, we tell Babel which transforms to perform. In other words, we&#13;
can say, “Hey Babel. If you see some ESNext syntax here, go ahead and&#13;
transform that code into syntax we’re sure the browser understands. If&#13;
you see some JSX, transform that too.” Start by installing the presets:</p>&#13;
&#13;
<pre data-type="programlisting">npm install @babel/preset-env @babel/preset-react --save-dev</pre>&#13;
&#13;
<p>Then create one more file at the root of the project: <code>.babelrc</code>:</p>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code>&#13;
  <code class="nt">"presets"</code><code class="p">:</code> <code class="p">[</code><code class="s2">"@babel/preset-env"</code><code class="p">,</code> <code class="s2">"@babel/preset-react"</code><code class="p">]</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>All right! We’ve created something pretty cool: a project that resembles&#13;
a real React app! Let’s go ahead and run webpack to make sure this&#13;
works.</p>&#13;
&#13;
<p>Webpack is run statically. Typically, bundles are created before the app&#13;
is deployed to the server. You can run it from the command line using&#13;
npx:</p>&#13;
&#13;
<pre data-type="programlisting">npx webpack --mode development</pre>&#13;
&#13;
<p>Webpack will either succeed and create a bundle or fail and show you an&#13;
error. Most errors have to do with broken import references. When&#13;
debugging webpack errors, look closely at the filenames and file paths&#13;
used in <code>import</code> statements.</p>&#13;
&#13;
<p>You can also add an npm script to your <em>package.json</em> file to create a&#13;
shortcut:</p>&#13;
&#13;
<pre data-type="programlisting">  "scripts": {&#13;
    "build": "webpack --mode production"&#13;
  },</pre>&#13;
&#13;
<p>Then<a data-primary="" data-startref="JSXwpproject05" data-type="indexterm" id="idm45901642037400"/><a data-primary="" data-startref="Wproject05" data-type="indexterm" id="idm45901660770440"/> you can run the shortcut to generate the bundle:</p>&#13;
&#13;
<pre data-type="programlisting">npm run build</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Loading the Bundle" data-type="sect2"><div class="sect2" id="loading-the-bundle">&#13;
<h2>Loading the Bundle</h2>&#13;
&#13;
<p>We<a data-primary="JSX language extension" data-secondary="webpack" data-tertiary="bundle loading" data-type="indexterm" id="idm45901660956792"/><a data-primary="webpack" data-secondary="bundle loading" data-type="indexterm" id="idm45901661752904"/> have a bundle, so now what? We exported the bundle to the <em>dist</em>&#13;
folder. This folder contains the files we want to run on the web&#13;
server. The <em>dist</em> folder is where the <em>index.html</em> file should be&#13;
placed. This file needs to include a target <code>div</code> element where the&#13;
React <code>Menu</code> component will be mounted. It also requires a single&#13;
<code>script</code> tag that will load our bundled JavaScript:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting">// ./dist/index.html&#13;
&#13;
<code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="nt">&lt;html&gt;</code>&#13;
  <code class="nt">&lt;head&gt;</code>&#13;
    <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"utf-8"</code> <code class="nt">/&gt;</code>&#13;
    <code class="nt">&lt;title&gt;</code>React Recipes App<code class="nt">&lt;/title&gt;</code>&#13;
  <code class="nt">&lt;/head&gt;</code>&#13;
  <code class="nt">&lt;body&gt;</code>&#13;
    <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"root"</code><code class="nt">&gt;&lt;/div&gt;</code>&#13;
    <code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"bundle.js"</code><code class="nt">&gt;&lt;/script&gt;</code>&#13;
  <code class="nt">&lt;/body&gt;</code>&#13;
<code class="nt">&lt;/html&gt;</code></pre>&#13;
&#13;
<p>This is the home page for your app. It will load everything it needs&#13;
from one file, one HTTP request: <em>bundle.js</em>. You’ll need to deploy&#13;
these files to your web server or build a web server application that&#13;
will serve these files with something like Node.js or Ruby on Rails.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Source Mapping" data-type="sect2"><div class="sect2" id="source-mapping">&#13;
<h2>Source Mapping</h2>&#13;
&#13;
<p>Bundling<a data-primary="JSX language extension" data-secondary="webpack" data-tertiary="source mapping" data-type="indexterm" id="idm45901661721992"/><a data-primary="webpack" data-secondary="source mapping" data-type="indexterm" id="idm45901640308600"/> our code into a single file can cause some setbacks when it&#13;
comes time to debug the application in the browser. We can eliminate&#13;
this problem by providing a <em>source map</em>. A source map is a file that&#13;
maps a bundle to the original source files. With webpack, all we have to&#13;
do is add a couple lines to our <em>webpack.config.js</em> file.</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">//webpack.config.js with source mapping</code>&#13;
&#13;
<code class="nx">module</code><code class="p">.</code><code class="nx">exports</code> <code class="o">=</code> <code class="p">{</code>&#13;
  <code class="p">...</code>&#13;
  <code class="nx">devtool</code><code class="o">:</code> <code class="s2">"#source-map"</code> <code class="c1">// Add this option for source mapping</code>&#13;
<code class="p">};</code></pre>&#13;
&#13;
<p>Setting the <code>devtool</code> property to <code>'#source-map'</code> tells webpack that you&#13;
want to use source mapping. The next time you run webpack, you’ll see&#13;
that two output files are generated and added to the <em>dist</em> folder: the&#13;
original <em>bundle.js</em> and <em>bundle.js.map</em>.</p>&#13;
&#13;
<p>The source map is going to let you debug using your original source files.&#13;
In the Sources tab of your browser’s developer tools, you should find a&#13;
folder named <em>webpack://</em>. Inside of this folder, you’ll see all the&#13;
source files in your bundle, as shown in <a data-type="xref" href="#sources_panel">Figure 5-4</a>.</p>&#13;
&#13;
<figure><div class="figure" id="sources_panel">&#13;
<img alt="image" src="assets/lrc2_0504.png"/>&#13;
<h6><span class="label">Figure 5-4. </span>Sources panel of Chrome Developer Tools</h6>&#13;
</div></figure>&#13;
&#13;
<p>You can debug from these files using the browser step-through debugger.&#13;
Clicking on any line number adds a breakpoint. Refreshing the browser&#13;
will pause JavaScript processing when any breakpoints are reached in&#13;
your source file. You can inspect scoped variables in the Scope panel or&#13;
add variables to watch in the Watch panel.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Create React App" data-type="sect2"><div class="sect2" id="create-react-app">&#13;
<h2>Create React App</h2>&#13;
&#13;
<p>A<a data-primary="JSX language extension" data-secondary="webpack" data-tertiary="app creation" data-type="indexterm" id="idm45901639978648"/><a data-primary="webpack" data-secondary="app creation" data-type="indexterm" id="idm45901639977368"/><a data-primary="Create React App" data-type="indexterm" id="idm45901639976424"/> pretty amazing tool to have at your disposal as a React developer is&#13;
Create React App, a command-line tool that autogenerates a React&#13;
project. Create React App was inspired by the&#13;
<a href="https://ember-cli.com">Ember CLI project</a>, and it lets developers get&#13;
started with React projects quickly without the manual configuration of&#13;
webpack, Babel, ESLint, and associated tools.</p>&#13;
&#13;
<p>To get started with Create React App, install the package globally:</p>&#13;
&#13;
<pre data-type="programlisting">npm install -g create-react-app</pre>&#13;
&#13;
<p>Then, use the command and the name of the folder where you’d like the&#13;
app to be created:</p>&#13;
&#13;
<pre data-type="programlisting">create-react-app my-project</pre>&#13;
<div data-type="note" epub:type="note"><h1>npx</h1>&#13;
<p>You can also use npx to run Create React App without the need for a&#13;
global install. Simply run <code>npx create-react-app my-project</code>.</p>&#13;
</div>&#13;
&#13;
<p>This will create a React project in that directory with just three&#13;
dependencies: React, ReactDOM, and <code>react-scripts</code>. <code>react-scripts</code> was&#13;
also created by Facebook and is where the real magic happens. It&#13;
installs Babel, ESLint, webpack, and more so that you don’t have to&#13;
configure them manually. Within the generated project folder, you’ll&#13;
also find a <em>src</em> folder containing an <em>App.js</em> file. Here, you can edit&#13;
the root component and import other component files.</p>&#13;
&#13;
<p>From within the <em>my-react-project</em> folder, you can run <code>npm start</code>. If&#13;
you prefer, you can also run <code>yarn start</code>. This will start your&#13;
application on port 3000.</p>&#13;
&#13;
<p>You can run tests with <code>npm test</code> or <code>yarn test</code>. This runs all of the&#13;
test files in the project in an interactive mode.</p>&#13;
&#13;
<p>You can also run the <code>npm run build</code> command. Using yarn, run&#13;
<code>yarn build</code>.</p>&#13;
&#13;
<p>This will create a production-ready bundle that has been transformed and&#13;
minified.</p>&#13;
&#13;
<p>Create React App is a great tool for beginners and experienced React&#13;
developers alike. As the tool evolves, more functionality will likely be&#13;
added, so you can keep an eye on the changes on&#13;
<a href="https://github.com/facebook/create-react-app">GitHub</a>. Another way to get started with React without having to worry about setting up your own customized webpack build is to use CodeSandbox. CodeSandbox is an IDE that runs online at <a href="https://codesandbox.io"><em class="hyperlink">https://codesandbox.io</em></a>.</p>&#13;
&#13;
<p>In this chapter, we leveled up our React skills by learning about JSX. We created&#13;
components. We broke those components into a project structure, and we&#13;
learned more about Babel and webpack. Now we’re ready to take our&#13;
knowledge of components to the next level. It’s time to talk about&#13;
Hooks.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>