<html><head></head><body><section data-pdf-bookmark="Chapter 17. Listing Data in the App" data-type="chapter" epub:type="chapter"><div class="chapter" id="app_lists">&#13;
<h1><span class="label">Chapter 17. </span>Listing Data in the App</h1>&#13;
&#13;
&#13;
<p>In the last chapter, we went through the basics of starting a new project in Android Studio and Xcode. We were also charged by a mysterious librarian to build an app for a library that, presumably, has magic powers. This is just a typical day in the life of a mobile app developer.</p>&#13;
&#13;
<p>Within<a data-primary="application data" data-secondary="task overview" data-type="indexterm" id="idm46177214106616"/> this chapter, we’re going to add a bit more structure and scaffolding to our app. More specifically, we will learn:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>How to customize and tweak views</p>&#13;
</li>&#13;
<li>&#13;
<p>How to trigger actions from button</p>&#13;
</li>&#13;
<li>&#13;
<p>How to show lists of data</p>&#13;
</li>&#13;
<li>&#13;
<p>How to transition between two screens</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>This is a long chapter, so let’s get started. Our future library patrons are waiting.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Sprucing Up Views" data-type="sect1"><div class="sect1" id="idm46177214100936">&#13;
<h1>Sprucing Up Views</h1>&#13;
&#13;
<p>If you take a look at both the Android and iOS apps in their current state, they are fairly skeletal and uninviting. We can do a better job than a basic label that says “Welcome” displayed against a blank background. In fact, both platforms have a pretty robust set of built-in tools for styling that we can use to make our app more presentable and inviting. We’re not going to get in depth into those tools—the tooling is quite deep and the possibilities are near limitless with what you can create—but for now let’s at least spruce up the apps a bit.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Android" data-type="sect2"><div class="sect2" id="idm46177214098904">&#13;
<h2>Android</h2>&#13;
&#13;
<p>Referring<a data-primary="application data" data-secondary="sprucing up views" data-tertiary="Android" data-type="indexterm" id="ADviewand17"/><a data-primary="Android" data-secondary="views" data-tertiary="sprucing up" data-type="indexterm" id="Aviewspruc17"/><a data-primary="views" data-secondary="Android" data-tertiary="sprucing up" data-type="indexterm" id="Vandspr17"/><a data-primary="buttons, adding" data-secondary="Android" data-type="indexterm" id="BAand17"/><a data-primary="Android" data-secondary="application data" data-tertiary="buttons" data-type="indexterm" id="Aadatabut17"/><a data-primary="application data" data-secondary="buttons" data-tertiary="Android" data-type="indexterm" id="idm46177214089880"/> back to <a data-type="xref" href="ch15.html#app_setup">Chapter 15</a>, you’ll see that we started with a simple <code>Activity</code> when we chose the project type and were able to update the text. Let use this same <code>Activity</code> and XML layout to update our welcome screen. For this simple version, we won’t use any kind of login or authentication, so our welcome screen is probably as simple as a logo, a small amount of copy introducing the library, and maybe an Accept Terms label and checkbox. Let’s also include a button at the bottom of the screen to browse the library’s corpus, which will be disabled until the Accept Terms checkbox is ticked. Once enabled, tapping this button will launch into one of our primary UI controllers, tentatively named <code>BrowseLibraryActivity</code>.</p>&#13;
&#13;
<p>Also remember that we have no idea how large the screen will be when some user runs our app on a device left over from 2010, nor on a device from 2024. Nor can we be sure of the orientation (landscape or portrait), and if we’re observing accessibility recommendations, even our font size can vary wildly depending on user or device settings. The bottom line is that we’ll need all that content to scroll, so we can ensure the user can read all the information we’re presenting, opt in (or not) to the terms we establish, and be able to tap the browse button to start wandering our virtual stacks.</p>&#13;
&#13;
<p>Let’s establish some facts. In Android, resources like strings and drawables are generally held in XML structures identified by a system-generated integer, as described earlier when creating and referencing our logo image. Read on for more details.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Adding string and drawable resources" data-type="sect3"><div class="sect3" id="idm46177214084184">&#13;
<h3>Adding string and drawable resources</h3>&#13;
&#13;
<p>So we’ll need a few pieces of copy: an introduction to the app and the library, something about copyrighted material that the user digitally agrees to, and button labels. You’ll recall that we created our logo file and registered with the system simply by placing it in the appropriate resource directory. For string values, we’ll want a different resource type: <code>values</code>. The traditional format is <em>/res/values/strings.xml</em>, and each string is a <code>string</code> node with a <code>name</code> attribute identifying it during compilation; the string value is the text content of the node.</p>&#13;
&#13;
<p>To <em>strings.xml</em>, let’s add some nodes to represent our copy:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</code>&#13;
<code class="nt">&lt;resources&gt;</code>&#13;
  <code class="nt">&lt;string</code> <code class="na">name=</code><code class="s">"app_name"</code><code class="nt">&gt;</code>DunnAndLewisMemorial<code class="nt">&lt;/string&gt;</code>&#13;
  <code class="nt">&lt;string</code> <code class="na">name=</code><code class="s">"introduction"</code><code class="nt">&gt;</code>Welcome to the app for the Dunn <code class="ni">&amp;amp;</code>&#13;
    Lewis Memorial Library! This library includes books of all&#13;
    stripes, from code books on Java 8 to code books on Java 9!&#13;
    <code class="nt">&lt;/string&gt;</code>&#13;
  <code class="nt">&lt;string</code> <code class="na">name=</code><code class="s">"terms"</code><code class="nt">&gt;</code>All books in the Dunn <code class="ni">&amp;amp;</code> Lewis Memorial&#13;
    Library are copyrighted by their respective authors, and all&#13;
    state and federal copyright laws apply in full effect&#13;
    and will be enforced by the library.<code class="nt">&lt;/string&gt;</code>&#13;
  <code class="nt">&lt;string</code> <code class="na">name=</code><code class="s">"terms_accept_label"</code><code class="nt">&gt;</code>Do you accept these terms?<code class="nt">&lt;/string&gt;</code>&#13;
  <code class="nt">&lt;string</code> <code class="na">name=</code><code class="s">"browse_button_label"</code><code class="nt">&gt;</code>Browser<code class="nt">&lt;/string&gt;</code>&#13;
<code class="nt">&lt;/resources&gt;</code></pre>&#13;
&#13;
<p>There. Now we not only have our logo bitmap as a compiled resource, but all of our welcome screen copy as well.</p>&#13;
&#13;
<p>Let’s create a new layout file for this <code>Activity</code>:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</code>&#13;
<code class="nt">&lt;ScrollView</code>&#13;
    <code class="na">xmlns:android=</code><code class="s">"http://schemas.android.com/apk/res/android"</code>&#13;
    <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
    <code class="na">android:layout_height=</code><code class="s">"match_parent"</code>&#13;
    <code class="na">android:background=</code><code class="s">"@android:color/white"</code><code class="nt">&gt;</code>&#13;
&#13;
  <code class="nt">&lt;LinearLayout</code>&#13;
      <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
      <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
      <code class="na">android:orientation=</code><code class="s">"vertical"</code><code class="nt">&gt;</code>&#13;
&#13;
    <code class="nt">&lt;ImageView</code>&#13;
        <code class="na">android:id=</code><code class="s">"@+id/logo"</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:adjustViewBounds=</code><code class="s">"true"</code>&#13;
        <code class="na">android:src=</code><code class="s">"@drawable/dlml_logo"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;TextView</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/introduction"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;TextView</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/terms"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;CheckBox</code>&#13;
        <code class="na">android:id=</code><code class="s">"@+id/terms_checkbox"</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/terms_accept_label"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;Button</code>&#13;
        <code class="na">android:id=</code><code class="s">"@+id/browse_button"</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:enabled=</code><code class="s">"false"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/browse_button_label"</code> <code class="nt">/&gt;</code>&#13;
&#13;
  <code class="nt">&lt;/LinearLayout&gt;</code>&#13;
&#13;
<code class="nt">&lt;/ScrollView&gt;</code></pre>&#13;
&#13;
<p>So what’s going on here?</p>&#13;
&#13;
<p>Let’s take it step by step:</p>&#13;
<ol>&#13;
<li>&#13;
<p>The root node of our layout is a <code>ScrollView</code>, which scrolls content vertically, by default, as needed. On most screens, this small amount of content may not need to scroll at all, but on small or low-density screens, on devices with a significant text magnification setting, or even on a standard device in landscape mode, this may come into play. It’s critically important that all interactive UI elements, even those that simply provide critical information to the user, be reachable somehow, and the traditional user experience to achieve this is by scrolling.</p>&#13;
</li>&#13;
<li>&#13;
<p>We know that all the rest of our components will be stacked vertically, each successive element positioned just below the last. This is traditional flow in almost every modern UI engine, from a traditional HTML web page, to a PDF document, to documents created by editors like Pages or MS Word, markdown, AsciiDoc(tor), troff, (La)TeX, etc. The framework-provided <code>LinearLayout</code> does just that. Note that the default orientation of <code>LinearLayout</code> is horizontal, so that each element is positioned to the right of the preceding elements; we must set the attribute <code>orientation</code> to the value of <code>vertical</code> to get the stacked interface that we want.</p>&#13;
</li>&#13;
<li>&#13;
<p>Next comes our logo. We want this image to fill the width of the page but maintain aspect ratio vertically; thus, we use the following layout attributes:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting">android:layout_width="match_parent"&#13;
android:layout_height="wrap_content"</pre>&#13;
</li>&#13;
<li>&#13;
<p>A simple block of text, describing the app and the library.</p>&#13;
</li>&#13;
<li>&#13;
<p>Another text block, this one providing some minimal legalese to protect our authors’ copyrights.</p>&#13;
</li>&#13;
<li>&#13;
<p>A <code>CheckBox</code> instance with a label. While this <code>CheckBox</code> is not checked, we’ll provide logic so that the button following it will remain disabled.</p>&#13;
</li>&#13;
<li>&#13;
<p>A simple <code>Button</code> instance that, when enabled and tapped, will take the user to a screen that let’s them start to explore the library.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>That’s it! Since our <code>MainActivity</code> already calls <code>setContentView</code> and passes in the compiled identifier for this layout file, the initial welcome screen will now show the UI elements described, rather than the simple “Hello World!” it did previously.</p>&#13;
&#13;
<p>Since the preceding example layout is explicitly bare bones, to just demonstrate what you absolutely <em>need</em> to display the UI, let’s add just a few lines of instructions around whitespace and element gravity to dress it up a bit:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</code>&#13;
<code class="nt">&lt;ScrollView</code>&#13;
    <code class="na">xmlns:android=</code><code class="s">"http://schemas.android.com/apk/res/android"</code>&#13;
    <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
    <code class="na">android:layout_height=</code><code class="s">"match_parent"</code><code class="nt">&gt;</code>&#13;
&#13;
  <code class="nt">&lt;LinearLayout</code>&#13;
      <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
      <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
      <code class="na">android:orientation=</code><code class="s">"vertical"</code><code class="nt">&gt;</code>&#13;
&#13;
    <code class="nt">&lt;ImageView</code>&#13;
        <code class="na">android:id=</code><code class="s">"@+id/logo"</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_gravity=</code><code class="s">"center|top"</code>&#13;
        <code class="na">android:layout_marginBottom=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:adjustViewBounds=</code><code class="s">"true"</code>&#13;
        <code class="na">android:src=</code><code class="s">"@drawable/dlml_logo"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;TextView</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_marginBottom=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:layout_marginEnd=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:layout_marginStart=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:fontFamily=</code><code class="s">"serif"</code>&#13;
        <code class="na">android:lineSpacingMultiplier=</code><code class="s">"1.3"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/introduction"</code>&#13;
        <code class="na">android:textColor=</code><code class="s">"@color/colorPrimary"</code>&#13;
        <code class="na">android:textSize=</code><code class="s">"14sp"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;TextView</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_marginBottom=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:layout_marginEnd=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:layout_marginStart=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:fontFamily=</code><code class="s">"serif"</code>&#13;
        <code class="na">android:lineSpacingMultiplier=</code><code class="s">"1.3"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/terms"</code>&#13;
        <code class="na">android:textColor=</code><code class="s">"@color/colorPrimary"</code>&#13;
        <code class="na">android:textSize=</code><code class="s">"14sp"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;CheckBox</code>&#13;
        <code class="na">android:id=</code><code class="s">"@+id/terms_checkbox"</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_gravity=</code><code class="s">"center"</code>&#13;
        <code class="na">android:layout_marginBottom=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:layout_marginEnd=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:layout_marginStart=</code><code class="s">"16dp"</code>&#13;
        <code class="na">android:fontFamily=</code><code class="s">"serif"</code>&#13;
        <code class="na">android:lineSpacingMultiplier=</code><code class="s">"1.3"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/terms_accept_label"</code>&#13;
        <code class="na">android:textColor=</code><code class="s">"@color/colorPrimary"</code>&#13;
        <code class="na">android:textSize=</code><code class="s">"14sp"</code> <code class="nt">/&gt;</code>&#13;
&#13;
    <code class="nt">&lt;Button</code>&#13;
        <code class="na">android:id=</code><code class="s">"@+id/browse_button"</code>&#13;
        <code class="na">android:layout_width=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_height=</code><code class="s">"wrap_content"</code>&#13;
        <code class="na">android:layout_gravity=</code><code class="s">"center"</code>&#13;
        <code class="na">android:enabled=</code><code class="s">"false"</code>&#13;
        <code class="na">android:text=</code><code class="s">"@string/browse_button_label"</code> <code class="nt">/&gt;</code>&#13;
&#13;
  <code class="nt">&lt;/LinearLayout&gt;</code>&#13;
&#13;
<code class="nt">&lt;/ScrollView&gt;</code></pre>&#13;
&#13;
<p>Other than the addition of margins, font specs, and gravity, you may also notice we added the attribute <code>adjustViewBounds</code> to the <code>ImageView</code> representing the logo. While you can see we’re not doing extensive <code>View</code> manipulation at this point, I do feel like this one is worth a quick detour, since it comes up very often and can throw even seasoned developers for a loop, since the behavior is fairly nonstandard when compared to our layout or drawing frameworks.</p>&#13;
&#13;
<p>From the <a href="https://oreil.ly/qKi6P">developer documentation</a>, we find this definition:</p>&#13;
<blockquote>&#13;
<p>Set this to true if you want the ImageView to adjust its bounds to preserve the aspect ratio of its drawable.</p></blockquote>&#13;
&#13;
<p>In simpler terms, if we do not set this attribute to <code>true</code>, the <code>ImageView</code> may use and consider whitespace part of its drawing area, which may appear as margins or padding that were not specified. When in doubt, set this attribute to true for any <code>ImageView</code> for which you don’t have specifically distinct behavior reserved. It may not seem like much, but if you need your images to line up with your screen or other elements in a pixel-perfect fashion, this is an attribute you’ll want to know about. On we go!</p>&#13;
&#13;
<p>Run your app, and you should see something like <a data-type="xref" href="#app_welcome_screen">Figure 17-1</a>.</p>&#13;
&#13;
<p>With our visible UI already in a spiffy state, we’ll want to wire up some of the behavior for the <code>CheckBox</code> and <code>Button</code> instances we have.</p>&#13;
&#13;
<p>We’ll want the submit button at the bottom of the screen to launch a UI that’ll allow the user to browse our books; the button should be disabled unless the user has <span class="keep-together">indicated</span> he or she accepts our terms (basically, just reminding our users that the copyrights on our books are still enforceable when presented digitally). Let’s see how to do that in code.</p>&#13;
&#13;
<figure class="width-30"><div class="figure" id="app_welcome_screen">&#13;
<img alt="A screenshot of our new welcome screen" src="assets/nmdv_1701.png"/>&#13;
<h6><span class="label">Figure 17-1. </span>Welcome screen</h6>&#13;
</div></figure>&#13;
&#13;
<p>First, let’s open our <em>MainActivity.java</em> file, which is responsible for controlling the welcome screen. You’ll notice the line <code>setContentView(R.layout.main)</code>, which will inflate the XML view nodes from the previous chapter and draw them on the screen. At<a data-primary="Java" data-secondary="application data" data-tertiary="sprucing up views" data-type="indexterm" id="Jappview17"/><a data-primary="Kotlin" data-secondary="application data" data-tertiary="sprucing up views" data-type="indexterm" id="Kadview17"/> the moment, it looks something like this:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177213691272">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MainActivity</code> <code class="kd">extends</code> <code class="n">Activity</code> <code class="o">{</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">onCreate</code><code class="o">(</code><code class="n">Bundle</code> <code class="n">savedInstanceState</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">.</code><code class="na">onCreate</code><code class="o">(</code><code class="n">savedInstanceState</code><code class="o">);</code>&#13;
    <code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_main</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="k">class</code> <code class="nc">MainActivity</code> <code class="p">:</code> <code class="n">Activity</code><code class="p">()</code> <code class="p">{</code>&#13;
&#13;
  <code class="n">override</code> <code class="n">fun</code> <code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">:</code> <code class="n">Bundle</code><code class="err">?</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="nb">super</code><code class="o">.</code><code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">)</code>&#13;
    <code class="n">setContentView</code><code class="p">(</code><code class="n">R</code><code class="o">.</code><code class="n">layout</code><code class="o">.</code><code class="n">activity_main</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>Pretty straightforward, right? Well, we need to do a little more to get the special behavior we just described.</p>&#13;
&#13;
<p>Next, we know we’ll need to perform operations on both the checkbox and the button, so let’s grab references to those with the <code>findViewById</code> method, available to both <code>Activity</code> and <code>View</code> instances. We’ll also declare member variables to hold those references. Your activity code should now look something like this:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177213662232">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MainActivity</code> <code class="kd">extends</code> <code class="n">Activity</code> <code class="o">{</code>&#13;
&#13;
  <code class="kd">private</code> <code class="n">CheckBox</code> <code class="n">mTermsCheckbox</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="n">Button</code> <code class="n">mBrowseButton</code><code class="o">;</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">onCreate</code><code class="o">(</code><code class="n">Bundle</code> <code class="n">savedInstanceState</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">.</code><code class="na">onCreate</code><code class="o">(</code><code class="n">savedInstanceState</code><code class="o">);</code>&#13;
    <code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_main</code><code class="o">);</code>&#13;
    <code class="n">mTermsCheckbox</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">terms_checkbox</code><code class="o">);</code>&#13;
    <code class="n">mBrowseButton</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">browse_button</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>You’ll notice a neat thing in the Kotlin version of the preceding code—it’s all done for you! You’ll have a <code>TextView</code> instance available as <code>terms_checkbox</code> and a <code>Button</code> instance available as <code>browse_button</code>, without writing any additional code. <code>Activity</code> instances in Kotlin, as well as any class that implements <code>LayoutContainer</code>, will automatically read any <code>View</code> with an ID in the layout as a member variable with a name equal to the ID. See for yourself:</p>&#13;
<aside class="java-kotlin less_space pagebreak-before" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177213446200">&#13;
<h5/>&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">MainActivity</code> <code class="p">:</code> <code class="n">Activity</code><code class="p">()</code> <code class="p">{</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">:</code> <code class="n">Bundle</code><code class="p">?)</code> <code class="p">{</code>&#13;
    <code class="k">super</code><code class="p">.</code><code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">)</code>&#13;
    <code class="n">setContentView</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">layout</code><code class="p">.</code><code class="n">activity_main</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>Great! We’ve got a visible UI, and we have in-memory references to some UI elements that we’ll want to perform some logic on. Let’s think about the specification we described earlier:</p>&#13;
<ol>&#13;
<li>&#13;
<p>The browse button should start a new <code>Activity</code> to allow the user to explore the library’s corpus.</p>&#13;
</li>&#13;
<li>&#13;
<p>The browse button should be disabled as long as the user has not checked the “Accept Terms” <code>CheckBox</code> element.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>For the first requirement, we need to attach a <code>View.OnClickListener</code> instance to the <code>Button</code>. While there are several ways to do this, described in <a data-type="xref" href="ch04.html#topics_user_input">Chapter 4</a> on user input, we’ll use method references to keep things short yet readable. Our <code>View.OnClickListener</code> implementation just needs to be a method that returns <code>void</code> and accepts a single <code>View</code> parameter.</p>&#13;
&#13;
<p>Let’s give it a shot:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177213368088">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MainActivity</code> <code class="kd">extends</code> <code class="n">Activity</code> <code class="o">{</code>&#13;
&#13;
  <code class="kd">private</code> <code class="n">CheckBox</code> <code class="n">mTermsCheckbox</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="n">Button</code> <code class="n">mBrowseButton</code><code class="o">;</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">onCreate</code><code class="o">(</code><code class="n">Bundle</code> <code class="n">savedInstanceState</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">.</code><code class="na">onCreate</code><code class="o">(</code><code class="n">savedInstanceState</code><code class="o">);</code>&#13;
    <code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_main</code><code class="o">);</code>&#13;
    <code class="n">mTermsCheckbox</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">terms_checkbox</code><code class="o">);</code>&#13;
    <code class="n">mBrowseButton</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">browse_button</code><code class="o">);</code>&#13;
    <code class="n">mBrowseButton</code><code class="o">.</code><code class="na">setOnClickListener</code><code class="o">(</code><code class="k">this</code><code class="o">::</code><code class="n">browseContent</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">browseContent</code><code class="o">(</code><code class="n">View</code> <code class="n">view</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">Intent</code> <code class="n">intent</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Intent</code><code class="o">(</code><code class="k">this</code><code class="o">,</code> <code class="n">BrowseContentActivity</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>&#13;
    <code class="n">startActivity</code><code class="o">(</code><code class="n">intent</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">MainActivity</code> <code class="p">:</code> <code class="n">Activity</code><code class="p">()</code> <code class="p">{</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">:</code> <code class="n">Bundle</code><code class="p">?)</code> <code class="p">{</code>&#13;
    <code class="k">super</code><code class="p">.</code><code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">)</code>&#13;
    <code class="n">setContentView</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">layout</code><code class="p">.</code><code class="n">activity_main</code><code class="p">)</code>&#13;
    <code class="n">browse_button</code><code class="p">.</code><code class="n">setOnClickListener</code><code class="p">(</code><code class="o">::</code><code class="n">browseContent</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="k">private</code> <code class="k">fun</code> <code class="nf">browseContent</code><code class="p">(</code><code class="n">view</code><code class="p">:</code> <code class="n">View</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">val</code> <code class="py">intent</code> <code class="p">=</code> <code class="n">Intent</code><code class="p">(</code><code class="k">this</code><code class="p">,</code> <code class="n">BrowseContentActivity</code><code class="o">::</code><code class="k">class</code><code class="p">.</code><code class="n">java</code><code class="p">)</code>&#13;
    <code class="n">startActivity</code><code class="p">(</code><code class="n">intent</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>There we go—we attach the method <code>browseContent</code> to the button as its click listener. You might notice that lint will probably complain that <code>BrowseContentActivity</code> doesn’t exist—let’s stub that out for now. Create a minimal <code>Activity</code> file, like so:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177213204328">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">BrowseContentActivity</code> <code class="kd">extends</code> <code class="n">Activity</code> <code class="o">{</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">onCreate</code><code class="o">(</code><code class="nd">@Nullable</code> <code class="n">Bundle</code> <code class="n">savedInstanceState</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">.</code><code class="na">onCreate</code><code class="o">(</code><code class="n">savedInstanceState</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">BrowseContentActivity</code> <code class="p">:</code> <code class="n">Activity</code><code class="p">()</code> <code class="p">{</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">:</code> <code class="n">Bundle</code><code class="p">?)</code> <code class="p">{</code>&#13;
    <code class="k">super</code><code class="p">.</code><code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>And don’t forget to register it with your manifest!</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</code>&#13;
<code class="nt">&lt;manifest</code> <code class="na">package=</code><code class="s">"com.dlml"</code>&#13;
          <code class="na">xmlns:android=</code><code class="s">"http://schemas.android.com/apk/res/android"</code>&#13;
          <code class="na">xmlns:tools=</code><code class="s">"http://schemas.android.com/tools"</code><code class="nt">&gt;</code>&#13;
&#13;
  <code class="nt">&lt;application</code>&#13;
      <code class="na">android:icon=</code><code class="s">"@mipmap/ic_launcher"</code>&#13;
      <code class="na">android:label=</code><code class="s">"@string/app_name"</code>&#13;
      <code class="na">android:roundIcon=</code><code class="s">"@mipmap/ic_launcher_round"</code>&#13;
      <code class="na">android:supportsRtl=</code><code class="s">"true"</code>&#13;
      <code class="na">android:theme=</code><code class="s">"@style/DlmlTheme"</code><code class="nt">&gt;</code>&#13;
&#13;
      <code class="nt">&lt;activity</code> <code class="na">android:name=</code><code class="s">".MainActivity"</code><code class="nt">&gt;</code>&#13;
        <code class="nt">&lt;intent-filter&gt;</code>&#13;
          <code class="nt">&lt;action</code> <code class="na">android:name=</code><code class="s">"android.intent.action.MAIN"</code> <code class="nt">/&gt;</code>&#13;
          <code class="nt">&lt;category</code> <code class="na">android:name=</code><code class="s">"android.intent.category.LAUNCHER"</code> <code class="nt">/&gt;</code>&#13;
        <code class="nt">&lt;/intent-filter&gt;</code>&#13;
      <code class="nt">&lt;/activity&gt;</code>&#13;
&#13;
      <code class="nt">&lt;activity</code> <code class="na">android:name=</code><code class="s">".BrowseContentActivity"</code> <code class="nt">/&gt;</code>&#13;
&#13;
  <code class="nt">&lt;/application&gt;</code>&#13;
&#13;
<code class="nt">&lt;/manifest&gt;</code></pre>&#13;
&#13;
<p>Next, we want to make sure the button is disabled unless the Accept Terms <code>CheckBox</code> is checked. Let’s start off with <code>enabled="false"</code> in the XML layout, and then we’ll update that as the check state of the <code>CheckBox</code> changes. To do that, we’ll need an <code>OnCheckChangedListener</code>, which we’ll again use a method reference for. The contract of the <code>OnCheckChangedListener</code> requires a method that returns <code>void</code> and accepts two parameters: the compound <code>Button</code> instance that can be a <code>CheckBox</code>, <code>Switch</code>, or similar UI widget, as well as the boolean state of the toggle. The <code>onCheckChanged</code> method defined in the following meets those criteria; let’s attach that to the <code>CheckBox</code> reference we obtained earlier, and we’re in business:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177212938712">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MainActivity</code> <code class="kd">extends</code> <code class="n">Activity</code> <code class="o">{</code>&#13;
&#13;
  <code class="kd">private</code> <code class="n">CheckBox</code> <code class="n">mTermsCheckbox</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="n">Button</code> <code class="n">mBrowseButton</code><code class="o">;</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">onCreate</code><code class="o">(</code><code class="n">Bundle</code> <code class="n">savedInstanceState</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">.</code><code class="na">onCreate</code><code class="o">(</code><code class="n">savedInstanceState</code><code class="o">);</code>&#13;
    <code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_main</code><code class="o">);</code>&#13;
    <code class="n">mTermsCheckbox</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">terms_checkbox</code><code class="o">);</code>&#13;
    <code class="n">mTermsCheckbox</code><code class="o">.</code><code class="na">setOnCheckedChangeListener</code><code class="o">(</code><code class="k">this</code><code class="o">::</code><code class="n">onCheckChanged</code><code class="o">);</code>&#13;
    <code class="n">mBrowseButton</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">browse_button</code><code class="o">);</code>&#13;
    <code class="n">mBrowseButton</code><code class="o">.</code><code class="na">setOnClickListener</code><code class="o">(</code><code class="k">this</code><code class="o">::</code><code class="n">browseContent</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">onCheckChanged</code><code class="o">(</code><code class="n">Button</code> <code class="n">button</code><code class="o">,</code> <code class="kt">boolean</code> <code class="n">checked</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mBrowseButton</code><code class="o">.</code><code class="na">setEnabled</code><code class="o">(</code><code class="n">checked</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">private</code> <code class="kt">void</code> <code class="nf">browseContent</code><code class="o">(</code><code class="n">View</code> <code class="n">view</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">Intent</code> <code class="n">intent</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Intent</code><code class="o">(</code><code class="k">this</code><code class="o">,</code> <code class="n">BrowseContentActivity</code><code class="o">.</code><code class="na">class</code><code class="o">);</code>&#13;
    <code class="n">startActivity</code><code class="o">(</code><code class="n">intent</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">MainActivity</code> <code class="p">:</code> <code class="n">Activity</code><code class="p">()</code> <code class="p">{</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">:</code> <code class="n">Bundle</code><code class="p">?)</code> <code class="p">{</code>&#13;
    <code class="k">super</code><code class="p">.</code><code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">)</code>&#13;
    <code class="n">setContentView</code><code class="p">(</code><code class="n">com</code><code class="p">.</code><code class="n">oreilly</code><code class="p">.</code><code class="n">R</code><code class="p">.</code><code class="n">layout</code><code class="p">.</code><code class="n">activity_main</code><code class="p">)</code>&#13;
    <code class="n">browse_button</code><code class="p">.</code><code class="n">setOnClickListener</code><code class="p">(</code><code class="o">::</code><code class="n">browseContent</code><code class="p">)</code>&#13;
    <code class="n">terms_checkbox</code><code class="p">.</code><code class="n">setOnCheckedChangeListener</code><code class="p">(</code><code class="o">::</code><code class="n">onCheckChanged</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="k">private</code> <code class="k">fun</code> <code class="nf">browseContent</code><code class="p">(</code><code class="n">view</code><code class="p">:</code> <code class="n">View</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">val</code> <code class="py">intent</code> <code class="p">=</code> <code class="n">Intent</code><code class="p">(</code><code class="k">this</code><code class="p">,</code> <code class="n">BrowseContentActivity</code><code class="o">::</code><code class="k">class</code><code class="p">.</code><code class="n">java</code><code class="p">)</code>&#13;
    <code class="n">startActivity</code><code class="p">(</code><code class="n">intent</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="k">private</code> <code class="k">fun</code> <code class="nf">onCheckChanged</code><code class="p">(</code><code class="n">button</code><code class="p">:</code> <code class="n">Button</code><code class="p">,</code> <code class="n">checked</code><code class="p">:</code> <code class="n">Boolean</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="n">browse_button</code><code class="p">.</code><code class="n">isEnabled</code> <code class="p">=</code> <code class="n">checked</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>If you run the app again, you’ll notice the button colors are dimmed, and it won’t accept a tap action. However, if you tap the checkbox (or the attached label) to toggle its state, you’ll find the <code>Button</code> also changes state between enabled and disabled. While it’s enabled, a tap on the <code>Button</code> launches the new <code>BrowseContentActivity</code>—even though it’s currently blank, you can see how user interaction and <code>Activity</code> instances make up a large part of app navigation in the Android framework.</p>&#13;
&#13;
<p>Now that we’ve seen how it’s done on Android, let’s do something similar on iOS.<a data-primary="" data-startref="Kadview17" data-type="indexterm" id="idm46177212652168"/><a data-primary="" data-startref="Jappview17" data-type="indexterm" id="idm46177212651192"/><a data-primary="" data-startref="Vandspr17" data-type="indexterm" id="idm46177212650248"/><a data-primary="" data-startref="Aviewspruc17" data-type="indexterm" id="idm46177212649304"/><a data-primary="" data-startref="ADviewand17" data-type="indexterm" id="idm46177212648360"/><a data-primary="" data-startref="BAand17" data-type="indexterm" id="idm46177212647416"/><a data-primary="" data-startref="Aadatabut17" data-type="indexterm" id="idm46177212646472"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="iOS" data-type="sect2"><div class="sect2" id="idm46177214082600">&#13;
<h2>iOS</h2>&#13;
&#13;
<p>In<a data-primary="application data" data-secondary="sprucing up views" data-tertiary="iOS" data-type="indexterm" id="ADsprucios17"/><a data-primary="iOS" data-secondary="application data" data-tertiary="sprucing up views" data-type="indexterm" id="IOSappview17"/><a data-primary="views" data-secondary="iOS" data-tertiary="sprucing up views" data-type="indexterm" id="Viosspruce17"/> order to make this application a bit easier to work with, the first thing we need to do is tweak its structure and style. Let’s start with the structure.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Structure" data-type="sect3"><div class="sect3" id="idm46177212639992">&#13;
<h3>Structure</h3>&#13;
&#13;
<p>The first thing we want to do on iOS to make this app more usable is to provide some structure. Open up Xcode and navigate to the <em>Main.storyboard</em> file. Within the storyboard editor, click on the Library button on the top right group of buttons within the project window (the same button we dragged our label from in <a data-type="xref" href="ch16.html#app_project">Chapter 16</a>); this will present the modal where we can select from a list of available UIKit objects to drag onto our storyboard.</p>&#13;
&#13;
<p>In order to provide the structure we desire and to adhere to a system-wide look and feel, we’re going to wrap our welcome view in a navigation controller. Search for “Navigation Controller” in the Library and drag it near our current welcome view controller like in <a data-type="xref" href="#figures_nav-controller">Figure 17-2</a>.</p>&#13;
&#13;
<figure><div class="figure" id="figures_nav-controller">&#13;
<img alt="Adding a navigation controller to our storyboard" src="assets/nmdv_1702.png"/>&#13;
<h6><span class="label">Figure 17-2. </span>Adding a navigation controller to our storyboard</h6>&#13;
</div></figure>&#13;
&#13;
<p>Navigation controllers<a data-primary="storyboards" data-secondary="navigation controllers" data-type="indexterm" id="idm46177212632760"/><a data-primary="UIKit" data-secondary="UINavigationController class" data-type="indexterm" id="idm46177212631752"/> are a built-in object within UIKit, the framework that does all the UI heavy lifting in iOS. They are used to make navigating an app easier and handle the state of transitioning between views, which will be important later. More important at the moment, however, they provide a persistent navigation bar at the top of the screen to help the user with spatial reasoning within the app.</p>&#13;
&#13;
<p>Right now, our navigation controller will never be seen. Let’s fix that.</p>&#13;
&#13;
<p>Click<a data-primary="Xcode" data-secondary="navigation controllers" data-type="indexterm" id="idm46177212629512"/> on the “Root View Controller” added automatically by Xcode. This view controller is the first view controller shown by the navigation controller we’ve added. Delete it by hitting the Delete button. Every navigation controller is, in fact, a <code>UINavigationController</code>. This class has a stack of child view controllers that are currently being presented by the application. The root view controller can be any <code>UIViewController</code> object—it’s essentially just the bottom of the stack. Fortunately, we’ve got a perfect candidate for a new root view controller: our welcome screen!</p>&#13;
&#13;
<p>In order to connect the two views together, we need to wire them up similar to how we wired up the header label in <a data-type="xref" href="ch02.html#topics_views">Chapter 2</a>. Control-click on the navigation controller and drag the connection over to the welcome view controller. In the modal dialog that pops up, select “root view controller” under “Relationship Segue.”</p>&#13;
&#13;
<p>Unfortunately, if you run the application in the Simulator, you’ll notice that not much has changed. The reason for this is because our welcome view controller is still set as the initial view controller of this storyboard. This means iOS will just create an instance of <code>WelcomeViewController</code> and tell it to present its view as the root view of the window.</p>&#13;
&#13;
<p>We can fix this by clicking on the Navigation Controller scene in the storyboard editor, highlighting the Attributes inspector, and checking the box labeled “Is Initial View Controller” in the inspector pane. You’ll notice the large floating arrow moves from welcome view controller over to the left side of navigation controller indicating the switch. Build and run and the app and you’ll see the Welcome View Controller scene displayed within the Navigation Controller scene we created.</p>&#13;
&#13;
<p>We’ve got our structure down; let’s see if we can get some more style added.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Style" data-type="sect3"><div class="sect3" id="idm46177212639448">&#13;
<h3>Style</h3>&#13;
&#13;
<p>There are a number of ways we can improve our welcome screen. The easiest, and arguably the best, option is to get rid of the header label we created before and have the navigation controller display the name of the screen we’re viewing for us.</p>&#13;
&#13;
<p>First, click on the header label within the Welcome scene and delete it by hitting the Delete key. You’ll notice it disappears from the screen as well as disappearing from the Document Outline on the left side of the canvas.</p>&#13;
&#13;
<p>Next, let’s set the title of the screen for the navigation controller to view. We can do this programmatically, but since we’re already in the storyboard editor, let’s do it here. Within the Document Outline on the left side, click on the Navigation Item object inside the Welcome View Controller scene. Open the Attributes inspector on the right side of the screen and put “Welcome” in the Title field.</p>&#13;
&#13;
<p>Additionally, if you’d like, go ahead and set Large Title from <code>Automatic</code> to <code>Always</code>. This will make our navigation controller title larger and more readable.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>We could also set the navigation item properties programmatically. Within the <code>UIViewController</code> class, there are <code>navigationItem.title</code> and <code>navigationItem.largeTitleDisplayMode</code> properties for the respective Title and Large Title attributes we set in the storyboard editor.</p>&#13;
</div>&#13;
&#13;
<p>Go ahead and run the application on the iOS Simulator.</p>&#13;
&#13;
<p>Uh-oh. We broke it. What happened?</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Errors, errors, and more errors!" data-type="sect3"><div class="sect3" id="idm46177212614488">&#13;
<h3>Errors, errors, and more errors!</h3>&#13;
&#13;
<p>First of all, welcome to the wonderful world of runtime errors! As you’ll notice, our application compiled and ran, but then crashed when it was running. This is due to the dynamic nature of UIKit, which has roots in Objective-C history. If you open up our <code>WelcomeViewController</code> class, you’ll see we have a property called <code>headerLabel</code> that’s still present in the class.</p>&#13;
&#13;
<p>You might be saying, “But I thought we deleted the header label just a few paragraphs ago?” You’re right. We did. However, we <em>didn’t</em> remove it from the class. Now, there are a few ways to prevent something like this in the future. One option is to change our type from <code>UILabel!</code>, which is an implicitly unwrapped Optional (i.e., a non-<code>nil</code> type), to an Optional property—a type that could be <code>nil</code>.</p>&#13;
&#13;
<p>You see, iOS was expecting there to be a value for that object whenever we interacted with it in the <code>viewDidLoad()</code> method. Because we deleted the label from the scene in the storyboard editor, the connection we wired up with this class in <a data-type="xref" href="ch02.html#topics_views">Chapter 2</a> never had a chance to complete. The compiler didn’t know this happened and let the project compile because all the wiring up happens at runtime instead of compile time. So consider the following code:</p>&#13;
&#13;
<pre data-code-language="swift" data-type="programlisting"><code class="n">headerLabel</code><code class="p">.</code><code class="n">textColor</code> <code class="p">=</code> <code class="p">.</code><code class="n">red</code></pre>&#13;
&#13;
<p>Whenever the app called this, the system didn’t know what to do because there <em>should</em> have been a header label set, but there wasn’t.</p>&#13;
&#13;
<p>You can actually tell this happened if you read the error generated in the console, the lower-right window that popped up, in Xcode:</p>&#13;
&#13;
<pre data-type="programlisting">Fatal error: Unexpectedly found nil while&#13;
    implicitly unwrapping an Optional value</pre>&#13;
&#13;
<p>The <code>headerLabel</code> property is the <code>nil</code> value in something that shouldn’t be.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177212600760">&#13;
<h5>What Are Optionals?</h5>&#13;
<p>Nullable<a data-primary="Kotlin" data-secondary="nullable and non-nullable types in" data-type="indexterm" id="idm46177212599240"/><a data-primary="nullable types" data-type="indexterm" id="idm46177212598264"/><a data-primary="non-nullable types" data-type="indexterm" id="idm46177212597592"/><a data-primary="optionals (Swift)" data-type="indexterm" id="idm46177212596920"/> and non-nullable types are an important part of Kotlin with a direct parallel in Swift via Optional types. The best description I’ve ever heard of them is to the think of these types—types such as <code>Object?</code>—like a box. There can be something in the box or there can be nothing in the box. You’re telling the compiler, “It’s all right if whatever in the box is either something of <code>Object</code> type or nothing at all.” Types are, by default, non-null in Swift and Kotlin, which means they can never be set to <code>null</code> or <code>nil</code>—the Swift equivalent of <code>null</code> in Java and Kotlin.</p>&#13;
&#13;
<p>Implicitly unwrapped Optionals—types like <code>Object!</code>—are a special type of nullable, or Optional, type in Swift. They can be set to <code>nil</code>, but by declaring it implicitly unwrapped you are essentially telling the compiler, “In this box there is an <code>Object</code> and it might be <code>nil</code> at some point, but I know by the time I want to use it there will be something in here. Trust me. I’m the developer and I know how my app works.” If you’re wrong, however, the app will crash at runtime, so use this sparingly and only when you’re confident in the <code>nil</code> state of an object.</p>&#13;
&#13;
<p>For more information about Optionals in Swift check out the <a href="https://oreil.ly/AMdxC">Optionals</a> section in the Apple Developer documentation. For information about nullable and non-nullable types in Kotlin, check out the section on <a href="https://oreil.ly/eA9z7">null safety</a> in the Kotlin language reference.</p>&#13;
</div></aside>&#13;
&#13;
<p>If we set <code>headerLabel</code> to a type of <code>UILabel?</code>, the app will compile and run properly. However, I think this is usually the wrong solution because the code will still continue to exist in the class. We will still attempt to set the <code>headerLabel</code> to red, but because <code>headerLabel</code> is <code>nil</code> and an Optional type, this will short-circuit and fail quietly. Later, when we go to the edit the class, we might not quickly remember that we deleted the header label from our view and spend time trying to figure out what this line is doing. In my opinion, it’s best to leave <code>@IBOutlet</code>s as implicitly unwrapped Optionals and let the application fail when we run it to remind ourselves to remove this code whenever we remove connected views.</p>&#13;
&#13;
<p>For now, let’s remove this property from the <code>WelcomeViewController</code> class. We’ll also add a quick snippet of code to enable the large title we set in the storyboard editor to display in this view controller’s navigation bar (it’s not enabled by default). Our class should now look like this:</p>&#13;
&#13;
<pre data-code-language="swift" data-type="programlisting"><code class="kd">class</code> <code class="nc">WelcomeViewController</code><code class="p">:</code> <code class="bp">UIViewController</code> <code class="p">{</code>&#13;
&#13;
    <code class="kr">override</code> <code class="kd">func</code> <code class="nf">viewWillAppear</code><code class="p">(</code><code class="kc">_</code> <code class="n">animated</code><code class="p">:</code> <code class="nb">Bool</code><code class="p">)</code> <code class="p">{</code>&#13;
        <code class="kc">super</code><code class="p">.</code><code class="n">viewWillAppear</code><code class="p">(</code><code class="n">animated</code><code class="p">)</code>&#13;
        <code class="n">navigationController</code><code class="p">?.</code><code class="n">navigationBar</code><code class="p">.</code><code class="n">prefersLargeTitles</code> <code class="p">=</code> <code class="kc">true</code>&#13;
    <code class="p">}</code>&#13;
&#13;
    <code class="kr">override</code> <code class="kd">func</code> <code class="nf">viewWillDisappear</code><code class="p">(</code><code class="kc">_</code> <code class="n">animated</code><code class="p">:</code> <code class="nb">Bool</code><code class="p">)</code> <code class="p">{</code>&#13;
        <code class="kc">super</code><code class="p">.</code><code class="n">viewWillDisappear</code><code class="p">(</code><code class="n">animated</code><code class="p">)</code>&#13;
        <code class="n">navigationController</code><code class="p">?.</code><code class="n">navigationBar</code><code class="p">.</code><code class="n">prefersLargeTitles</code> <code class="p">=</code> <code class="kc">false</code>&#13;
    <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Hit the stop button beside the “Build and Run” button near the top left of the project window to stop our currently running application. Then, hit the play button to build and run the project. We should now see something like <a data-type="xref" href="#figures_welcome">Figure 17-3</a>.</p>&#13;
&#13;
<p>Both apps are looking good! We can go a bit further with background colors and other properties for the welcome screen, but we’ll leave that as an exercise for the reader.</p>&#13;
&#13;
<p>We’ve spent a lot of time within our app’s welcome screen, and we’ve set the groundwork for some more interactivity. Ultimately, our goal at the end of this chapter is to have an app that lists some data, so let’s get there in the simplest way possible first: by simply pressing a button.<a data-primary="" data-startref="ADsprucios17" data-type="indexterm" id="idm46177212463544"/><a data-primary="" data-startref="IOSappview17" data-type="indexterm" id="idm46177212462600"/><a data-primary="" data-startref="Viosspruce17" data-type="indexterm" id="idm46177212461656"/></p>&#13;
&#13;
<figure class="width-30"><div class="figure" id="figures_welcome">&#13;
<img alt="Our first styling applied to the app's Welcome screen" src="assets/nmdv_1703.png"/>&#13;
<h6><span class="label">Figure 17-3. </span>Our first styling applied to the app’s Welcome screen</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Adding a Button" data-type="sect1"><div class="sect1" id="idm46177212458280">&#13;
<h1>Adding a Button</h1>&#13;
&#13;
<p>Unfortunately, we don’t mean that you, the developer of this amazing app, can just press a button and make it all happen magically; what we mean to say is let’s add a button to our app so that <em>users</em> can press to list out some books. This particular button will be labeled “Catalog” and display the entire catalog of the library in a list view that transitions into the screen.</p>&#13;
&#13;
<p>We can read back a bit and see how it was handled in Android; let’s take a look at how we’d do the same thing in iOS.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="iOS" data-type="sect2"><div class="sect2" id="idm46177212455448">&#13;
<h2>iOS</h2>&#13;
&#13;
<p>To<a data-primary="application data" data-secondary="buttons" data-tertiary="iOS" data-type="indexterm" id="idm46177212453880"/><a data-primary="iOS" data-secondary="application data" data-tertiary="buttons" data-type="indexterm" id="idm46177212452600"/><a data-primary="buttons, adding" data-secondary="iOS" data-type="indexterm" id="idm46177212451384"/><a data-primary="storyboards" data-secondary="adding buttons" data-type="indexterm" id="idm46177212450440"/><a data-primary="buttons" data-secondary="iOS" data-type="indexterm" id="idm46177212449496"/> add a button to our view, open up <em>Main.storyboard</em> in the storyboard editor and click on the Library button to bring up our library of UI objects. Next, search for “button” and drag the Button object onto the welcome screen within the editor. You should see a placeholder button labeled “Button” in the canvas.</p>&#13;
&#13;
<p>Right now it’s wherever you dropped the button onto the canvas, but ideally we want this button to be displayed in the center of the screen for now. This is easy enough to target one device, but if you’ll recall, there are a number of screen sizes and form factors of devices that run iOS. Fortunately, iOS has a robust framework for laying out views automatically aptly named<a data-primary="Auto Layout" data-type="indexterm" id="idm46177212446936"/><a data-primary="views" data-secondary="iOS" data-tertiary="Auto Layout" data-type="indexterm" id="idm46177212446232"/><a data-primary="iOS" data-secondary="views" data-tertiary="Auto Layout" data-type="indexterm" id="idm46177212445016"/> Auto Layout.</p>&#13;
&#13;
<p>Auto Layout uses predefined constraints to position views within a scene. There is a great description of Auto Layout in <a data-type="xref" href="ch02.html#topics_views">Chapter 2</a>. It describes how to set constraints programmatically using the storyboard editor within Xcode. For now, we’re going to use the editor because it’s usually easier.</p>&#13;
&#13;
<p>With the button selected, click the Align button—third from the right at the bottom of the storyboard editor canvas—and check the boxes for “Horizontally in Container” and “Vertically in Container.” Click “Add 2 Constraints” to add the constraints to the button.</p>&#13;
&#13;
<p>You should see the button move automatically to the center of the view. In this case, we’re telling iOS that this object is centered horizontally and vertically within its container. That part might be obvious, but what is the container? Well, the container is the root view in which the object resides. In this case, it happens to be the root view that the entire scene is embedded in—which also happens to the <code>view</code> property of the <code>WelcomeViewController</code>. If, for instance, this button was nested within another view, then it would center itself within that view instead of the root view of the view <span class="keep-together">controller</span>.</p>&#13;
&#13;
<p>Now that it’s positioned properly, let’s finish styling our button. Click on the button and change the title of the button to read “Catalog” within the Attributes inspector. Build and run the application and you should see a button in the center of the screen.</p>&#13;
&#13;
<p>Eventually, this button will display our library catalog. But, before we show that, we have to build it!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="less_space pagebreak-before" data-pdf-bookmark="Lists, Lists, and More Lists!" data-type="sect1"><div class="sect1" id="idm46177212437320">&#13;
<h1>Lists, Lists, and More Lists!</h1>&#13;
&#13;
<p>One<a data-primary="application data" data-secondary="lists" data-tertiary="core libraries for" data-type="indexterm" id="idm46177212435704"/><a data-primary="lists" data-secondary="core libraries for" data-type="indexterm" id="idm46177212434424"/> of the most common tasks in mobile development is displaying lists of data. There are entire categories of apps specifically for listing data. What is a book catalog but a giant list of books? Luckily, both Android and iOS have some great, core libraries for dealing with lists of items. On Android it’s <code>RecyclerView</code>, which is a part of the support library but at the time of this writing is moving to the <code>androidx</code> package; it’s up to you which to use. The support library version is well-tested at this point, and while we might be able to expect some performance improvements or technical upgrades, I suspect the usability and public API will remain largely unchanged in <code>androidx</code>.</p>&#13;
&#13;
<p>Note that Android has gone through some public evolution around this type of component. Originally, we had <code>ListView</code>, which managed scrolling and item rendering nicely, but users were expected to do manual recycling of views (which benefits memory management). There was a component called <code>GridView</code> that, as you probably guessed, allowed <code>Views</code> to be expressed as horizontal rows and vertical columns, rather than just the vertical stack enabled by <code>ListView</code>. Both should be considered deprecated at this point, and <code>RecyclerView</code> instances use a layout manager to provide list or grid layouts (or really, any other layout you can conceive of). On iOS, this feature requirement can be satisfied by either <code>UITableView</code> or <code>UICollectionView</code>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Add a New Catalog View" data-type="sect2"><div class="sect2" id="idm46177212427112">&#13;
<h2>Add a New Catalog View</h2>&#13;
&#13;
<p>We’ll<a data-primary="application data" data-secondary="lists" data-tertiary="Android" data-type="indexterm" id="idm46177212425352"/><a data-primary="Android" data-secondary="application data" data-tertiary="lists" data-type="indexterm" id="idm46177212424072"/> start by adding a new UI controller and adding an empty list to it.</p>&#13;
&#13;
<p>On Android, we’ll create a new layout file for the <code>BrowseContentActivity</code> that contains just a <code>RecyclerView</code>, to start. Let’s call it <em>res/layout/activity_browse.xml</em>. We may end up including a toolbar for navigation and contextual menus, or a coordinator layout to manage <code>Snackbar</code> animations or <code>FloatingActionButton</code> position, but let’s keep it simple for now:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</code>&#13;
<code class="nt">&lt;androidx.recyclerview.widget.RecyclerView</code>&#13;
    <code class="na">xmlns:android=</code><code class="s">"http://schemas.android.com/apk/res/android"</code>&#13;
    <code class="na">android:id=</code><code class="s">"@+id/browse_content_recyclerview"</code>&#13;
    <code class="na">android:layout_width=</code><code class="s">"match_parent"</code>&#13;
    <code class="na">android:layout_height=</code><code class="s">"match_parent"</code>&#13;
    <code class="na">android:background=</code><code class="s">"@android:color/white"</code> <code class="nt">/&gt;</code></pre>&#13;
&#13;
<p>You’d want to set this as the content view in your <code>BrowseContentActivity</code> class, in the <code>onCreate</code> method right after <code>super</code> is called:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177212365880">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_browse</code><code class="o">);</code></pre>&#13;
&#13;
<p class="pagebreak-before less_space"><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_browse</code><code class="o">)</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>We’ll need to do a few things in code later to provide a data source and specify layout behavior and effects, but this is really all the layout we need for now.</p>&#13;
&#13;
<p>For<a data-primary="application data" data-secondary="lists" data-tertiary="iOS" data-type="indexterm" id="idm46177212306024"/><a data-primary="iOS" data-secondary="application data" data-tertiary="lists" data-type="indexterm" id="idm46177212337944"/><a data-primary="storyboards" data-secondary="creating lists of data" data-type="indexterm" id="idm46177212336728"/><a data-primary="Xcode" data-secondary="creating lists of data" data-type="indexterm" id="idm46177212335784"/> iOS, we can accomplish this mostly in the storyboard editor. For this catalog, we’ll use a <code>UITableView</code> as it’s a bit simpler to work with initially. First, open up the <em>Main.storyboard</em> file in Xcode and click on the Library button in the project window to bring up our object library. Next, drag a new view controller to the canvas. Then, use the Library again to drag a table view into the new view controller screen that was just created. Finally, with the table view selected, click the Add New Constraints button at the bottom right of the storyboard editor’s canvas. Set all the margins to <code>0</code> and then click the Add 4 Constraints button; this will make the table view have a margin of <code>0</code> around all its dimensions, effectively expanding it to the width and height of the screen.</p>&#13;
&#13;
<p>As a final touch, click on the View Controller scene we created. In the Attributes inspector, put the text “Catalog” under the Title field to name our view controller.</p>&#13;
&#13;
<p>We’ve got a list view created in both apps, but they’re currently inaccessible. Let’s fix that!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Wiring Up the Button" data-type="sect2"><div class="sect2" id="idm46177212426456">&#13;
<h2>Wiring Up the Button</h2>&#13;
&#13;
<p>Is a button without an action really a button at all?</p>&#13;
&#13;
<p>Putting this momentary existential crisis aside for the moment, let’s focus on the catalog button currently devoid of purpose on our welcome screen. The goal of this button is to display the catalog of books in the library. But right now it’s doing nothing.</p>&#13;
&#13;
<p>For iOS let’s wire up this button with<a data-primary="segues" data-type="indexterm" id="idm46177212285608"/><a data-primary="storyboards" data-secondary="segues" data-type="indexterm" id="idm46177212284904"/> a segue. Segues are explained in detail in <a data-type="xref" href="ch01.html#topics_ui_controllers">Chapter 1</a> of the book. They are, in their simplest form, transitions between two views. Segues are defined in a storyboard and can be triggered via storyboard connections or programmatically. For this example, because of its simplicity, we can wire everything up in the storyboard <span class="keep-together">editor</span>.</p>&#13;
&#13;
<p>First, Control-click on the catalog button we created in the welcome screen. Drag a connection over to our new catalog scene. Now, in the modal dialog that is presented select Show under the Action Segues section.</p>&#13;
&#13;
<p>That’s all it takes. This will create a segue trigger whenever someone clicks the catalog button, which displays the catalog view. Build and run and the app, and you should see a list view like <a data-type="xref" href="#figures_catalog">Figure 17-4</a> whenever the catalog button is tapped.</p>&#13;
&#13;
<figure class="width-30"><div class="figure" id="figures_catalog">&#13;
<img alt="Rows and rows of no data—is this a metaphor for life? No, just an empty table view" src="assets/nmdv_1704.png"/>&#13;
<h6><span class="label">Figure 17-4. </span>Rows and rows of no data—is this a metaphor for life? No, just an empty table view</h6>&#13;
</div></figure>&#13;
&#13;
<p>All right. We’ve got our buttons wired up. We’ve got our list views. But right now, they’re empty. It’s finally time to talk about our data.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Books" data-type="sect1"><div class="sect1" id="idm46177212277016">&#13;
<h1>Books</h1>&#13;
&#13;
<p>If you look around the library for the app we’re creating, you’ll notice something: there are A LOT of books. There are nonfiction books. There are non-fiction books. There are books with pictures. There are books with no pictures. There are small books, big books, old books, books to read on a beach, books to read in the bathtub while sipping a glass of red wine—all kinds of books!</p>&#13;
&#13;
<p>So how do we know what to display?</p>&#13;
&#13;
<p>Well, fortunately, there is a certain amount of information that is shared among all books. A few common properties of books are:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Title</p>&#13;
</li>&#13;
<li>&#13;
<p>Author</p>&#13;
</li>&#13;
<li>&#13;
<p>ISBN</p>&#13;
</li>&#13;
<li>&#13;
<p>Number of pages</p>&#13;
</li>&#13;
<li>&#13;
<p>Fiction or nonfiction?</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>To work with our list views, we’ll need to keep this information organized. We could pass it directly as properties to our list view rows and configure each row, but a more common practice is to define a shared model to keep the data contained and more easily maintainable; it’s much easier to add a new field to a single type than to have to add it to every method within the application that deals with book metadata.</p>&#13;
&#13;
<p>Let’s define a book object so we can start using it populate our list views. So, what does this object look like in Java and Swift? Well, remarkably, this is where the classes look very much alike.</p>&#13;
&#13;
<p>In<a data-primary="application data" data-secondary="organizing" data-tertiary="Android" data-type="indexterm" id="ADorgand17"/> Android, we’ll use a standard Java class definition to represent our books. These are sometimes called “models” or “data classes,” and the latter does have special designation in Kotlin (which we’ll touch on, shortly), but in reality there’s no functional difference between a model and any other class.  Some developers prefer to use “POJOs” (“Plain Old Java Objects”), which are simply classes that don’t extend another class and don’t implement an interface, but this is simply a matter of taste.  It is also fairly common to have model classes exclude logical operations (methods) other than getters and setters, and while this may make sense or even be enforced on your team, it’s technically optional insofar as restrictions of the language and <span class="keep-together">framework</span>.</p>&#13;
&#13;
<p>Considering that Android does suggest we do not use public members, we’ll assign some fields and the appropriate getters and setters, so our <code>Book</code> class might look like this:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Book</code> <code class="o">{</code>&#13;
&#13;
  <code class="n">String</code> <code class="n">mTitle</code><code class="o">;</code>&#13;
  <code class="n">String</code><code class="o">[]</code> <code class="n">mAuthors</code><code class="o">;</code>&#13;
  <code class="n">String</code> <code class="n">mIsbn</code><code class="o">;</code>&#13;
  <code class="kt">int</code> <code class="n">mPageCount</code><code class="o">;</code>&#13;
  <code class="kt">boolean</code> <code class="n">mIsFiction</code><code class="o">;</code>&#13;
&#13;
  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getTitle</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mTitle</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setTitle</code><code class="o">(</code><code class="n">String</code> <code class="n">title</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mTitle</code> <code class="o">=</code> <code class="n">title</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="n">String</code><code class="o">[]</code> <code class="nf">getAuthors</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mAuthors</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setAuthors</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">authors</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mAuthors</code> <code class="o">=</code> <code class="n">authors</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getIsbn</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mIsbn</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setIsbn</code><code class="o">(</code><code class="n">String</code> <code class="n">isbn</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mIsbn</code> <code class="o">=</code> <code class="n">isbn</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPageCount</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mPageCount</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setPageCount</code><code class="o">(</code><code class="kt">int</code> <code class="n">pageCount</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mPageCount</code> <code class="o">=</code> <code class="n">pageCount</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">isFiction</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mIsFiction</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setFiction</code><code class="o">(</code><code class="kt">boolean</code> <code class="n">fiction</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mIsFiction</code> <code class="o">=</code> <code class="n">fiction</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p>While that may seem a bit verbose, you’ll find<a data-primary="Android Studio" data-secondary="Hungarian notation" data-type="indexterm" id="idm46177212243992"/> Android Studio is happy to generate getter and setter methods from your properties and can even be configured to work properly with Hungarian notation (so that <code>mName</code> becomes <code>getName</code> and <code>setName</code>, rather than <code>getMname</code>).</p>&#13;
&#13;
<p>That said, you can see that Kotlin really shines in this specific example, and the data class for a <code>Book</code> instance has a much smaller definition:</p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="n">data</code> <code class="k">class</code> <code class="nc">Book</code> <code class="p">(</code>&#13;
  <code class="k">var</code> <code class="py">title</code><code class="p">:</code> <code class="n">String</code><code class="p">,</code>&#13;
  <code class="k">var</code> <code class="py">authors</code><code class="p">:</code> <code class="n">List</code><code class="p">&lt;</code><code class="n">String</code><code class="p">&gt;,</code>&#13;
  <code class="k">var</code> <code class="py">isbn</code><code class="p">:</code> <code class="n">String</code><code class="p">,</code>&#13;
  <code class="k">var</code> <code class="py">pageCount</code><code class="p">:</code> <code class="n">Int</code><code class="p">,</code>&#13;
  <code class="k">var</code> <code class="py">isFiction</code><code class="p">:</code> <code class="n">Boolean</code>&#13;
<code class="p">)</code></pre>&#13;
&#13;
<p>We can include a constructor that allows us to pass a no-arg instantiation:</p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="n">data</code> <code class="k">class</code> <code class="nc">Book</code> <code class="p">(</code>&#13;
  <code class="k">var</code> <code class="py">title</code><code class="p">:</code> <code class="n">String</code><code class="p">,</code>&#13;
  <code class="k">var</code> <code class="py">authors</code><code class="p">:</code> <code class="n">List</code><code class="p">&lt;</code><code class="n">String</code><code class="p">&gt;,</code>&#13;
  <code class="k">var</code> <code class="py">isbn</code><code class="p">:</code> <code class="n">String</code><code class="p">,</code>&#13;
  <code class="k">var</code> <code class="py">pageCount</code><code class="p">:</code> <code class="n">Int</code><code class="p">,</code>&#13;
  <code class="k">var</code> <code class="py">isFiction</code><code class="p">:</code> <code class="n">Boolean</code>&#13;
<code class="p">)</code> <code class="p">{</code>&#13;
&#13;
   <code class="n">constructor</code><code class="p">()</code> <code class="p">:</code> <code class="k">this</code><code class="p">(</code><code class="s">""</code><code class="p">,</code> <code class="n">mutableListOf</code><code class="p">&lt;</code><code class="n">String</code><code class="p">&gt;(),</code> <code class="s">""</code><code class="p">,</code> <code class="m">0</code><code class="p">,</code> <code class="k">false</code><code class="p">)</code> <code class="p">{</code>&#13;
     <code class="c1">// no op</code>&#13;
   <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>This not only includes a default constructor that accepts all fields but combines that constructor with the definition itself. Further, while all the fields are <code>val</code> and therefore immutable (in Java, this would be considered <code>final</code>), you’ll see that we don’t have to set a default value to be updated on instantiation—by having these values defined within the constructor, we can ensure that instantiation provides the single, immutable value for the member.<a data-primary="" data-startref="ADorgand17" data-type="indexterm" id="idm46177212054312"/></p>&#13;
&#13;
<p>Now, in<a data-primary="application data" data-secondary="organizing" data-tertiary="iOS" data-type="indexterm" id="ADorgios17"/> Xcode, add a new Swift file called <em>Book.swift</em> (File &gt; New &gt; File) to the project. We could use a <code>class</code> here, but instead we’ll use a <code>struct</code>. Classes in Swift are reference objects; in other words, you pass around addresses to the object in memory. Meanwhile, structs are value objects, similar to primitive data types like strings. This makes copying operations much safer and easier in multi-threaded situations. You won’t have to worry about another object changing data in the object because the object itself will be copied instead of just the address to the object.</p>&#13;
&#13;
<p>Here is what our <code>Book</code> object type looks like:</p>&#13;
&#13;
<pre data-code-language="swift" data-type="programlisting"><code class="kd">struct</code> <code class="nc">Book</code> <code class="p">{</code>&#13;
    <code class="kd">let</code> <code class="nv">title</code><code class="p">:</code> <code class="nb">String</code>&#13;
    <code class="kd">let</code> <code class="nv">authors</code><code class="p">:</code> <code class="p">[</code><code class="nb">String</code><code class="p">]</code>&#13;
    <code class="kd">let</code> <code class="nv">isbn</code><code class="p">:</code> <code class="nb">String</code>&#13;
    <code class="kd">let</code> <code class="nv">pageCount</code><code class="p">:</code> <code class="nb">Int</code>&#13;
    <code class="kd">let</code> <code class="nv">fiction</code><code class="p">:</code> <code class="nb">Bool</code>&#13;
<code class="p">}</code></pre>&#13;
<aside class="less_space pagebreak-before" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177211895752">&#13;
<h5>Immutable Properties</h5>&#13;
<p>In<a data-primary="immutable properties" data-type="indexterm" id="idm46177211901672"/> the <code>Book</code> structure we just defined, all the properties are <code>let</code> properties. In Swift, this means they are immutable properties and cannot be changed. This also means they have to be passed into an initializer. Fortunately, the compiler is able to interpret <code>struct</code>s and create a default initializer that takes in all the properties so that boilerplate isn’t necessary.</p>&#13;
&#13;
<p>Similarly, in the Kotlin example, we declared our member properties using <code>val</code>, which has the same net result just described. Once a <code>val</code> is set, it cannot be set, although its properties can; for example, an <code>Array</code> or <code>List</code> that is a <code>val</code> cannot be reassigned, but its contents can be. Note that if we had used <code>var</code> instead of <code>val</code>, the members would be mutable and could be reassigned later.</p>&#13;
&#13;
<p>In Java, you can achieve the same effect with the <code>final</code> keyword, but you’d need to structure your class a little differently to make it operate as intended (like the Swift and Kotlin examples, instead of setter methods, you’d want to assign all the members only once, in the constructor).</p>&#13;
</div></aside>&#13;
&#13;
<p>We’ve got our data models defined, we’ve got our catalog view created, and we’ve got our catalog button wired up. Almost all the puzzle pieces are lined up to start displaying some data! Let’s head back over to our new list views.<a data-primary="" data-startref="ADorgios17" data-type="indexterm" id="idm46177211842264"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Populating the List View" data-type="sect1"><div class="sect1" id="idm46177212276072">&#13;
<h1>Populating the List View</h1>&#13;
&#13;
<p>We’re not currently grabbing any data from a network service or reading in data from the filesystem. (Spoiler! We’ll talk about both of those in later chapters!) For now, let’s use static data within the class to demonstrate how to populate list views in Android and iOS. Let’s start with Android.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Android" data-type="sect2"><div class="sect2" id="idm46177211839976">&#13;
<h2>Android</h2>&#13;
&#13;
<p>So<a data-primary="application data" data-secondary="populating list view" data-tertiary="Android" data-type="indexterm" id="ADjpopand17"/><a data-primary="Android" data-secondary="application data" data-tertiary="populating list view" data-type="indexterm" id="Aapppop17"/><a data-primary="lists" data-secondary="populating list view" data-tertiary="Android" data-type="indexterm" id="Lpopand17"/> we have our <code>RecyclerView</code> instantiated and ready to kick some butt, but without data there’s not much to see. Let’s remedy that. For now, we’ll hardcode some data in our <code>Book</code> model as a <code>static</code> class variable, but <em>for the love of all that’s good, please don’t ever do this in production</em>. And<a data-primary="Java" data-secondary="application data" data-tertiary="populating list view" data-type="indexterm" id="Japppop17"/><a data-primary="Kotlin" data-secondary="application data" data-tertiary="populating list view" data-type="indexterm" id="Kapplist17"/> don’t worry, we’ll remedy this later.</p>&#13;
&#13;
<p>So, <em>for now</em>, here’s some sample books—we’ll use a very similar structure in iOS soon:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177211827192">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre class="small" data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">Book</code> <code class="o">{</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kd">static</code> <code class="kd">final</code> <code class="n">Book</code><code class="o">[]</code> <code class="n">SAMPLE_DATA</code> <code class="o">=</code> <code class="o">{</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Dragons Love Tacos"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Adam Rubin"</code><code class="o">,</code> <code class="s">"Daniel Salmieri"</code><code class="o">},</code>&#13;
    <code class="s">"978-0803736801"</code><code class="o">,</code> <code class="mi">40</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Fight Club"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Chuck Palahniuk"</code><code class="o">},</code> <code class="s">"978-0393039764"</code><code class="o">,</code> <code class="mi">208</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"2001: A Space Odyssey"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Arthur C. Clarke"</code><code class="o">},</code> <code class="s">"978-0451457998"</code><code class="o">,</code>&#13;
     <code class="mi">296</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Ulysses"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"James Joyce"</code><code class="o">},</code> <code class="s">"978-1420953961"</code><code class="o">,</code> <code class="mi">682</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Catch-22"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Joseph Heller"</code><code class="o">},</code> <code class="s">"978-1451626650"</code><code class="o">,</code> <code class="mi">544</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"The Stand"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Stephen King"</code><code class="o">},</code> <code class="s">"978-0307947307"</code><code class="o">,</code> <code class="mi">1200</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"On The Road"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Jack Kerouac"</code><code class="o">},</code> <code class="s">"978-0143105466"</code><code class="o">,</code> <code class="mi">416</code><code class="o">,</code> <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Heart of Darkness"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Joseph Conrad"</code><code class="o">},</code> <code class="s">"978-1503275928"</code><code class="o">,</code> <code class="mi">78</code><code class="o">,</code>&#13;
    <code class="kc">true</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"A Brief History of Time"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Stephen Hawking"</code><code class="o">},</code> <code class="s">"978-0553380163"</code><code class="o">,</code>&#13;
     <code class="mi">212</code><code class="o">,</code> <code class="kc">false</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Dispatches"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"Michael Herr"</code><code class="o">},</code> <code class="s">"978-0679735250"</code><code class="o">,</code> <code class="mi">272</code><code class="o">,</code> <code class="kc">false</code><code class="o">),</code>&#13;
    <code class="k">new</code> <code class="nf">Book</code><code class="o">(</code><code class="s">"Harry Potter and Prisoner of Azkaban"</code><code class="o">,</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]{</code><code class="s">"J.K. Rowling"</code><code class="o">},</code>&#13;
    <code class="s">"978-0439136365"</code><code class="o">,</code> <code class="mi">448</code><code class="o">,</code> <code class="kc">true</code><code class="o">)</code>&#13;
  <code class="o">};</code>&#13;
&#13;
  <code class="kd">private</code> <code class="kd">final</code> <code class="n">String</code> <code class="n">mTitle</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="kd">final</code> <code class="n">String</code><code class="o">[]</code> <code class="n">mAuthors</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="kd">final</code> <code class="n">String</code> <code class="n">mIsbn</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="kd">final</code> <code class="kt">int</code> <code class="n">mPageCount</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="kd">final</code> <code class="kt">boolean</code> <code class="n">mIsFiction</code><code class="o">;</code>&#13;
&#13;
  <code class="kd">public</code> <code class="nf">Book</code><code class="o">(</code><code class="n">String</code> <code class="n">title</code><code class="o">,</code> <code class="n">String</code><code class="o">[]</code> <code class="n">authors</code><code class="o">,</code> <code class="n">String</code> <code class="n">isbn</code><code class="o">,</code> <code class="kt">int</code> <code class="n">pageCount</code><code class="o">,</code>&#13;
  <code class="kt">boolean</code> <code class="n">isFiction</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">mTitle</code> <code class="o">=</code> <code class="n">title</code><code class="o">;</code>&#13;
    <code class="n">mAuthors</code> <code class="o">=</code> <code class="n">authors</code><code class="o">;</code>&#13;
    <code class="n">mIsbn</code> <code class="o">=</code> <code class="n">isbn</code><code class="o">;</code>&#13;
    <code class="n">mPageCount</code> <code class="o">=</code> <code class="n">pageCount</code><code class="o">;</code>&#13;
    <code class="n">mIsFiction</code> <code class="o">=</code> <code class="n">isFiction</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="nf">Book</code><code class="o">()</code> <code class="o">{}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getTitle</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mTitle</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="n">String</code><code class="o">[]</code> <code class="nf">getAuthors</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mAuthors</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="n">String</code> <code class="nf">getIsbn</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mIsbn</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getPageCount</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mPageCount</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
  <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">isFiction</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">mIsFiction</code><code class="o">;</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre class="small" data-code-language="kotlin" data-type="programlisting"><code class="n">data</code> <code class="k">class</code> <code class="nc">Book</code><code class="p">(</code><code class="k">val</code> <code class="py">title</code><code class="p">:</code> <code class="n">String</code><code class="p">,</code> <code class="k">val</code> <code class="py">authors</code><code class="p">:</code> <code class="n">List</code><code class="p">&lt;</code><code class="n">String</code><code class="p">&gt;,</code> <code class="k">val</code> <code class="py">isbn</code><code class="p">:</code> <code class="n">String</code><code class="p">,</code>&#13;
  <code class="k">val</code> <code class="py">pageCount</code><code class="p">:</code> <code class="n">Int</code><code class="p">,</code> <code class="k">val</code> <code class="py">isFiction</code><code class="p">:</code> <code class="n">Boolean</code><code class="p">)</code> <code class="p">{</code>&#13;
&#13;
  <code class="n">constructor</code><code class="p">()</code> <code class="p">:</code> <code class="k">this</code><code class="p">(</code><code class="s">""</code><code class="p">,</code> <code class="n">mutableListOf</code><code class="p">&lt;</code><code class="n">String</code><code class="p">&gt;(),</code> <code class="s">""</code><code class="p">,</code> <code class="m">0</code><code class="p">,</code> <code class="k">false</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="c1">// no op</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="n">companion</code> <code class="k">object</code> <code class="err">{</code>&#13;
    <code class="k">val</code> <code class="py">SAMPLE_DATA</code> <code class="p">=</code> <code class="n">arrayOf</code><code class="p">(</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Fight Club"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Chuck Palahniuk"</code><code class="p">),</code> <code class="s">"978-0393039764"</code><code class="p">,</code> <code class="m">208</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"2001: A Space Odyssey"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Arthur C. Clarke"</code><code class="p">),</code> <code class="s">"978-0451457998"</code><code class="p">,</code>&#13;
        <code class="m">296</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Ulysses"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"James Joyce"</code><code class="p">),</code> <code class="s">"978-1420953961"</code><code class="p">,</code> <code class="m">682</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Catch-22"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Joseph Heller"</code><code class="p">),</code> <code class="s">"978-1451626650"</code><code class="p">,</code> <code class="m">544</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"The Stand"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Stephen King"</code><code class="p">),</code> <code class="s">"978-0307947307"</code><code class="p">,</code> <code class="m">1200</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"On The Road"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Jack Kerouac"</code><code class="p">),</code> <code class="s">"978-0143105466"</code><code class="p">,</code> <code class="m">416</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Heart of Darkness"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Joseph Conrad"</code><code class="p">),</code> <code class="s">"978-1503275928"</code><code class="p">,</code> <code class="m">78</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"A Brief History of Time"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Stephen Hawking"</code><code class="p">),</code> <code class="s">"978-0553380163"</code><code class="p">,</code> <code class="m">212</code><code class="p">,</code>&#13;
        <code class="k">false</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Dispatches"</code><code class="p">,</code> <code class="n">arrayOf</code><code class="p">(</code><code class="s">"Michael Herr"</code><code class="p">),</code> <code class="s">"978-0679735250"</code><code class="p">,</code> <code class="m">272</code><code class="p">,</code> <code class="k">false</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Harry Potter and Prisoner of Azkaban"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"J.K. Rowling"</code><code class="p">),</code>&#13;
           <code class="s">"978-0439136365"</code><code class="p">,</code> <code class="m">448</code><code class="p">,</code> <code class="k">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="s">"Dragons Love Tacos"</code><code class="p">,</code> <code class="n">listOf</code><code class="p">(</code><code class="s">"Adam Rubin"</code><code class="p">,</code> <code class="s">"Daniel Salmieri"</code><code class="p">),</code>&#13;
           <code class="s">"978-0803736801"</code><code class="p">,</code> <code class="m">40</code><code class="p">,</code> <code class="k">true</code><code class="p">))</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>So that’s our data. Consider that the source of data for a list view might change during the lifetime of an app—we might initially fetch the data from a remote server but subsequently show a cached version from a local database. We might have a search service that has a variety of sort or filter options. For this reason and others, in Android the data source is not directly attached to the <code>RecyclerView</code> but is rather managed by a bridge between the UI and the data, known both semantically and canonically as an <code>Adapter</code>. The <code>Adapter</code> pattern is common within Android and is used for things like <code>ViewPagers</code>, <code>Spinners</code>, <code>Galleries</code>, and many others; the specific <code>Adapter</code> class used by <code>ReyclderView</code> is simply <code>RecyclerView.Adapter</code>.</p>&#13;
&#13;
<p>The <code>Adapter</code> has several contracts to fulfill. We’ll provide a working example with the <code>Book.SAMPLE_DATA</code> array as the data source and then dig into each of the required methods:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177211030728">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre class="small" data-code-language="python" data-type="programlisting"><code class="n">public</code> <code class="k">class</code>&#13;
  <code class="nc">BrowseBooksAdapter</code> <code class="n">extends</code> <code class="n">RecyclerView</code><code class="o">.</code><code class="n">Adapter</code><code class="o">&lt;</code><code class="n">BrowseBooksAdapter</code><code class="o">.</code><code class="n">ViewHolder</code><code class="o">&gt;</code> <code class="p">{</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="n">public</code> <code class="n">ViewHolder</code> <code class="n">onCreateViewHolder</code><code class="p">(</code><code class="n">ViewGroup</code> <code class="n">parent</code><code class="p">,</code> <code class="nb">int</code> <code class="n">viewType</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="n">new</code> <code class="n">ViewHolder</code><code class="p">(</code><code class="n">new</code> <code class="n">TextView</code><code class="p">(</code><code class="n">parent</code><code class="o">.</code><code class="n">getContext</code><code class="p">()));</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="n">public</code> <code class="n">void</code> <code class="n">onBindViewHolder</code><code class="p">(</code><code class="n">ViewHolder</code> <code class="n">holder</code><code class="p">,</code> <code class="nb">int</code> <code class="n">position</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="n">holder</code><code class="o">.</code><code class="n">mTextView</code><code class="o">.</code><code class="n">setText</code><code class="p">(</code><code class="n">Book</code><code class="o">.</code><code class="n">SAMPLE_DATA</code><code class="p">[</code><code class="n">position</code><code class="p">]</code><code class="o">.</code><code class="n">getTitle</code><code class="p">());</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="n">public</code> <code class="nb">int</code> <code class="n">getItemCount</code><code class="p">()</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="n">Book</code><code class="o">.</code><code class="n">SAMPLE_DATA</code><code class="o">.</code><code class="n">length</code><code class="p">;</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="n">public</code> <code class="n">static</code> <code class="k">class</code> <code class="nc">ViewHolder</code> <code class="n">extends</code> <code class="n">RecyclerView</code><code class="o">.</code><code class="n">ViewHolder</code> <code class="p">{</code>&#13;
    <code class="n">private</code> <code class="n">TextView</code> <code class="n">mTextView</code><code class="p">;</code>&#13;
    <code class="n">public</code> <code class="n">ViewHolder</code><code class="p">(</code><code class="nd">@NonNull</code> <code class="n">View</code> <code class="n">itemView</code><code class="p">)</code> <code class="p">{</code>&#13;
      <code class="nb">super</code><code class="p">(</code><code class="n">itemView</code><code class="p">);</code>&#13;
      <code class="n">mTextView</code> <code class="o">=</code> <code class="p">(</code><code class="n">TextView</code><code class="p">)</code> <code class="n">itemView</code><code class="p">;</code>&#13;
    <code class="p">}</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre class="small" data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">BrowseBooksAdapter</code><code class="p">()</code> <code class="p">:</code> <code class="n">RecyclerView</code><code class="p">.</code><code class="n">Adapter</code><code class="p">&lt;</code><code class="n">BrowseBooksAdapter</code><code class="p">.</code><code class="n">ViewHolder</code><code class="p">&gt;()</code> <code class="p">{</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreateViewHolder</code><code class="p">(</code><code class="n">parent</code><code class="p">:</code> <code class="n">ViewGroup</code><code class="p">,</code> <code class="n">viewType</code><code class="p">:</code> <code class="n">Int</code><code class="p">):</code> <code class="n">ViewHolder</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="n">ViewHolder</code><code class="p">(</code><code class="n">TextView</code><code class="p">(</code><code class="n">parent</code><code class="p">.</code><code class="n">context</code><code class="p">))</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onBindViewHolder</code><code class="p">(</code><code class="n">holder</code><code class="p">:</code> <code class="n">ViewHolder</code><code class="p">,</code> <code class="n">position</code><code class="p">:</code> <code class="n">Int</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">val</code> <code class="py">book</code> <code class="p">=</code> <code class="n">Book</code><code class="p">.</code><code class="n">SAMPLE_DATA</code><code class="p">[</code><code class="n">position</code><code class="p">]</code>&#13;
    <code class="n">holder</code><code class="p">.</code><code class="n">textView</code><code class="p">.</code><code class="n">text</code> <code class="p">=</code> <code class="n">book</code><code class="p">.</code><code class="n">title</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">getItemCount</code><code class="p">():</code> <code class="n">Int</code> <code class="p">{</code>&#13;
    <code class="k">return</code> <code class="n">Book</code><code class="p">.</code><code class="n">SAMPLE_DATA</code><code class="p">.</code><code class="n">size</code>&#13;
  <code class="p">}</code>&#13;
&#13;
  <code class="k">class</code> <code class="nc">ViewHolder</code><code class="p">(</code><code class="n">itemView</code><code class="p">:</code> <code class="n">View</code><code class="p">)</code> <code class="p">:</code> <code class="n">RecyclerView</code><code class="p">.</code><code class="n">ViewHolder</code><code class="p">(</code><code class="n">itemView</code><code class="p">)</code> <code class="p">{</code>&#13;
    <code class="k">val</code> <code class="py">textView</code><code class="p">:</code> <code class="n">TextView</code> <code class="p">=</code> <code class="n">itemView</code> <code class="k">as</code> <code class="n">TextView</code>&#13;
  <code class="p">}</code>&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>If this looks confusing or opaque to you, you’re right—it is! In fact, the concept of the <code>RecyclerView</code> was originally merely a <em>convention</em>. We (Android developers) used the now deprecated <code>ListView</code> widget, and over time we as a community came to accept that using certain patterns allowed us to save memory and improve performance. Without the recycling pattern, a simple search that returned a few thousand items could easily use up more resources than the app had available, especially on the devices available at the time.</p>&#13;
&#13;
<p>When <code>RecyclerView</code> was first released in the original support library (prior to the much fancier-sounding <code>androidx</code> package we use now), that convention became codified, but without understanding that history or without being a part of it some of these patterns and contracts seemed arbitrary and unintuitive—mostly because they are!</p>&#13;
&#13;
<p>In any case, at this point in Android development, we have a feature-full, well-vetted, and highly performant widget at our disposal, so let’s take the time we need to learn it. Let’s actually start at the bottom: the static <code>ViewHolder</code> class. The super class <code>RecyclerView.ViewHolder</code> is abstract, so even if we didn’t need any extended behavior, you’d still have to subclass it. In reality, if the super class was not abstract, we could just cast the <code>itemView</code> member to a <code>TextView</code> instance in the <code>onBindViewHolder</code> method, and we wouldn’t even need the custom subclass. What a mouthful! Let’s slow down and take a step back.</p>&#13;
&#13;
<p>In its simplest form, a <code>ViewHolder</code> is just a bag of <code>View</code> references, representing child <code>View</code>s on each row. For example, if each row of your list has an <code>ImageView</code> to represent a thumbnail image, a <code>TextView</code> to indicate the title, and another to display the concatenated list of authors, your <code>ViewHolder</code> would likely have those three <code>View</code>s as references, maybe something like this:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177210765448">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">ViewHolder</code> <code class="kd">extends</code> <code class="n">RecyclerView</code><code class="o">.</code><code class="na">ViewHolder</code> <code class="o">{</code>&#13;
  <code class="kd">private</code> <code class="n">ImageView</code> <code class="n">mThumbnailView</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="n">TextView</code> <code class="n">mTitleView</code><code class="o">;</code>&#13;
  <code class="kd">private</code> <code class="n">TextView</code> <code class="n">mAuthorsView</code><code class="o">;</code>&#13;
  <code class="kd">public</code> <code class="nf">ViewHolder</code><code class="o">(</code><code class="nd">@NonNull</code> <code class="n">View</code> <code class="n">itemView</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">(</code><code class="n">itemView</code><code class="o">);</code>&#13;
    <code class="n">mThumbnailView</code> <code class="o">=</code> <code class="n">itemView</code><code class="o">.</code><code class="na">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">row_thumb</code><code class="o">);</code>&#13;
    <code class="n">mTitleView</code> <code class="o">=</code> <code class="n">itemView</code><code class="o">.</code><code class="na">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">row_title</code><code class="o">);</code>&#13;
    <code class="n">mAuthorsView</code> <code class="o">=</code> <code class="n">itemView</code><code class="o">.</code><code class="na">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">row_authors</code><code class="o">);</code>&#13;
  <code class="o">}</code>&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">ViewHolder</code><code class="p">(</code><code class="n">itemView</code><code class="p">:</code> <code class="n">View</code><code class="p">)</code> <code class="p">:</code> <code class="n">RecyclerView</code><code class="p">.</code><code class="n">ViewHolder</code><code class="p">(</code><code class="n">itemView</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="k">val</code> <code class="py">thumbnailView</code><code class="p">:</code> <code class="n">ImageView</code> <code class="p">=</code> <code class="n">itemView</code><code class="p">.</code><code class="n">findViewById</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">id</code><code class="p">.</code><code class="n">row_thumb</code><code class="p">)</code>&#13;
  <code class="k">val</code> <code class="py">titleView</code><code class="p">:</code> <code class="n">TextView</code> <code class="p">=</code> <code class="n">itemView</code><code class="p">.</code><code class="n">findViewById</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">id</code><code class="p">.</code><code class="n">row_title</code><code class="p">)</code>&#13;
  <code class="k">val</code> <code class="py">authorsView</code><code class="p">:</code> <code class="n">TextView</code> <code class="p">=</code> <code class="n">itemView</code><code class="p">.</code><code class="n">findViewById</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">id</code><code class="p">.</code><code class="n">row_authors</code><code class="p">)</code>&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>You might rightly wonder where those <code>View</code> instances come from—we’ll step away from the <code>ViewHolder</code> for a moment to touch on the <code>onCreateViewHolder</code> method. In our preceding simple example, we simply pass a <code>TextView</code>, but in the more complex UI we’re using to explain <code>ViewHolder</code>, let’s imagine you want a view tree and probably want to represent that like you do all your layouts—via XML. Each row might look like this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&lt;</code><code class="err">?</code><code class="n">xml</code> <code class="n">version</code><code class="o">=</code><code class="s2">"1.0"</code> <code class="n">encoding</code><code class="o">=</code><code class="s2">"utf-8"</code><code class="err">?</code><code class="o">&gt;</code>&#13;
<code class="o">&lt;</code><code class="n">LinearLayout</code>&#13;
    <code class="n">xmlns</code><code class="p">:</code><code class="n">android</code><code class="o">=</code><code class="s2">"http://schemas.android.com/apk/res/android"</code>&#13;
    <code class="n">android</code><code class="p">:</code><code class="n">orientation</code><code class="o">=</code><code class="s2">"horizontal"</code>&#13;
    <code class="n">android</code><code class="p">:</code><code class="n">layout_width</code><code class="o">=</code><code class="s2">"match_parent"</code>&#13;
    <code class="n">android</code><code class="p">:</code><code class="n">layout_height</code><code class="o">=</code><code class="s2">"wrap_content"</code><code class="o">&gt;</code>&#13;
&#13;
    <code class="o">&lt;</code><code class="n">ImageView</code>&#13;
      <code class="n">android</code><code class="p">:</code><code class="nb">id</code><code class="o">=</code><code class="s2">"@+id/row_thumb"</code>&#13;
      <code class="n">android</code><code class="p">:</code><code class="n">layout_width</code><code class="o">=</code><code class="s2">"wrap_content"</code>&#13;
      <code class="n">android</code><code class="p">:</code><code class="n">layout_height</code><code class="o">=</code><code class="s2">"wrap_content"</code><code class="o">&gt;</code>&#13;
&#13;
      <code class="o">&lt;</code><code class="n">LinearLayout</code>&#13;
        <code class="n">android</code><code class="p">:</code><code class="n">orientation</code><code class="o">=</code><code class="s2">"vertical"</code>&#13;
        <code class="n">android</code><code class="p">:</code><code class="n">layout_width</code><code class="o">=</code><code class="s2">"0dp"</code>&#13;
        <code class="n">android</code><code class="p">:</code><code class="n">layout_weight</code><code class="o">=</code><code class="s2">"1"</code>&#13;
        <code class="n">android</code><code class="p">:</code><code class="n">layout_height</code><code class="o">=</code><code class="s2">"wrap_content"</code><code class="o">&gt;</code>&#13;
&#13;
        <code class="o">&lt;</code><code class="n">TextView</code>&#13;
          <code class="n">android</code><code class="p">:</code><code class="nb">id</code><code class="o">=</code><code class="s2">"@+id/row_title"</code>&#13;
          <code class="n">android</code><code class="p">:</code><code class="n">layout_width</code><code class="o">=</code><code class="s2">"wrap_content"</code>&#13;
          <code class="n">android</code><code class="p">:</code><code class="n">layout_height</code><code class="o">=</code><code class="s2">"wrap_content"</code> <code class="o">/&gt;</code>&#13;
&#13;
        <code class="o">&lt;</code><code class="n">TextView</code>&#13;
          <code class="n">android</code><code class="p">:</code><code class="nb">id</code><code class="o">=</code><code class="s2">"@+id/row_authors"</code>&#13;
          <code class="n">android</code><code class="p">:</code><code class="n">layout_width</code><code class="o">=</code><code class="s2">"wrap_content"</code>&#13;
          <code class="n">android</code><code class="p">:</code><code class="n">layout_height</code><code class="o">=</code><code class="s2">"wrap_content"</code> <code class="o">/&gt;</code>&#13;
&#13;
      <code class="o">&lt;/</code><code class="n">LinearLayout</code><code class="o">&gt;</code>&#13;
&#13;
<code class="o">&lt;/</code><code class="n">LinearLayout</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>Note the linear layout trick using the <code>weight</code> attribute mentioned in <a data-type="xref" href="ch02.html#topics_views">Chapter 2</a>.</p>&#13;
&#13;
<p>Let’s call this file <em>complex_book_row.xml</em> and save it in <em>res/layout</em>.</p>&#13;
&#13;
<p>So, with this more complex row, using our more robust <code>ViewHolder</code> class, our <span class="keep-together"><code>onCreateViewHolder</code></span> method might look like this:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177210389336">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Override</code>&#13;
 <code class="kd">public</code> <code class="n">ViewHolder</code> <code class="nf">onCreateViewHolder</code><code class="o">(</code><code class="n">ViewGroup</code> <code class="n">parent</code><code class="o">,</code> <code class="kt">int</code> <code class="n">viewType</code><code class="o">)</code> <code class="o">{</code>&#13;
   <code class="n">LayoutInflater</code> <code class="n">inflater</code> <code class="o">=</code> <code class="n">LayoutInflater</code><code class="o">.</code><code class="na">from</code><code class="o">(</code><code class="n">parent</code><code class="o">.</code><code class="na">getContext</code><code class="o">());</code>&#13;
   <code class="n">View</code> <code class="n">itemView</code> <code class="o">=</code> <code class="n">inflater</code><code class="o">.</code><code class="na">inflate</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">complex_book_row</code><code class="o">,</code> <code class="n">parent</code><code class="o">,</code> <code class="kc">false</code><code class="o">);</code>&#13;
   <code class="k">return</code> <code class="k">new</code> <code class="nf">ViewHolder</code><code class="o">(</code><code class="n">itemView</code><code class="o">);</code>&#13;
 <code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreateViewHolder</code><code class="p">(</code><code class="n">parent</code><code class="p">:</code> <code class="n">ViewGroup</code><code class="p">,</code> <code class="n">viewType</code><code class="p">:</code> <code class="n">Int</code><code class="p">):</code> <code class="n">ViewHolder</code> <code class="p">{</code>&#13;
  <code class="k">val</code> <code class="py">inflater</code> <code class="p">=</code> <code class="n">LayoutInflater</code><code class="p">.</code><code class="n">from</code><code class="p">(</code><code class="n">parent</code><code class="p">.</code><code class="n">context</code><code class="p">)</code>&#13;
  <code class="k">val</code> <code class="py">itemView</code> <code class="p">=</code> <code class="n">inflater</code><code class="p">.</code><code class="n">inflate</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">layout</code><code class="p">.</code><code class="n">complex_book_row</code><code class="p">,</code> <code class="n">parent</code><code class="p">,</code> <code class="k">false</code><code class="p">)</code>&#13;
  <code class="k">return</code> <code class="n">ViewHolder</code><code class="p">(</code><code class="n">itemView</code><code class="p">)</code>&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>Now you might start to see how this comes together—if not, try to imagine how the <code>RecyclerView</code> does its recycling…</p>&#13;
&#13;
<p>When first laid out, the <code>RecyclerView</code> creates enough rows to fill its visible area, using the <code>onCreateViewHolder</code> method as well as some internal opaque functionality. When a user scrolls down far enough for the first row to be outside of the visible viewport, that entire row’s view tree is <em>recycled</em>—it’s detached from the window and added to a pool to be used later, when a row that has not yet rendered becomes visible due to the scrolling or resizing of the <code>RecyclerView</code>. When that happens, the <code>onBindViewHolder</code> method of the <code>RecyclerView.Adpater</code> is invoked, passing in the position (which is often used as an indexed position against a list-style data source) and populating the recently retired but now newly employed view tree. In our most sophisticated example, the <code>onBindViewHolder</code> method might look like this:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177210310328">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Override</code>&#13;
 <code class="kd">public</code> <code class="kt">void</code> <code class="nf">onBindViewHolder</code><code class="o">(</code><code class="n">ViewHolder</code> <code class="n">holder</code><code class="o">,</code> <code class="kt">int</code> <code class="n">position</code><code class="o">)</code> <code class="o">{</code>&#13;
   <code class="n">Book</code> <code class="n">book</code> <code class="o">=</code> <code class="n">Book</code><code class="o">.</code><code class="na">SAMPLE_DATA</code><code class="o">[</code><code class="n">position</code><code class="o">];</code>&#13;
   <code class="c1">// let's assume we can use the ISBN of the book to load a bitmap from a</code>&#13;
   <code class="c1">// remote server. Let's save that in a Bitmap variable named "bitmap"</code>&#13;
   <code class="n">Bitmap</code> <code class="n">bitmap</code> <code class="o">=</code> <code class="c1">// ...</code>&#13;
   <code class="n">holder</code><code class="o">.</code><code class="na">mThumbnail</code><code class="o">.</code><code class="na">setImageBitmap</code><code class="o">(</code><code class="n">bitmap</code><code class="o">);</code>&#13;
   <code class="n">holder</code><code class="o">.</code><code class="na">mTitleView</code><code class="o">.</code><code class="na">setText</code><code class="o">(</code><code class="n">book</code><code class="o">.</code><code class="na">getTitle</code><code class="o">());</code>&#13;
   <code class="n">holder</code><code class="o">.</code><code class="na">mAuthorsView</code><code class="o">.</code><code class="na">setText</code><code class="o">(</code><code class="n">TextUtils</code><code class="o">.</code><code class="na">join</code><code class="o">(</code><code class="s">", "</code><code class="o">,</code> <code class="n">book</code><code class="o">.</code><code class="na">getAuthors</code><code class="o">());</code>&#13;
 <code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">override</code> <code class="k">fun</code> <code class="nf">onBindViewHolder</code><code class="p">(</code><code class="n">holder</code><code class="p">:</code> <code class="n">ViewHolder</code><code class="p">,</code> <code class="n">position</code><code class="p">:</code> <code class="n">Int</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="k">val</code> <code class="py">book</code> <code class="p">=</code> <code class="n">Book</code><code class="p">.</code><code class="n">SAMPLE_DATA</code><code class="p">[</code><code class="n">position</code><code class="p">]</code>&#13;
  <code class="c1">// let's assume we can use the ISBN of the book to load a bitmap</code>&#13;
  <code class="c1">// remote server. Let's save that in a Bitmap variable named "bitmap"</code>&#13;
  <code class="k">val</code> <code class="py">bitmap</code> <code class="p">=</code> <code class="c1">// ...</code>&#13;
  <code class="n">holder</code><code class="p">.</code><code class="n">thumbnailView</code><code class="p">.</code><code class="n">imageBitmap</code> <code class="p">=</code> <code class="n">bitmap</code>&#13;
  <code class="n">holder</code><code class="p">.</code><code class="n">titleView</code><code class="p">.</code><code class="n">text</code> <code class="p">=</code> <code class="n">book</code><code class="p">.</code><code class="n">title</code>&#13;
  <code class="n">holder</code><code class="p">.</code><code class="n">authorsView</code><code class="p">.</code><code class="n">text</code> <code class="p">=</code> <code class="n">TextUtils</code><code class="p">.</code><code class="n">join</code><code class="p">(</code><code class="s">", "</code><code class="p">,</code> <code class="n">book</code><code class="p">.</code><code class="n">authors</code><code class="p">)</code>&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>Now you can see how our simple example works, by comparing it to a more thorough version of the same thing.</p>&#13;
&#13;
<p>All that’s left is to wire this all together. Additionally, we need to let the <code>ReyclerView</code> know how to position its children. As mentioned previously, there are multiple layout managers provided for you for vertical lists, horizontal lists, and grid views, and you can use the same templates to create your own <code>LayoutManager</code> subclass with custom behavior.</p>&#13;
&#13;
<p>After selecting and instantiating a <code>LayoutManager</code>, assign it to the <code>RecyclerView</code>:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177209988328">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">recyclerView</code><code class="o">.</code><code class="na">setLayoutManager</code><code class="o">(</code><code class="k">new</code> <code class="n">LinearLayoutManager</code><code class="o">(</code><code class="k">this</code><code class="o">));</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="n">browse_content_recyclerview</code><code class="p">.</code><code class="n">layoutManager</code> <code class="p">=</code> <code class="n">LinearLayoutManager</code><code class="p">(</code><code class="k">this</code><code class="p">)</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>Finally, attach the <code>Adapter</code> to the <code>RecyclerView</code> with <code>setAdapter</code>:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177209930712">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">recyclerView</code><code class="o">.</code><code class="na">setAdapter</code><code class="o">(</code><code class="k">new</code> <code class="n">BrowseBooksAdapter</code><code class="o">());</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="n">browse_content_recyclerview</code><code class="p">.</code><code class="n">adapter</code> <code class="p">=</code> <code class="n">BrowseBooksAdapter</code><code class="p">()</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>The first draft of your working browse <code>Activity</code> might look like this:</p>&#13;
<aside class="java-kotlin" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm46177209960008">&#13;
<h5/>&#13;
<p><em>Java</em></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">BrowseContentActivity</code> <code class="kd">extends</code> <code class="n">Activity</code> <code class="o">{</code>&#13;
&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">onCreate</code><code class="o">(</code><code class="n">Bundle</code> <code class="n">savedInstanceState</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="kd">super</code><code class="o">.</code><code class="na">onCreate</code><code class="o">(</code><code class="n">savedInstanceState</code><code class="o">);</code>&#13;
    <code class="n">setContentView</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">layout</code><code class="o">.</code><code class="na">activity_browse</code><code class="o">);</code>&#13;
    <code class="n">RecyclerView</code> <code class="n">recyclerView</code> <code class="o">=</code> <code class="n">findViewById</code><code class="o">(</code><code class="n">R</code><code class="o">.</code><code class="na">id</code><code class="o">.</code><code class="na">browse_content_recyclerview</code><code class="o">);</code>&#13;
    <code class="n">recyclerView</code><code class="o">.</code><code class="na">setLayoutManager</code><code class="o">(</code><code class="k">new</code> <code class="n">LinearLayoutManager</code><code class="o">(</code><code class="k">this</code><code class="o">));</code>&#13;
    <code class="n">recyclerView</code><code class="o">.</code><code class="na">setAdapter</code><code class="o">(</code><code class="k">new</code> <code class="n">BrowseBooksAdapter</code><code class="o">());</code>&#13;
  <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p><em>Kotlin</em></p>&#13;
&#13;
<pre data-code-language="kotlin" data-type="programlisting"><code class="k">class</code> <code class="nc">BrowseContentActivity</code> <code class="p">:</code> <code class="n">Activity</code><code class="p">()</code> <code class="p">{</code>&#13;
&#13;
  <code class="k">override</code> <code class="k">fun</code> <code class="nf">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">:</code> <code class="n">Bundle</code><code class="p">?)</code> <code class="p">{</code>&#13;
    <code class="k">super</code><code class="p">.</code><code class="n">onCreate</code><code class="p">(</code><code class="n">savedInstanceState</code><code class="p">)</code>&#13;
    <code class="n">setContentView</code><code class="p">(</code><code class="n">R</code><code class="p">.</code><code class="n">layout</code><code class="p">.</code><code class="n">activity_browse</code><code class="p">)</code>&#13;
    <code class="n">browse_content_recyclerview</code><code class="p">.</code><code class="n">adapter</code> <code class="p">=</code> <code class="n">BrowserBooksAdapter</code><code class="p">()</code>&#13;
    <code class="n">browse_content_recyclerview</code><code class="p">.</code><code class="n">layoutManager</code> <code class="p">=</code> <code class="n">LinearLayoutManager</code><code class="p">(</code><code class="k">this</code><code class="p">)</code>&#13;
  <code class="p">}</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>If you run your app now and tap into the <code>BrowseBooksActivity</code>, you should see the title of each of your books listed in a vertical stack. If your font size is large enough or your screen small enough (feel free to play around with the padding or margins on your <code>TextView</code> to see this in action), you’ll see that this list scrolls and manages to appears as if the entire dataset is available at all times—the magic of <code>RecyclerView</code>.</p>&#13;
&#13;
<p>We’ve got a working list of books on Android. Let’s get iOS working now!<a data-primary="" data-startref="ADjpopand17" data-type="indexterm" id="idm46177209754728"/><a data-primary="" data-startref="Aapppop17" data-type="indexterm" id="idm46177209753752"/><a data-primary="" data-startref="Japppop17" data-type="indexterm" id="idm46177209752808"/><a data-primary="" data-startref="Kapplist17" data-type="indexterm" id="idm46177209751864"/><a data-primary="" data-startref="Lpopand17" data-type="indexterm" id="idm46177209750920"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="iOS" data-type="sect2"><div class="sect2" id="idm46177211839032">&#13;
<h2>iOS</h2>&#13;
&#13;
<p>If<a data-primary="application data" data-secondary="populating list view" data-tertiary="iOS" data-type="indexterm" id="ADpopios17"/><a data-primary="iOS" data-secondary="application data" data-tertiary="populating list view" data-type="indexterm" id="IOSapppop17"/><a data-primary="lists" data-secondary="populating list view" data-tertiary="iOS" data-type="indexterm" id="Lppios17"/> you’ll recall from before, on iOS, we’re using a <code>UITableView</code> to show the data in our catalog. The first thing we need to do if we’re going to do any special logic is switch our vanilla <code>UIViewController</code> into a custom view controller within the storyboard editor. Create<a data-primary="Cocoa Touch" data-secondary="adding new classes" data-type="indexterm" id="idm46177209704664"/> a new Cocoa Touch Class named <code>CatalogViewController</code> that inherits from <code>UIViewController</code> in Xcode (File &gt; New &gt; File) and add it to the project. Leave this file as is, for now, and click on <em>Main.storyboard</em> to open it in the storyboard <span class="keep-together">editor</span>.</p>&#13;
&#13;
<p>Inside the storyboard editor, click on the Catalog scene. In the Identity inspector set the Class value to <code>CatalogViewController</code>, which is the name of the class we just created.</p>&#13;
&#13;
<p>If you look at the table view within the scene, you might notice it’s empty right now. If we tried to use the table view, we wouldn’t be able to because there are currently no prototype cells. Prototype cells are templates defined in the storyboard that are created on-demand by the table view in order to display a row of content. Each row could be a different cell type, but more commonly, a handful (or even just one!) of cell prototypes are defined and used for each cell.</p>&#13;
&#13;
<p>In order to add a prototype cell, select the table view in the scene, open the Attributes inspector and increment the value under Prototype Cells. This will add a new row to the example table view shown in the storyboard editor. To be able to use this cell type, however, we have to be able to target it in the code. This is done by selecting the table view cell in the editor and setting its Identifier (also known as a Reuse Identifier) to a unique value. For now, let’s set the value to <code>CatalogTableViewCell</code>.</p>&#13;
&#13;
<p>We mentioned earlier that our data for this chapter would be static data. Let’s use the same titles we used in the Android section for populating a list view. We can modify our <code>Book</code> structure to include an extension with a convenience method for our list of books like so:</p>&#13;
&#13;
<pre class="small" data-code-language="swift" data-type="programlisting"><code class="kd">struct</code> <code class="nc">Book</code> <code class="p">{</code>&#13;
    <code class="kd">let</code> <code class="nv">title</code><code class="p">:</code> <code class="nb">String</code>&#13;
    <code class="kd">let</code> <code class="nv">authors</code><code class="p">:</code> <code class="p">[</code><code class="nb">String</code><code class="p">]</code>&#13;
    <code class="kd">let</code> <code class="nv">isbn</code><code class="p">:</code> <code class="nb">String</code>&#13;
    <code class="kd">let</code> <code class="nv">pageCount</code><code class="p">:</code> <code class="nb">Int</code>&#13;
    <code class="kd">let</code> <code class="nv">fiction</code><code class="p">:</code> <code class="nb">Bool</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kd">extension</code> <code class="nc">Book</code> <code class="p">{</code>&#13;
    <code class="kd">static</code> <code class="kd">let</code> <code class="nv">sampleData</code><code class="p">:</code> <code class="p">[</code><code class="n">Book</code><code class="p">]</code> <code class="p">=</code> <code class="p">[</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Fight Club"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Chuck Palahniuk"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0393039764"</code><code class="p">,</code>&#13;
          <code class="n">pageCount</code><code class="p">:</code> <code class="mi">208</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"2001: A Space Odyssey"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Arthur C. Clarke"</code><code class="p">],</code>&#13;
          <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0451457998"</code><code class="p">,</code> <code class="n">pageCount</code><code class="p">:</code> <code class="mi">296</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Ulysses"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"James Joyce"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-1420953961"</code><code class="p">,</code>&#13;
          <code class="n">pageCount</code><code class="p">:</code> <code class="mi">682</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Catch-22"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Joseph Heller"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-1451626650"</code><code class="p">,</code>&#13;
          <code class="n">pageCount</code><code class="p">:</code> <code class="mi">544</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"The Stand"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Stephen King"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0307947307"</code><code class="p">,</code>&#13;
          <code class="n">pageCount</code><code class="p">:</code> <code class="mi">1200</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"On The Road"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Jack Kerouac"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0143105466"</code><code class="p">,</code>&#13;
          <code class="n">pageCount</code><code class="p">:</code> <code class="mi">416</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Heart of Darkness"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Joseph Conrad"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code>&#13;
          <code class="s">"978-1503275928"</code><code class="p">,</code> <code class="n">pageCount</code><code class="p">:</code> <code class="mi">78</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"A Brief History of Time"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Stephen Hawking"</code><code class="p">],</code>&#13;
          <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0553380163"</code><code class="p">,</code> <code class="n">pageCount</code><code class="p">:</code> <code class="mi">212</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">false</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Dispatches"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Michael Herr"</code><code class="p">],</code> <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0679735250"</code><code class="p">,</code>&#13;
          <code class="n">pageCount</code><code class="p">:</code> <code class="mi">272</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">false</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Harry Potter and Prisoner of Azkaban"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"J.K. Rowling"</code><code class="p">],</code>&#13;
          <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0439136365"</code><code class="p">,</code> <code class="n">pageCount</code><code class="p">:</code> <code class="mi">448</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
        <code class="n">Book</code><code class="p">(</code><code class="n">title</code><code class="p">:</code> <code class="s">"Dragons Love Tacos"</code><code class="p">,</code> <code class="n">authors</code><code class="p">:</code> <code class="p">[</code><code class="s">"Adam Rubin"</code><code class="p">,</code> <code class="s">"Daniel Salmieri"</code><code class="p">],</code>&#13;
          <code class="n">isbn</code><code class="p">:</code> <code class="s">"978-0803736801"</code><code class="p">,</code> <code class="n">pageCount</code><code class="p">:</code> <code class="mi">40</code><code class="p">,</code> <code class="n">fiction</code><code class="p">:</code> <code class="kc">true</code><code class="p">),</code>&#13;
    <code class="p">]</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now, it might seem contrary, but we will not pass all this data to our table view at once. One of the amazing things about <code>UITableView</code> and <code>UICollectionView</code> is their ability to maintain performance with vast amounts of data. They do this by only interacting with a subset of the data at a time, very similar to Android’s <code>RecyclerView</code>.</p>&#13;
&#13;
<p>In order to populate the table view, we need to create a data source for the table view. This is done by assigning an object that conforms to the <code>UITableViewDataSource</code> protocol of the table view object itself. In this example, we’ll have <code>CatalogViewController</code> itself conform to this protocol for simplicity instead of creating a separate object.</p>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>It’s fairly common practice to have <code>UIViewController</code>s themselves conform to the data source (and delegate) protocols for table views. This is OK for simple apps, but it does violate the separation offered by following a stricter MVC architecture. It also leads to view controller bloat, which is a common problem. Developer beware!</p>&#13;
</div>&#13;
&#13;
<p>Add an extension to <code>CatalogViewController</code> to conform to <code>UITableViewDataSource</code> like so:</p>&#13;
&#13;
<pre data-code-language="swift" data-type="programlisting"><code class="kd">class</code> <code class="nc">CatalogViewController</code><code class="p">:</code> <code class="bp">UIViewController</code> <code class="p">{</code>&#13;
    <code class="p">...</code>&#13;
<code class="p">}</code>&#13;
<code class="kd">extension</code> <code class="nc">CatalogViewController</code><code class="p">:</code> <code class="bp">UITableViewDataSource</code> <code class="p">{</code>&#13;
&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now, there are a number of optional methods you can conform to with the data source protocol, but there are two required methods you’ll have to implement to populate the table view: <code>tableView(_:numberOfRowsInSection:)</code> and <code>tableView(_:cellForRowAt:)</code>. Let’s take a look at the first one.</p>&#13;
&#13;
<p>In <code>tableView(_:numberOfRowsInSection:)</code>, we’re telling the table view how many rows are in each section of data. Our table view will have only one section, so we can just return the number of items in our static data that we defined previously like so:</p>&#13;
&#13;
<pre data-code-language="swift" data-type="programlisting"><code class="kd">func</code> <code class="nf">tableView</code><code class="p">(</code><code class="kc">_</code> <code class="n">tableView</code><code class="p">:</code> <code class="bp">UITableView</code><code class="p">,</code>&#13;
    <code class="n">numberOfRowsInSection</code> <code class="n">section</code><code class="p">:</code> <code class="nb">Int</code><code class="p">)</code> <code class="p">-&gt;</code> <code class="nb">Int</code> <code class="p">{</code>&#13;
	<code class="k">return</code> <code class="n">Book</code><code class="p">.</code><code class="n">sampleData</code><code class="p">.</code><code class="bp">count</code>&#13;
<code class="p">}</code></pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The default amount of sections for a table view if <code>1</code>. In order to define multiple sections inside a table view (with section headers), implement the method <code>numberOfSections(in:)</code>.</p>&#13;
</div>&#13;
&#13;
<p>We’ve told the table view how many rows there will be. Let’s implement our next method, <code>tableView(_:cellForRowAt:)</code>, to provide logic for how to populate the cells.</p>&#13;
&#13;
<p>The main body of this method needs to do two things: it needs to instantiate a table view cell and it needs to populate that table view cell with the correct book. We can do this by using the following code:</p>&#13;
&#13;
<pre class="small" data-code-language="swift" data-type="programlisting">    <code class="kd">func</code> <code class="nf">tableView</code><code class="p">(</code><code class="kc">_</code> <code class="n">tableView</code><code class="p">:</code> <code class="bp">UITableView</code><code class="p">,</code>&#13;
        <code class="n">cellForRowAt</code> <code class="n">indexPath</code><code class="p">:</code> <code class="n">IndexPath</code><code class="p">)</code> <code class="p">-&gt;</code> <code class="bp">UITableViewCell</code> <code class="p">{</code>&#13;
	<code class="c1">// Dequeue a table view cell</code>&#13;
	<code class="kd">let</code> <code class="nv">cell</code> <code class="p">=</code>&#13;
    <code class="n">tableView</code><code class="p">.</code><code class="n">dequeueReusableCell</code><code class="p">(</code><code class="n">withIdentifier</code><code class="p">:</code> <code class="s">"CatalogTableViewCell"</code><code class="p">,</code> <code class="k">for</code><code class="p">:</code> <code class="n">indexPath</code><code class="p">)</code>&#13;
&#13;
	<code class="c1">// Find the correct book based on the row being populated</code>&#13;
	<code class="kd">let</code> <code class="nv">book</code> <code class="p">=</code> <code class="n">Book</code><code class="p">.</code><code class="n">sampleData</code><code class="p">[</code><code class="n">indexPath</code><code class="p">.</code><code class="n">row</code><code class="p">]</code>&#13;
&#13;
	<code class="c1">// Populate the table view cell title label with the book title</code>&#13;
	<code class="n">cell</code><code class="p">.</code><code class="n">textLabel</code><code class="p">?.</code><code class="n">text</code> <code class="p">=</code> <code class="n">book</code><code class="p">.</code><code class="n">title</code>&#13;
&#13;
	<code class="k">return</code> <code class="n">cell</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>First, we’re grabbing a reusable instance of a table view cell by using the identifier (<code>CatalogTableViewCell</code>) we assigned when we created our prototype table cell. Next, we’re grabbing the book for the current row based on the <code>indexPath.row</code> property. This method is called for every cell that’s displayed, so if we’re grabbing the third row, the value of this property would be <code>2</code> so we can grab the third item from the array (i.e., it’s a zero-based row count for convenience). Then, we take that cell and set its text label to the book’s title. Finally, we return the cell so that the table view can display it on the screen.</p>&#13;
&#13;
<p>We’ve got one more step to get this all hooked up together: we have to tell the table view that it can use this view controller as its data source.</p>&#13;
&#13;
<p>Hop back over to <em>Main.storyboard</em> in the storyboard editor. Control-click and drag from the table view in the Catalog scene over to the <code>Catalog</code> object itself inside the<a data-primary="Document Outline" data-type="indexterm" id="idm46177209116232"/> Document Outline on the left side of the canvas. In the dialog that appears select <code>dataSource</code> under Outlets to wire up the table view to the view controller as its data source.</p>&#13;
&#13;
<p>Click build and run and you should be able to click our catalog button to see a list of the sample data we’ve used to populate the list.<a data-primary="" data-startref="Lppios17" data-type="indexterm" id="idm46177209114440"/><a data-primary="" data-startref="IOSapppop17" data-type="indexterm" id="idm46177209113464"/><a data-primary="" data-startref="ADpopios17" data-type="indexterm" id="idm46177209112520"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What We’ve Learned" data-type="sect1"><div class="sect1" id="idm46177209748936">&#13;
<h1>What We’ve Learned</h1>&#13;
&#13;
<p>Let’s review what we’ve learned this chapter.</p>&#13;
&#13;
<p>First, we learned how to add some structure and style to our screens. Next, we learned how to wire up transitions between views triggered by buttons. We discussed data models and showed how similar they can be between platforms. We also created a basic model object for a book that we’ll use and improve in later chapters. Finally, we took that data and displayed it in a list view as part of the library’s book catalog.</p>&#13;
&#13;
<p>We did it! We’ve gotten our app to display some book titles, albeit with static sample data. All this time in the view and controller layers has been fun, but next chapter, we’ll spend more of our time dealing with our models. Let’s check it out!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>