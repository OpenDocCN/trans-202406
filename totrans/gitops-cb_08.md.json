["```\nkubectl apply -n argocd \\\n-f https://raw.githubusercontent.com/argoproj/argo-cd/v2.3.4/manifests/install.yaml\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgd-app\n  namespace: argocd ![1](assets/1.png)\nspec:\n  destination: ![2](assets/2.png)\n    namespace: bgd\n    server: https://kubernetes.default.svc \n  project: default ![3](assets/3.png)\n  source:\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git ![4](assets/4.png)\n    path: ch07/bgd ![5](assets/5.png)\n    targetRevision: main ![6](assets/6.png)\n```", "```\nkubectl apply -f manual-bgd-app.yaml\n```", "```\nargocd app list\n```", "```\nNAME     CLUSTER                         NAMESPACE  PROJECT  STATUS\nbgd-app  https://kubernetes.default.svc  bgd        default  OutOfSync\n```", "```\nkubectl get pods -n bgd\n\nNo resources found in bgd namespace.\n```", "```\nargocd app sync bgd-app\n```", "```\nName:               bgd-app\nProject:            default\nServer:             https://kubernetes.default.svc\nNamespace:          bgd\nURL:                https://openshift-gitops-server-openshift-gitops.apps.openshift.sotogcp.com/applications/bgd-app\nRepo:               https://github.com/lordofthejars/gitops-cookbook-sc.git\nTarget:             main\nPath:               ch07/bgd\nSyncWindow:         Sync Allowed\nSync Policy:        <none>\nSync Status:        Synced to main (384cd3d)\nHealth Status:      Progressing\n\nOperation:          Sync\nSync Revision:      384cd3d21c534e75cb6b1a6921a6768925b81244\nPhase:              Succeeded\nStart:              2022-06-16 14:45:12 +0200 CEST\nFinished:           2022-06-16 14:45:13 +0200 CEST\nDuration:           1s\nMessage:            successfully synced (all tasks run)\n\nGROUP  KIND        NAMESPACE  NAME  STATUS   HEALTH       HOOK  MESSAGE\n       Namespace   bgd        bgd   Running  Synced             namespace/bgd created\n       Service     bgd        bgd   Synced   Healthy            service/bgd created\napps   Deployment  bgd        bgd   Synced   Progressing        deployment.apps/bgd created\n       Namespace              bgd   Synced\n```", "```\nkubectl get pods -n bgd\n\nNAME                   READY   STATUS    RESTARTS   AGE\nbgd-788cb756f7-jll9n   1/1     Running   0          60s\n```", "```\nkubectl get services -n bgd\n\nNAME   TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)\nbgd    ClusterIP   172.30.35.199   <none>        8080:32761/TCP ![1](assets/1.png)\n```", "```\nminikube ip -p gitops\n192.168.59.100\n```", "```\nspec:\n  containers:\n  - image: quay.io/redhatworkshops/bgd:latest\n    name: bgd\n    env:\n    - name: COLOR\n      value: \"green\"\n```", "```\ngit add .\ngit commit -m \"Updates color\"\n\ngit push origin main\n```", "```\nargocd app list\n\nNAME     CLUSTER                         NAMESPACE  PROJECT  STATUS\nbgd-app  https://kubernetes.default.svc  bgd        default  Sync\n```", "```\nargocd app list\nNAME     CLUSTER                         NAMESPACE  PROJECT  STATUS     HEALTH\nbgd-app  https://kubernetes.default.svc  bgd        default  OutOfSync  Healthy\n```", "```\nargocd app sync bgd-app\n```", "```\nargocd app delete bgd-app\n```", "```\ngit revert HEAD\n\ngit push origin main\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgd-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: bgd\n    server: https://kubernetes.default.svc \n  project: default \n  source: \n    path: ch07/bgd\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git\n    targetRevision: main\n  syncPolicy: ![1](assets/1.png)\n    automated: {} ![2](assets/2.png)\n```", "```\nkubectl apply -f bgd/bgd-app.yaml\n```", "```\nkubectl get pods -n bgd\n\nNAME                   READY   STATUS    RESTARTS   AGE\nbgd-788cb756f7-jll9n   1/1     Running   0          60s\n```", "```\nargocd app delete bgd-app\n```", "```\nargocd app sync --prune\n```", "```\nsyncPolicy:\n  automated:\n    prune: true ![1](assets/1.png)\n```", "```\nkubectl -n bgd patch deploy/bgd \\\n--type='json' -p='[{\"op\": \"replace\", \"path\": \"/\nspec/template/spec/containers/0/env/0/value\", \"value\":\"green\"}]'\n```", "```\nkubectl rollout status deploy/bgd -n bgd\n```", "```\nargocd app delete bgd-app\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgd-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: bgd\n    server: https://kubernetes.default.svc \n  project: default \n  source: \n    path: ch07/bgd\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git\n    targetRevision: main\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true ![1](assets/1.png)\n```", "```\nkubectl apply -f bgd/heal-bgd-app.yaml\n```", "```\nargocd app delete bgd-app\n```", "```\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\nnamespace: bgdk\nresources:\n- ../base ![1](assets/1.png)\n- bgdk-ns.yaml ![2](assets/2.png)\npatchesJson6902: ![3](assets/3.png)\n  - target: ![4](assets/4.png)\n      version: v1\n      group: apps\n      kind: Deployment\n      name: bgd\n      namespace: bgdk\n    patch: |- ![5](assets/5.png)\n      - op: replace\n        path: /spec/template/spec/containers/0/env/0/value\n        value: yellow\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgdk-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: bgdk\n    server: https://kubernetes.default.svc \n  project: default \n  source: \n    path: ch07/bgdk/bgdk\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git\n    targetRevision: main\n  syncPolicy:\n    automated: {}\n```", "```\nkubectl apply -f bgdk/bgdk-app.yaml\n```", "```\nargocd app delete bgdk-app\n```", "```\nsource:\n  directory: ![1](assets/1.png)\n    recurse: true\n```", "```\n├── Chart.yaml\n├── charts\n├── templates\n│   ├── NOTES.txt\n│   ├── _helpers.tpl\n│   ├── deployment.yaml\n│   ├── ns.yaml\n│   ├── service.yaml\n│   ├── serviceaccount.yaml\n│   └── tests\n│       └── test-connection.yaml\n└── values.yaml\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgdh-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: bgdh\n    server: https://kubernetes.default.svc \n  project: default \n  source: \n    path: ch07/bgdh\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git\n    targetRevision: main\n  syncPolicy:\n    automated: {}\n```", "```\nkubectl apply -f bgdh/bgdh-app.yaml\n```", "```\nkubectl get pods -n bgdh\n\nNAME                        READY   STATUS    RESTARTS   AGE\nbgdh-app-556c46fcd6-ctfkf   1/1     Running   0          5m43s\n```", "```\nargocd app delete bgdh-app\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgdh-app\n  namespace: openshift-gitops\nspec:\n  destination:\n  ...\n  source:\n    path: ch07/bgd\n    ...\n    helm: ![1](assets/1.png)\n      parameters: ![2](assets/2.png)\n      - name: app ![3](assets/3.png)\n        value: $ARGOCD_APP_NAME ![4](assets/4.png)\n```", "```\nargocd app set bgdh-app --values new-values.yaml\n\nargocd app set bgdh-app -p service.type=LoadBalancer\n```", "```\nkubectl apply -f \\\nhttps://raw.githubusercontent.com/argoproj-labs/argocd-imageupdater/v0.12.0/manifests/install.yaml -n argocd\n```", "```\nkubectl get pods -n argocd\n\nNAME                                                         READY   STATUS    RESTARTS   AGE\nargocd-image-updater-59c45cbc5c-kjjtp                        1/1     Running   0          40h\n```", "```\nkubectl -n argocd create secret generic git-creds \\ --from-literal=username=<git_user> \\\n--from-literal=password=<git_password_or_token>\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bgdk-app\n  namespace: argocd\n  annotations: ![1](assets/1.png)\n    argocd-image-updater.argoproj.io/image-list: myalias=quay.io/rhdevelopers/bgd ![2](assets/2.png)\n    argocd-image-updater.argoproj.io/write-back-method: git:secret:openshift-gitops/git-creds ![3](assets/3.png)\n    argocd-image-updater.argoproj.io/git-branch: main ![4](assets/4.png)\nspec:\n  destination:\n    namespace: bgdk\n    server: https://kubernetes.default.svc \n  project: default \n  source: \n    path: ch07/bgdui/bgdk\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git\n    targetRevision: main\n  syncPolicy:\n    automated: {}\n```", "```\nkubectl apply -f bgdui/bgdui-app.yaml\n```", "```\nkubectl logs argocd-image-updater-59c45cbc5c-kjjtp -f -n argocd\n\n...\ntime=\"2022-06-20T21:19:05Z\" level=info msg=\"Setting new image to quay.io/rhdevelopers/bgd:1.1.0\" alias=myalias application=bgdk-app image_name=rhdevelopers/bgd image_tag=1.0.0 registry=quay.io\ntime=\"2022-06-20T21:19:05Z\" level=info msg=\"Successfully updated image 'quay.io/rhdevelopers/bgd:1.0.0' to 'quay.io/rhdevelopers/bgd:1.1.0', but pending spec update (dry run=false)\" alias=myalias application=bgdk-app image_name=rhdevelopers/bgd image_tag=1.0.0 registry=quay.io ![1](assets/1.png)\ntime=\"2022-06-20T21:19:05Z\" level=info msg=\"Committing 1 parameter update(s) for application bgdk-app\" application=bgdk-app\n...\n```", "```\nargocd app delete bgdk-app\n```", "```\nargocd-image-updater.argoproj.io/image-list: myalias=quay.io/rhdevelopers/bgd:1.2.x\n```", "```\nargocd-image-updater.argoproj.io/myalias.update-strategy: latest\nargocd-image-updater.argoproj.io/myimage.allow-tags: regexp:^[0-9a-f]{7}$ ![1](assets/1.png)\n```", "```\nargocd-image-updater.argoproj.io/myalias.update-strategy: digest\n```", "```\nkubectl create -n argocd secret docker-registry quayio --docker-server=quay.io --docker-username=$QUAY_USERNAME --docker-password=$QUAY_PASSWORD\n```", "```\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-image-updater-config ![1](assets/1.png)\ndata:\n  registries.conf: |\n    registries: ![2](assets/2.png)\n    - name: RedHat Quay ![3](assets/3.png)\n      api_url: https://quay.io ![4](assets/4.png)\n      prefix: quay.io ![5](assets/5.png)\n      insecure: yes\n      credentials: pullsecret:argocd/quayio ![6](assets/6.png)\n```", "```\ncommit 3caf0af8b7a26de70a641c696446bbe1cd04cea8 (HEAD -> main, origin/main)\nAuthor: argocd-image-updater <noreply@argoproj.io>\nDate:   Thu Jun 23 09:41:00 2022 +0000\n\n    build: automatic update of bgdk-app\n\n    updates image rhdevelopers/bgd tag '1.0.0' to '1.1.0'\n```", "```\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-image-updater-config ![1](assets/1.png)\ndata:\n  git.user: alex ![2](assets/2.png)\n  git.email: alex@example.com ![3](assets/3.png)\n  git.commit-message-template: | ![4](assets/4.png)\n    build: automatic update of {{ .AppName }} ![5](assets/5.png)\n\n    {{ range .AppChanges -}} ![6](assets/6.png)\n    updates image {{ .Image }} tag '{{ .OldTag }}' to '{{ .NewTag }}' ![7](assets/7.png) ![8](assets/8.png) ![9](assets/9.png)\n    {{ end -}}\n```", "```\nkubectl rollout restart deployment argocd-image-updater -n argocd\n```", "```\nargocd repo add https://github.com/argoproj/argocd-example-apps \\\n--username <username> --password <password>\n```", "```\napiVersion: v1\nkind: Secret\nmetadata:\n  name: private-repo\n  namespace: argocd ![1](assets/1.png)\n  labels:\n    argocd.argoproj.io/secret-type: repository ![2](assets/2.png)\nstringData:\n  type: git\n  url: https://github.com/argoproj/private-repo ![3](assets/3.png)\n  password: my-password ![4](assets/4.png)\n  username: my-username ![5](assets/5.png)\n```", "```\nargocd repo add https://repo.example.com/repo.git \\\n--tls-client-cert-path ~/mycert.crt \\\n--tls-client-cert-key-path ~/mycert.key\n```", "```\nargocd repo add git@github.com:argoproj/argocd-example-apps.git \\\n--ssh-privatekey-path ~/.ssh/id_rsa\n```", "```\napiVersion: v1\nkind: Secret\nmetadata:\n  name: private-repo\n  namespace: argocd\n  labels:\n    argocd.argoproj.io/secret-type: repository\nstringData:\n  type: git\n  url: git@github.com:argoproj/my-private-repository\n  sshPrivateKey: | ![1](assets/1.png)\n    -----BEGIN OPENSSH PRIVATE KEY-----\n    ...\n    -----END OPENSSH PRIVATE KEY-----\n```", "```\nargocd repo add https://github.com/argoproj/argocd-example-apps.git --github-app-id 1 --github-app-installation-id 2 --github-app-private-key-path test.private-key.pem\n```", "```\napiVersion: v1\nkind: Secret\nmetadata:\n  name: github-repo\n  namespace: argocd\n  labels:\n    argocd.argoproj.io/secret-type: repository\nstringData:\n  type: git\n  repo: https://ghe.example.com/argoproj/my-private-repository\n  githubAppID: 1 ![1](assets/1.png)\n  githubAppInstallationID: 2\n  githubAppEnterpriseBaseUrl: https://ghe.example.com/api/v3 ![2](assets/2.png)\n  githubAppPrivateKeySecret: |\n    -----BEGIN OPENSSH PRIVATE KEY-----\n    ...\n    -----END OPENSSH PRIVATE KEY-----\n```", "```\nspec:\n  ...\n  template:\n    metadata:\n      labels:\n        \"argocd.argoproj.io/secret-type\": repository\n```", "```\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: todo-insert ![1](assets/1.png)\n  annotations:\n    argocd.argoproj.io/hook: PostSync ![2](assets/2.png)\n```", "```\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: postgresql ![1](assets/1.png)\n  namespace: todo\n  annotations:\n    argocd.argoproj.io/sync-wave: \"0\" ![2](assets/2.png)\n...\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: todo-table ![3](assets/3.png)\n  namespace: todo\n  annotations:\n    argocd.argoproj.io/sync-wave: \"1\" ![4](assets/4.png)\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: todo-app\n  namespace: argocd\nspec:\n  destination:\n    namespace: todo\n    server: https://kubernetes.default.svc\n  project: default\n  source:\n    path: ch07/todo\n    repoURL: https://github.com/gitops-cookbook/gitops-cookbook-sc.git\n    targetRevision: main\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: false\n    syncOptions:\n    - CreateNamespace=true\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: AppProject\nmetadata:\n  name: default\nspec:\n  syncWindows: ![1](assets/1.png)\n  - kind: allow  ![2](assets/2.png)\n    schedule: '0 22 * * *' ![3](assets/3.png)\n    duration: 1h ![4](assets/4.png)\n    applications: ![5](assets/5.png)\n    - '*-prod' ![6](assets/6.png)\n```", "```\nargocd proj windows enable-manual-sync <PROJECT ID>\n```", "```\napiVersion: argoproj.io/v1alpha1\nkind: AppProject\nmetadata:\n  name: default\n  namespace: argocd\nspec:\n  syncWindows:\n  - kind: deny ![1](assets/1.png)\n    schedule: '0 22 * * *'\n    duration: 1h\n    manualSync: true ![2](assets/2.png)\n    namespaces: ![3](assets/3.png)\n    - bgd\n  - kind: allow\n    schedule: '0 23 * * *'\n    duration: 1h\n    clusters: ![4](assets/4.png)\n    - prod-cluster\n```", "```\nargocd proj windows list default\n\nID  STATUS    KIND   SCHEDULE    DURATION  APPLICATIONS  NAMESPACES  CLUSTERS      MANUALSYNC\n0   Inactive  deny   0 22 * * *  1h        -             bgd         -             Enabled\n1   Inactive  allow  0 23 * * *  1h        -             -           prod-cluster  Disabled\n```"]