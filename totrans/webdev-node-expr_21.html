<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 21. Going Live"><div class="chapter" id="ch_going_live">
<h1><span class="label">Chapter 21. </span>Going Live</h1>


<p><a data-type="indexterm" data-primary="going live" id="ix_ch-21-going_live-asciidoc0"/>The big day is here: you’ve spent weeks or months toiling over your labor of love, and now your website or service is ready to launch.  It’s not as easy as just “flipping a switch” and then your website is live…or is it?</p>

<p>In this chapter (which you should really read <em>weeks</em> before launch, not the day of!), you’ll learn about some of the domain registration and hosting services available to you, techniques for moving from a staging environment to production, deployment techniques, and things to consider when picking production services.</p>






<section data-type="sect1" data-pdf-bookmark="Domain Registration and Hosting"><div class="sect1" id="idm45053572331768">
<h1>Domain Registration and Hosting</h1>

<p><a data-type="indexterm" data-primary="domain registration" id="ix_ch-21-going_live-asciidoc1"/>People <a data-type="indexterm" data-primary="domain registration" data-secondary="hosting versus" id="idm45053572329352"/><a data-type="indexterm" data-primary="hosting" data-secondary="domain registration versus" id="idm45053572328472"/>are often confused about the difference between <em>domain registration</em> and <em>hosting</em>.  If you’re reading this book, you probably aren’t, but I bet you know people who are, like your clients or your manager.</p>

<p><a data-type="indexterm" data-primary="IP (internet protocol) address" id="idm45053572325960"/>Every website and service on the internet can be identified by an <em>Internet Protocol (IP) address</em> (or more than one).  These numbers are not particularly friendly to humans (and that situation will only get worse as IPv6 adoption improves), but your computer ultimately needs these numbers to show you a web page.  <a data-type="indexterm" data-primary="domain names" id="idm45053572324408"/>That’s where <em>domain names</em> come in.  They map a human-friendly name (like <em>google.com</em>) with an IP address (74.125.239.13 or 2601:1c2:1902:5b38:c256:27ff:fe70:47d1).</p>

<p>A real-world analogy would be the difference between a business name and a physical address.  A domain name is like your business name (Apple), and an IP address is like your physical address (One Apple Park Way, Cupertino, CA 95014).  If you need to actually get in your car and visit Apple’s headquarters, you’ll need to know the physical address.  Fortunately, if you know the business name, you can probably get the physical address.  The other reason this abstraction is helpful is that an organization can move (getting a new physical address), and people can still find it even though it’s moved (as a matter of fact, Apple <em>did</em> move its physical headquarters between the first and second editions of this book).</p>

<p><em>Hosting</em>, on the other hand, describes the computers that run your website.  To continue the physical analogy, hosting could be compared to the buildings you see once you reach the physical address.  What is often confusing to people is that domain registration has very little to do with hosting, and you do not always purchase your domain from the same entity that you pay for hosting (in the same way that you usually buy land from one person and pay another person to build and maintain buildings for you).</p>

<p>While it’s certainly possible to host your website without a domain name, it’s quite unfriendly: IP addresses aren’t very marketable!  <a data-type="indexterm" data-primary="subdomains" data-secondary="IP addresses and" id="idm45053572319240"/>Usually, when you purchase hosting, you’re automatically assigned a subdomain (which we’ll cover in a moment), which can be thought of as something between a marketing-friendly domain name and an IP address (for example, <em>ec2-54-201-235-192.us-west-2.compute.amazonaws.com</em>).</p>

<p>Once you have a domain, and you go live, you could reach your website with multiple URLs.  For example:</p>

<ul>
<li>
<p><em>http://meadowlarktravel.com/</em></p>
</li>
<li>
<p><em>http://www.meadowlarktravel.com/</em></p>
</li>
<li>
<p><em>http://ec2-54-201-235-192.us-west-2.compute.amazonaws.com/</em></p>
</li>
<li>
<p><em>http://54.201.235.192/</em></p>
</li>
</ul>

<p>Thanks to domain mapping, all of these addresses point to the same website.  Once the requests reach your website, it is possible to take action based on the URL that was used.  For example, if someone gets to your website from the IP address, you could automatically redirect to the domain name, though that is not very common as there is little point to it (it is more common to redirect from <em>http://meadowlarktravel.com/</em> to <em>http://www.meadowlarktravel.com/</em>).</p>

<p>Most domain registrars offer hosting services (or partner with companies that do).  Aside from AWS, I’ve never found registrar hosting options to be particularly attractive, and it’s okay to separate domain registration and hosting.</p>








<section data-type="sect2" data-pdf-bookmark="Domain Name System"><div class="sect2" id="idm45053572309544">
<h2>Domain Name System</h2>

<p><a data-type="indexterm" data-primary="DNS (Domain Name System)" id="idm45053572308344"/><a data-type="indexterm" data-primary="Domain Name System (DNS)" id="idm45053572307576"/><a data-type="indexterm" data-primary="domain registration" data-secondary="Domain Name System" id="idm45053572306888"/>The <em>Domain Name System</em> (DNS) is what’s responsible for mapping domain names to IP addresses.  The system is fairly intricate, but there are some things about DNS that you should know as a website owner.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Security"><div class="sect2" id="idm45053572304952">
<h2>Security</h2>

<p><a data-type="indexterm" data-primary="domain registration" data-secondary="security" id="idm45053572303752"/><a data-type="indexterm" data-primary="security" data-secondary="domain registration" id="idm45053572302776"/>You should always keep in mind that <em>domain names are valuable</em>.  If a hacker were to completely compromise your hosting service and take control of your hosting, but you retained control of your domain, you could get new hosting and redirect the domain.  If, on the other hand, your <em>domain</em> were compromised, you could be in real trouble.  Your reputation is tied to your domain, and good domain names are carefully guarded.  People who have lost control of domains have found that it can be devastating, and there are those in the world who will actively try to compromise your domain (especially if it’s a particularly short or memorable one) so they can sell it off, ruin your reputation, or blackmail you.  The upshot is that <em>you should take domain security very seriously</em>, perhaps even more seriously than your data (depending on how valuable your data is).  I’ve seen people spend inordinate amounts of time and money on hosting security while getting the cheapest, sketchiest domain registration they can find.  Don’t make that mistake.  (Fortunately, quality domain registration is not particularly expensive.)</p>

<p>Given the importance of protecting ownership of your domain, you should employ good security practices with respect to your domain registration.  At the very least, you should use strong, unique passwords, and employ proper password hygiene (no keeping it on a sticky note attached to your monitor).  Preferably, you should use a registrar that offers two-factor authentication.  Don’t be afraid to ask your registrar pointed questions about what is required to authorize changes to your account.  <a data-type="indexterm" data-primary="Amazon" data-secondary="AWS Route 53" id="idm45053572298440"/><a data-type="indexterm" data-primary="AWS Route 53" id="idm45053572297464"/><a data-type="indexterm" data-primary="Name.com" id="idm45053572296792"/><a data-type="indexterm" data-primary="Namecheap.com" id="idm45053572296120"/><a data-type="indexterm" data-primary="Route 53" id="idm45053572295448"/>The registrars I recommend are AWS Route 53, Name.com and Namecheap.com.  All three offer two-factor authentication, and I have found their support to be good and their online control panels to be easy and robust.</p>

<p>When you register a domain, you must provide a third-party email address that’s associated with that domain (i.e., if you’re registering <em>meadowlarktravel.com</em>, you shouldn’t use <em>admin@meadowlarktravel.com</em> as your registrant email).  Since any security system is as strong as its weakest link, you should use an email address with good security.  It’s quite common to use a Gmail or Outlook account, and if you do, you should employ the same security standards as you do with your domain registrar account (good password hygiene and two-factor authentication).</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Top-Level Domains"><div class="sect2" id="idm45053572292344">
<h2>Top-Level Domains</h2>

<p><a data-type="indexterm" data-primary="domain registration" data-secondary="top-level domains" id="idm45053572291000"/><a data-type="indexterm" data-primary="top-level domains (TLDs)" id="idm45053572289688"/>What your domain ends with (such as <em>.com</em> or <em>.net</em>) is called a <em>top-level-domain</em> (TLD).  Generally speaking, there are two types of TLD: <a data-type="indexterm" data-primary="country code TLDs" id="idm45053572287544"/>country code TLDs and general TLDs.  Country code TLDs (such as <em>.us</em>, <em>.es</em>, and <em>.uk</em>) are designed to provide a geographic categorization.  However, there are few restrictions on who can acquire these TLDs (the internet is truly a global network, after all), so they are often used for “clever” domains, such as <em>placehold.it</em> and <em>goo.gl</em>.</p>

<p><a data-type="indexterm" data-primary="general TLDs (gTLDs)" id="idm45053572284152"/><a data-type="indexterm" data-primary="gTLDs (general TLDs)" id="idm45053572283080"/>General TLDs (gTLDs) include the familiar <em>.com</em>, <em>.net</em>, <em>.gov</em>, <em>.fed</em>, <em>.mil</em>, and <em>.edu</em>.  While anyone can acquire an available <em>.com</em> or <em>.net</em> domain, there are restrictions in place for the others mentioned.  For more information, see <a data-type="xref" href="#restrictedgtlds">Table 21-1</a>.</p>
<table id="restrictedgtlds">
<caption><span class="label">Table 21-1. </span>Restricted gTLDs</caption>
<thead>
<tr>
<th>TLD</th>
<th>More information</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><em>.gov</em>, <em>.fed</em></p></td>
<td><p><a href="https://www.dotgov.gov"><em class="hyperlink">https://www.dotgov.gov</em></a></p></td>
</tr>
<tr>
<td><p><em>.edu</em></p></td>
<td><p><a href="https://net.educause.edu/"><em class="hyperlink">https://net.educause.edu/</em></a></p></td>
</tr>
<tr>
<td><p><em>.mil</em></p></td>
<td><p>Military personnel and contractors should contact their IT department, or the <a href="http://bit.ly/354JvZF">Department of Defense Unified Registration System</a></p></td>
</tr>
</tbody>
</table>

<p><a data-type="indexterm" data-primary="ICANN (Internet Corporation for Assigned Names and Numbers)" id="idm45053572266248"/><a data-type="indexterm" data-primary="Internet Corporation for Assigned Names and Numbers (ICANN)" id="idm45053572265336"/>The Internet Corporation for Assigned Names and Numbers (ICANN) is ultimately responsible for management of TLDs, though it delegates much of the actual administration to other organizations.  Recently, the ICANN has authorized many new gTLDs, such as <em>.agency</em>, <em>.florist</em>, <em>.recipes</em>, and even <em>.ninja</em>.  For the foreseeable future, <em>.com</em> will probably remain the “premium” TLD, and the hardest one to get real estate in.  People who were lucky (or shrewd) enough to purchase <em>.com</em> domains in the internet’s <span class="keep-together">formative</span> years received massive payouts for prime domains (for example, Facebook purchased <em>fb.com</em> in 2010 for a whopping $8.5 million dollars).</p>

<p>Given the scarcity of <em>.com</em> domains, people are turning to alternative TLDs, or using <em>.com.us</em> to try to get a domain that accurately reflects their organization.  When picking a domain, you should consider how it’s going to be used.  If you plan on marketing primarily electronically (where people are more likely to click a link than type in a domain), then you should probably focus more on getting a catchy or meaningful domain than a short one.  If you’re focusing on print advertising, or you have reason to believe people will be entering your URL manually into their devices, you might consider alternative TLDs so you can get a shorter domain name.  It’s also common practice to have two domains: a short, easy-to-type one, and a longer one more suitable for marketing.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Subdomains"><div class="sect2" id="idm45053572258168">
<h2>Subdomains</h2>

<p><a data-type="indexterm" data-primary="domain registration" data-secondary="subdomains" id="idm45053572256792"/><a data-type="indexterm" data-primary="subdomains" id="idm45053572255592"/>Whereas a TLD goes after your domain, a subdomain goes before it.  By far, the most common subdomain is <em>www</em>.  I’ve never particularly cared for this subdomain.  After all, you’re at a computer, <em>using</em> the World Wide Web; I’m pretty sure you’re not going to be confused if there isn’t a <em>www</em> to remind you of what you’re doing.  For this reason, I recommend using no subdomain for your primary domain: <em>http://meadowlarktravel.com/</em> instead of <em>http://www.meadowlarktravel.com/</em>.  It’s shorter and less busy, and thanks to redirects, there’s no danger of losing visits from people who automatically start everything with <em>www</em>.</p>

<p>Subdomains are used for other purposes too.  I commonly see things like <em>blogs.meadowlarktravel.com</em>, <em>api.meadowlarktravel.com</em>, and <em>m.meadowlarktravel.com</em> (for a mobile site).  Often this is done for technical reasons: it can be easier to use a subdomain if, for example, your blog uses a completely different server than the rest of your site.  A good proxy, though, can redirect traffic appropriately based on either subdomain or path, so the choice of whether to use a subdomain or a path should be more content-focused than technology-focused (remember what Tim Berners-Lee said about URLs expressing your information architecture, not your technical architecture).</p>

<p>I recommend that subdomains be used to compartmentalize significantly different parts of your website or service.  For example, I think it’s a good use of subdomains to make your API available at <em>api.meadowlarktravel.com</em>.  Microsites (sites that have a different appearance than the rest of your site, usually highlighting a single product or subject) are also good candidates for subdomains.  Another sensible use for subdomains is to separate admin interfaces from public interfaces (<em>admin.meadowlarktravel.com</em>, for employees only).</p>

<p>Your domain registrar, unless you specify otherwise, will redirect all traffic to your server regardless of subdomain.  It is up to your server (or proxy), then, to take appropriate action based on the subdomain.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Nameservers"><div class="sect2" id="idm45053572247048">
<h2>Nameservers</h2>

<p><a data-type="indexterm" data-primary="domain registration" data-secondary="nameservers" id="idm45053572245672"/><a data-type="indexterm" data-primary="nameservers" id="idm45053572244472"/>The “glue” that makes domains work are nameservers, and this is what you’ll be asked to provide when you establish hosting for your website.  Usually, this is pretty straightforward, as your hosting service will do most of the work for you.  For example, let’s say we choose to host <em>meadowlarktravel.com</em> at <a href="https://www.digitalocean.com">DigitalOcean</a>.  When you set up your hosting account with DigitalOcean, you’ll be given the names of the DigitalOcean nameservers (there are multiple ones for redundancy).  DigitalOcean, like most hosting providers, calls their nameservers <em>ns1.digitalocean.com</em>, <em>ns1.digitalocean.com</em>, and so on.  Go to your domain registrar and set the nameservers for the domain you want to host, and you’re <span class="keep-together">all set.</span></p>

<p>The way the mapping works in this case is as follows:</p>
<ol>
<li>
<p>Website visitor navigates to <em>http://meadowlarktravel.com/</em>.</p>
</li>
<li>
<p>The browser sends the request to the computer’s network system.</p>
</li>
<li>
<p>The computer’s network system, which has been given an internet IP address and a DNS server by the internet provider, asks the DNS resolver to resolve <em>meadowlarktravel.com</em>.</p>
</li>
<li>
<p>The DNS resolver is aware that <em>meadowlarktravel.com</em> is handled by <em>ns1.digitalocean.com</em>, so it asks <em>ns1.digitalocean.com</em> to give it an IP address for <em>meadowlarktravel.com</em>.</p>
</li>
<li>
<p>The server at <em>ns1.digitalocean.com</em> receives the request and recognizes that <em>meadowlarktravel.com</em> is indeed an active account, and returns the associated IP address.</p>
</li>

</ol>

<p>While this is the most common case, it’s not the only way to configure your domain mapping.  Since the server (or proxy) that actually serves your website has an IP address, we can cut out the middleman by registering that IP address with the DNS resolvers (this effectively cuts out the middleman of the nameserver <em>ns1.digitalocean.com</em> in the previous example).  <a data-type="indexterm" data-primary="static IP address" id="idm45053572229992"/>For this approach to work, your hosting service must assign you a <em>static</em> IP address.  <a data-type="indexterm" data-primary="dynamic IP address" id="idm45053572228664"/>Commonly, hosting providers will give your server(s) a <em>dynamic</em> IP address, which means it may change without notice, which would render this scheme ineffective.  It can sometimes cost extra to get a static IP address instead of a dynamic one: check with your hosting provider.</p>

<p>If you want to map your domain to your website directly (skipping your host’s nameservers), <a data-type="indexterm" data-primary="A record (DNS)" id="idm45053572226760"/><a data-type="indexterm" data-primary="CNAME record (DNS)" id="idm45053572226024"/>you will either be adding an A record or a CNAME record.  An <em>A record</em> maps a domain name directly to an IP address, whereas a <em>CNAME</em> maps one domain name to another.  CNAME records are usually a little less flexible, so A records are generally preferred.</p>
<div data-type="tip"><h6>Tip</h6>
<p>If you’re using AWS for your nameservers, in addition to A and CNAME records, it also has a record called an <em>alias</em> that offers a lot of advantages if you’re pointing it to a service hosted on AWS.  For more information, see the <a href="https://amzn.to/2pUuDhv">AWS documentation</a>.</p>
</div>

<p>Whatever technique you use, domain mapping is usually aggressively cached, meaning that when you change your domain records, it can take up to 48 hours for your domain to be attached to the new server.  Keep in mind that this is also subject to geography: if you see your domain working in Los Angeles, your client in New York may see the domain attached to the previous server.  In my experience, 24 hours is usually sufficient for domains to resolve correctly in the continental US, with international resolution taking up to 48 hours.</p>

<p>If you need something to go live precisely at a certain time, you should not rely on DNS changes.  Rather, modify your server to redirect to the “coming soon” site or page, and make the DNS changes in advance of the actual switchover.  At the appointed moment, then, you can have your server switch over to the live site, and your visitors will see the change immediately, regardless of where they are in the world.<a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc1" id="idm45053572219768"/></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Hosting"><div class="sect2" id="idm45053572218968">
<h2>Hosting</h2>

<p><a data-type="indexterm" data-primary="going live" data-secondary="hosting" id="ix_ch-21-going_live-asciidoc2"/><a data-type="indexterm" data-primary="hosting" data-seealso="cloud hosting" id="ix_ch-21-going_live-asciidoc3"/>Choosing a hosting service can seem overwhelming at first.  Node has taken off in a big way, and everyone’s clamoring to offer Node hosting to meet the demand.  How you select a hosting provider depends very much on your needs.  If you have reason to believe your site will be the next Amazon or Twitter, you’ll have a very different set of concerns than you would if you were building a website for your local stamp collector’s club.</p>










<section data-type="sect3" data-pdf-bookmark="Traditional hosting or cloud hosting?"><div class="sect3" id="idm45053572214440">
<h3>Traditional hosting or cloud hosting?</h3>

<p><a data-type="indexterm" data-primary="cloud hosting" data-secondary="traditional versus" id="idm45053572213128"/><a data-type="indexterm" data-primary="hosting" data-secondary="traditional versus cloud" id="idm45053572212152"/>The <a data-type="indexterm" data-primary="cloud hosting" id="ix_ch-21-going_live-asciidoc4"/>term “cloud” is one of the most nebulous tech terms to crop up in recent years.  Really, it’s just a fancy way to say “the internet,” or “part of the internet.”  The term is not entirely useless, though.  While not part of the technical definition of the term, hosting in the cloud usually implies a certain commoditizing of computing resources.  That is to say, we no longer think about a “server” as a distinct, physical entity: it’s simply a homogeneous resource somewhere in the cloud, and one is as good as another.  I’m oversimplifying, of course: computing resources are distinguished (and priced) <span class="keep-together">according</span> to their memory, number of CPUs, etc.  The difference is between knowing (and caring) what actual server your app is hosted on, and knowing it’s hosted on <em>some</em> server in the cloud, and it could just as easily be moved over to a different one without you knowing (or caring).</p>

<p><a data-type="indexterm" data-primary="virtualization" id="idm45053572207592"/>Cloud hosting is also highly <em>virtualized</em>.  That is, the server(s) your app is running on are not usually physical machines, but virtual machines running on physical servers.  This idea was not introduced by cloud hosting, but it has become synonymous with it.</p>

<p>While cloud hosting had humble origins, it means a lot more than “homogenous servers” now.  The major cloud providers offer many infrastructure services that (in theory) reduce your maintenance burden and offer a high degree of scalability.  These services include database storage, file storage, networking queues, authentication, video processing, telecommunications services, artificial intelligence engines, and much more.</p>

<p>Cloud hosting can be a little disconcerting at first, not knowing anything about the actual physical machine your server is running on, trusting that your servers aren’t going to be affected by the other servers running on the same computer.  Really, though, nothing has changed: when your hosting bill comes, you’re still paying for essentially the same thing: someone taking care of the physical hardware and networking that enables your web applications.  All that’s changed is that you’re more removed from the hardware.</p>

<p>I believe that “traditional” hosting (for lack of a better term) will eventually disappear altogether.  That’s not to say hosting companies will go out of business (though some inevitably will); they will just start to offer cloud hosting themselves.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="XaaS"><div class="sect3" id="idm45053572203496">
<h3>XaaS</h3>

<p>When considering cloud hosting, you will come across the acronyms SaaS, PaaS, IaaS, and FaaS:</p>
<dl>
<dt>Software as a Service (SaaS)</dt>
<dd>
<p><a data-type="indexterm" data-primary="SaaS (software as a service)" id="idm45053572200488"/><a data-type="indexterm" data-primary="software as a service (SaaS)" id="idm45053572199768"/>SaaS generally describes software (websites, apps) that are provided to you: you just use them.  An example would be Google Documents or Dropbox.</p>
</dd>
<dt>Platform as a Service (PaaS)</dt>
<dd>
<p><a data-type="indexterm" data-primary="PaaS (platform as a service)" id="idm45053572197672"/><a data-type="indexterm" data-primary="platform as a service (PaaS)" id="idm45053572196952"/>PaaS provides all of the infrastructure for you (operating systems, networking—all of that is handled).  All you have to do is write your applications.  While there is often a blurry line between PaaS and IaaS (and you will often find yourself straddling that line as a developer), this is generally the service model we’re discussing in this book.  If you’re running a website or web service, PaaS is probably what you’re looking for.</p>
</dd>
<dt>Infrastructure as a Service (IaaS)</dt>
<dd>
<p><a data-type="indexterm" data-primary="infrastructure as a service (IaaS)" id="idm45053572194504"/><a data-type="indexterm" data-primary="IaaS (infrastructure as a service)" id="idm45053572193736"/>IaaS gives you the most flexibility, but at cost.  All you get are virtual machines and a basic network connecting them.  You are then responsible for installing and maintaining operating systems, databases, and network policies.  Unless you need this level of control over your environment, you will generally want to stick with PaaS.  (Note that PaaS does allow you to have control over the <em>choice</em> of operating systems and network configuration: you just don’t have to do it yourself.)</p>
</dd>
<dt>Functions as a Service (FaaS)</dt>
<dd>
<p>  <a data-type="indexterm" data-primary="FaaS (functions as a service)" id="idm45053572190728"/><a data-type="indexterm" data-primary="functions as a service (FaaS)" id="idm45053572189928"/>FaaS describes offerings such as AWS Lambda, Google Functions, and
Azure Functions, which provide a way to run individual functions in the
cloud without having to configure the runtime environment yourself.  It’s
at the core of what is commonly being called “serverless” architecture.</p>
</dd>
</dl>
</div></section>













<section data-type="sect3" data-pdf-bookmark="The behemoths"><div class="sect3" id="idm45053572188424">
<h3>The behemoths</h3>

<p><a data-type="indexterm" data-primary="cloud hosting" data-secondary="Amazon" id="idm45053572187112"/><a data-type="indexterm" data-primary="cloud hosting" data-secondary="Microsoft" id="idm45053572186136"/><a data-type="indexterm" data-primary="cloud hosting" data-secondary="Google" id="idm45053572185192"/>The companies that essentially run the internet (or, at least, are heavily invested in the running of the internet) have realized that with the commoditization of computing resources, they have another viable product to sell.  Amazon, Microsoft, and Google all offer cloud computing services, and their services are quite good.</p>

<p>All of these services are priced similarly: if your hosting needs are modest, there will be minimal price difference among the three.  If you have very high bandwidth or storage needs, you will have to evaluate the services more carefully, as the cost difference could be greater, depending on your needs.</p>

<p><a data-type="indexterm" data-primary="Microsoft" data-secondary="Azure" id="idm45053572182792"/><a data-type="indexterm" data-primary="Microsoft" data-secondary="cloud platforms" id="idm45053572181816"/>While Microsoft does not normally leap to mind when we consider open source platforms, I would not overlook Azure.  Not only is the platform established and robust, but Microsoft has bent over backward to make it friendly to not just Node, but the open source community.  Microsoft offers a one-month Azure trial, which is a great way to determine if the service meets your needs; if you’re considering one of the big three, I definitely recommend the free trial to evaluate Azure.  Microsoft offers Node APIs for all of its major services, including its cloud storage service.  In addition to excellent Node hosting, Azure offers an excellent cloud storage system (with a JavaScript API), as well as good support for MongoDB.</p>

<p><a data-type="indexterm" data-primary="Amazon" data-secondary="cloud platforms" id="idm45053572179736"/>Amazon offers the most comprehensive set of resources, including SMS (text message), cloud storage, email services, payment services (ecommerce), DNS, and more.  In addition, Amazon offers a free usage tier, making it very easy to evaluate.</p>

<p><a data-type="indexterm" data-primary="Google" data-secondary="cloud platforms" id="idm45053572178120"/>Google’s cloud platform has come a long way and now offers robust Node hosting and, as you might expect, excellent integration with its own services (mapping, authentication, and search being particularly attractive).</p>

<p><a data-type="indexterm" data-primary="Heroku" id="idm45053572176520"/>In addition to the “big three,” it is worth considering <a href="https://www.heroku.com">Heroku</a>, which has been catering to people wanting to host fast and nimble Node applications for some time now.  <a data-type="indexterm" data-primary="DigitalOcean" id="idm45053572174824"/>I’ve also had great luck with <a href="https://www.digitalocean.com">DigitalOcean</a>, which focuses more on providing containers and a limited number of services in a very user-friendly manner.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Boutique hosting"><div class="sect3" id="idm45053572173016">
<h3>Boutique hosting</h3>

<p><a data-type="indexterm" data-primary="boutique hosting" id="idm45053572171816"/><a data-type="indexterm" data-primary="cloud hosting" data-secondary="boutique hosting" id="idm45053572171112"/>Smaller hosting services, which I’m going to call “boutique” hosting services (for lack of a better word), may not have the infrastructure or resources of Microsoft, Amazon, or Google, but that doesn’t mean they don’t offer something valuable.</p>

<p>Because boutique hosting services can’t compete in terms of infrastructure, they usually focus on customer service and support.  If you need a lot of support, you might want to consider a boutique hosting service.  If you have a hosting provider you’ve been happy with, don’t hesitate to ask if it offers (or plans on offering) Node hosting<a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc4" id="idm45053572169016"/>.<a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc3" id="idm45053572168216"/><a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc2" id="idm45053572167496"/></p>
</div></section>



</div></section>













<section data-type="sect2" data-pdf-bookmark="Deployment"><div class="sect2" id="idm45053572166552">
<h2>Deployment</h2>

<p><a data-type="indexterm" data-primary="deployment" id="ix_ch-21-going_live-asciidoc5"/><a data-type="indexterm" data-primary="going live" data-secondary="deployment" id="ix_ch-21-going_live-asciidoc6"/>It <a data-type="indexterm" data-primary="FTP, security issues with" id="idm45053572162744"/><a data-type="indexterm" data-primary="security" data-secondary="FTP and" id="idm45053572162024"/>still surprises me that, in 2019, people are still using FTP to deploy their applications.  If you are, <em>please stop</em>.  FTP is in no way secure.  Not only are all your files transmitted unencrypted, but your <em>username and password</em> are also.  If your hosting provider doesn’t give you an option, find a new hosting provider.  If you really have no choice, make sure you use a unique password that you’re not using for anything else.</p>

<p><a data-type="indexterm" data-primary="CD (continuous delivery)" id="idm45053572159400"/><a data-type="indexterm" data-primary="continuous delivery (CD)" id="idm45053572158680"/>At minimum, you should be using SFTP or FTPS (not to be confused), but you should really be considering a <em>continuous delivery</em> (CD) service.</p>

<p>The idea behind CD is that you’re never very far away from a version that can be released (weeks or even days).  CD is usually used in the same breath as <em>continuous integration</em> (CI), which refers to automated processes for integrating the work of developers and testing them.</p>

<p>In general, the more you can automate your processes, the easier your development will be.  Imagine merging in changes, and automatically getting notified that unit tests pass, then integration tests pass, and then seeing your changes online…in a matter of minutes!  It’s a great goal, but you have to invest some work up front to get it set up, and there will be some maintenance over time.</p>

<p>Although the steps themselves are similar (run unit tests, run integration tests, deploy to staging servers, deploy to production servers), the process of setting up CI/CD pipelines (a word you’ll hear a lot when discussing CI/CD) varies substantially.</p>

<p>You should look at some of the options available for CI/CD and choose one that meets your needs:</p>
<dl>
<dt><a href="https://amzn.to/2CzTQAo">AWS CodePipeline</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="Amazon" data-secondary="AWS CodePipeline" id="idm45053572151992"/><a data-type="indexterm" data-primary="AWS CodePipeline" id="idm45053572151016"/><a data-type="indexterm" data-primary="CodePipeline" id="idm45053572150344"/>If you’re hosting on AWS, CodePipeline should be first on your list, as it will be the easiest path to CI/CD for you.  It’s very robust, but I’ve found it to be a little less user-friendly than some of the other options.</p>
</dd>
<dt><a href="http://bit.ly/2CEsSI0">Microsoft Azure Web Apps</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="Microsoft Azure" id="idm45053572147784"/><a data-type="indexterm" data-primary="Web Apps (Microsoft Azure)" id="idm45053572147080"/>If you’re hosting on Azure, Web Apps is your best bet (are you noticing a trend here?).  I haven’t had much experience with this service, but it seems to be well loved in the community.</p>
</dd>
<dt><a href="https://travis-ci.org/">Travis CI</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="Travis CI" id="idm45053572144504"/>Travis CI has been around for a long time now, and has a large, loyal user base and good documentation.</p>
</dd>
<dt><a href="https://semaphoreci.com/">Semaphore</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="Semaphore" id="idm45053572141992"/>Semaphore is easy to set up and configure, but it doesn’t offer many features, and its basic (low-cost) plans are slow.</p>
</dd>
<dt><a href="http://bit.ly/2NGuIys">Google Cloud Build</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="Google Cloud Build" id="idm45053572139464"/>I haven’t tried Google Cloud Build yet, but it looks robust and, like CodePipeline and Azure Web Apps, it’s likely that is the best choice if you’re hosting on Google Cloud.]</p>
</dd>
<dt><a href="https://circleci.com/">CircleCI</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="CircleCI" id="idm45053572136888"/>CircleCI is another CI that’s been around for some time, and is well loved.</p>
</dd>
<dt><a href="https://jenkins.io/">Jenkins</a></dt>
<dd>
<p><a data-type="indexterm" data-primary="Jenkins" id="idm45053572134504"/>Jenkins is another incumbent with a large community.  My experience is that it hasn’t kept up with modern deployment practices as well as some of the other options here, but it did just release a new version that looks promising.</p>
</dd>
</dl>

<p>At the end of the day, CI/CD services are automating the activities that <em>you</em> create.  You still have to write the code, determine your versioning scheme, write high-quality unit and integration tests and a way to run them, and understand your deployment infrastructure.  The examples in this book could be automated simply enough: most everything could be deployed to a single server running a Node instance.  However, as you start to grow your infrastructure, so too will your CI/CD pipeline grow in complexity.</p>










<section data-type="sect3" data-pdf-bookmark="Git’s role in deployment"><div class="sect3" id="idm45053572132088">
<h3>Git’s role in deployment</h3>

<p><a data-type="indexterm" data-primary="deployment" data-secondary="Git's role in" id="idm45053572130744"/><a data-type="indexterm" data-primary="Git" data-secondary="role in deployment" id="idm45053572129768"/>Git’s greatest strength (and greatest weakness) is its flexibility.  It can be adapted to almost any workflow imaginable.  For the sake of deployment, I recommend creating one or more branches <em>specifically for deployment</em>.  For example, you might have a <code>production</code> branch and a <code>staging</code> branch.  How you use those branches is very much up to your individual workflow.</p>

<p>One popular approach is to flow from <code>master</code> to <code>staging</code> to <code>production</code>.  So once some changes on <code>master</code> are ready to go live, you could merge them into <code>staging</code>.  Once they have been approved on the staging server, you could then merge <code>staging</code> into <code>production</code>.  While this makes logical sense, I dislike the clutter it creates (merges, merges everywhere).  Also, if you have lots of features that need to be staged and pushed to production in different orders, this can get messy quickly.</p>

<p>I feel a better approach is to merge <code>master</code> into <code>staging</code> and, when you’re ready to go live with changes, then merge <code>master</code> into <code>production</code>.  In this way, <code>staging</code> and <code>production</code> become less associated: you can even have multiple staging branches to experiment with different features before going live (and you can merge things other than <code>master</code> into them).  Only when something has been approved for production do you merge it into <code>production</code>.</p>

<p>What happens when you need to roll back changes?  This is where things can get <span class="keep-together">complicated.</span>  There are multiple techniques for undoing changes, such as applying the inverse of a commit to undo prior commits (<code>git revert</code>), these <span class="keep-together">techniques</span> not only are complicated, but also can can cause problems down the line.  The typical way of handling this is to create tags (for example, <code>git tag v1.2.0</code> on your <code>production</code> branch) every time you make a deployment.  If you need to roll back to a specific version, you always have that tag available.</p>

<p>In the end, it is up to you and your team to decide on a Git workflow.  More important than the workflow you pick is the consistency with which you use it, and the training and communication surrounding it.</p>
<div data-type="tip"><h6>Tip</h6>
<p>We’ve already discussed the value of keeping your binary assets (multimedia and documents) separate from your code repository.  Git-based deployment offers another incentive for this approach.  If you have 4 GB of multimedia data in your repository, they’re going to take forever to clone, and you have an unnecessary copy of all of your data for every production server.</p>
</div>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Manual Git-based deployment"><div class="sect3" id="idm45053572112776">
<h3>Manual Git-based deployment</h3>

<p><a data-type="indexterm" data-primary="deployment" data-secondary="manual Git-based" id="idm45053572111432"/><a data-type="indexterm" data-primary="Git" data-secondary="manual Git-based deployment" id="idm45053572110456"/>If you’re not ready yet to take the step of setting up CI/CD, you could start with a manual Git-based deployment.  The advantage of this approach is that you’ll get comfortable with the steps and challenges involved in deployment, which will serve you well when you take the step of automation.</p>

<p>For each server you want to deploy to, you will have to clone the repository, check out the <code>production</code> branch, and then set up the infrastructure necessary to start/restart your app (which will be dependent on your choice of platform).  When you update the <code>production</code> branch, you will have to go to each server, run <code>git pull --ff-only</code>, run <code>npm install --production</code>, and then restart the app.  If your deployments aren’t often, and you don’t have very many servers, this may not represent a terrible hardship, but if you’re updating more often, this will get old fast, and you’ll want to find some way to automate the system.</p>
<div data-type="tip"><h6>Tip</h6>
<p>The <code>--ff-only</code> argument to <code>git pull</code> allows only fast-forward pulls, preventing automatic merging or rebasing.  If you know the pull is fast-forward only, you may safely omit it, but if you get in the habit of doing it, you will never accidentally invoke a merge or rebase!</p>
</div>

<p>In essence, what you are doing here is replicating the way you work in development, except you’re doing it on a remote server.  Manual processes always run the risk of human error, and I recommend this approach only as a stepping stone toward more automated development.<a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc6" id="idm45053572103320"/><a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc5" id="idm45053572102648"/></p>
</div></section>



</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Conclusion"><div class="sect1" id="idm45053572331304">
<h1>Conclusion</h1>

<p>Deploying your website (especially for the first time) should be an exciting occasion.  There should be champagne and cheering, but all too often, there is sweating, cursing, and late nights.  I’ve seen far too many websites launched at three in the morning by an irritable, exhausted team.  Fortunately, that’s changing, partly thanks to cloud deployment.</p>

<p>No matter what deployment strategy you choose, the most important thing you can do is to start production deployments early, before the site is ready to go live.  You don’t have to hook up the domain, so the public doesn’t need to know.  If you’ve already deployed the site to production servers half a dozen times before the day of launch, your chances of a successful launch will be much higher.  Ideally, your functioning website will already be running on the production server long before launch: all you have to do is flip the switch from the old site to the new site.<a data-type="indexterm" data-startref="ix_ch-21-going_live-asciidoc0" id="idm45053572099544"/></p>
</div></section>







</div></section></div>



  </body></html>