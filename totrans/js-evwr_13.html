<html><head></head><body><section data-pdf-bookmark="Chapter 12. Building a Web Client with React" data-type="chapter" epub:type="chapter"><div class="chapter" id="web-introduction">&#13;
<h1><span class="label">Chapter 12. </span>Building a Web Client with React</h1>&#13;
&#13;
&#13;
<p><a data-primary="web client building" data-type="indexterm" id="ix_ch12-asciidoc0"/>The<a data-primary="web client building" data-secondary="about" data-type="indexterm" id="idm45339501185944"/> original idea behind hypertext was to take related documents and link them together: if academic paper A references academic paper B let’s make it easy to click something and navigate between them. In 1989, a software engineer at CERN named Tim Berners-Lee had the idea to combine hypertext with networked computers, making it easy for someone to make these connections regardless of the location of the documents. Every cat photo, news article, tweet, streaming video, job search site, and restaurant review is indebted to the simple idea of globally linking documents.</p>&#13;
&#13;
<p>At its heart, the web remains a medium for linking documents together. Each page is HTML, rendered in a web browser, with CSS for styling and JavaScript for enhancements. Today, we use these technologies to build everything from personal blogs and small brochure sites to complex interactive applications. The underlying advantage is that the web provides universal access. All anyone needs is a web browser on a web-connected device, creating an inclusive-by-default environment.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What We’re Building" data-type="sect1"><div class="sect1" id="idm45339501183240">&#13;
<h1>What We’re Building</h1>&#13;
&#13;
<p>In the upcoming chapters we’ll build the web client for our social note application, Notedly. Users will be able to create and sign in to an account, write notes in Markdown, edit their notes, view a feed of other users’ notes, and “favorite” other users’ notes. To accomplish all of this, we’ll be interacting with our GraphQL server API.</p>&#13;
&#13;
<p>In our web application:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Users will be able to create notes, as well as read, update, and delete the notes they’ve created.</p>&#13;
</li>&#13;
<li>&#13;
<p>Users will be able to view a feed of notes created by other&#13;
users, and read individual notes created by others, though they will not&#13;
be able to update or delete them.</p>&#13;
</li>&#13;
<li>&#13;
<p>Users will be able to create an account, log in, and log out.</p>&#13;
</li>&#13;
<li>&#13;
<p>Users will be able to retrieve their profile information as well as the public profile information of other users.</p>&#13;
</li>&#13;
<li>&#13;
<p>Users will be able to favorite the notes of other users as well as&#13;
retrieve a list of their favorites.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>These features will cover a lot of ground, but we’ll be breaking them into small chunks throughout this portion of the book. Once you’ve learned to build a React application with all of these features, you’ll be able to apply the tools and techniques toward building all sorts of rich web applications.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="How We’re Going to Build This" data-type="sect1"><div class="sect1" id="idm45339501174600">&#13;
<h1>How We’re Going to Build This</h1>&#13;
&#13;
<p>As you’ve probably guessed, to build this application we’ll be using React as a client-side JavaScript library. Additionally, we’ll be querying data from our GraphQL API. To aid in the querying, mutating, and caching of data, we’ll make use of <a href="https://oreil.ly/hAG_X">Apollo Client</a>. Apollo Client comprises a collection of open source tools for working with GraphQL. We’ll be using the React version of the library, but the team at Apollo has also developed Angular, Vue, Scala.js, Native iOS, and Native Android integrations.</p>&#13;
<div data-type="note" epub:type="note"><h1>Other GraphQL Client Libraries</h1>&#13;
<p>While we’ll be using Apollo in this book, it is far from the only GraphQL client option available. Facebook’s <a href="https://relay.dev">Relay</a> and Formiddable’s <a href="https://oreil.ly/q_deu">urql</a> are two popular alternatives.</p>&#13;
</div>&#13;
&#13;
<p>Additionally, we’ll be using<a data-primary="Parcel" data-type="indexterm" id="idm45339501168632"/> <a href="https://parceljs.org">Parcel</a> as our code bundler. A code bundler allows us to write JavaScript using features that may not be available in a web browser (e.g., newer language features, code modules, minificiation) and packages them for use in the browser environment. Parcel is a configuration-free alternative to application build tools like <a href="https://webpack.js.org">Webpack</a>. It offers a lot of nice features such as code splitting and automatically updating the browser during development (aka <em>hot module replacement</em>), but without the need to set up a build chain. As you saw in the previous chapter, <a href="https://oreil.ly/dMQyk"><code>create-react-app</code></a> also offers a zero-configuration initial setup, using Webpack behind the scenes, but Parcel allows us to build our application from the ground up, in a way that I find ideal for learning.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Getting Started" data-type="sect1"><div class="sect1" id="idm45339501164344">&#13;
<h1>Getting Started</h1>&#13;
&#13;
<p><a data-primary="web client building" data-secondary="getting started" data-type="indexterm" id="ix_ch12-asciidoc1"/>Before we can start development, we need to make a copy of the&#13;
project starter files to our machine. The <a href="https://github.com/javascripteverywhere/web">project’s source code</a> contains all of the scripts and references to third-party libraries that we will need to develop our application. To clone the code to your local machine, open the terminal, navigate to the directory where you keep your projects, and <code>git clone</code> the project repository. If you’ve worked through the API chapters, you may also have already create a <em>notedly</em> directory to keep the project code organized:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="c"># change into the Projects directory</code>&#13;
<code class="nv">$ </code><code class="nb">cd</code>&#13;
<code class="nv">$ </code><code class="nb">cd </code>Projects&#13;
<code class="nv">$ </code><code class="c"># type the `mkdir notedly` command if you don't yet have a notedly directory</code>&#13;
<code class="nv">$ </code><code class="nb">cd </code>notedly&#13;
<code class="nv">$ </code>git clone git@github.com:javascripteverywhere/web.git&#13;
<code class="nv">$ </code><code class="nb">cd </code>web&#13;
<code class="nv">$ </code>npm install</pre>&#13;
<div data-type="note" epub:type="note"><h1>Installing Third-Party Dependencies</h1>&#13;
<p>By making a copy of the book’s starter code and running <code>npm install</code> in the directory, you avoid having to again run <code>npm install</code> for any of the individual third-party dependencies.</p>&#13;
</div>&#13;
&#13;
<p>The code is structured as follows:</p>&#13;
<dl>&#13;
<dt><em>/src</em></dt>&#13;
<dd>&#13;
<p>This is the directory where you should perform your&#13;
development as you follow along with the book.</p>&#13;
</dd>&#13;
<dt><em>/solutions</em></dt>&#13;
<dd>&#13;
<p>This directory contains the solutions for each chapter.&#13;
If you get stuck, these are available for you to consult.</p>&#13;
</dd>&#13;
<dt><em>/final</em></dt>&#13;
<dd>&#13;
<p>This directory contains the final working project.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>Now that you have the code on your local machine, you’ll need to make a&#13;
copy of the project’s <em>.env</em> file. This file is a place to keep the&#13;
variables unique to the environment we are working in. For example, when working locally we’ll be pointing to a local instance of our API, but when we deploy our app we’ll point to our remotely deployed API. To make a copy of the sample <em>.env</em> file, type the following into your terminal, from the <em>web</em> directory:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="nx">$</code> <code class="nx">cp</code> <code class="p">.</code><code class="nx">env</code><code class="p">.</code><code class="nx">example</code> <code class="p">.</code><code class="nx">env</code></pre>&#13;
&#13;
<p>You should now see an <em>.env</em> file in the directory. You don’t yet need to&#13;
do anything with this file, but we’ll be adding information to it as we&#13;
progress through the development of our API backend. The <em>.gitignore</em>&#13;
file included with the project will ensure that you do not inadvertently&#13;
commit your <em>.env</em> file.</p>&#13;
<div data-type="caution"><h1>Help, I Don’t See the .env File!</h1>&#13;
<p>By default, operating systems hide files that start with a period, as these are typically used by the system, not end users. If you don’t see the <em>.env</em> file, try opening the directory in your text editor. The file should be visible in the file explorer of your editor. Alternately, typing <code>ls -a</code> into your terminal window will list the files in the current working directory.<a data-startref="ix_ch12-asciidoc1" data-type="indexterm" id="idm45339501138744"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Building Out the Web Application" data-type="sect1"><div class="sect1" id="idm45339501163752">&#13;
<h1>Building Out the Web Application</h1>&#13;
&#13;
<p><a data-primary="web application building" data-secondary="web client building" data-type="indexterm" id="idm45339501136376"/><a data-primary="web client building" data-secondary="building out the web application" data-type="indexterm" id="idm45339501135432"/>With our starter code cloned locally, we’re ready to build out our React web application. Let’s first take a look at our <em>src/index.html</em> file. This looks like a standard, yet completely empty, HTML file, but note the following two lines:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"root"</code><code class="nt">&gt;&lt;/div&gt;</code>&#13;
<code class="nt">&lt;script </code><code class="na">src=</code><code class="s">"./App.js"</code><code class="nt">&gt;&lt;/script&gt;</code></pre>&#13;
&#13;
<p>These two lines are incredibly important to our React application. The<a data-primary="root &lt;div&gt;" data-type="indexterm" id="idm45339501057160"/> <code>root &lt;div&gt;</code> will provide the container for our entire application. Meanwhile, the <em>App.js</em> file will be the entry point to our JavaScript application.</p>&#13;
&#13;
<p>Now we can begin to develop our React application in our <em>src/App.js</em> file. If you followed along with the React introduction in the previous chapter, this may all feel familiar. In <em>src/App.js</em> we begin by importing the <code>react</code> and <code>react-dom</code> libraries:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">ReactDOM</code> <code class="nx">from</code> <code class="s1">'react-dom'</code><code class="p">;</code></pre>&#13;
&#13;
<p>Now we will create a function, named <code>App</code>, that will return the contents of our application. For now, this will simply be two lines of HTML contained within a <code>&lt;div&gt;</code> <span class="keep-together">element:</span></p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">const</code> <code class="nx">App</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Hello</code> <code class="nx">Notedly</code><code class="o">!&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">Welcome</code> <code class="nx">to</code> <code class="nx">the</code> <code class="nx">Notedly</code> <code class="nx">application</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code></pre>&#13;
<div data-type="note" epub:type="note"><h1>What’s With All of the divs?</h1>&#13;
<p><a data-primary="&lt;div&gt; tag" data-type="indexterm" id="idm45339500934136"/>If you’re just starting out with React, you may wonder about the tendency to surround components with <code>&lt;div&gt;</code> tags. React components must be contained with a parent element, which often is a <code>&lt;div&gt;</code> tag, but could also be any other appropriate HTML tag such as <code>&lt;section&gt;</code>, <code>&lt;header&gt;</code>, or <code>&lt;nav&gt;</code>. If a containing HTML tag feels extraneous, we can instead use <code>&lt;React.Fragment&gt;</code> or empty <code>&lt;&gt;</code> tags to contain the components in our JavaScript code.</p>&#13;
</div>&#13;
&#13;
<p>Finally, we will instruct React to render our application within the element with an ID of <code>root</code> by adding the following:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code><code class="o">&lt;</code><code class="nx">App</code> <code class="o">/&gt;</code><code class="p">,</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s1">'root'</code><code class="p">));</code></pre>&#13;
&#13;
<p>The full content of our <em>src/App.js</em> file should now be:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">ReactDOM</code> <code class="nx">from</code> <code class="s1">'react-dom'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">App</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Hello</code> <code class="nx">Notedly</code><code class="o">!&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">Welcome</code> <code class="nx">to</code> <code class="nx">the</code> <code class="nx">Notedly</code> <code class="nx">application</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code><code class="o">&lt;</code><code class="nx">App</code> <code class="o">/&gt;</code><code class="p">,</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s1">'root'</code><code class="p">));</code></pre>&#13;
&#13;
<p>With this complete, let’s take a look in our web browser. Start your local development server by typing <strong><code>npm run dev</code></strong> in your terminal application. Once the code is bundled, visit <em>http://localhost:1234</em> to view the page (<a data-type="xref" href="#hello_notedly">Figure 12-1</a>).</p>&#13;
&#13;
<figure><div class="figure" id="hello_notedly">&#13;
<img alt="A screenshot of our React application running in the browser" src="assets/jsev_1201.png"/>&#13;
<h6><span class="label">Figure 12-1. </span>Our initial React application running in the browser</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Routing" data-type="sect1"><div class="sect1" id="idm45339501137320">&#13;
<h1>Routing</h1>&#13;
&#13;
<p><a data-primary="routing" data-secondary="web client building" data-type="indexterm" id="ix_ch12-asciidoc2"/><a data-primary="web client building" data-secondary="routing" data-type="indexterm" id="ix_ch12-asciidoc3"/>One of the defining features of the web is being able to link documents together. Similarly, for our application we’ll want users to be able to navigate between screens or pages. In an HTML rendered application, this would involve creating multiple HTML documents. Whenever a user navigates to a new document, the entire document will reload, even if there are shared aspects, such as a header or footer, on the two pages.</p>&#13;
&#13;
<p>In JavaScript applications we can make use of client-side routing. In many ways, this will be similar to HTML linking. A user will click a link, the URL will update, and they will navigate to a new screen. The difference is that our application will only update the page with the content that has changed. The experience will be smooth and “app-like,” meaning that there will not be a visible refresh of the page.</p>&#13;
&#13;
<p>In React, the most commonly used routing library is <a href="https://oreil.ly/MhQQR">React Router</a>. This library enables us to add routing capabilities to React web applications. To introduce routing to our application, let’s first create a <em>src/pages</em> directory and add the following files:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><em>/src/pages/index.js</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>/src/pages/home.js</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>/src/pages/mynotes.js</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>/src/pages/favorites.js</em></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Our <em>home.js</em>, <em>mynotes.js</em>, and <em>favorites.js</em> files will be our individual page components. We can create each of them with some initial content and an <code>effect</code> hook, which will update the document title when a user navigates to the page.</p>&#13;
&#13;
<p>In <em>src/pages/home.js</em>:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">Home</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Notedly</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">This</code> <code class="nx">is</code> <code class="nx">the</code> <code class="nx">home</code> <code class="nx">page</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Home</code><code class="p">;</code></pre>&#13;
&#13;
<p>In <em>src/pages/mynotes.js</em>:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code><code class="p">,</code> <code class="p">{</code> <code class="nx">useEffect</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">MyNotes</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">useEffect</code><code class="p">(()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
    <code class="c1">// update the document title</code>&#13;
    <code class="nb">document</code><code class="p">.</code><code class="nx">title</code> <code class="o">=</code> <code class="s1">'My Notes — Notedly'</code><code class="p">;</code>&#13;
  <code class="p">});</code>&#13;
&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Notedly</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">These</code> <code class="nx">are</code> <code class="nx">my</code> <code class="nx">notes</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">MyNotes</code><code class="p">;</code></pre>&#13;
&#13;
<p>In <em>src/pages/favorites.js</em>:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code><code class="p">,</code> <code class="p">{</code> <code class="nx">useEffect</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">Favorites</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="nx">useEffect</code><code class="p">(()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
    <code class="c1">// update the document title</code>&#13;
    <code class="nb">document</code><code class="p">.</code><code class="nx">title</code> <code class="o">=</code> <code class="s1">'Favorites — Notedly'</code><code class="p">;</code>&#13;
  <code class="p">});</code>&#13;
&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Notedly</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">These</code> <code class="nx">are</code> <code class="nx">my</code> <code class="nx">favorites</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Favorites</code><code class="p">;</code></pre>&#13;
<div data-type="note" epub:type="note"><h1>useEffect</h1>&#13;
<p><a data-primary="useEffect" data-type="indexterm" id="idm45339500608072"/>In the preceding examples we’re using React’s <code>useEffect</code> hook to set the title of the page. Effect hooks allow us to include side effects in our components, updating something that is not related to the component itself. If you are interested, React’s documentation provides a deep dive into <a href="https://oreil.ly/VkpTZ">effect hooks</a>.</p>&#13;
</div>&#13;
&#13;
<p>Now, in <em>src/pages/index.js</em> we’ll import React Router and the methods necessary for web browser routing with the <code>react-router-dom</code> package:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">BrowserRouter</code> <code class="nx">as</code> <code class="nx">Router</code><code class="p">,</code> <code class="nx">Route</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'react-router-dom'</code><code class="p">;</code></pre>&#13;
&#13;
<p>Next, we’ll import the page components that we just created:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">Home</code> <code class="nx">from</code> <code class="s1">'./home'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">MyNotes</code> <code class="nx">from</code> <code class="s1">'./mynotes'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Favorites</code> <code class="nx">from</code> <code class="s1">'./favorites'</code><code class="p">;</code></pre>&#13;
&#13;
<p>Finally, we’ll designate each of the page components that we created as routes with a specific URL. Note the use of <code>exact</code> for our “Home” route, which will ensure the home component is rendered only for the root URL:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">const</code> <code class="nx">Pages</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">Router</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">exact</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code> <code class="nx">component</code><code class="o">=</code><code class="p">{</code><code class="nx">Home</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/mynotes"</code> <code class="nx">component</code><code class="o">=</code><code class="p">{</code><code class="nx">MyNotes</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/favorites"</code> <code class="nx">component</code><code class="o">=</code><code class="p">{</code><code class="nx">Favorites</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/Router&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Pages</code><code class="p">;</code></pre>&#13;
&#13;
<p>Our complete <em>src/pages/index.js</em> file should now look as follows:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="c1">// import React and routing dependencies</code>&#13;
<code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">BrowserRouter</code> <code class="nx">as</code> <code class="nx">Router</code><code class="p">,</code> <code class="nx">Route</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'react-router-dom'</code><code class="p">;</code>&#13;
&#13;
<code class="c1">// import routes</code>&#13;
<code class="kr">import</code> <code class="nx">Home</code> <code class="nx">from</code> <code class="s1">'./home'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">MyNotes</code> <code class="nx">from</code> <code class="s1">'./mynotes'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Favorites</code> <code class="nx">from</code> <code class="s1">'./favorites'</code><code class="p">;</code>&#13;
&#13;
<code class="c1">// define routes</code>&#13;
<code class="kr">const</code> <code class="nx">Pages</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">Router</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">exact</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code> <code class="nx">component</code><code class="o">=</code><code class="p">{</code><code class="nx">Home</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/mynotes"</code> <code class="nx">component</code><code class="o">=</code><code class="p">{</code><code class="nx">MyNotes</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/favorites"</code> <code class="nx">component</code><code class="o">=</code><code class="p">{</code><code class="nx">Favorites</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/Router&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Pages</code><code class="p">;</code></pre>&#13;
&#13;
<p>Finally, we can update the <em>src/App.js</em> file to use our routes by importing the routes and rendering the components:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">ReactDOM</code> <code class="nx">from</code> <code class="s1">'react-dom'</code><code class="p">;</code>&#13;
&#13;
<code class="c1">// import routes</code>&#13;
<code class="kr">import</code> <code class="nx">Pages</code> <code class="nx">from</code> <code class="s1">'/pages'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">App</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Pages</code> <code class="o">/&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="nx">ReactDOM</code><code class="p">.</code><code class="nx">render</code><code class="p">(</code><code class="o">&lt;</code><code class="nx">App</code> <code class="o">/&gt;</code><code class="p">,</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s1">'root'</code><code class="p">));</code></pre>&#13;
&#13;
<p>Now if you manually update the URL in your web browser, you should be able to view each component. For example, type <strong><code>http://localhost:1234/favorites</code></strong> to render the “favorites” page.<a data-startref="ix_ch12-asciidoc3" data-type="indexterm" id="idm45339500097816"/><a data-startref="ix_ch12-asciidoc2" data-type="indexterm" id="idm45339500097208"/></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Linking" data-type="sect2"><div class="sect2" id="idm45339500096472">&#13;
<h2>Linking</h2>&#13;
&#13;
<p><a data-primary="linking" data-type="indexterm" id="idm45339500095064"/><a data-primary="web client building" data-secondary="linking" data-type="indexterm" id="idm45339500094360"/>We’ve created our pages, but we’re missing the key component of linking them together. So let’s add some links to the other pages from our home page. To do so, we’ll use React Router’s <code>Link</code> component.</p>&#13;
&#13;
<p>In <em>src/pages/home.js</em>:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="c1">// import the Link component from react-router</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">Link</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'react-router-dom'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">Home</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Notedly</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">This</code> <code class="nx">is</code> <code class="nx">the</code> <code class="nx">home</code> <code class="nx">page</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
      <code class="p">{</code> <code class="cm">/* add a list of links */</code> <code class="p">}</code>&#13;
      <code class="o">&lt;</code><code class="nx">ul</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"/mynotes"</code><code class="o">&gt;</code><code class="nx">My</code> <code class="nx">Notes</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"/favorites"</code><code class="o">&gt;</code><code class="nx">Favorites</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/ul&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Home</code><code class="p">;</code></pre>&#13;
&#13;
<p>With this we’re able to navigate our application. Clicking one of the links on the home page will navigate to the corresponding page component. Core browser navigation functions, such as the back and forward buttons, will continue to work as well.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="UI Components" data-type="sect1"><div class="sect1" id="idm45339500089160">&#13;
<h1>UI Components</h1>&#13;
&#13;
<p><a data-primary="user interfaces (UI)" data-secondary="web client building" data-type="indexterm" id="ix_ch12-asciidoc4"/><a data-primary="web client building" data-secondary="UI components" data-type="indexterm" id="ix_ch12-asciidoc5"/>We’ve successfully created individual page components and can navigate between them. As we build out our pages, they will have several shared user interface elements, such as a header and sitewide navigation. Rewriting these each time they are used wouldn’t be very efficient (and would get quite annoying). Instead, we can write reusable interface components and import them into our interface wherever we need them. In fact, thinking of our UI as composed of tiny components is one of the core tenants of React, and was my breakthrough in grasping the framework.</p>&#13;
&#13;
<p>We’ll start by creating header and navigation components for our application. First, let’s create a new directory within our <em>src</em> directory called <em>components</em>. Within the <em>src/components</em> directory, we’ll create two new files called <em>Header.js</em> and <em>Navigation.js</em>. React components must be capitalized, so we’ll follow the common convention of capitalizing the filename as well.</p>&#13;
&#13;
<p>Let’s begin by writing the header component in <em>src/components/Header.js</em>. To do so, we’ll import our <em>logo.svg</em> file and add the corresponding markup for our component:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">logo</code> <code class="nx">from</code> <code class="s1">'../img/logo.svg'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">Header</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">header</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">img</code> <code class="nx">src</code><code class="o">=</code><code class="p">{</code><code class="nx">logo</code><code class="p">}</code> <code class="nx">alt</code><code class="o">=</code><code class="s2">"Notedly Logo"</code> <code class="nx">height</code><code class="o">=</code><code class="s2">"40"</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Notedly</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/header&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Header</code><code class="p">;</code></pre>&#13;
&#13;
<p>For our navigation component we’ll import React Router’s <code>Link</code> functionality and mark up an unordered list of links. In <em>src/components/Navigation.js</em>:</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">Link</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'react-router-dom'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">Navigation</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">nav</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">ul</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"/"</code><code class="o">&gt;</code><code class="nx">Home</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"/mynotes"</code><code class="o">&gt;</code><code class="nx">My</code> <code class="nx">Notes</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">li</code><code class="o">&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"/favorites"</code><code class="o">&gt;</code><code class="nx">Favorites</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="err">/li&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/ul&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/nav&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Navigation</code><code class="p">;</code></pre>&#13;
&#13;
<p>In screenshots you’ll see that I’ve also included <a data-primary="emoji characters" data-type="indexterm" id="idm45339499872680"/>emoji characters as navigation icons. If you’d like to do the same, the accessible markup for including emoji characters is as follows:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="nt">&lt;span</code> <code class="na">aria-hidden=</code><code class="s">"true"</code> <code class="na">role=</code><code class="s">"img"</code><code class="nt">&gt;</code>&#13;
  <code class="c">&lt;!-- emoji character --&gt;</code>&#13;
<code class="nt">&lt;/span&gt;</code></pre>&#13;
&#13;
<p>With our header and navigation components complete, we can now use them within our application. Let’s update our <em>src/pages/home.js</em> file to include the components. We will first import them and then include the component within our JSX markup.</p>&#13;
&#13;
<p>Our <em>src/pages/home.js</em> will now look as follows (<a data-type="xref" href="#web_components">Figure 12-2</a>):</p>&#13;
&#13;
<pre data-code-language="js" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s1">'react'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">import</code> <code class="nx">Header</code> <code class="nx">from</code> <code class="s1">'../components/Header'</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">Navigation</code> <code class="nx">from</code> <code class="s1">'../components/Navigation'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">Home</code> <code class="o">=</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Header</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Navigation</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code><code class="nx">This</code> <code class="nx">is</code> <code class="nx">the</code> <code class="nx">home</code> <code class="nx">page</code><code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">};</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="nx">Home</code><code class="p">;</code></pre>&#13;
&#13;
<figure><div class="figure" id="web_components">&#13;
<img alt="A screenshot of our web application, featuring the imported components" src="assets/jsev_1202.png"/>&#13;
<h6><span class="label">Figure 12-2. </span>With React components we’re able to easily compose shareable UI features</h6>&#13;
</div></figure>&#13;
&#13;
<p>This is everything we need in order to be able to create shareable components across our application. For more on using components within a UI, I highly recommend reading the React documentation <a data-startref="ix_ch12-asciidoc5" data-type="indexterm" id="idm45339499658088"/><a data-startref="ix_ch12-asciidoc4" data-type="indexterm" id="idm45339499657384"/>page <a href="https://oreil.ly/n6o1Z">“Thinking in React”</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Conclusion" data-type="sect1"><div class="sect1" id="idm45339500789720">&#13;
<h1>Conclusion</h1>&#13;
&#13;
<p>The web remains an unparalleled medium for distributing applications. It couples universal access with a developer’s ability to deploy real-time updates. In this chapter we built out the foundation of our JavaScript web application in React. In the next chapter we will add layout and style to the app, using React components and <span class="keep-together">CSS-in-JS.</span><a data-startref="ix_ch12-asciidoc0" data-type="indexterm" id="idm45339499653720"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>