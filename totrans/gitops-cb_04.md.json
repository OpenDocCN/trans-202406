["```\nFROM registry.access.redhat.com/ubi8/python-39 ![1](assets/1.png) ENV PORT 8080 ![2](assets/2.png) EXPOSE 8080 ![3](assets/3.png) WORKDIR /usr/src/app ![4](assets/4.png) COPY requirements.txt ./ ![5](assets/5.png) RUN pip install --no-cache-dir -r requirements.txt ![6](assets/6.png) COPY . .\n\nENTRYPOINT [\"python\"] ![7](assets/7.png) CMD [\"app.py\"] ![8](assets/8.png)\n```", "```\ndocker build -f Dockerfile -t quay.io/gitops-cookbook/pythonapp:latest\n```", "```\nSTEP 1: FROM registry.access.redhat.com/ubi8/python-39\nGetting image source signatures\nCopying blob adffa6963146 done\nCopying blob 4125bdfaec5e done\nCopying blob 362566a15abb done\nCopying blob 0661f10c38cc done\nCopying blob 26f1167feaf7 done\nCopying config a531ae7675 done\nWriting manifest to image destination\nStoring signatures\nSTEP 2: ENV PORT 8080\n--> 6dbf4ac027e\nSTEP 3: EXPOSE 8080\n--> f78357fe402\nSTEP 4: WORKDIR /usr/src/app\n--> 547bf8ca5c5\nSTEP 5: COPY requirements.txt ./\n--> 456cab38c97\nSTEP 6: RUN pip install --no-cache-dir -r requirements.txt\nCollecting Flask\n  Downloading Flask-2.0.2-py3-none-any.whl (95 kB)\n     |████████████████████████████████| 95 kB 10.6 MB/s\nCollecting itsdangerous>=2.0\n  Downloading itsdangerous-2.0.1-py3-none-any.whl (18 kB)\nCollecting Werkzeug>=2.0\n  Downloading Werkzeug-2.0.2-py3-none-any.whl (288 kB)\n     |████████████████████████████████| 288 kB 1.7 MB/s\nCollecting click>=7.1.2\n  Downloading click-8.0.3-py3-none-any.whl (97 kB)\n     |████████████████████████████████| 97 kB 31.9 MB/s\nCollecting Jinja2>=3.0\n  Downloading Jinja2-3.0.3-py3-none-any.whl (133 kB)\n     |████████████████████████████████| 133 kB 38.8 MB/s\nSTEP 7: COPY . .\n--> 3e6b73464eb\nSTEP 8: ENTRYPOINT [\"python\"]\n--> acabca89260\nSTEP 9: CMD [\"app.py\"]\nSTEP 10: COMMIT quay.io/gitops-cookbook/pythonapp:latest\n--> 52e134d39af\n52e134d39af013a25f3e44d25133478dc20b46626782762f4e46b1ff6f0243bb\n```", "```\ndocker images\n```", "```\nREPOSITORY                           TAG         IMAGE ID      CREATED↳\n        SIZE\nquay.io/gitops-cookbook/pythonapp    latest      52e134d39af0  6 minutes ago↳\n        907 MB\n```", "```\ndocker login quay.io\n```", "```\nLogin Succeeded!\n```", "```\ndocker push quay.io/gitops-cookbook/pythonapp:latest\n```", "```\nGetting image source signatures\nCopying blob e6e8a2c58ac5 done\nCopying blob 3ba8c926eef9 done\nCopying blob 558b534f4e1b done\nCopying blob 25f82e0f4ef5 done\nCopying blob 7b17276847a2 done\nCopying blob 352ba846236b done\nCopying blob 2de82c390049 done\nCopying blob 26525e00a8d8 done\nCopying config 52e134d39a done\nWriting manifest to image destination\nCopying config 52e134d39a [--------------------------------------] 0.0b / 5.4KiB\nWriting manifest to image destination\nStoring signatures\n```", "```\ndocker run -p 8080:8080 -ti quay.io/gitops-cookbook/pythonapp:latest\n```", "```\n * Serving Flask app 'app' (lazy loading)\n * Environment: production\n   WARNING: This is a development server. Do not use it in a production deployment.\n   Use a production WSGI server instead.\n * Debug mode: on\n * Running on all addresses.\n   WARNING: This is a development server. Do not use it in a production deployment.\n * Running on http://10.0.2.100:8080/ (Press CTRL+C to quit)\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: 103-809-567\n```", "```\ncurl http://localhost:8080\n```", "```\nHello, World!\n```", "```\nmvn compile com.google.cloud.tools:jib-maven-plugin:3.2.0:build -Dimage=<MY IMAGE>\n```", "```\n<project>\n  ...\n  <build>\n    <plugins>\n      ...\n      <plugin>\n        <groupId>com.google.cloud.tools</groupId>\n        <artifactId>jib-maven-plugin</artifactId>\n        <version>3.2.0</version>\n        <configuration>\n          <to>\n            <image>myimage</image>\n          </to>\n        </configuration>\n      </plugin>\n      ...\n    </plugins>\n  </build>\n  ...\n</project>\n```", "```\nmvn compile com.google.cloud.tools:jib-maven-plugin:3.2.0:build \\\n-Dimage=quay.io/gitops-cookbook/jib-example:latest \\\n-Djib.to.auth.username=<USERNAME> \\\n-Djib.to.auth.password=<PASSWORD>\n```", "```\n[INFO] Scanning for projects...\n[INFO]\n[INFO] --------------------------< com.redhat:hello >--------------------------\n[INFO] Building hello 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n...\n[INFO] Containerizing application to quay.io/gitops-cookbook/jib-example...\n[INFO] Using credentials from <to><auth> for quay.io/gitops-cookbook/jib-example\n[INFO] The base image requires auth. Trying again for eclipse-temurin:11-jre...\n[INFO] Using base image with digest:↳\n sha256:83d92ee225e443580cc3685ef9574582761cf975abc53850c2bc44ec47d7d943O]\n[INFO]\n[INFO] Container entrypoint set to [java, -cp, @/app/jib-classpath-file,↳\n com.redhat.hello.HelloApplication]FO]\n[INFO]\n[INFO] Built and pushed image as quay.io/gitops-cookbook/jib-example\n[INFO] Executing tasks:\n[INFO] [==============================] 100,0% complete\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  41.366 s\n[INFO] Finished at: 2022-01-25T19:04:09+01:00\n[INFO] ------------------------------------------------------------------------\n```", "```\ndocker run -p 8080:8080 -ti quay.io/gitops-cookbook/jib-example\n```", "```\nTrying to pull quay.io/gitops-cookbook/jib-example:latest...\nGetting image source signatures\nCopying blob ea362f368469 done\nCopying blob d5cc550bb6a0 done\nCopying blob bcc17963ea24 done\nCopying blob 9b46d5d971fa done\nCopying blob 51f4f7c353f0 done\nCopying blob 43b2cdfa19bb done\nCopying blob fd142634d578 done\nCopying blob 78c393914c97 done\nCopying config 346462b8d3 done\nWriting manifest to image destination\nStoring signatures\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.6.3)\n\n2022-01-25 18:36:24.762  INFO 1 --- [ main] com.redhat.hello.HelloApplication↳\n        : Starting HelloApplication using Java 11.0.13 on a719cf76f440 with PID 1↳\n         (/app/classes started by root in /)\n2022-01-25 18:36:24.765  INFO 1 --- [ main] com.redhat.hello.HelloApplication↳\n        : No active profile set, falling back to default profiles: default\n2022-01-25 18:36:25.700  INFO 1 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer↳\n  : Tomcat initialized with port(s): 8080 (http)\n2022-01-25 18:36:25.713  INFO 1 --- [ main] o.apache.catalina.core.StandardService↳\n   : Starting service [Tomcat]\n2022-01-25 18:36:25.713  INFO 1 --- [ main] org.apache.catalina.core.StandardEngine↳\n  : Starting Servlet engine: [Apache Tomcat/9.0.56]\n2022-01-25 18:36:25.781  INFO 1 --- [ main] o.a.c.c.C.[Tomcat].[localhost].[/]↳\n       : Initializing Spring embedded WebApplicationContext\n2022-01-25 18:36:25.781  INFO 1 --- [ main] w.s.c.ServletWebServerApplicationContext↳\n : Root WebApplicationContext: initialization completed in 947 ms\n2022-01-25 18:36:26.087  INFO 1 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer↳\n  : Tomcat started on port(s): 8080 (http) with context path ''\n2022-01-25 18:36:26.096  INFO 1 --- [ main] com.redhat.hello.HelloApplication↳\n        : Started HelloApplication in 1.778 seconds (JVM running for 2.177)\n```", "```\ncurl localhost:8080/hello\n```", "```\n{\"id\":1,\"content\":\"Hello, World!\"}\n```", "```\nbuildah from centos\n```", "```\nResolved short name \"centos\" to a recorded short-name alias↳\n (origin: /etc/containers/registries.conf.d/shortnames.conf)\nGetting image source signatures\nCopying blob 926a85fb4806 done\nCopying config 2f3766df23 done\nWriting manifest to image destination\nStoring signatures\ncentos-working-container\n```", "```\nbuildah run centos-working-container yum install httpd -y\n```", "```\nCentOS Linux 8 - AppStream                          9.0 MB/s | 8.4 MB     00:00\nCentOS Linux 8 - BaseOS                             436 kB/s | 4.6 MB     00:10\nCentOS Linux 8 - Extras                              23 kB/s |  10 kB     00:00\nDependencies resolved.\n===============================================================================\n Package                      Arch    Version         Repository     Size\n===============================================================================\nInstalling:\n httpd                        x86_64  2.4.37-43.module_el8.5.0+1022+b541f3b1\nInstalling dependencies:\n apr                          x86_64  1.6.3-12.el8\n apr-util                     x86_64  1.6.1-6.el8\n brotli                       x86_64  1.0.6-3.el8\n centos-logos-httpd           noarch  85.8-2.el8\n httpd-filesystem             noarch  2.4.37-43.module_el8.5.0+1022+b541f3b1\n httpd-tools                  x86_64  2.4.37-43.module_el8.5.0+1022+b541f3b1\n mailcap                      noarch  2.1.48-3.el8\n mod_http2                    x86_64  1.15.7-3.module_el8.4.0+778+c970deab\nInstalling weak dependencies:\n apr-util-bdb                 x86_64  1.6.1-6.el8\n apr-util-openssl             x86_64  1.6.1-6.el8\nEnabling module streams:\n...\nComplete!\n```", "```\n<html>\n    <head>\n        <title>GitOps CookBook example</title>\n    </head>\n    <body>\n        <h1>Hello, World!</h1>\n    </body>\n</html>\n```", "```\nbuildah copy centos-working-container index.xhtml /var/www/html/index.xhtml\n```", "```\n78c6e1dcd6f819581b54094fd38a3fd8f170a2cb768101e533c964e04aacab2e\n```", "```\nbuildah config --entrypoint \"/usr/sbin/httpd -DFOREGROUND\" centos-working-container\n```", "```\nbuildah commit centos-working-container quay.io/gitops-cookbook/gitops-website\n```", "```\nGetting image source signatures\nCopying blob 618ce6bf40a6 skipped: already exists\nCopying blob eb8c13ba832f done\nCopying config b825e91208 done\nWriting manifest to image destination\nStoring signatures\nb825e91208c33371e209cc327abe4f53ee501d5679c127cd71c4d10cd03e5370\n```", "```\nFROM centos:latest\nRUN yum -y install httpd\nCOPY index.xhtml /var/www/html/index.xhtml\nEXPOSE 80\nCMD [\"/usr/sbin/httpd\", \"-DFOREGROUND\"]\n```", "```\nbuildah bud -f Dockerfile -t quay.io/gitops-cookbook/gitops-website\n```", "```\nSTEP 1: FROM centos:latest\nResolved short name \"centos\" to a recorded short-name alias↳\n (origin: /etc/containers/registries.conf.d/shortnames.conf)\nGetting image source signatures\nCopying blob 926a85fb4806 done\nCopying config 2f3766df23 done\nWriting manifest to image destination\nStoring signatures\nSTEP 2: RUN yum -y install httpd\nCentOS Linux 8 - AppStream                      9.6 MB/s | 8.4 MB     00:00\nCentOS Linux 8 - BaseOS                         7.5 MB/s | 4.6 MB     00:00\nCentOS Linux 8 - Extras                          63 kB/s |  10 kB     00:00\nDependencies resolved.\n...\nComplete!\nSTEP 3: COPY index.xhtml /var/www/html/index.xhtml\nSTEP 4: EXPOSE 80\nSTEP 5: CMD [\"/usr/sbin/httpd\", \"-DFOREGROUND\"]\nSTEP 6: COMMIT quay.io/gitops-cookbook/gitops-website\nGetting image source signatures\nCopying blob 618ce6bf40a6 skipped: already exists\nCopying blob 1be523a47735 done\nCopying config 3128caf147 done\nWriting manifest to image destination\nStoring signatures\n--> 3128caf1475\n3128caf147547e43b84c13c241585d23a32601f2c2db80b966185b03cb6a8025\n```", "```\npodman run -p 8080:80 -ti quay.io/gitops-cookbook/gitops-website\n```", "```\nbrew install buildpacks/tap/pack\n```", "```\ncd chapters/ch03/nodejs-app\n```", "```\npack builder suggest\n```", "```\nSuggested builders:\n        Google:                gcr.io/buildpacks/builder:v1↳\n              Ubuntu 18 base image with buildpacks for .NET, Go, Java, Node.js,↳\n              and Python\n        Heroku:                heroku/buildpacks:18↳\n               Base builder for Heroku-18 stack, based on ubuntu:18.04 base↳\n               image\n        Heroku:                heroku/buildpacks:20↳\n               Base builder for Heroku-20 stack, based on ubuntu:20.04 base↳\n               image\n        Paketo Buildpacks:     paketobuildpacks/builder:base↳\n               Ubuntu bionic base image with buildpacks for Java, .NET Core,↳\n               Node.js, Go, Python, Ruby, NGINX and Procfile\n        Paketo Buildpacks:     paketobuildpacks/builder:full↳\n               Ubuntu bionic base image with buildpacks for Java, .NET Core,↳\n               Node.js, Go, Python, PHP, Ruby, Apache HTTPD, NGINX and Procfile\n        Paketo Buildpacks:     paketobuildpacks/builder:tiny↳\n               Tiny base image (bionic build image, distroless-like run image)↳\n               with buildpacks for Java, Java Native Image and Go\n```", "```\npack build nodejs-app --builder paketobuildpacks/builder:base\n```", "```\nbase: Pulling from paketobuildpacks/builder\nbf99a8b93828: Pulling fs layer\n...\nDigest: sha256:7034e52388c11c5f7ee7ae8f2d7d794ba427cc2802f687dd9650d96a70ac0772\nStatus: Downloaded newer image for paketobuildpacks/builder:base\nbase-cnb: Pulling from paketobuildpacks/run\nbf99a8b93828: Already exists\n9d58a4841c3f: Pull complete\n77a4f59032ac: Pull complete\n24e58505e5e0: Pull complete\nDigest: sha256:59aa1da9db6d979e21721e306b9ce99a7c4e3d1663c4c20f74f9b3876cce5192\nStatus: Downloaded newer image for paketobuildpacks/run:base-cnb\n===> ANALYZING\nPrevious image with name \"nodejs-app\" not found\n===> DETECTING\n5 of 10 buildpacks participating\npaketo-buildpacks/ca-certificates 3.0.1\npaketo-buildpacks/node-engine     0.11.2\npaketo-buildpacks/npm-install     0.6.2\npaketo-buildpacks/node-module-bom 0.2.0\npaketo-buildpacks/npm-start       0.6.1\n===> RESTORING\n===> BUILDING\n...\nPaketo NPM Start Buildpack 0.6.1\n  Assigning launch processes\n    web: node server.js\n\n===> EXPORTING\nAdding layer 'paketo-buildpacks/ca-certificates:helper'\nAdding layer 'paketo-buildpacks/node-engine:node'\nAdding layer 'paketo-buildpacks/npm-install:modules'\nAdding layer 'launch.sbom'\nAdding 1/1 app layer(s)\nAdding layer 'launcher'\nAdding layer 'config'\nAdding layer 'process-types'\nAdding label 'io.buildpacks.lifecycle.metadata'\nAdding label 'io.buildpacks.build.metadata'\nAdding label 'io.buildpacks.project.metadata'\nSetting default process type 'web'\nSaving nodejs-app...\n*** Images (82b805699d6b):\n      nodejs-app\nAdding cache layer 'paketo-buildpacks/node-engine:node'\nAdding cache layer 'paketo-buildpacks/npm-install:modules'\nAdding cache layer 'paketo-buildpacks/node-module-bom:cyclonedx-node-module'\nSuccessfully built image nodejs-app\n```", "```\ndocker run --rm -p 3000:3000 nodejs-app\n```", "```\nServer running at http://0.0.0.0:3000/\n```", "```\ncurl http://localhost:3000/\n```", "```\nHello Buildpacks!\n```", "```\nkubectl apply -f \\\n  https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.30.0/release.yaml\n```", "```\nkubectl apply -f \\\n  https://github.com/shipwright-io/build/releases/download/v0.7.0/release.yaml\n```", "```\nkubectl apply -f \\\n  https://github.com/shipwright-io/build/releases/download/v0.7.0/sample-strategies.yaml\n```", "```\nkubectl get cbs\n```", "```\nNAME                     AGE\nbuildah                  26s\nbuildkit                 26s\nbuildpacks-v3            26s\nbuildpacks-v3-heroku     26s\nkaniko                   26s\nkaniko-trivy             26s\nko                       26s\nsource-to-image          26s\nsource-to-image-redhat   26s\n```", "```\nREGISTRY_SERVER=quay.io\nREGISTRY_USER=<your_registry_user>\nREGISTRY_PASSWORD=<your_registry_password>\nEMAIL=<your_email>\nkubectl create secret docker-registry push-secret \\\n    --docker-server=$REGISTRY_SERVER \\\n    --docker-username=$REGISTRY_USER \\\n    --docker-password=$REGISTRY_PASSWORD  \\\n    --docker-email=$EMAIL\n```", "```\napiVersion: shipwright.io/v1alpha1\nkind: Build\nmetadata:\n  name: buildpack-nodejs-build\nspec:\n  source:\n    url: https://github.com/shipwright-io/sample-nodejs ![1](assets/1.png)\n    contextDir: docker-build ![2](assets/2.png)\n  strategy:\n    name: kaniko ![3](assets/3.png)\n    kind: ClusterBuildStrategy\n  output:\n    image: quay.io/gitops-cookbook/sample-nodejs:latest ![4](assets/4.png)\n    credentials:\n      name: push-secret ![5](assets/5.png)\n```", "```\nkubectl create -f build-kaniko.yaml\n```", "```\nbuild.shipwright.io/kaniko-nodejs-build created\n```", "```\nkubectl get builds\n```", "```\nNAME                  REGISTERED   REASON      BUILDSTRATEGYKIND↳\n      BUILDSTRATEGYNAME   CREATIONTIME\nkaniko-nodejs-build   True         Succeeded   ClusterBuildStrategy↳\n      kaniko              13s\n```", "```\napiVersion: shipwright.io/v1alpha1\nkind: BuildRun\nmetadata:\n  generateName: kaniko-nodejs-buildrun-\nspec:\n  buildRef:\n    name: kaniko-nodejs-build\n```", "```\nkubectl create -f buildrun.yaml\n```", "```\nkubectl get pods\n```", "```\nNAME                                           READY   STATUS            RESTARTS↳\n      AGE\nkaniko-nodejs-buildrun-b9mmb-qbrgl-pod-dk7xt   0/3     PodInitializing   0↳\n      19s\n```", "```\nkubectl logs -f kaniko-nodejs-buildrun-b9mmb-qbrgl-pod-dk7xt -c step-build-and-push\n```", "```\nINFO[0001] Retrieving image manifest ghcr.io/shipwright-io/shipwright-samples/node:12\nINFO[0001] Retrieving image ghcr.io/shipwright-io/shipwright-samples/node:12↳\n from registry ghcr.io\nINFO[0002] Built cross stage deps: map[]\nINFO[0002] Retrieving image manifest ghcr.io/shipwright-io/shipwright-samples/node:12\nINFO[0002] Returning cached image manifest\nINFO[0002] Executing 0 build triggers\nINFO[0002] Unpacking rootfs as cmd COPY . /app requires it.\nINFO[0042] COPY . /app\nINFO[0042] Taking snapshot of files...\nINFO[0042] WORKDIR /app\nINFO[0042] cmd: workdir\nINFO[0042] Changed working directory to /app\nINFO[0042] No files changed in this command, skipping snapshotting.\nINFO[0042] RUN     pwd &&     ls -l &&     npm install &&↳\n     npm run print-http-server-version\nINFO[0042] Taking snapshot of full filesystem...\nINFO[0052] cmd: /bin/sh\nINFO[0052] args: [-c pwd &&     ls -l &&     npm install &&↳\n     npm run print-http-server-version]\nINFO[0052] Running: [/bin/sh -c pwd &&     ls -l &&     npm install &&↳\n     npm run print-http-server-version]\n/app\ntotal 44\n-rw-r--r-- 1 node node   261 Jan 27 14:29 Dockerfile\n-rw-r--r-- 1 node node 30000 Jan 27 14:29 package-lock.json\n-rw-r--r-- 1 node node   267 Jan 27 14:29 package.json\ndrwxr-xr-x 2 node node  4096 Jan 27 14:29 public\nnpm WARN npm-simple-renamed@0.0.1 No repository field.\nnpm WARN npm-simple-renamed@0.0.1 No license field.\n\nadded 90 packages from 40 contributors and audited 90 packages in 6.405s\n\n10 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\n> npm-simple-renamed@0.0.1 print-http-server-version /app\n> serve -v\n\n13.0.2\nINFO[0060] Taking snapshot of full filesystem...\nINFO[0062] EXPOSE 8080\nINFO[0062] cmd: EXPOSE\nINFO[0062] Adding exposed port: 8080/tcp\nINFO[0062] CMD [\"npm\", \"start\"]\nINFO[0070] Pushing image to quay.io/gitops-cookbook/sample-nodejs:latest\nINFO[0393] Pushed image to 1 destinations\n```", "```\nkubectl get buildruns\n```", "```\napiVersion: shipwright.io/v1alpha1\nkind: Build\nmetadata:\n  name: buildpack-nodejs-build\nspec:\n  source:\n    url: https://github.com/shipwright-io/sample-nodejs\n    contextDir: source-build ![1](assets/1.png)\n  strategy:\n    name: buildah ![2](assets/2.png)\n    kind: ClusterBuildStrategy\n  output:\n    image: quay.io/gitops-cookbook/sample-nodejs:latest\n    credentials:\n      name: push-secret\n```"]