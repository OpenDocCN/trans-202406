<html><head></head><body><section data-pdf-bookmark="Chapter 4. Dates" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch04">&#13;
<h1><span class="label">Chapter 4. </span>Dates</h1>&#13;
&#13;
&#13;
<p><a data-primary="dates (Date object)" data-type="indexterm" id="ix_dates_ch4"/>JavaScript has surprisingly capable date features, which are wrapped in the somewhat old-fashioned <code>Date</code> object. As you’ll see, the <code>Date</code> object has quirks and hidden traps—like the way it counts months starting at 0 and parses year information differently depending on the locale settings of the current computer. But once you learn to navigate these stumbling blocks, you’ll be able to accomplish a number of common, useful operations, like counting the days between two dates, formatting dates for display, and timing events.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Getting the Current Date and Time" data-type="sect1"><div class="sect1" id="get_current_date_and_time">&#13;
<h1>Getting the Current Date and Time</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475175789672">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="current date and time" data-type="indexterm" id="ix_curr_date_time"/><a data-primary="dates (Date object)" data-secondary="current date and time" data-type="indexterm" id="ix_date_curr"/>You need to get the current date or time.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475175785896">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>JavaScript includes a <code>Date</code> object that provides good support for manipulating date information (and more modest support for performing date calculations). When you create a new <code>Date</code> object, it is automatically populated with the current day and time, down to the nearest millisecond:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code></pre>&#13;
&#13;
<p><a data-primary="dates (Date object)" data-secondary="methods available" data-type="indexterm" id="idm45475175738536"/><a data-primary="methods" data-secondary="date" data-type="indexterm" id="idm45475175737688"/>Now it’s simply a matter of extracting the information you want from your <code>Date</code> object. The <code>Date</code> object has a long list of methods that can help you in this task. <a data-type="xref" href="#date_methods">Table 4-1</a> lists the most important methods. Notice that the counting used by different methods isn’t always consistent. Months and weekdays are numbered starting at 0, while days are numbered starting at 1.</p>&#13;
<table id="date_methods">&#13;
<caption><span class="label">Table 4-1. </span>Date methods for getting pieces of date information</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Gets</th>&#13;
<th>Possible values</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>getFullYear()</code></p></td>&#13;
<td><p>The year</p></td>&#13;
<td><p>A four-digit number like 2021</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getMonth()</code></p></td>&#13;
<td><p>The month number</p></td>&#13;
<td><p>0 to 11, where 0 represents January</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getDate()</code></p></td>&#13;
<td><p>The day of the month</p></td>&#13;
<td><p>1 to 31</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getDay()</code></p></td>&#13;
<td><p>The day of the week</p></td>&#13;
<td><p>0 to 6, where 0 represents Sunday</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getHours()</code></p></td>&#13;
<td><p>The hour of the day</p></td>&#13;
<td><p>0 to 23</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getMinutes()</code></p></td>&#13;
<td><p>The minute</p></td>&#13;
<td><p>0 to 59</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getSeconds()</code></p></td>&#13;
<td><p>The seconds</p></td>&#13;
<td><p>0 to 59</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>getMilliseconds()</code></p></td>&#13;
<td><p>The milliseconds (one thousandth seconds)</p></td>&#13;
<td><p>0 to 999</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>Here’s an example that displays some basic information about the current date:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>&#13;
&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">today</code><code class="p">.</code><code class="nx">getFullYear</code><code class="p">());</code>  <code class="c1">// example: 2021</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">today</code><code class="p">.</code><code class="nx">getMonth</code><code class="p">());</code>     <code class="c1">// example: 02 (March)</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">today</code><code class="p">.</code><code class="nx">getDay</code><code class="p">());</code>       <code class="c1">// example: 01 (Monday)</code>&#13;
&#13;
<code class="c1">// Do a little extra string processing to make sure minutes are padded with</code>&#13;
<code class="c1">// a leading 0 if needed to make a two-digit value (like '05' in the time 4:05)</code>&#13;
<code class="kr">const</code> <code class="nx">hours</code> <code class="o">=</code> <code class="nx">today</code><code class="p">.</code><code class="nx">getHours</code><code class="p">();</code>&#13;
<code class="kr">const</code> <code class="nx">minutes</code> <code class="o">=</code> <code class="nx">today</code><code class="p">.</code><code class="nx">getMinutes</code><code class="p">().</code><code class="nx">toString</code><code class="p">().</code><code class="nx">padStart</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'0'</code><code class="p">);</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Time '</code> <code class="o">+</code> <code class="nx">hours</code> <code class="o">+</code> <code class="s1">':'</code> <code class="o">+</code> <code class="nx">minutes</code><code class="p">);</code>   <code class="c1">// example: 15:32</code></pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><a data-primary="UTC (Coordinated Universal Time)" data-type="indexterm" id="idm45475175710920"/>The <code>Date</code> methods listed in <a data-type="xref" href="#date_methods">Table 4-1</a> exist in two versions. The versions shown in the table use the local time settings. The second set of methods adds the prefix <em>UTC</em> (as in <code>getUTCMonth()</code> and <code>getUTCSeconds()</code>). They use <em>Coordinated Universal Time</em>, the global time standard. If you need to compare dates from different time zones (or ones that have different conventions for following <em>daylight saving time</em>), you must use the UTC methods. Internally, the <code>Date</code> object always uses UTC.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475175632888">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>The <code>Date()</code> object has several constructors. The empty constructor creates a <code>Date</code> object for the current date and time, as you’ve just seen. But you can also create a <code>Date</code> object for a different date by specifying the year, month, and day, like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// February 10, 2021:</code>&#13;
<code class="kr">const</code> <code class="nx">anotherDay</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">10</code><code class="p">);</code></pre>&#13;
&#13;
<p>Once again, be wary of the inconsistent counting (months start at 0, while days start at 1). That means the <code>anotherDay</code> variable above represents February 10, <em>not</em> January 10.</p>&#13;
&#13;
<p>Optionally, you can tack on up to four more parameters to the <code>Date</code> constructor for hours, minutes, seconds, and milliseconds:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// February 1, 2021, at 9:30 AM:</code>&#13;
<code class="kr">const</code> <code class="nx">anotherDay</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">30</code><code class="p">);</code></pre>&#13;
&#13;
<p>As you’ll see in this chapter, JavaScript’s built-in <code>Date</code> object has some well-known limitations and a few quirks. If you need to perform extensive date operations in your code, such as calculating date ranges, parsing different types of date strings, or shifting dates between time zones, the best practice is to use a tested third-party date library, such as <a href="https://github.com/iamkun/dayjs"><em>day.js</em></a> or <a href="https://date-fns.org"><em>date-fns</em></a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475175621192">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>Once you have a date, you may want to use it in date calculations, as explained in <a data-type="xref" href="#comparing_dates">“Comparing Dates and Testing Dates for Equality”</a>. You may also be interested in turning a date into a formatted string (<a data-type="xref" href="#convert_date_to_string">“Formatting a Date Value as a String”</a>), or a date-containing string into a proper <code>Date</code> object (<a data-type="xref" href="#convert_string_to_date">“Converting a String to a Date”</a>).<a data-primary="" data-startref="ix_date_curr" data-type="indexterm" id="idm45475175598088"/><a data-primary="" data-startref="ix_curr_date_time" data-type="indexterm" id="idm45475175597112"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Converting a String to a Date" data-type="sect1"><div class="sect1" id="convert_string_to_date">&#13;
<h1>Converting a String to a Date</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475175527448">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="formatting" data-secondary="dates" data-type="indexterm" id="ix_format_date2"/><a data-primary="ISO 8601 format, converting dates" data-type="indexterm" id="ix_iso_format_date"/><a data-primary="strings (String object)" data-secondary="converting to dates" data-type="indexterm" id="ix_strings_date"/><a data-primary="dates (Date object)" data-secondary="converting ISO 8601 format to" data-type="indexterm" id="ix_date_iso_format"/>You have date information in a string, but you want to convert it to a <code>Date</code> object so you can manipulate it in your code or perform date calculations.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475175520920">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>If you’re fortunate, you’ll have your date string in the ISO 8601 standard timestamp format (like “2021-12-17T03:24:00Z”), which you can pass directly to the <code>Date</code> <span class="keep-together">&#13;
constructor</span>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">eventDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="s1">'2021-12-17T03:24:00Z'</code><code class="p">);</code></pre>&#13;
&#13;
<p>The <em>T</em> in this string separates the the date from the time, and the <em>Z</em> at the end of the string indicates it’s a universal time using the UTC time zone, which is the best way to ensure consistency on different computers.</p>&#13;
&#13;
<p><a data-primary="parse() method" data-secondary="Date object" data-type="indexterm" id="idm45475175488616"/>There are other formats that the <code>Date</code> constructor (and the <code>Date.parse()</code> method) may recognize. However, they are now strongly discouraged, because their implementations are not consistent across different browsers. They may appear to work in a test example, but they run into trouble when different browsers apply different locale-specific settings, like daylight saving time.</p>&#13;
&#13;
<p>If your date isn’t in the ISO 8601 format, you’ll need to take a manual approach. Extract the different date components from your string, then use those with the <code>Date</code> constructor. You can make good use of <code>String</code> methods like <code>split()</code>, <code>slice()</code>, and <code>indexOf()</code>, which are explored in more detail in the recipes in <a data-type="xref" href="ch02.html#ch02">Chapter 2</a>.</p>&#13;
&#13;
<p>For example, if you have a date string in the format <em>mm/dd/yyyy</em>, you can use code like this:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">stringDate</code> <code class="o">=</code> <code class="s1">'12/30/2021'</code><code class="p">;</code>&#13;
&#13;
<code class="c1">// Split on the slashes</code>&#13;
<code class="kr">const</code> <code class="nx">dateArray</code> <code class="o">=</code> <code class="nx">stringDate</code><code class="p">.</code><code class="nx">split</code><code class="p">(</code><code class="s1">'/'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Find the individual date ingredients</code>&#13;
<code class="kr">const</code> <code class="nx">year</code> <code class="o">=</code> <code class="nx">dateArray</code><code class="p">[</code><code class="mi">2</code><code class="p">];</code>&#13;
<code class="kr">const</code> <code class="nx">month</code> <code class="o">=</code> <code class="nx">dateArray</code><code class="p">[</code><code class="mi">0</code><code class="p">];</code>&#13;
<code class="kr">const</code> <code class="nx">day</code> <code class="o">=</code> <code class="nx">dateArray</code><code class="p">[</code><code class="mi">1</code><code class="p">];</code>&#13;
&#13;
<code class="c1">// Apply the correction for 0-based month numbering</code>&#13;
<code class="kr">const</code> <code class="nx">eventDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="nx">year</code><code class="p">,</code> <code class="nx">month</code><code class="o">-</code><code class="mi">1</code><code class="p">,</code> <code class="nx">day</code><code class="p">);</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475175447400">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>The <code>Date</code> object constructor doesn’t perform much validation. Check your input before you create a <code>Date</code> object, because the <code>Date</code> object may accept values that you would not. For example, it will allow day numbers to roll over (in other words, if you set 40 as your day number, JavaScript will just move your date into the next month). The <code>Date</code> constructor will also accept strings that may be parsed inconsistently on different computers.</p>&#13;
&#13;
<p>If you attempt to create a <code>Date</code> object with a nonnumeric string, you’ll receive an “Invalid Date” object. You can test for this condition using <code>isNaN()</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">badDate</code> <code class="o">=</code> <code class="s1">'12 bananas'</code><code class="p">;</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">convertedDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="nx">badDate</code><code class="p">);</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nb">Number</code><code class="p">.</code><code class="nb">isNaN</code><code class="p">(</code><code class="nx">convertedDate</code><code class="p">))</code> <code class="p">{</code>&#13;
  <code class="c1">// We end up here, because the date object was not created successfully</code>&#13;
<code class="p">}</code> <code class="k">else</code> <code class="p">{</code>&#13;
  <code class="c1">// For a valid Data instance, we end up here</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>This technique works because <code>Date</code> objects are actually <em>numbers</em> behind the scenes, a fact explored in <a data-type="xref" href="#comparing_dates">“Comparing Dates and Testing Dates for Equality”</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475175355432">&#13;
<h2>See Also</h2>&#13;
&#13;
<p><a data-type="xref" href="#convert_date_to_string">“Formatting a Date Value as a String”</a> explains the reverse operation—taking a <code>Date</code> object and converting it to a string.<a data-primary="" data-startref="ix_date_iso_format" data-type="indexterm" id="idm45475175352952"/><a data-primary="" data-startref="ix_iso_format_date" data-type="indexterm" id="idm45475175351976"/><a data-primary="" data-startref="ix_strings_date" data-type="indexterm" id="idm45475175351032"/><a data-primary="" data-startref="ix_format_date2" data-type="indexterm" id="idm45475175321816"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Adding Days to a Date" data-type="sect1"><div class="sect1" id="adding_days_to_date">&#13;
<h1>Adding Days to a Date</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475175319128">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="dates (Date object)" data-secondary="adding days to a date" data-type="indexterm" id="ix_date_add_days"/>You want to find a date that’s a specific number of days before or after another date.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475175316152">&#13;
<h2>Solution</h2>&#13;
&#13;
<p><a data-primary="getDate() method" data-type="indexterm" id="idm45475175314984"/><a data-primary="setDate() method" data-type="indexterm" id="idm45475175314280"/>Find the current day number with <code>Date.getDate()</code>, then change it with <code>Date.setDate()</code>. The <code>Date</code> object is smart enough to roll over to the next month or year as needed.</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>&#13;
<code class="kr">const</code> <code class="nx">currentDay</code> <code class="o">=</code> <code class="nx">today</code><code class="p">.</code><code class="nx">getDate</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// Where will be three weeks in the future?</code>&#13;
<code class="nx">today</code><code class="p">.</code><code class="nx">setDate</code><code class="p">(</code><code class="nx">currentDay</code> <code class="o">+</code> <code class="mi">21</code><code class="p">);</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="sb">`Three weeks from today is </code><code class="si">${</code><code class="nx">today</code><code class="si">}</code><code class="sb">`</code><code class="p">);</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475175216696">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>The <code>setDate()</code> method isn’t limited to positive integers. You can use a negative number to shift a date backward. You may want to use the other <em>setXxx()</em> methods to modify a date, like <code>setMonths()</code> to move it forward or backward one month at a time, <code>setHours()</code> to move it by hours, and so on. All these methods roll over just like <code>setDate()</code>, so adding 48 hours will move a date exactly two days forward.</p>&#13;
&#13;
<p>The <code>Date</code> object is <em>mutable</em>, which makes its behavior look distinctly old-fashioned. In more modern JavaScript libraries, you would expect a method like <code>setDate()</code> to return a new <code>Date</code> object. But what it actually does is change the <em>current</em> <code>Date</code> object. This happens even if you declare a date with <code>const</code>. (The <code>const</code> prevents you from setting your variable to point to a different <code>Date</code> object, but it doesn’t stop you from altering the currently referenced <code>Date</code> object.) To safely avoid potential problems, you can clone your date before operating on it. <a data-primary="getTime() method" data-type="indexterm" id="idm45475175247960"/>Just use <code>Date.getTime()</code> to get the underlying millisecond count that represents your date and use it to create a new object:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">originalDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// Clone the date</code>&#13;
<code class="kr">const</code> <code class="nx">futureDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="nx">originalDate</code><code class="p">.</code><code class="nx">getTime</code><code class="p">());</code>&#13;
&#13;
<code class="c1">// Change the cloned date</code>&#13;
<code class="nx">futureDate</code><code class="p">.</code><code class="nx">setDate</code><code class="p">(</code><code class="nx">originalDate</code><code class="p">.</code><code class="nx">getDate</code><code class="p">()</code><code class="o">+</code><code class="mi">21</code><code class="p">);</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="sb">`Three weeks from </code><code class="si">${</code><code class="nx">originalDate</code><code class="si">}</code><code class="sb"> is </code><code class="si">${</code><code class="nx">futureDate</code><code class="si">}</code><code class="sb">`</code><code class="p">);</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475175245560">&#13;
<h2>See Also</h2>&#13;
&#13;
<p><a data-type="xref" href="#calculating_time_between_dates">“Calculating the Time Elapsed Between Two Dates”</a> shows how to calculate the time period between two dates.<a data-primary="" data-startref="ix_date_add_days" data-type="indexterm" id="idm45475175178488"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Comparing Dates and Testing Dates for Equality" data-type="sect1"><div class="sect1" id="comparing_dates">&#13;
<h1>Comparing Dates and Testing Dates for Equality</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475175175800">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="testing" data-secondary="for equality" data-secondary-sortas="equality" data-type="indexterm" id="ix_test_equal_date"/><a data-primary="equality testing" data-type="indexterm" id="ix_equal_test_date"/><a data-primary="dates (Date object)" data-secondary="testing for equality" data-type="indexterm" id="ix_date_test_equal"/>You need to see if two <code>Date</code> objects represent the same calendar date, or determine if one date is before another.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475175170120">&#13;
<h2>Solution</h2>&#13;
&#13;
<p><a data-primary="dates (Date object)" data-secondary="comparing" data-type="indexterm" id="idm45475175168680"/>You can compare <code>Date</code> objects just like you compare numbers, with the <code>&lt;</code> and <code>&gt;</code> <span class="keep-together">operators</span>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">oldDay</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">1999</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">20</code><code class="p">);</code>&#13;
<code class="kr">const</code> <code class="nx">newerDay</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
&#13;
<code class="k">if</code> <code class="p">(</code><code class="nx">newerDay</code> <code class="o">&gt;</code> <code class="nx">oldDay</code><code class="p">)</code> <code class="p">{</code>&#13;
  <code class="c1">// This is true, because newerDay falls after oldDay.</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p><a data-primary="&gt; angle bracket" data-type="indexterm" id="idm45475175162808"/><a data-primary="&lt; angle bracket" data-type="indexterm" id="idm45475175140088"/>Internally, dates are stored as numbers. When you use the <code>&lt;</code> or <code>&gt;</code> operator, they are automatically converted to numbers and compared. When you run this code, you are comparing the millisecond value for <code>oldDay</code> (943,074,000,000) to the millisecond value for <code>newerDay</code> (1,612,155,600,000).</p>&#13;
&#13;
<p><a data-primary="= operator" data-type="indexterm" id="idm45475175137336"/>The equality operator (<code>=</code>) works differently. It tests the object reference, not the object <em>content</em>. (In other words, two <code>Date</code> objects are equal only if you are comparing two variables that point to the same instance.)</p>&#13;
&#13;
<p>If you want to test if two <code>Date</code> objects represent the same moment in time, you need to convert them to numbers yourself. The clearest way to do this is by calling <code>Date.getTime()</code>, which returns the millisecond number for a date:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">date1</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
<code class="kr">const</code> <code class="nx">date2</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// This is false, because they are different objects</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">date1</code> <code class="o">===</code> <code class="nx">date2</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// This is true, because they have the same date</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">date1</code><code class="p">.</code><code class="nx">getTime</code><code class="p">()</code> <code class="o">===</code> <code class="nx">date2</code><code class="p">.</code><code class="nx">getTime</code><code class="p">());</code></pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Despite its name, <code>getTime()</code> does not return <em>just</em> the time. It returns the millisecond number that is an exact representation of that <code>Date</code> object’s date <em>and</em> time.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475175013496">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Internally, a <code>Date</code> object is just an integer. Specifically, it’s the number of milliseconds that have elapsed since January 1, 1970. The millisecond number can be negative or positive, which means that the <code>Date</code> object can represent dates from the distant past (roughly 271,821 BCE) to the distant future (year 275,760 CE). You can get the millisecond number by calling <code>Date.getTime()</code>.</p>&#13;
&#13;
<p>Two <code>Date</code> objects are only the same if they match exactly, down to the millisecond. Two <code>Date</code> objects that represent the same date but have a different time component won’t match. This can be a problem, because you may not realize that your <code>Date</code> object contains time information. This is a common issue when creating a <code>Date</code> object for the current day (<a data-type="xref" href="#get_current_date_and_time">“Getting the Current Date and Time”</a>).</p>&#13;
&#13;
<p><a data-primary="setHours() method" data-type="indexterm" id="idm45475175006744"/>To avoid this issue, you can remove the time information using <code>Date.setHours()</code>. Despite its name, the <code>setHours()</code> method accepts up to four parameters, allowing you to set the hour, minute, second, and millisecond. To create a date-only <code>Date</code> object, set all these components to 0:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// Create another copy of the current date</code>&#13;
<code class="c1">// The day hasn't changed, but the time may have already ticked on</code>&#13;
<code class="c1">// to the next millisecond</code>&#13;
<code class="kr">const</code> <code class="nx">todayDifferent</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// This could be true or false, depending on timing factors beyond your control</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">today</code><code class="p">.</code><code class="nx">getTime</code><code class="p">()</code> <code class="o">===</code> <code class="nx">todayDifferent</code><code class="p">.</code><code class="nx">getTime</code><code class="p">());</code>&#13;
&#13;
<code class="c1">// Remove all the time information</code>&#13;
<code class="nx">todayDifferent</code><code class="p">.</code><code class="nx">setHours</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">);</code>&#13;
<code class="nx">today</code><code class="p">.</code><code class="nx">setHours</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// This is always true, because the time has been removed from both instances</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">today</code><code class="p">.</code><code class="nx">getTime</code><code class="p">()</code> <code class="o">===</code> <code class="nx">todayDifferent</code><code class="p">.</code><code class="nx">getTime</code><code class="p">());</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475175002024">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>For more math with dates, see Recipes <a data-type="xref" data-xrefstyle="select:labelnumber" href="#calculating_time_between_dates"/> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#adding_days_to_date"/>.<a data-primary="" data-startref="ix_date_test_equal" data-type="indexterm" id="idm45475174893336"/><a data-primary="" data-startref="ix_test_equal_date" data-type="indexterm" id="idm45475174892328"/><a data-primary="" data-startref="ix_equal_test_date" data-type="indexterm" id="idm45475174891384"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Calculating the Time Elapsed Between Two Dates" data-type="sect1"><div class="sect1" id="calculating_time_between_dates">&#13;
<h1>Calculating the Time Elapsed Between Two Dates</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475174888728">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="elapsed time between dates, tracking" data-type="indexterm" id="ix_elapsed_time"/><a data-primary="dates (Date object)" data-secondary="tracking elapsed time between" data-type="indexterm" id="ix_date_elapsed_time"/>You need to calculate how many days, hours, or minutes separate two dates.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475174884920">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Because dates are numbers (in milliseconds, see <a data-type="xref" href="#comparing_dates">“Comparing Dates and Testing Dates for Equality”</a>), calculations with them are relatively straightforward. If you subtract one date from another, you get the number of milliseconds in between:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">oldDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
<code class="kr">const</code> <code class="nx">newerDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">differenceInMilliseconds</code> <code class="o">=</code> <code class="nx">newerDate</code> <code class="o">-</code> <code class="nx">oldDate</code><code class="p">;</code></pre>&#13;
&#13;
<p>Unless you’re timing short operations for performance testing, the number of milliseconds isn’t a particularly useful unit. It’s up to you to divide this number to convert it into a more meaningful number of minutes, hours, or days:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">millisecondsPerDay</code> <code class="o">=</code> <code class="mi">1000</code><code class="o">*</code><code class="mi">60</code><code class="o">*</code><code class="mi">60</code><code class="o">*</code><code class="mi">24</code><code class="p">;</code>&#13;
<code class="kd">let</code> <code class="nx">differenceInDays</code> <code class="o">=</code> <code class="nx">differenceInMilliseconds</code> <code class="o">/</code> <code class="nx">millisecondsPerDay</code><code class="p">;</code>&#13;
&#13;
<code class="c1">// Only count whole days</code>&#13;
<code class="nx">differenceInDays</code> <code class="o">=</code> <code class="nb">Math</code><code class="p">.</code><code class="nx">trunc</code><code class="p">(</code><code class="nx">differenceInDays</code><code class="p">);</code>&#13;
&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">differenceInDays</code><code class="p">);</code></pre>&#13;
&#13;
<p><a data-primary="round() method" data-type="indexterm" id="idm45475174777976"/>Even though this calculation should work out to an exact number of days (because neither date has any time information), you still need to use <code>Math.round()</code> on the result to deal with the rounding errors inherent to floating-point math (see <a data-type="xref" href="ch03.html#preserving_decimal_accuracy">“Preserving Accuracy in Decimal Values”</a>).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475174749384">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>There are two pitfalls to be aware of when performing date calculations:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Dates may contain time information. (For example, a new <code>Date</code> object created for the current day is accurate up to the millisecond it was created.) Before you count days, use <code>setHours()</code> to remove the time component, as explained in <a data-type="xref" href="#comparing_dates">“Comparing Dates and Testing Dates for Equality”</a>.</p>&#13;
</li>&#13;
<li>&#13;
<p>Calculations with two dates only make sense if the dates are in the same time zone. Ideally, that means you are comparing two local dates or two dates in the UTC standard. It may seem straightforward enough to convert dates from one time zone to another, but often there are unexpected edge cases with daylight saving time.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p><a data-primary="Temporal object" data-type="indexterm" id="idm45475174743224"/>There is a tentative replacement for the aging <code>Date</code> object. The <a href="https://oreil.ly/BAbB2"><code>Temporal</code> object</a> aims to improve calculations with local dates and different time zones. In the meantime, if your date needs go beyond the <code>Date</code> object, you can experiment with a third-party library for manipulating the date. Both <a href="https://github.com/iamkun/dayjs"><em>day.js</em></a> and <a href="https://date-fns.org"><em>date-fns</em></a> are popular choices.</p>&#13;
&#13;
<p>And if you want to use tiny time calculations for profiling performance, the <code>Date</code> object is not the best choice. Instead, use the <code>Performance</code> object, which is available in a browser environment through the built-in <code>window.performance</code> property. It lets you capture a high-resolution timestamp that’s accurate to <em>fractions</em> of a millisecond, if supported by the system. Here’s an example:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="c1">// Get a DOMHighResTimeStamp object that represents the start time</code>&#13;
<code class="kr">const</code> <code class="nx">startTime</code> <code class="o">=</code> <code class="nb">window</code><code class="p">.</code><code class="nx">performance</code><code class="p">.</code><code class="nx">now</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// (Do a time consuming task here.)</code>&#13;
&#13;
<code class="c1">// Get a DOMHighResTimeStamp object that represents the end time</code>&#13;
<code class="kr">const</code> <code class="nx">endTime</code> <code class="o">=</code> <code class="nb">window</code><code class="p">.</code><code class="nx">performance</code><code class="p">.</code><code class="nx">now</code><code class="p">();</code>&#13;
&#13;
<code class="c1">// Find the elapsed time in milliseconds</code>&#13;
<code class="kr">const</code> <code class="nx">elapsedMilliseconds</code> <code class="o">=</code> <code class="nx">endTime</code> <code class="o">-</code> <code class="nx">startTime</code><code class="p">;</code></pre>&#13;
&#13;
<p>The result (<code>elapsedMilliseconds</code>) is not the nearest whole millisecond, but the most accurate fractional millisecond count that’s supported on the current hardware.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><a data-primary="hrtime.bigint() method" data-type="indexterm" id="idm45475174681144"/><a data-primary="Performance object" data-type="indexterm" id="idm45475174680216"/>Although Node doesn’t provide the <code>Performance</code> object, it has its own mechanism for retrieving high-resolution time information. <a data-primary="Node" data-secondary="global process object" data-type="indexterm" id="idm45475174679032"/>You use its global <code>process</code> object, which provides the <code>process.hrtime.bigint()</code> method. It returns a timing readout in <em>nanoseconds</em>, or billionths of a second. Simply subtract one <code>process.hrtime.bigint()</code> readout from another to find the time difference in nanoseconds. (Each millisecond is 1,000,000 <span class="keep-together">nanoseconds</span>.)</p>&#13;
&#13;
<p>Because the nanosecond count is obviously going to be a very large number, you need to use the <code>BigInt</code> data type to hold it, as described in <a data-type="xref" href="ch03.html#using_bigint">“Manipulating Very Large Numbers with BigInt”</a>.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475174673400">&#13;
<h2>See Also</h2>&#13;
&#13;
<p><a data-type="xref" href="#adding_days_to_date">“Adding Days to a Date”</a> shows how to move a date forward or backward by adding to it or subtracting from it.<a data-primary="" data-startref="ix_date_elapsed_time" data-type="indexterm" id="idm45475174671368"/><a data-primary="" data-startref="ix_elapsed_time" data-type="indexterm" id="idm45475174670424"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Formatting a Date Value as a String" data-type="sect1"><div class="sect1" id="convert_date_to_string">&#13;
<h1>Formatting a Date Value as a String</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45475174667736">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="strings (String object)" data-secondary="date value formatted as" data-type="indexterm" id="ix_string_date_value"/><a data-primary="formatting" data-secondary="dates" data-type="indexterm" id="ix_format_date"/><a data-primary="dates (Date object)" data-secondary="formatting date value as string" data-type="indexterm" id="ix_date_format_value"/>You want to create a formatted string based on a <code>Date</code> object.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45475174662120">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>If you print a date with <code>console.log()</code>, you’ll get the date’s nicely formatted string representation, like “Wed Oct 21 2020 22:17:03 GMT-0400 (Eastern Daylight Time).” This representation is created by the <code>DateTime.toString()</code> method. It’s a standardized, nonlocale-specific date string that’s defined in the <a href="https://oreil.ly/S0lMb">JavaScript standard</a>.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><a data-primary="UTC (Coordinated Universal Time)" data-type="indexterm" id="idm45475174657896"/>Internally, the <code>Date</code> object stores its time information as a UTC time, with no additional time zone information. When you convert a <code>Date</code> to a string, that UTC time is converted into a locale-specific time for the current time zone, as set on the computer or device where your code is running.</p>&#13;
</div>&#13;
&#13;
<p>If you want your date string formatted differently, you could call one of the other prebuilt <code>Date</code> methods demonstrated here:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">date</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">30</code><code class="p">);</code>&#13;
&#13;
<code class="kd">let</code> <code class="nx">dateString</code><code class="p">;</code>&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toString</code><code class="p">();</code>&#13;
 <code class="c1">// 'Fri Jan 01 2021 10:30:00 GMT-0500 (Eastern Standard Time)'</code>&#13;
&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toTimeString</code><code class="p">();</code>&#13;
 <code class="c1">// '10:30:00 GMT-0500 (Eastern Standard Time)'</code>&#13;
&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toUTCString</code><code class="p">();</code>&#13;
 <code class="c1">// 'Fri, 01 Jan 2021 15:30:00 GMT'</code>&#13;
&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toDateString</code><code class="p">();</code>&#13;
 <code class="c1">// 'Fri Jan 01 2021'</code>&#13;
&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toISOString</code><code class="p">();</code>&#13;
 <code class="c1">// '2021-01-01T15:30:00.000Z'</code>&#13;
&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toLocaledateString</code><code class="p">();</code>&#13;
 <code class="c1">// '1/1/2021, 10:30:00 AM'</code>&#13;
&#13;
<code class="nx">dateString</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">toLocaleTimeString</code><code class="p">();</code>&#13;
<code class="c1">// '10:30:00 AM'</code></pre>&#13;
&#13;
<p>Keep in mind that if you use <code>toLocaleString()</code> or <code>toLocaleTime()</code>, your string representation is based on the browser implementation and the settings of the current computer. Do not assume consistency!</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45475174556648">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>There are many possible ways to turn date information into a string. For display purposes, the <em>toXxxString()</em> methods work well. But if you want something more specific or fine-tuned, you may need to take control of the <code>Date</code> object yourself.</p>&#13;
&#13;
<p>If you want to go beyond the standard formatting methods, there are two approaches you can take. You can use the <em>getXxx()</em> methods described in <a data-type="xref" href="#get_current_date_and_time">“Getting the Current Date and Time”</a> to extract individual time components from a date, and then concatenate those into the exact string you need. Here’s an example:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">date</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Ensure date numbers less than 10 are padded with an initial 0.</code>&#13;
<code class="kr">const</code> <code class="nx">day</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">getDate</code><code class="p">().</code><code class="nx">toString</code><code class="p">().</code><code class="nx">padStart</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'0'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Ensure months are 0-padded and add 1 to convert the month from its</code>&#13;
<code class="c1">// 0-based JavaScript representation</code>&#13;
<code class="kr">const</code> <code class="nx">month</code> <code class="o">=</code> <code class="p">(</code><code class="nx">date</code><code class="p">.</code><code class="nx">getMonth</code><code class="p">()</code><code class="o">+</code><code class="mi">1</code><code class="p">).</code><code class="nx">toString</code><code class="p">().</code><code class="nx">padStart</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'0'</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// The year is always 4-digit</code>&#13;
<code class="kr">const</code> <code class="nx">year</code> <code class="o">=</code> <code class="nx">date</code><code class="p">.</code><code class="nx">getFullYear</code><code class="p">();</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">customDateString</code> <code class="o">=</code> <code class="sb">`</code><code class="si">${</code><code class="nx">year</code><code class="si">}</code><code class="sb">.</code><code class="si">${</code><code class="nx">month</code><code class="si">}</code><code class="sb">.</code><code class="si">${</code><code class="nx">day</code><code class="si">}</code><code class="sb">`</code><code class="p">;</code>&#13;
<code class="c1">// now customDateString = '2021.11.01'</code></pre>&#13;
&#13;
<p>This approach is extremely flexible, but it forces you to write your own date boilerplate, which isn’t ideal because it adds complexity and creates room for new bugs.</p>&#13;
&#13;
<p>If you want to use a standard format for a specific locale, life is a bit easier. You can use the <code>Intl.DateTimeFormat</code> object to perform the conversion. Here are three examples that use locale strings for the US, the UK, and Japan:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">date</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2020</code><code class="p">,</code> <code class="mi">11</code><code class="p">,</code> <code class="mi">20</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">0</code><code class="p">);</code>&#13;
&#13;
<code class="c1">// Use the standard US date format</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">DateTimeFormat</code><code class="p">(</code><code class="s1">'en-US'</code><code class="p">).</code><code class="nx">format</code><code class="p">(</code><code class="nx">date</code><code class="p">));</code>  <code class="c1">// '12/20/2020'</code>&#13;
&#13;
<code class="c1">// Use the standard UK date format</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">DateTimeFormat</code><code class="p">(</code><code class="s1">'en-GB'</code><code class="p">).</code><code class="nx">format</code><code class="p">(</code><code class="nx">date</code><code class="p">));</code>  <code class="c1">// '20/12/2020'</code>&#13;
&#13;
<code class="c1">// Use the standard Japanese date format</code>&#13;
<code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">DateTimeFormat</code><code class="p">(</code><code class="s1">'ja-JP'</code><code class="p">).</code><code class="nx">format</code><code class="p">(</code><code class="nx">date</code><code class="p">));</code>  <code class="c1">// '2020/12/20'</code></pre>&#13;
&#13;
<p>All of these are date-only strings, but there are many other options you can set when you create the <code>Intl.DateTimeFormat()</code> object. Here’s just one example that adds the day of the week and month to the string, in German:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">date</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2020</code><code class="p">,</code> <code class="mi">11</code><code class="p">,</code> <code class="mi">20</code><code class="p">);</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">formatter</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">DateTimeFormat</code><code class="p">(</code><code class="s1">'de-DE'</code><code class="p">,</code>&#13;
 <code class="p">{</code> <code class="nx">weekday</code><code class="o">:</code> <code class="s1">'long'</code><code class="p">,</code> <code class="nx">year</code><code class="o">:</code> <code class="s1">'numeric'</code><code class="p">,</code> <code class="nx">month</code><code class="o">:</code> <code class="s1">'long'</code><code class="p">,</code> <code class="nx">day</code><code class="o">:</code> <code class="s1">'numeric'</code> <code class="p">});</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">dateString</code> <code class="o">=</code> <code class="nx">formatter</code><code class="p">.</code><code class="nx">format</code><code class="p">(</code><code class="nx">date</code><code class="p">);</code>&#13;
<code class="c1">// now dateString = 'Sonntag, 20. Dezember 2020'</code></pre>&#13;
&#13;
<p>These options also give you the ability to add time information to your string with the <code>hour</code>, <code>minute</code>, and <code>second</code> properties, which can be set to:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">date</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2022</code><code class="p">,</code> <code class="mi">11</code><code class="p">,</code> <code class="mi">20</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">30</code><code class="p">);</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">formatter</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">DateTimeFormat</code><code class="p">(</code><code class="s1">'en-US'</code><code class="p">,</code>&#13;
 <code class="p">{</code> <code class="nx">year</code><code class="o">:</code> <code class="s1">'numeric'</code><code class="p">,</code> <code class="nx">month</code><code class="o">:</code> <code class="s1">'numeric'</code><code class="p">,</code> <code class="nx">day</code><code class="o">:</code> <code class="s1">'numeric'</code><code class="p">,</code>&#13;
   <code class="nx">hour</code><code class="o">:</code> <code class="s1">'numeric'</code><code class="p">,</code> <code class="nx">minute</code><code class="o">:</code> <code class="s1">'numeric'</code> <code class="p">});</code>&#13;
&#13;
<code class="kr">const</code> <code class="nx">dateString</code> <code class="o">=</code> <code class="nx">formatter</code><code class="p">.</code><code class="nx">format</code><code class="p">(</code><code class="nx">date</code><code class="p">);</code>&#13;
<code class="c1">// now dateString = '12/20/2022, 9:30 AM'</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45475174556056">&#13;
<h2>See Also</h2>&#13;
&#13;
<p><a data-type="xref" href="ch02.html#converting_number_to_string">“Converting a Numeric Value to a Formatted String”</a> introduced the <code>Intl</code> object and the concept of locale strings, which identify different geographic and cultural regions. <a data-primary="Intl.DateTimeFormat object" data-type="indexterm" id="idm45475174146024"/>For a comprehensive explanation of the 21 options the <code>Intl.DateTimeFormat</code> object supports, see the <a href="https://oreil.ly/at36f">MDN reference</a>. It’s worth noting that a few of these details are implementation dependent and may not be present on all browsers. (Examples include the <code>timeStyle</code>, <code>dateStyle</code>, and <code>timeZone</code> properties, which we haven’t discussed here.) <a data-primary="" data-startref="ix_string_date_value" data-type="indexterm" id="idm45475174142552"/><a data-primary="" data-startref="ix_date_format_value" data-type="indexterm" id="idm45475174141576"/><a data-primary="" data-startref="ix_format_date" data-type="indexterm" id="idm45475174140632"/><a data-primary="" data-startref="ix_dates_ch4" data-type="indexterm" id="idm45475174139688"/>As always, for complex <code>Date</code> manipulation, consider a third-party library.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>