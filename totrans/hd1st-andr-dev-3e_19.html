<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 16. Diffutil and Data Binding: Life in the Fast Lane"><div class="chapter" id="diffutil_and_data_bindingcolon_life_in_t">
<h1><span class="label">Chapter 16. </span>Diffutil and Data Binding: <em>Life in the Fast Lane</em></h1>
<figure class="informal"><div class="figure">
<img src="Images/f0671-01.png" alt="image" width="600" height="475"/>
<h6/>
</div></figure>
<p><strong>Your app needs to run as smoothly and efficiently as possible.</strong></p>
<p>But if you’re not careful, large or complex data sets can cause your recycler view to glitch. In this chapter, we’ll introduce you to <strong><em>DiffUtil</em></strong>: a utility class that <strong>adds extra smarts to your recycler view</strong>. You’ll find out how to use it to <strong>make efficient updates</strong> to your recycler view. You’ll discover how <strong><em>ListAdapters</em> make using <em>DiffUtil</em> a breeze</strong>. And along the way, you’ll learn <strong>how to get rid of <em>findViewById()</em> for good</strong> by implementing <strong>data binding in your recycler view code</strong>.</p>
<section data-type="sect1" data-pdf-bookmark="The recycler view displays task data correctly…"><div class="sect1" id="the_recycler_view_displays_task_data_cor">
<h1>The recycler view displays task data correctly…</h1>
<p><a data-type="indexterm" data-primary="recycler views" data-secondary="review of process" id="idm46053734636192"/><a data-type="indexterm" data-primary="Tasks app" id="idm46053734634736"/>In the previous chapter, we added a recycler view to the Tasks app that displays its data exactly how we want it to. Each task is shown in a separate card, and each card displays the task name and whether it has been completed. The cards are then laid out in a two-column grid like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0672-01.png" alt="image" width="600" height="587"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="…but when the data’s updated, the recycler view jumps"><div class="sect2" id="hellipbut_when_the_dataapostrophes_updat">
<h2>…but when the data’s updated, the recycler view jumps</h2>
<p>Each time we add a new task, the recycler view gets redrawn so that it includes the new record and stays up-to-date. When it does this, however, the recycler view jumps and it’s not very smooth.</p>
<p>Each time the recycler view needs to be updated, <em>its entire list gets redrawn</em>. There are no smooth transitions to indicate what’s changed, and if the list is very long, the user might lose her place. It’s also inefficient for large data sets, and can lead to performance problems.</p>
<p>Before we solve these problems, let’s have a quick reminder of how the Tasks app is structured.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The Tasks app revisited"><div class="sect1" id="the_tasks_app_revisited">
<h1>The Tasks app revisited</h1>
<p>As we’re sure you remember, the Tasks app lets the user enter task records, which are stored in a Room database. It includes a recycler view, which displays all of the records that have been entered.</p>
<p>The app’s main screen is defined by a fragment named <code>TasksFragment</code>, which uses a view model named <code>TasksViewModel</code>. Its layout—<em>fragment_tasks.xml</em>—includes a recycler view that displays a grid of tasks. The recycler view uses an adapter named <code>TaskItemAdapter</code>, and its items are arranged using the <em>task_item.xml</em> layout file.</p>
<p>Here’s how these parts of the app fit together:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0673-01.png" alt="image" width="600" height="551"/>
<h6/>
</div></figure>
<p>We need to fix <code>TasksFragment</code>’s recycler view so that it no longer jumps when a new record gets added. In order to do this, let’s revisit how the recycler view’s data gets set.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="How the recycler view gets its data"><div class="sect1" id="how_the_recycler_view_gets_its_data">
<h1>How the recycler view gets its data</h1>
<p>The following things happen each time the recycler view’s data needs to be updated:</p>
<ol>
<li><p><strong>TasksFragment is notified when a record is added to the database.</strong></p>
<p>This happens because it observes <code>TasksViewModel</code>’s <code>tasks</code> property: a <code>LiveData&lt;List&lt;Task&gt;&gt;</code> that gets its data from the database.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0674-01.png" alt="image" width="430" height="280"/>
<h6/>
</div></figure></li>
<li><p><strong>TasksFragment sets TaskItemAdapter’s data property, which holds the recycler view’s data.</strong></p>
<p>It sets it to a new <code>List&lt;Task&gt;</code> (that it gets from the <code>tasks</code> property) that includes the latest record changes.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0674-02.png" alt="image" width="409" height="236"/>
<h6/>
</div></figure></li>
<li><p><strong>TaskItemAdapter tells the recycler view that the data has changed.</strong></p>
<p>The recycler view responds by redrawing and rebinding each item in the list.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0674-03.png" alt="image" width="600" height="143"/>
<h6/>
</div></figure></li>
</ol>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The data property’s setter calls notifyDataSetChanged()"><div class="sect1" id="the_data_propertyapostrophes_setter_call">
<h1>The data property’s setter calls notifyDataSetChanged()</h1>
<p><a data-type="indexterm" data-primary="data property" data-secondary="recycler view adapter" id="idm46053734603200"/><a data-type="indexterm" data-primary="notifyDataSetChanged() method, TaskItemAdapter" id="idm46053734601968"/><a data-type="indexterm" data-primary="TaskItemAdapter" data-secondary="data type property" id="idm46053734601040"/>The recycler view redraws and rebinds its entire list because of the setter, which we added to <code>TaskItemAdapter</code>’s <code>data</code> property. Here’s a reminder of the code:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0675-01.png" alt="image" width="600" height="198"/>
<h6/>
</div></figure>
<p>The setter gets called each time the <code>data</code> property needs to be updated. As you can see, it sets the <code>data</code> property to the new value, and then calls <code>notifyDataSetChanged()</code>. This method tells any observers—including the recycler view—that the data set has changed, so the recycler view is redrawn to include the latest changes.</p>
<section data-type="sect2" data-pdf-bookmark="notifyDataSetChanged() redraws the entire list"><div class="sect2" id="notifydatasetchangedleft_parenthesisrigh">
<h2>notifyDataSetChanged() redraws the <u>entire list</u></h2>
<p>Using <code>notifyDataSetChanged()</code>, however, is problematic. Each time it’s called, it tells the recycler view that the <code>data</code> property is out of date in some way, <em>without specifying how</em>. As the recycler view doesn’t know what’s changed, it responds by <strong>rebinding and redrawing every item in its list</strong>.</p>
<p>When the entire recycler view rebinds and redraws its items in this way, it loses track of the user’s position in the list. If the list contains more than a few records, this can cause the list to jump.</p>
<p>It’s also inefficient for large data sets. If the recycler view contains many items, rebinding and redrawing each item is a lot of unnecessary work and can lead to performance problems.</p>
<blockquote>
<p><strong>Each time notifyDataSetChanged() gets called, the recycler view rebinds and redraws its entire list. This is inefficient, particularly for large data sets.</strong></p>
</blockquote>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="brain_power-id00251">
<h5><span class="inlineimage"><img src="Images/brain.png" alt="Images" width="113" height="131"/></span> Brain Power</h5>
<p>How do you think we could stop the recycler view’s entire list from being redrawn each time the user enters a new record?</p>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Tell the recycler view what needs to change"><div class="sect1" id="tell_the_recycler_view_what_needs_to_cha">
<h1>Tell the recycler view what needs to change</h1>
<p><a data-type="indexterm" data-primary="DiffUtil utility class" id="idm46053734583712"/><a data-type="indexterm" data-primary="DiffUtil utility class" data-secondary="purpose of" id="idm46053734582592"/><a data-type="indexterm" data-primary="recycler views" data-secondary="DiffUtil" id="idm46053734581456"/><a data-type="indexterm" data-primary="Tasks app" data-secondary="DiffUtil" id="idm46053734580352"/>A more efficient alternative to calling <code>notifyDataSetChanged()</code> is to tell the recycler which items in the list have changed so that it only updates those items. If a new task record gets added to the database, for example, it’s more efficient for the recycler view to just add that item than it is to rebind and redraw the entire list.</p>
<p>Manually working out these differences can be tricky and require a lot of code. The good news, however, is that the recycler view library includes a utility class named <code><strong>DiffUtil</strong></code> that takes care of all this hard work for you.</p>
<section data-type="sect2" data-pdf-bookmark="DiffUtil works out differences between lists"><div class="sect2" id="diffutil_works_out_differences_between_l">
<h2>DiffUtil works out differences between lists</h2>
<p>The <code>DiffUtil</code> class specializes in finding out what the differences are between two lists so that you don’t have to.</p>
<p>Each time an adapter is given a new version of the list its recycler view uses, <code>DiffUtil</code> compares it with the old version. It figures out what items have been added, removed, or updated, and it then tells the recycler view what needs to be changed in the most efficient way possible:</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#9D9EA0;">To be precise, it works out what the changes are using Eugene W. Myers’s clever difference algorithm.</span></p>
</div>
<figure class="informal"><div class="figure">
<img src="Images/f0676-02.png" alt="image" width="600" height="158"/>
<h6/>
</div></figure>
<p>As the recycler view no longer needs to redraw and rebind its entire list, using <code>DiffUtil</code> is a much more efficient way of updating a recycler view’s data. It also means that the user doesn’t lose her place in the list, and the recycler view can even provide smooth transition animations to make it clear what changes there have been.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0676-03.png" alt="image" width="600" height="277"/>
<h6/>
</div></figure>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Here’s what we’re going to do"><div class="sect1" id="hereapostrophes_what_weapostroph-id00252">
<h1>Here’s what we’re going to do</h1>
<p><a data-type="indexterm" data-primary="TaskDiffItemCallback class" id="idm46053734566400"/><a data-type="indexterm" data-primary="TaskItemAdapter" data-secondary="updating with DiffUtil" id="idm46053734565008"/>In this chapter, we’re going to make improvements to the Tasks app’s recycler view so that it uses <code>DiffUtil</code> and populates its views using data binding. These changes will make the recycler view more efficient, and improve the user’s experience of it too.</p>
<p>Here are the steps we’ll take:</p>
<ol>
<li><p><strong>Make the recycler view use DiffUtil.</strong></p>
<p>We’ll create a new class named <code>TaskDiffItemCallback</code> that uses <code>DiffUtil</code> to compare items in a list. We’ll then update the <code>TaskItemAdapter</code> code so that it uses this new class. These changes will make the recycler view more efficient, and give the user a smoother experience when they use it.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0677-01.png" alt="image" width="423" height="119"/>
<h6/>
</div></figure></li>
<li><p><strong>Implement data binding in the recycler view’s layout.</strong></p>
<p>We’ll remove the calls to <code>findViewById()</code> in the <code>TaskItemAdapter</code> code, and populate each item’s views using data binding.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0677-02.png" alt="image" width="461" height="170"/>
<h6/>
</div></figure></li>
</ol>
<p>We’ll begin by making the recycler view use <code>DiffUtil</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0677-03.png" alt="image" width="315" height="296"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="We need to implement DiffUtil.ItemCallback"><div class="sect1" id="we_need_to_implement_diffutildotitemcall">
<h1>We need to implement DiffUtil.ItemCallback</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0678-01.png" alt="image" width="246" height="58"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="areContentsTheSame() method, DiffUtil" id="idm46053734545984"/><a data-type="indexterm" data-primary="areItemsTheSame() method, DiffUtil" id="idm46053734545088"/><a data-type="indexterm" data-primary="DiffUtil.ItemCallback abstract class" id="idm46053734544288"/><a data-type="indexterm" data-primary="DiffUtil utility class" data-secondary="implementing" id="idm46053734543488"/><a data-type="indexterm" data-primary="TaskDiffItemCallback class" id="idm46053734542384"/>In order to use <code>DiffUtil</code> with the Tasks app’s recycler view, we need to create a new class (which we’ll name <code>TaskDiffItemCallback</code>) that implements the <code><strong>DiffUtil.ItemCallback</strong></code> abstract class. This class is used to calculate the difference between two non-null items in a list, and will help make the recycler view more efficient.</p>
<p>When you implement <code>DiffUtil.ItemCallback</code>, you first need to specify the type of objects it works with. This is done using generics like so:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0678-02.png" alt="image" width="600" height="61"/>
<h6/>
</div></figure>
<p>You also need to override two methods: <code>areItemsTheSame()</code> and <code>areContentsTheSame()</code>.</p>
<p><code><strong>areItemsTheSame()</strong></code> is used to check whether two objects that are passed to it refer to the same <em>item</em>. We’ll implement it using:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0678-03.png" alt="image" width="600" height="74"/>
<h6/>
</div></figure>
<p>so that if both objects have the same <code>taskId</code>, it means they refer to the same item, and the method returns <em>true</em>.</p>
<p><code><strong>areContentsTheSame()</strong></code> is used to check whether the two objects have the same <em>contents</em>, and it’s only called if <code>areItemsTheSame()</code> is <em>true</em>. As <code>Task</code> is a data class, we can implement this method using:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0678-04.png" alt="image" width="600" height="118"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Create TaskDiffItemCallback.kt"><div class="sect2" id="create_taskdiffitemcallbackdotkt">
<h2>Create TaskDiffItemCallback.kt</h2>
<p>To create the new class, highlight the <em>com.hfad.tasks</em> package in the <em>app/src/main/java</em> folder, then go to File→New→Kotlin Class/File. Name the file “TaskDiffItemCallback” and choose the Class option.</p>
<p>Once you’ve created the file, update its code so that it looks like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0678-05.png" alt="image" width="600" height="229"/>
<h6/>
</div></figure>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A ListAdapter accepts a DiffUtil.ItemCallback argument"><div class="sect1" id="a_listadapter_accepts_a_diffutildotitemc">
<h1>A ListAdapter accepts a DiffUtil.ItemCallback argument</h1>
<p><a data-type="indexterm" data-primary="data property" id="idm46053734519216"/><a data-type="indexterm" data-primary="data property" data-secondary="List&lt;Task&gt;" id="idm46053734518256"/><a data-type="indexterm" data-primary="getItemCount() method, TaskItemAdapter" id="idm46053734517152"/><a data-type="indexterm" data-primary="List&lt;Task&gt; data property, TaskItemAdapter" id="idm46053734516352"/><a data-type="indexterm" data-primary="ListAdapter class" id="idm46053734515552"/><a data-type="indexterm" data-primary="onBindViewHolder() method, TaskItemAdapter" id="idm46053734514720"/><a data-type="indexterm" data-primary="RecyclerView.Adapter" id="idm46053734513920"/><a data-type="indexterm" data-primary="TaskItemAdapter" data-secondary="extending ListAdapter" id="idm46053734513088"/>Now that we’ve defined <code>TaskDiffItemCallback</code>, we need to use it in the adapter code. To do this, we’ll update <code>TaskItemAdapter</code> so that it extends the <code><strong>ListAdapter</strong></code> class instead of <code>RecyclerView.Adapter</code>.</p>
<p><code>ListAdapter</code> is a type of <code>RecyclerView.Adapter</code> that’s designed to work with lists. It provides its own backing list so that you don’t have to define your own, and it accepts a <code>DiffUtil.ItemCallback</code> in its constructor.</p>
<p>We’re going to specify that <code>TaskItemAdapter</code> is a type of <code>ListAdapter</code> that provides its own <code>List&lt;Task&gt;</code>, and we’ll pass it an instance of <code>TaskDiffItemCallback</code>. Here’s the code to do this:</p>
<blockquote>
<p><strong>A ListAdapter is a type of RecyclerView.Adapter that provides its own backing list. It works well with DiffUtil.</strong></p>
</blockquote>
<figure class="informal"><div class="figure">
<img src="Images/f0679-01.png" alt="image" width="600" height="275"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="We can simplify the rest of TaskItemAdapter’s code"><div class="sect2" id="we_can_simplify_the_rest_of_taskitemadap">
<h2>We can simplify the rest of TaskItemAdapter’s code</h2>
<p>Once <code>TaskItemAdapter</code> has been changed to extend <code>ListAdapter</code>, we can remove its <code>List&lt;Task&gt; data</code> property, along with its setter. This property is no longer needed because <code>ListAdapter</code>s come with their own backing list, so you don’t need to define your own.</p>
<p>We can also delete <code>TaskItemAdapter</code>’s <code>getItemCount()</code> method. This was needed when the adapter extended <code>RecyclerView.Adapter</code>, but <code>ListAdapter</code> provides its own implementation, so it’s no longer required.</p>
<p>Finally, we need to update the adapter’s <code>onBindViewHolder()</code> method so that instead of using:</p>
<pre data-type="programlisting">val item = data[position]</pre>
<p>to get the item at a certain position from the <code>data</code> property, it uses:</p>
<pre data-type="programlisting">val item = getItem(position)</pre>
<p>This gets the item at the specified position from the adapter’s backing list.</p>
<p>We’ll show you all of the code for this on the next page.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The updated code for TaskItemAdapter.kt"><div class="sect1" id="the_updated_code_for_taskitemadapterdotk">
<h1>The updated code for TaskItemAdapter.kt</h1>
<p>Here’s the updated <code>TaskItemAdapter</code> code; update the code in <em>TaskItemAdapter.kt</em> to include all the changes shown here:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0680-02.png" alt="image" width="600" height="605"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Populate the ListAdapter’s list…"><div class="sect1" id="populate_the_listadapterapostrophes_list">
<h1>Populate the ListAdapter’s list…</h1>
<p><a data-type="indexterm" data-primary="submitList() method, TaskItemAdapter" id="idm46053734486672"/><a data-type="indexterm" data-primary="TaskDiffItemCallback class" id="idm46053734485680"/><a data-type="indexterm" data-primary="TaskItemAdapter" data-secondary="passing Task records to" id="idm46053734484880"/><a data-type="indexterm" data-primary="Task records" data-secondary="passing to TaskItemAdapter" id="idm46053734483776"/>The final thing that we need to do is pass a list of <code>Task</code> records to <code>TaskItemAdapter</code>’s backing list.</p>
<p>Previously, we did this by making <code>TasksFragment</code> observe <code>TasksViewModel</code>’s <code>tasks</code> property. Each time the property changes, the fragment updates the <code>TaskItemAdapter</code>’s <code>data</code> property to the <code>tasks</code> property’s new value.</p>
<p>Here’s a reminder of the code we used to do this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0681-02.png" alt="image" width="598" height="141"/>
<h6/>
</div></figure>
<p>Now that the adapter uses a backing list instead of the <code>data</code> property, we need to use a slightly different approach.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0681-03.png" alt="image" width="252" height="281"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="…using submitList()"><div class="sect2" id="hellipusing_submitlistleft_parenthesisri">
<h2>…using submitList()</h2>
<p>To pass a list of tasks to <code>TaskItemAdapter</code>’s backing list, we’ll use a method called <code>submitList()</code>. This method is used to update a <code>ListAdapter</code>’s backing list with a new <code>List</code> object, so it’s perfect for this situation.</p>
<p>Here’s the new code that we need to add to <code>TasksFragment</code> (in bold), which we’ll add on the next page:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0681-04.png" alt="image" width="600" height="168"/>
<h6/>
</div></figure>
<p>When the adapter receives the new list, it uses the <code>TaskDiffItemCallback</code> class to compare it with the old version. It then updates the recycler view with the differences instead of replacing the entire list. This approach is more efficient, and leads to a much smoother user experience.</p>
<p>Let’s see what the updated <code>TasksFragment</code> code looks like.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The updated code for TasksFragment.kt"><div class="sect1" id="the_updated_code_for_tasksfragme-id00253">
<h1>The updated code for TasksFragment.kt</h1>
<p><a data-type="indexterm" data-primary="TasksFragment" data-secondary="ListAdapter update" id="idm46053734462688"/>Here’s the updated <code>TasksFragment</code> code; update the code in <em>TasksFragment.kt</em> to include all the changes shown here (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0682-02.png" alt="image" width="600" height="596"/>
<h6/>
</div></figure>
<p>Let’s run through what happens when the app runs.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What happens when the code runs"><div class="sect1" id="what_happens_when_the_code_runs-id00254">
<h1>What happens when the code runs</h1>
<p>The following things happen when the app runs:</p>
<ol>
<li><p><strong>When the app launches, MainActivity displays TasksFragment.</strong></p>
<p><code>TasksFragment</code> uses <code>TasksViewModel</code> as its view model.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0683-02.png" alt="image" width="364" height="126"/>
<h6/>
</div></figure></li>
<li><p><strong>TasksFragment creates a TaskItemAdapter object, and assigns it to the recycler view as its adapter.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0683-03.png" alt="image" width="600" height="117"/>
<h6/>
</div></figure></li>
<li><p><strong>TasksFragment observes TasksViewModel’s tasks property.</strong></p>
<p>This property is a <code>LiveData&lt;List&lt;Task&gt;&gt;</code> that holds an up-to-date list of records from the database.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0683-04.png" alt="image" width="429" height="267"/>
<h6/>
</div></figure></li>
<li><p><strong>Each time the tasks property gets a new value, TasksFragment submits its List&lt;Task&gt; to the TaskItemAdapter.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0684-02.png" alt="image" width="434" height="306"/>
<h6/>
</div></figure></li>
<li><p><strong>TaskItemAdapter uses TaskDiffItemCallback to compare its old data with the new.</strong></p>
<p>It uses <code>TaskDiffItemCallback</code>’s <code>areItemsTheSame()</code> and <code>areContentsTheSame()</code> methods to figure out what’s changed.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0684-03.png" alt="image" width="600" height="144"/>
<h6/>
</div></figure></li>
<li><p><strong>TaskItemAdapter tells the recycler view what’s changed.</strong></p>
<p>The recycler view rebinds and redraws the necessary items.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0684-04.png" alt="image" width="600" height="162"/>
<h6/>
</div></figure></li>
</ol>
</div></section>
<section data-type="sect1" data-pdf-bookmark=" Test Drive"><div class="sect1" id="test_drive-id00255">
<h1><span class="inlineimage"><img src="Images/car.png" alt="Images" width="119" height="58"/></span> Test Drive</h1>
<p>When we run the app, <code>TasksFragment</code> displays a grid of cards in the recycler view as before.</p>
<p>When we enter a new task name and click on the button, a new task card is added to the recycler view, and the existing cards shuffle along to accommodate it.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0685-02.png" alt="image" width="600" height="554"/>
<h6/>
</div></figure>
<p>The recycler view behaves in this way because we’re using <code>DiffUtil</code> to submit changes to it, instead of replacing the entire list.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="BE the ListAdapter"><div class="sect1" id="be_the_listadapter">
<h1>BE the ListAdapter</h1>
<figure class="informal"><div class="figure">
<img src="Images/common04.png" alt="image" width="156" height="199"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Be the . . ." id="idm46053734424336"/><a data-type="indexterm" data-primary="ListAdapter class" id="idm46053734423056"/><strong>A recycler view’s ListAdapter class has a backing list of Drinks. It uses the Drink class shown on the right. Your job is to play like you’re the ListAdapter, and say if the ItemCallback classes below will correctly spot any changes when the ListAdapter is given a new list. Why? Why not?</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0686-01.png" alt="image" width="335" height="194"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0686-02.png" alt="image" width="600" height="560"/>
<h6/>
</div></figure>
<p><span class="inlineimage"><img src="Images/arr.png" alt="Images" width="101" height="9"/></span> <strong>Answers in <a data-type="xref" href="#be_the_listadapter_solution">“BE the ListAdapter Solution”</a>.</strong></p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Recycler views can use data binding"><div class="sect1" id="recycler_views_can_use_data_binding">
<h1>Recycler views can use data binding</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0687-01.png" alt="image" width="246" height="58"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="bind() method, TaskItemViewHolder" id="idm46053734411536"/><a data-type="indexterm" data-primary="data binding" data-secondary="using with recycler views" id="idm46053734410560"/><a data-type="indexterm" data-primary="findViewById() method" data-secondary="TaskItemViewHolder" id="idm46053734409488"/><a data-type="indexterm" data-primary="TaskItemViewHolder inner class" data-secondary="data binding" id="idm46053734408384"/>Another way in which we can improve the Tasks app’s recycler view is to make it use data binding.</p>
<p>As you may recall, <code>TaskItemAdapter</code>’s <code>TaskItemViewHolder</code> inner class uses <code>findViewById()</code> to get a reference to the views for each item in the recycler view. The view holder’s <code>bind()</code> method then uses these references to add data to each view.</p>
<p>Here’s a reminder of this code:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0687-02.png" alt="image" width="600" height="274"/>
<h6/>
</div></figure>
<p>If we change the recycler view to use data binding, we can remove the calls to <code>findViewById()</code>, and make each view fetch its own data.</p>
<section data-type="sect2" data-pdf-bookmark="How we’ll implement data binding"><div class="sect2" id="how_weapostrophell_implement_dat-id00256">
<h2>How we’ll implement data binding</h2>
<p>We’ll make the recycler view use data binding in a similar way to how it’s implemented with fragments. We’ll go through the following steps:</p>
<ol>
<li><p><strong>Add a data binding variable to task_item.xml.</strong></p>
<p>We’ll add a <code>&lt;layout&gt;</code> element to the layout’s root, and create a data binding variable named <code>task</code> whose type is <code>Task</code>. This will generate a binding class named <code>TaskItemBinding</code>.</p></li>
<li><p><strong>Set the data binding variable in TaskItemAdapter.</strong></p>
<p>We’ll use <code>TaskItemBinding</code> to inflate each item’s layout, and set its data binding variable to the <code>Task</code> object for that item.</p></li>
<li><p><strong>Use the data binding variable to set the views data.</strong></p>
<p>Finally, we’ll update <em>task_item.xml</em> so that each view fetches its data from the layout’s <code>Task</code> object.</p></li>
</ol>
<figure class="informal"><div class="figure">
<img src="Images/f0687-03.png" alt="image" width="249" height="366"/>
<h6/>
</div></figure>
<p>Let’s begin by defining the data binding variable.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Add a data binding variable to task_item.xml"><div class="sect1" id="add_a_data_binding_variable_to_taskunder">
<h1>Add a data binding variable to task_item.xml</h1>
<p><a data-type="indexterm" data-primary="data binding variable, setting" data-secondary="Task" id="idm46053734386096"/><a data-type="indexterm" data-primary="layout element" id="idm46053734384832"/><a data-type="indexterm" data-primary="layout element" data-secondary="adding to task_item.xml" id="idm46053734384000"/><a data-type="indexterm" data-primary="TaskItemBinding class" id="idm46053734382896"/><a data-type="indexterm" data-primary="Task type, data binding variable" id="idm46053734382064"/>We’ll begin by adding a <code>&lt;layout&gt;</code> element to <em>task_item.xml</em>’s root, and specifying a data binding variable. Instead of using it to bind views to a view model, however, we’ll specify that its type is <code>Task</code>.</p>
<p>Here’s the code to do this: update <em>task_item.xml</em> to include these changes (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0688-02.png" alt="image" width="600" height="468"/>
<h6/>
</div></figure>
<p>Making <em>task_item.xml</em>’s root element a <code>&lt;layout&gt;</code> tells Android that you want to use data binding with it, so it generates a new binding class named <code>TaskItemBinding</code>. We’ll use this class to inflate the above layout, and set its <code>task</code> data binding variable to a <code>Task</code> object.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The layout gets inflated in the adapter’s view holder code"><div class="sect1" id="the_layout_gets_inflated_in_the_adaptera">
<h1>The layout gets inflated in the adapter’s view holder code</h1>
<p><a data-type="indexterm" data-primary="TaskItemViewHolder inner class" data-secondary="data binding" id="idm46053734372176"/><a data-type="indexterm" data-primary="Tasks app" data-secondary="data binding" id="idm46053734370912"/>When we first created the recycler view, we inflated the layout file <em>task_item.xml</em> in <code>TaskItemAdapter</code>’s <code>TaskItemViewHolder</code> inner class. We now need to change this code so that it works with the binding class <code>TaskItemBinding</code>. Before we begin, here’s a reminder of the current code.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0689-02.png" alt="image" width="600" height="426"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="brain_power-id00257">
<h5><span class="inlineimage"><img src="Images/brain.png" alt="Images" width="113" height="131"/></span> Brain Power</h5>
<p>Look at the above <code>TaskItemViewHolder</code> code. What changes do you think we need to make in order to bind <em>task_item.xml</em> to a <code>Task</code> object?</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Use the binding class to inflate the layout"><div class="sect1" id="use_the_binding_class_to_inflate_the_lay">
<h1>Use the binding class to inflate the layout</h1>
<p><a data-type="indexterm" data-primary="binding variable, TaskItemBinding" id="idm46053734359840"/><a data-type="indexterm" data-primary="inflateFrom() method" id="idm46053734358784"/><a data-type="indexterm" data-primary="inflateFrom() method" data-secondary="TaskItemBinding" id="idm46053734357952"/><a data-type="indexterm" data-primary="Task type, data binding variable" id="idm46053734356848"/>The first change that we’ll make to <code>TaskItemViewHolder</code> is to inflate <em>task_item.xml</em> using the <code>TaskItemBinding</code> class. We’ll do this in the view holder’s <code>inflateFrom()</code> method like so:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0690-02.png" alt="image" width="600" height="126"/>
<h6/>
</div></figure>
<p>Notice that we’re now passing the <code>binding</code> variable—a <code>TaskItemBinding</code> object—to <code>TaskItemViewHolder</code>’s constructor. This means that we also need to update <code>TaskItemViewHolder</code>’s class definition so that it looks like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0690-03.png" alt="image" width="600" height="254"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Set the layout’s data binding variable to a Task"><div class="sect2" id="set_the_layoutapostrophes_data_binding_v">
<h2>Set the layout’s data binding variable to a Task</h2>
<p>Now that we’ve used the <code>TaskItemBinding</code> class to inflate <em>task_item.xml</em>, we can use it to set the <code>task</code> data binding variable. To do this, we’ll change <code>TaskItemViewHolder</code>’s <code>bind()</code> method so that it sets <code>task</code> to the recycler view’s current <code>Task</code> item like so:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0690-04.png" alt="image" width="600" height="127"/>
<h6/>
</div></figure>
<p>We’ve removed the lines that set the layout’s <code>task_name</code> and <code>task_done</code> views because with data binding, these are no longer needed. This means we can also remove the <code>taskName</code> and <code>taskDone</code> properties from the view holder.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0690-05.png" alt="image" width="411" height="146"/>
<h6/>
</div></figure>
<p>We’ll show you the full code for <code>TaskItemAdapter</code> (including its <code>TaskItemViewHolder</code> inner class) on the next page.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for TaskItemAdapter.kt"><div class="sect1" id="the_full_code_for_taskitemadapte-id00258">
<h1>The full code for TaskItemAdapter.kt</h1>
<p><a data-type="indexterm" data-primary="TaskItemAdapter" data-secondary="code for" id="idm46053734334912"/>Here’s the updated <code>TaskItemAdapter</code> code; make sure that the code in <em>TaskItemAdapter.kt</em> includes all the changes shown here (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0691-02.png" alt="image" width="600" height="491"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0692-02.png" alt="image" width="600" height="322"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Use data binding to set the layout’s views"><div class="sect2" id="use_data_binding_to_set_the_layoutapostr">
<h2>Use data binding to set the layout’s views</h2>
<p>Now that we’ve set <em>task_item.xml</em>’s <code>task</code> data binding variable to the view holder’s <code>Task</code> item, we can use data binding to populate the layout’s views.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0692-03a.png" alt="image" width="415" height="296"/>
<h6/>
</div></figure>
<p>You’re already familiar with the code to do this. To set the <code>task_name</code> view’s text to the name of the task, for example, we can use:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0692-03.png" alt="image" width="506" height="110"/>
<h6/>
</div></figure>
<p>and to set the <code>task_done</code> checkbox, we can use:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0692-05.png" alt="image" width="600" height="200"/>
<h6/>
</div></figure>
<p>We’ll show you the full code on the next page.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for task_item.xml"><div class="sect1" id="the_full_code_for_taskunderscore-id00259">
<h1>The full code for task_item.xml</h1>
<p><a data-type="indexterm" data-primary="data binding" data-secondary="code for" id="idm46053734317120"/><a data-type="indexterm" data-primary="task_item.xml file" id="idm46053734313936"/>Here’s the updated code for <em>task_item.xml</em>; update the code for this file so that it includes all the changes shown here (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0693-02.png" alt="image" width="600" height="793"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0694-02.png" alt="image" width="600" height="234"/>
<h6/>
</div></figure>
<p>Let’s go through what happens when the code runs, and take it for a test drive.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00260">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Why did we use a</strong> <code><strong>RecyclerView.Adapter</strong></code> <strong>in the previous chapter? Could we have used</strong> <code><strong>ListAdapter</strong></code> <strong>instead?</strong></p>
<p><strong>A:</strong> We used a <code>RecyclerView.Adapter</code> in the previous chapter so that you could get a feel for how recycler views fit together and work. Using a <code>ListAdapter</code> is an extra refinement that works well with <code>DiffUtil</code>, which is why we introduced it in this chapter.</p>
<p><strong>Q: Can you use</strong> <code><strong>DiffUtil</strong></code> <strong>without implementing a</strong> <code><strong>ListAdapter</strong></code><strong>?</strong></p>
<p><strong>A:</strong> You can, but it’s more complicated. It’s easier to use <code>ListAdapter</code> instead.</p>
<p><strong>Q: Why are we replacing those calls to</strong> <code><strong>findViewById()</strong></code><strong>?</strong></p>
<p><strong>A:</strong> <code>findViewById()</code> has a number of disadvantages, as we discussed in <a data-type="xref" href="ch10.xhtml#view_bindingcolon_bound_together">Chapter 10</a>.</p>
<p>First, it can be quite inefficient. Each time the method’s called, Android has to search the layout’s hierarchy for a view with a matching ID. If it doesn’t find one, the app will crash.</p>
<p><code>findViewById()</code> isn’t type-safe either. If you specify an incorrect type for the view you want to find, the app may crash when you try to use it.</p>
<p><strong>Q: Oh yes, I think I remember these disadvantages. And data binding doesn’t have these problems?</strong></p>
<p><strong>A:</strong> No. Using data binding is safer because it means you’re much less likely to experience these kinds of runtime errors.</p>
<p><strong>Q: In <em>task_item.xml</em> you defined a data binding variable whose type is <code>Task</code>. Why?</strong></p>
<p><strong>A:</strong> Because we wanted to display values from each item’s <code>Task</code> object, and creating a variable of this type lets us set these values using data binding.</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What happens when the code runs"><div class="sect1" id="what_happens_when_the_code_runs-id00261">
<h1>What happens when the code runs</h1>
<p>The following things happen when the app runs:</p>
<ol>
<li><p><strong>task_item.xml defines a Task data binding variable named task.</strong></p>
<p>As <em>task_item.xml</em> has a <code>&lt;layout&gt;</code> element at its root, a binding class named <code>TaskItemBinding</code> is generated for this layout.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0695-02.png" alt="image" width="343" height="140"/>
<h6/>
</div></figure></li>
<li><p><strong>TasksFragment creates a TaskItemAdapter object, and assigns it to the recycler view as its adapter.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0695-03.png" alt="image" width="600" height="117"/>
<h6/>
</div></figure></li>
<li><p><strong>TasksFragment submits a List&lt;Task&gt; to the TaskItemAdapter.</strong></p>
<p>The <code>List&lt;Task&gt;</code> contains an up-to-date list of records from the database.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0695-04.png" alt="image" width="425" height="303"/>
<h6/>
</div></figure></li>
<li><p><strong>TaskItemAdapter’s onCreateViewHolder() method is called for each item that needs to be displayed in the recycler view.</strong></p>
<p><code>onCreateViewHolder()</code> calls <code>TaskItemViewHolder.inflateFrom()</code>, which creates a <code>TaskItemBinding</code> object. It inflates the object’s layout, and uses it to create a <code>TaskItemViewHolder</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0696-02.png" alt="image" width="600" height="169"/>
<h6/>
</div></figure></li>
<li><p><strong>TaskItemAdapter’s onBindViewHolder() method is called for each TaskItemViewHolder.</strong></p>
<p>This calls the <code>TaskItemViewHolder</code>’s <code>bind()</code> method, which uses the <code>TaskItemBinding</code> object to set the layout’s <code>task</code> variable to the item’s <code>Task</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0696-03.png" alt="image" width="600" height="140"/>
<h6/>
</div></figure></li>
<li><p><strong>Data binding code in task_item.xml uses the task property to set the views for each item.</strong></p>
<p>The <code>task_name</code> view’s <code>text</code> property is set to <code>task.taskName</code>, and the <code>task_done</code> view’s <code>checked</code> property is set to <code>task.taskDone</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0696-04.png" alt="image" width="600" height="120"/>
<h6/>
</div></figure></li>
</ol>
</div></section>
<section data-type="sect1" data-pdf-bookmark=" Test Drive"><div class="sect1" id="test_drive-id00262">
<h1><span class="inlineimage"><img src="Images/car.png" alt="Images" width="119" height="58"/></span> Test Drive</h1>
<p>When we run the app, <code>TasksFragment</code> displays a grid of cards in the recycler view. It behaves in the same way as before, but this time, we’re using data binding.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0697-02.png" alt="image" width="600" height="557"/>
<h6/>
</div></figure>
<p>Congratulations! You’ve now learned how to implement data binding with a recycler view, as well as how to utilize <code>DiffUtil</code>.</p>
<p>In the next chapter, we’ll build on this knowledge to make the recycler view navigate to individual records.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Adapter Magnets"><div class="sect1" id="adapter_magnets-id00263">
<h1>Adapter Magnets</h1>
<figure class="informal"><div class="figure">
<img src="Images/common02.png" alt="image" width="86" height="144"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="adapter, recycler view" data-secondary="exercises" id="idm46053734248976"/><a data-type="indexterm" data-primary="exercises" data-secondary="Magnets" id="idm46053734247504"/>The Bits and Pizzas app includes a recycler view that uses a layout named <em>pizza_item.xml</em> for its items. The layout defines a data binding variable (named <code>pizza</code>) like this:</p>
<pre data-type="programlisting">&lt;layout...&gt;
    &lt;data&gt;
        &lt;variable
            name="pizza"
            type="com.hfad.bitsandpizzas.Pizza" /&gt;
    &lt;/data&gt;
    ...
&lt;/layout&gt;</pre>
<p>The recycler view uses an adapter named <code>PizzaAdapter</code>, shown below. See if you can complete the code for this adapter so that it sets the layout’s <code>pizza</code> data binding variable.</p>
<pre data-type="programlisting">package com.hfad.bitsandpizzas

import android.view.LayoutInflater
import android.view.ViewGroup
import androidx.recyclerview.widget.ListAdapter
import androidx.recyclerview.widget.RecyclerView

import com.hfad.bitsandpizzas.databinding. ...........................................

class PizzaAdapter
    : ListAdapter&lt;Pizza, PizzaAdapter.PizzaViewHolder&gt;(PizzaDiffItemCallback) {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int)
                         : PizzaViewHolder = PizzaViewHolder.inflateFrom(parent)

    override fun onBindViewHolder(holder: PizzaViewHolder, position: Int) {
        val item = getItem(position)
        holder.bind(item)
    }
    class PizzaViewHolder(val binding:...............................)
                                         : RecyclerView.ViewHolder(binding.root) {

        companion object {
            fun inflateFrom(parent: ViewGroup): PizzaViewHolder {
                val layoutInflater = LayoutInflater.from(parent.context)

                val binding = ..................................

                              .inflate(.................................., parent, false)

                return PizzaViewHolder(binding)
            }
        }

        fun bind(item: Pizza) {

        ..................................= ..................................
        }
    }
}</pre>
<figure class="informal"><div class="figure">
<img src="Images/f0699-01.png" alt="image" width="600" height="150"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Adapter Magnets Solution"><div class="sect1" id="adapter_magnets_solution-id00264">
<h1>Adapter Magnets Solution</h1>
<figure class="informal"><div class="figure">
<img src="Images/common02.png" alt="image" width="86" height="144"/>
<h6/>
</div></figure>
<p>The Bits and Pizzas app includes a recycler view that uses a layout named <em>pizza_item.xml</em> for its items. The layout defines a data binding variable (named <code>pizza</code>) like this:</p>
<pre data-type="programlisting">&lt;layout...&gt;
    &lt;data&gt;
        &lt;variable
            name="pizza"
            type="com.hfad.bitsandpizzas.Pizza" /&gt;
    &lt;/data&gt;
    ...
&lt;/layout&gt;</pre>
<p>The recycler view uses an adapter named <code>PizzaAdapter</code>, shown below. See if you can complete the code for this adapter so that it sets the layout’s <code>pizza</code> data binding variable.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0700-01.png" alt="image" width="600" height="383"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0701-01.png" alt="image" width="600" height="701"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="BE the ListAdapter Solution"><div class="sect1" id="be_the_listadapter_solution">
<h1>BE the ListAdapter Solution</h1>
<figure class="informal"><div class="figure">
<img src="Images/common04.png" alt="image" width="156" height="199"/>
<h6/>
</div></figure>
<p><strong>A recycler view’s ListAdapter class has a backing list of Drinks. It uses the Drink class shown on the right. Your job is to play like you’re the ListAdapter, and say if the ItemCallback classes below will correctly spot any changes when the ListAdapter is given a new list. Why? Why not?</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0702-01.png" alt="image" width="335" height="193"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0702-02.png" alt="image" width="600" height="465"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Your Android Toolbox"><div class="sect1" id="your_android_toolbox-id00265">
<h1>Your Android Toolbox</h1>
<figure class="informal"><div class="figure">
<img src="Images/tools.png" alt="image" width="182" height="129"/>
<h6/>
</div></figure>
<p><strong>You’ve got <a data-type="xref" href="#diffutil_and_data_bindingcolon_life_in_t">Chapter 16</a> under your belt and now you’ve added DiffUtil and recycler view data binding to your toolbox.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0703-01.png" alt="image" width="234" height="210"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="bullet_points-id00266">
<h5>Bullet Points</h5>
<ul>
<li><p>Each time <code>notifyDataSetChanged()</code> is called, the recycler rebinds and redraws every item.</p></li>
<li><p><code>DiffUtil</code> figures out which items have changed, and updates the recycler view in the most efficient way possible.</p></li>
<li><p>A <code>ListAdapter</code> is a type of <code>RecyclerView.Adapter</code> that works with lists. It provides its own backing list, and accepts a <code>DiffUtil.ItemCallback</code> in its constructor.</p></li>
<li><p><code>DiffUtil.ItemCallback</code> calculates the difference between two non-null items in a list.</p></li>
<li><p>Override the <code>DiffUtil.ItemCallback</code>’s <code>areItemsTheSame()</code> method to specify whether two objects refer to the same item.</p></li>
<li><p>Override the <code>DiffUtil.ItemCallback</code>’s <code>areContentsTheSame()</code> method to specify whether two objects have the same contents.</p></li>
<li><p>Use the <code>submitList()</code> method to submit a new version of a list to a <code>ListAdapter</code>.</p></li>
<li><p>Recycler views can use data binding.</p></li>
<li><p>Define a data binding variable in the layout used for the recycler view’s items.</p></li>
<li><p>Set the data binding variable in the recycler view’s adapter code.</p></li>
</ul>
</div></aside>
</div></section>
</div></section></div></body></html>