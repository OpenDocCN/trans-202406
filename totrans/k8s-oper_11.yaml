- en: Appendix A. Running an Operator as a Deployment Inside a Cluster
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Running an Operator outside of the cluster, is convenient for testing and debugging
    purposes, but production Operators run as Kubernetes deployments. There are a
    few extra steps involved for this deployment style:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Build the image*. The Operator SDK’s `build` command chains to the underlying
    Docker daemon to build the Operator image, and takes the full image name and version
    when run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '*Configure the deployment.* Update the *deploy/operator.yaml* file that the
    SDK generates with the name of the image. The field to update is named `image`
    and can be found under:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The generated file defaults the value to `REPLACE_IMAGE`, which you should update
    to reflect the name of the image built in the previous command.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Once built, push the image to an externally accessible repository such as [Quay.io](https://quay.io)
    or [Docker Hub](https://hub.docker.com).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '*Deploy the CRD*. The SDK generates a skeleton CRD that will function correctly,
    but see [Appendix B](app02.html#appendix_crd_validation) for more information
    on fleshing out this file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '*Deploy the service account and role*. The SDK generates the service account
    and role required by the Operator. Update these to limit the permissions of the
    role to the minimum of what is needed for the Operator to function.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once you have scoped the role permissions appropriately, deploy the resources
    into the cluster:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Warning
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: You must deploy these files in the order listed, as the role binding requires
    both the role and the service account to be in place.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '*Create the Operator deployment*. The last step is to deploy the Operator itself.
    You can use the previously edited *operator.yaml* file to deploy the Operator
    image into the cluster:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
