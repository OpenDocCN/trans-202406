<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 9. Using Option Files"><div class="chapter" id="CH9_OPTIONS_FILE">
<h1><span class="label">Chapter 9. </span>Using Option Files</h1>


<p>Almost every piece of software is capable of being configured, or even must be configured. <a data-type="indexterm" data-primary="option files" data-secondary="about" id="idm46177453267528"/>MySQL is not much different in this regard. While the default configuration will probably suit an astonishing number of installations, more likely than not, you will end up needing to configure the server, or a client. MySQL provides two ways to configure itself: through command-line argument options, and through the configuration file. Since this file contains only the options that could be specified on the command line, it’s also called the <em>option</em> file.</p>

<p>The option file is not exclusive to MySQL Server. It’s also not strictly correct to talk about the option <em>file</em>, as pretty much every installation of MySQL will have multiple option files. Most MySQL software supports inclusion in the option files, and we’ll cover that, too.</p>

<p>Knowing your way around an option file—understanding its sections and option precedence—is an important part of efficiently working with MySQL Server and related software. After going through this chapter, you should feel comfortable configuring MySQL Server and other programs that use option files. This chapter will focus on the files themselves. The configuration of the server itself and some tuning ideas are discussed in depth in Chapter 11.</p>






<section data-type="sect1" data-pdf-bookmark="Structure of the Option File"><div class="sect1" id="CH-OPTIONS-FILE-STRUCTURE">
<h1>Structure of the Option File</h1>

<p>Configuration files in MySQL follow the ubiquitous INI file scheme.<a data-type="indexterm" data-primary="option files" data-secondary="structure of" id="ch09-opst"/><a data-type="indexterm" data-primary="configuration files" data-see="option files" id="idm46177453260360"/> In short, they are regular text files that are intended to be edited manually. Of course, you can automate the editing process, but the structure of these files is purposefully very simple. Almost every MySQL configuration file can be created and modified with any text editor. There are just two exceptions to this rule, reviewed in <a data-type="xref" href="#CH-OPTIONS-FILE-SPECIAL">“Special Option Files”</a>.</p>

<p>To give you an idea of the file structure, let’s take a look at a configuration file shipped with MySQL 8 on Fedora Linux (note that the exact contents of the option files on your system may be different). We’ve redacted a few lines for brevity:</p>

<pre data-type="programlisting">$ <strong>cat /etc/my.cnf</strong>
...
[mysqld]
#
# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M
...
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock

log-error=/var/log/mysqld.log
pid-file=/run/mysqld/mysqld.pid</pre>
<div data-type="tip"><h6>Tip</h6>
<p>On some Linux distributions, such as Ubuntu, the <em>/etc/my.cnf</em> configuration file doesn’t exist in a default MySQL installation. Look for <em>/etc/mysql/my.cnf</em> on those systems, or refer to <a data-type="xref" href="#CH-OPTIONS-FILE-ORDER">“Search Order for Option Files”</a> for a way to get a full list of option files <code>mysqld</code> reads.</p>
</div>

<p>There are a few main parts to the file structure:</p>
<dl>
<dt>Section (group) headers</dt>
<dd>
<p>These are the values in square brackets preceding the configuration parameters. All programs using option files look for parameters in one or more named sections. For example, <code>[mysqld]</code> is a section used by the MySQL server, and <code>[mysql]</code> is used by the <code>mysql</code> CLI program. The name of the sections are, strictly speaking, arbitrary, and you can put anything there. However, if you change <code>[mysqld]</code> to <code>[section]</code>, your MySQL server will ignore all the options following that header.</p>

<p>MySQL documentation calls sections <em>groups</em>, but both terms can be used interchangeably.</p>

<p>Headers control how the files are parsed, and by which programs. Each option after a section header and before the next section header will be attributed to the first header. An example will make this clearer:</p>

<pre data-type="programlisting">[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
[mysql]
default-character-set=latin1</pre>

<p>Here, the <code>datadir</code> and <code>socket</code> options are under (and will be attributed to) the <code>[mysqld]</code> section, whereas the <code>default-character-set</code> option is under <code>[mysql]</code>. Note that some MySQL programs read multiple sections; but we’ll talk about that later.</p>

<p>Section headers can be intertwined. The following example is completely valid:</p>

<pre data-type="programlisting">[mysqld]
datadir=/var/lib/mysql
[mysql]
default-character-set=latin1
[mysqld]
socket=/var/lib/mysql/mysql.sock
[mysqld_safe]
core-file-size=unlimited
[mysqld]
core-file</pre>

<p>Such a configuration might be difficult for a person to read, but programs that parse the file will not care about the order. Still, it’s probably best to keep the configuration files as human-readable as possible.</p>
</dd>
<dt>Option-value pairs</dt>
<dd>
<div class="openblock">
<p>This is the main part of the option file, consisting of the configuration variables themselves and their values. Each of these pairs is defined on a new line and follows one of two general patterns. In addition to the <code><em>option=value</em></code> pattern shown in the previous example, there’s also just the <code><em>option</em></code> pattern. For example, the same standard MySQL 8 configuration file has the following lines:</p>

<pre data-type="programlisting"># Remove the leading "# " to disable binary logging
# Binary logging captures changes between backups and is enabled by
# default. Its default setting is log_bin=binlog
# disable_log_bin</pre>

<p><code>disable_log_bin</code> is an option without a value. If we uncomment it, MySQL Server will apply the option.</p>

<p>With the <code><em>option</em>=<em>value</em></code> pattern, you can add spaces<a data-type="indexterm" data-primary="option files" data-secondary="whitespace" id="idm46177453233144"/> around the equals sign for readability if you prefer. Any whitespace preceding and following the option name and value will be truncated automatically.</p>

<p>Option values can also be enclosed in single or double quote characters. That is useful if you’re not sure whether the value is going to be interpreted correctly. <a data-type="indexterm" data-primary="Windows 10" data-secondary="paths in option files" id="idm46177453231112"/><a data-type="indexterm" data-primary="backslash (\)" id="idm46177453230136"/><a data-type="indexterm" data-primary="\ (backslash)" data-primary-sortas="#backslash" id="idm46177453229464"/>For example, on Windows, paths contain the <code>\</code> symbol, which is treated like an escape symbol. Thus, you should put paths on Windows in double quotes (although you could also escape each <code>\</code> by doubling it as <code>\\</code>). <a data-type="indexterm" data-primary="comments" data-secondary="Linux" id="idm46177453226920"/><a data-type="indexterm" data-primary="# (Linux comment)" data-primary-sortas="#Linux" id="idm46177453225912"/><a data-type="indexterm" data-primary="Linux" data-secondary="comment marker" id="idm46177453224968"/>Quoting the option values is required when the value includes the <code>#</code> symbol, which would otherwise be treated as indicating the start of a comment.</p>

<p>The rule of thumb that we recommend is to use quotes when you’re not sure. Here are some valid option/value pairs that illustrate the previous points:</p>

<pre data-type="programlisting">slow_query_log_file = "C:\mysqldata\query.log"
slow_query_log_file=C:\\mysqldata\\query.log
innodb_temp_tablespaces_dir="./#innodb_temp/"</pre>

<p>When setting values for numerical options, like the sizes of different buffers and files, working with bytes can get tedious. To make life easier, MySQL understands a variety of suffixes standing in for different units. For example, the following are all equivalent and define a buffer pool of the same size (268,435,456 bytes):</p>

<pre data-type="programlisting">innodb_buffer_pool_size = 268435456
innodb_buffer_pool_size = 256M
innodb_buffer_pool_size = 256MB
innodb_buffer_pool_size = 256MiB</pre>

<p>You can also specify <code>G</code>, <code>GB</code>, and <code>GiB</code> for gigabytes and <code>T</code>, <code>TB</code>, and <code>TiB</code> for terabytes if you have a server large enough. Of course, <code>K</code> and other forms are also accepted. MySQL always uses base-2 units: 1 GB is 1,024 MB, not 1,000 MB.</p>

<p>You cannot specify fractional values for options. So, for example, <code>0.25G</code> is an incorrect value for the <code>innodb_buffer_pool_size</code> variable. Also, unlike when setting values from the <code>mysql</code> CLI or another client connection, you cannot use mathematical notation for option values. You can run <code>SET GLOBAL max_heap_table_size=16*1024*1024;</code>, but you cannot put the same value in the option file.</p>

<p>You can even configure the same option multiple times, as we did with <code>innodb_buffer_pool_size</code>. The last setting will take precedence over the previous ones, and the files are scanned from top to bottom. Option files have a global order of precedence as well; we’ll talk about that in <a data-type="xref" href="#CH-OPTIONS-FILE-ORDER">“Search Order for Option Files”</a>.</p>

<p>A very important thing to remember is that setting an incorrect<a data-type="indexterm" data-primary="names" data-secondary="option names in option files" id="idm46177453211688"/> option name will lead to programs not starting. Of course, if the incorrect option is under a section that particular program doesn’t read, it’s fine. But <code>mysqld</code> will fail if it finds an option it doesn’t know under <code>[mysqld]</code>. <a data-type="indexterm" data-primary="validation of option files" id="idm46177453209480"/><a data-type="indexterm" data-primary="option files" data-secondary="validating" id="idm46177453208776"/>In MySQL 8.0 you can validate some of the changes you make in option files by using the <code>--validate-config</code> command-line argument with <code>mysqld</code>. However, that validation will cover only core server functionality and won’t verify storage engine options.</p>

<p>Sometimes you’ll need to set an option that MySQL doesn’t know at startup time. <a data-type="indexterm" data-primary="option files" data-secondary="loose- prefix" id="idm46177453206408"/>For example, this can be useful when configuring plugins that may be loaded after startup. You can prepend such options with the <code>loose-</code> prefix (or <code>--loose-</code> on the command line), and MySQL will only output a warning when it sees these but not fail to start. Here’s an example with an unknown option:</p>

<pre data-type="programlisting"># <strong>mysqld --validate-config</strong>
2021-02-11T08:02:58.741347Z 0 [ERROR] [MY-000067] [Server] ...
 ... unknown variable <em>audit_log_format=JSON</em>.
2021-02-11T08:02:58.741470Z 0 [ERROR] [MY-010119] [Server] Aborting</pre>

<p>After the option is changed to <code>loose-audit_log_format</code>, we see the following instead. No output means that all the options were successfully validated:</p>

<pre data-type="programlisting"># <strong>mysqld --validate-config</strong>
#</pre>
</div>

</dd>
<dt>Comments</dt>
<dd>
<p>An often overlooked but important feature of MySQL option files is<a data-type="indexterm" data-primary="option files" data-secondary="comments" id="idm46177453198920"/><a data-type="indexterm" data-primary="comments" data-secondary="option files" id="idm46177453197864"/><a data-type="indexterm" data-primary="# (option file comment)" data-primary-sortas="#option" id="idm46177453196920"/> the ability to add comments. Comments allow you to include arbitrary text, usually a description of why the setting is here, that will not be parsed by any MySQL programs. As you saw in the <code>disable_log_bin</code> example, comments are lines starting with <code>#</code>. <a data-type="indexterm" data-primary="semicolon (;)" id="idm46177453194776"/>You can also create comments that start with semicolon (<code>;</code>); either is accepted. You don’t necessarily need to have a whole line dedicated to a comment: they can also appear at the end of a line, although in this case they must start with a <code>#</code>, not a <code>;</code>. Once MySQL finds a <code>#</code> on a line (unless it’s escaped), everything beyond that point is treated as a comment. The following line is a valid configuration:</p>

<pre data-type="programlisting">innodb_buffer_pool_size = 268435456 # 256M</pre>
</dd>
<dt>Inclusion directives</dt>
<dd>
<div class="openblock">
<p>Configuration files (and whole directories) can be included within<a data-type="indexterm" data-primary="option files" data-secondary="inclusion directives" id="idm46177453189048"/> other config files. This can make it easier to manage complex configurations, but it also makes reading the options more difficult, because humans, unlike programs, can’t really merge the files together easily. Still, it’s useful to be able to separate the configurations of different MySQL programs. The <code>xtrabackup</code> utility (see <a data-type="xref" href="ch10.xhtml#CH10_BACKUP">Chapter 10</a>), for example, doesn’t have any special config file and reads standard system option files. With inclusion, you can have <code>xtrabackup</code>’s configs neatly organized in a dedicated file and declutter your main MySQL option file. You can then include it as follows:</p>

<pre data-type="programlisting">$ <strong>cat /etc/my.cnf</strong>
!include /etc/mysql.d/xtrabackup.cnf
...</pre>

<p>You can see that <em>/etc/my.cnf</em> includes the <em>/etc/mysql.d/xtrabackup.cnf</em> file, which in turn has a few configuration options listed in the <code>[xtrabackup]</code> section.</p>

<p>It is not necessary to have different sections in different files, though. For example, Percona XtraDB Cluster has <code>wsrep</code> library configuration options under the <code>[mysqld]</code> section. There are plenty of such configurations, and they aren’t necessarily useful to have in your <em>my.cnf</em>. You could create a separate file—for example, <em>/etc/mysql.d/wsrep.conf</em>—and list the <code>wsrep</code> variables under the <code>[mysqld]</code> section there. Any program reading the main <em>my.cnf</em> file will also read all of the included files and only then parse the variables under the different sections.</p>

<p>When a lot of such extra configuration files are created, you may want to just go ahead and include the whole directory or directories that contain them instead of including each individual option file. That’s done with another directive, <code>includedir</code>, that expects a directory path as an argument:</p>

<pre data-type="programlisting">!includedir /etc/mysql.d</pre>

<p>MySQL programs will understand that path as a directory and try to include every option file in that directory’s tree. On Unix-like systems, <em>.cnf</em> files are included; on Windows, both <em>.cnf</em> and <em>.ini</em> files are included.</p>

<p>Usually, inclusions are defined at the beginning of a particular config file, but that isn’t mandatory. You can think of the inclusion as appending the contents of the included file or files to the parent file; wherever an inclusion is defined in the file, the included file’s contents will be placed right under that inclusion. In reality, things are a bit more complicated, but this mental model works when, for example, thinking about option precedence, which we cover in <a data-type="xref" href="#CH-OPTIONS-FILE-ORDER">“Search Order for Option Files”</a>.</p>

<p>Each included file must have at least one configuration section defined. For example, it may have <code>[mysqld]</code> at the beginning.</p>
</div>

</dd>
<dt>Empty lines</dt>
<dd>
<p>There’s no meaning to empty lines in the option files. <a data-type="indexterm" data-primary="option files" data-secondary="whitespace" id="idm46177453170792"/>You can use them to separate the sections or individual options visually to make the file easier to read.<a data-type="indexterm" data-startref="ch09-opst" id="idm46177453169480"/></p>
</dd>
</dl>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Scope of Options"><div class="sect1" id="CH-OPTIONS-FILE-SCOPE">
<h1>Scope of Options</h1>

<p>We can talk about option scope in MySQL from two perspectives.<a data-type="indexterm" data-primary="option files" data-secondary="scope of options" id="ch09-sco"/><a data-type="indexterm" data-primary="global scope of options" id="idm46177453165512"/><a data-type="indexterm" data-primary="session scope of options" id="idm46177453164840"/> First, each individual option can have global scope, session scope, or both, and can be set dynamically or statically. Second, we can talk about how options set in option files are scoped through sections and what the scope and order of precedence of the option files themselves is.</p>

<p>We mentioned that section headers define which particular program (or programs, as nothing prevents one from reading multiple sections) is intended to be reading the options under a particular header. Some configuration options do not make sense outside of their sections, but some can be defined under multiple sections and do not necessarily need to be set equally.</p>

<p>Let’s consider an example where we have a MySQL server configured with the <code>latin1</code> character set for legacy reasons. However, there are now newer tables with the <code>utf8mb4</code> charset. We want our <code>mysqldump</code> logical dumps to just be in UTF-8, so we want to override the charset for this program. Conveniently, <code>mysqldump</code> reads its own configuration section, so we can write an option file like this:</p>

<pre data-type="programlisting">[mysqld]
character_set_server=latin1
[mysqldump]
default_character_set=utf8mb4</pre>

<p>This small example shows how options can be set on different levels. In this particular case we used different options, but it could be the same one in different scopes. For example, suppose we want to limit the future size of <code>BLOB</code> and <code>TEXT</code> values (see <a data-type="xref" href="ch04.xhtml#SEC-STRING-COLUMN-TYPES">“String types”</a>) to 32 MiB, but we already have rows of up to 256 MiB in size. We can add an artificial barrier for local clients using a configuration like this:</p>

<pre data-type="programlisting">[mysqld]
max_allowed_packet=256M
[client]
max_allowed_packet=32M</pre>

<p>The MySQL server’s <code>max_allowed_packet</code> value will be set on a global scope and will act as a hard limit on the maximum query size (and also on <code>BLOB</code> or <code>TEXT</code> field size). The client’s value will be set on a session scope and will act as a soft limit. If a particular client requires a larger value (to read an old row, for example), it can use the <code>SET</code> statement to go up to the server’s limit.</p>

<p>The option files themselves also have different scopes. MySQL option files can be divided by scope into a few groups: global, client, server, and extra. Global option files are read by all or most MySQL programs, whereas client and server files are only read by client programs and <code>mysqld</code>, respectively. Since it’s possible to specify an extra configuration file to be read by a program, we’re also listing the “extra” category.</p>

<p>Let’s outline the option files installed and read on Linux and Windows by a regular MySQL 8.0 installation. <a data-type="indexterm" data-primary="Windows 10" data-secondary="option files" id="idm46177453152168"/><a data-type="indexterm" data-primary="Windows 10" data-secondary="MySQL 8 installation" data-tertiary="option files" id="idm46177453151192"/><a data-type="indexterm" data-primary="option files" data-secondary="Windows 10 MySQL 8 installation" id="idm46177453149976"/>We’ll start with Windows, in <a data-type="xref" href="#mysql_options_files_on_windows">Table 9-1</a>.</p>
<table id="mysql_options_files_on_windows">
<caption><span class="label">Table 9-1. </span>MySQL option files on Windows</caption>
<thead>
<tr>
<th>Filename</th>
<th>Scope and purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><em>%WINDIR%\my.ini</em>, <em>%WINDIR%\my.cnf</em></p></td>
<td><p>Global options read by all programs</p></td>
</tr>
<tr>
<td><p><em>C:\my.ini</em>, <em>C:\my.cnf</em></p></td>
<td><p>Global options read by all programs</p></td>
</tr>
<tr>
<td><p><em>BASEDIR</em><em>\my.ini</em>, <em>BASEDIR</em><em>\my.cnf</em></p></td>
<td><p>Global options read by all programs</p></td>
</tr>
<tr>
<td><p>Extra config file</p></td>
<td><p>File optionally specified with <code>--defaults-extra-file</code></p></td>
</tr>
<tr>
<td><p><em>%APPDATA%\MySQL\.mylogin.cnf</em></p></td>
<td><p>Login path config file</p></td>
</tr>
<tr>
<td><p><em>DATADIR</em><em>\mysqld-auto.cnf</em></p></td>
<td><p>Option file for persisted variables</p></td>
</tr>
</tbody>
</table>

<p><a data-type="xref" href="#mysql_options_files_one_fedora_linux">Table 9-2</a> breaks down the option files for a typical installation on Fedora Linux.<a data-type="indexterm" data-primary="Linux" data-secondary="Fedora option files" id="idm46177453130616"/><a data-type="indexterm" data-primary="Fedora Linux option files" id="idm46177453129672"/><a data-type="indexterm" data-primary="Linux" data-secondary="option files" id="idm46177453128984"/></p>
<table id="mysql_options_files_one_fedora_linux">
<caption><span class="label">Table 9-2. </span>MySQL option files on Fedora Linux</caption>
<thead>
<tr>
<th>Filename</th>
<th>Scope and purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><em>/etc/my.cnf</em>, <em>/etc/mysql/my.cnf</em>, <em>/usr/etc/my.cnf</em></p></td>
<td><p>Global options read by all programs</p></td>
</tr>
<tr>
<td><p><em>$MYSQL_HOME/my.cnf</em></p></td>
<td><p>Server options, only read if the variable is set</p></td>
</tr>
<tr>
<td><p><em>~/.my.cnf</em></p></td>
<td><p>Global options read by all programs run by a particular OS user</p></td>
</tr>
<tr>
<td><p>Extra config file</p></td>
<td><p>File optionally specified with <code>--defaults-extra-file</code></p></td>
</tr>
<tr>
<td><p><em>~/.mylogin.cnf</em></p></td>
<td><p>Login path config file under a particular OS user</p></td>
</tr>
<tr>
<td><p><em>DATADIR</em><em>/mysqld-auto.cnf</em></p></td>
<td><p>Option file for persisted variables</p></td>
</tr>
</tbody>
</table>

<p>With Linux, it’s difficult to identify a universal, complete list of configuration files, as MySQL packages for different Linux distributions may read slightly different files or locations. As a rule of thumb, <em>/etc/my.cnf</em> is a good starting point on Linux, and either <em>%WINDIR%\my.cnf</em> or <em>BASEDIR</em><em>\my.cnf</em> on Windows.</p>

<p>A couple of the configuration files we’ve listed may differ in their paths between different systems. <em>/usr/etc/my.cnf</em> can be also written as <em>SYSCONFIGDIR</em><em>/my.cnf</em>, and the path is defined at compilation time. <em>$MYSQL_HOME/my.cnf</em> is only read if the variable is set. The default packaged <code>mysqld_safe</code> program (used to start the <code>mysqld</code> daemon) will set <code>$MYSQL_HOME</code> to <em>BASEDIR</em> before running <code>mysqld</code>. You won’t find <code>$MYSQL_HOME</code> set for any of the OS users, and setting that variable is relevant only if you’re starting <code>mysqld</code> manually—in other words, not using the <code>service</code> or <code>systemctl</code> commands.</p>

<p>There’s one peculiar difference between Windows and Linux. On Linux, MySQL programs read some configuration files located under the given OS user’s home directory. <a data-type="indexterm" data-primary="~ (tilde)" data-primary-sortas="#tilde" id="idm46177453103480"/><a data-type="indexterm" data-primary="tilde (~)" id="idm46177453102504"/>In <a data-type="xref" href="#mysql_options_files_one_fedora_linux">Table 9-2</a>, the home directory is represented by <code>~</code>. MySQL on Windows lacks this ability. One frequent use case for such config files is controlling options for clients based on their OS user. Usually, they will contain credentials. However, the login path facility described in <a data-type="xref" href="#CH-OPTIONS-FILE-SPECIAL">“Special Option Files”</a> makes this redundant.</p>

<p>An extra config file, specified on the command line with <code>--defaults-extra-file</code>, <a data-type="indexterm" data-primary="option files" data-secondary="command line config file" id="idm46177453098168"/><a data-type="indexterm" data-primary="command line interface mysql" data-secondary="extra config file read" id="idm46177453097192"/><a data-type="indexterm" data-primary="mysql command line interface" data-secondary="extra config file read" id="idm46177453096280"/>will be read after every other global file is read, according to its position in the table. This is a useful option when you want to do a one-off run of a program to test new variables, for example. Overusing this option, though, can lead to trouble in understanding the current set of options in effect (see <a data-type="xref" href="#CH-OPTIONS-FILE-EFFECT">“Determining the Options in Effect”</a>). The <code>--defaults-extra-file</code> option is not the only one that alters option file handling. <code>--no-defaults</code> prevents the program from reading <em>any</em> configuration files at all. <code>--defaults-file</code> forces the program to read a single file, which can be useful if you have your custom configuration all in one place.</p>

<p>By now you should have a firm grasp on what option files most installations of MySQL use. The next section talks more about how different programs read different files, in which order, and what specific group or groups they read from those files.<a data-type="indexterm" data-startref="ch09-sco" id="idm46177453091640"/></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Search Order for Option Files"><div class="sect1" id="CH-OPTIONS-FILE-ORDER">
<h1>Search Order for Option Files</h1>

<p>At this point you should know the structure of an option file and<a data-type="indexterm" data-primary="option files" data-secondary="search order for" id="idm46177453089064"/> where to find them. Most MySQL programs read one or more option files, and it’s important to know in which specific order a program searches for these files and reads them. This section covers the topics of search order and options precedence and discusses their importance.</p>

<p>If a MySQL program reads any option files, you can find the specific files it reads, as well as the order in which it reads them.<a data-type="indexterm" data-primary="Linux" data-secondary="option files" data-tertiary="listing files read" id="idm46177453087064"/> The general order of the configuration files read will be either exactly the same or very similar to that outlined in Tables <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_on_windows">9-1</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_one_fedora_linux">9-2</a>. You can use the following command to see the exact order:</p>

<pre data-type="programlisting">$ <strong>mysqld --verbose --help | grep "Default options" -A2</strong>
Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf
The following groups are read: mysqld server mysqld-8.0</pre>

<p>On Windows you need to run <code>mysqld.exe</code> instead of <code>mysqld</code>, but<a data-type="indexterm" data-primary="Windows 10" data-secondary="option files" data-tertiary="listing files read" id="idm46177453080120"/> the output will stay the same. That output includes the list of configuration files read, and their order. You can also see the list of option groups read by <code>mysqld</code>: <code>[mysqld]</code>, <code>[server]</code>, and <code>[mysqld-8.0]</code>. Note that you can alter the list of option groups that any program reads by adding the <code>--defaults-group-suffix</code> option:</p>

<pre data-type="programlisting">$ <strong>mysqld --defaults-group-suffix=-test --verbose --help | grep "groups are read"</strong>
The following groups are read: mysqld server mysqld-8.0 ...
... mysqld-test server-test mysqld-8.0-test</pre>

<p>You know at this point what option files and option groups are read. However, it’s also important to know the order of precedence for those option files. Nothing prevents you from setting one or more options in multiple configuration files, after all. In the case of MySQL programs, the order of precedence for config files is simple: options from files read later take precedence over options in previously read files. Options passed to commands directly as command-line arguments take precedence over any configuration options in any config files.</p>

<p>In Tables <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_on_windows">9-1</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_one_fedora_linux">9-2</a>, the files are read in order from top to bottom. The lower the config file in the list, the higher the “weight” of options there. For example, for any programs that are not <code>mysqld</code>, values in <em>.mylogin.cnf</em> take precedence over those in any other config files, and only have lower precedence than values set through command-line arguments. For <code>mysqld</code>, the same is true for persisted variables set in <code><em>DATADIR</em></code> <em>/mysqld-auto.cnf</em>.</p>

<p>The ability to include configuration files in other files through<a data-type="indexterm" data-primary="option files" data-secondary="inclusion directives" data-tertiary="listing files read" id="idm46177453068056"/> inclusion directives makes things slightly more complicated, but you always include extras within one or more of the option files listed in Tables <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_on_windows">9-1</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_one_fedora_linux">9-2</a>. You can think of this as MySQL appending the included files to the parent config file just before reading it, inserting each one into the file just after its inclusion directive. Thus, the precedence of the options globally is that of the parent configuration file. Within the resulting file itself (with all the included files added in order), options defined later take precedence over ones defined earlier.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Special Option Files"><div class="sect1" id="CH-OPTIONS-FILE-SPECIAL">
<h1>Special Option Files</h1>

<p>There are two special configuration files used by MySQL, which are exceptions to the structure outlined in <a data-type="xref" href="#CH-OPTIONS-FILE-STRUCTURE">“Structure of the Option File”</a>.</p>








<section data-type="sect2" data-pdf-bookmark="Login Path Configuration File"><div class="sect2" id="CH-OPTIONS-FILE-SPECIAL-LOGIN-PATH">
<h2>Login Path Configuration File</h2>

<p>First, there’s a <em>.mylogin.cnf</em> file, which is used as part of the<a data-type="indexterm" data-primary="option files" data-secondary="login path file" id="ch09-lpo"/><a data-type="indexterm" data-primary="login path option file" id="ch09-lpo2"/><a data-type="indexterm" data-primary="encryption" data-secondary="login path option file" id="idm46177453055528"/><a data-type="indexterm" data-primary="mysql_config_editor program" data-secondary="login path option file" id="idm46177453054584"/><a data-type="indexterm" data-primary="passwords" data-secondary="login path option file" id="ch09-lpo3"/> <em>login path</em> system. Even though you can think of its structure as similar to that of a regular option file, this particular file is not a regular text file. In fact, it’s an encrypted text file. This file is intended to be created and modified through use of the special <code>mysql_config_editor</code> program, which is supplied with MySQL, usually in the client package. It is encrypted because the purpose of <em>.mylogin.cnf</em> (and the whole login path system) is to store MySQL connection options, including passwords, in a convenient and secure 
<span class="keep-together">manner.</span></p>

<p>By default, <code>mysql_config_editor</code> and other MySQL programs will look for <em>.mylogin.cnf</em> in the <em>$HOME</em> of the current user on Linux and various Unix flavors, and in <em>%APPDATA%\MySQL</em> on Windows. It is possible to change the location and name of the file by setting the <code>MYSQL_TEST_LOGIN_FILE</code> environment variable.</p>

<p>You can create this file, if it doesn’t already exist, by storing a password for the <code>root</code> user in it:</p>

<pre data-type="programlisting">$ <strong>mysql_config_editor set --user=root --password</strong>
Enter password:</pre>

<p>After entering the password and confirming the input, we can take a look at the file’s contents:</p>

<pre data-type="programlisting">$ <strong>ls -la ~/.mylogin.cnf</strong>
-rw-------. 1 skuzmichev skuzmichev 100 Jan 18 18:03 .mylogin.cnf
$ <strong>cat ~/.mylogin.cnf</strong>



&gt;pZ
   prI
         R86w"&gt;# &amp;.h.m:4+|DDKnl_K3&gt;73x$
$ <strong>file ~/.mylogin.cnf</strong>
.mylogin.cnf: data
$ <strong>file ~/.my.cnf</strong>
.my.cnf: ASCII text</pre>

<p>As you can see, on the surface at least, <em>.mylogin.cnf</em> is for sure not a regular configuration file. As such, it requires special treatment. In addition to creating the file, you can view and modify <em>.mylogin.cnf</em> with the <code>mysql_config_editor</code>. Let’s start with how to actually see what’s inside. The option for that is <code>print</code>:</p>

<pre data-type="programlisting">$ <strong>mysql_config_editor print</strong>
[client]
user = "root"
password = *****</pre>

<p><code>client</code> is a default login path. All operations done with <code>mysql_config_editor</code> without an explicit login path specification affect the <code>client</code> login path. We didn’t specify any login path when running <code>set</code> earlier, so <code>root</code>’s credentials were written under the <code>client</code> path. It’s possible to specify a specific login path for any operation, though. Let’s put <code>root</code>’s credentials under a login path named <code>root</code>:</p>

<pre data-type="programlisting">$ <strong>mysql_config_editor set --login-path=root --user=root --password</strong>
Enter password:</pre>

<p>To specify the login path, use the <code>--login-path</code> or <code>-G</code> option, and to view all the paths when using <code>print</code>, add the <code>--all</code> option:</p>

<pre data-type="programlisting">$ <strong>mysql_config_editor print --login-path=root</strong>
[root]
user = root
password = *****
$ <strong>mysql_config_editor print --all</strong>
[client]
user = root
password = *****
[root]
user = root
password = *****</pre>

<p>You can see that the output resembles an option file, so you can think of <em>.mylogin.cnf</em> as an option file with some special treatment. Just don’t edit it manually. Speaking of editing, let’s add a few more options to the <code>set</code> command as <code>mysql_config_editor</code> calls it. We’ll create a new login path in the process.</p>

<p><code>mysql_config_editor</code> supports the <code>--help</code> (or <code>-?</code>) argument,<a data-type="indexterm" data-primary="mysql_config_editor program" data-secondary="--help argument" id="idm46177453024984"/> which can be combined with other options to get help specifically on <code>print</code> or <code>set</code>, for example. Let’s start by looking at a slightly truncated help output for <code>set</code>:</p>

<pre data-type="programlisting">$ <strong>mysql_config_editor set --help</strong>
...
MySQL Configuration Utility.

Description: Write a login path to the login file.
Usage: mysql_config_editor [program options] [set [command options]]
  -?, --help          Display this help and exit.
  -h, --host=name     Host name to be entered into the login file.
  -G, --login-path=name
                      Name of the login path to use in the login file. (Default
                      : client)
  -p, --password      Prompt for password to be entered into the login file.
  -u, --user=name     User name to be entered into the login file.
  -S, --socket=name   Socket path to be entered into login file.
  -P, --port=name     Port number to be entered into login file.
  -w, --warn          Warn and ask for confirmation if set command attempts to
                      overwrite an existing login path (enabled by default).
                      (Defaults to on; use --skip-warn to disable.)
...</pre>

<p>You can see here another interesting property of <em>.mylogin.cnf</em>: you can’t put arbitrary parameters into it. Now we know that we can basically set only a few options related to logging into a MySQL instance or instances—which is, of course, to be expected of the “login path” file. Now, let’s get back to editing the file:</p>

<pre data-type="programlisting">$ <strong>mysql_config_editor set --login-path=scott --user=scott</strong>
$ <strong>mysql_config_editor set --login-path=scott --user=scott</strong>
WARNING : <em>scott</em> path already exists and will be overwritten.
 Continue? (Press y|Y for Yes, any other key for No) : y
$ <strong>mysql_config_editor set --login-path=scott --user=scott --skip-warn</strong></pre>

<p>Here we’ve shown all the behaviors that <code>mysql_config_editor</code> can exhibit when modifying or creating a login path. If the login path doesn’t yet exist, no warning is produced. If there’s already such a path, a warning and confirmation will be printed, but only if <code>--skip-warn</code> is not specified. Note that we’re talking here in terms of the whole login path! It is not possible to modify a single property of the path: the whole login path is written out every time. If you want to change a single property, you’ll need to specify all the other properties that you need too.</p>

<p>Let’s add some more details and view the result:<a data-type="indexterm" data-startref="ch09-lpo" id="idm46177453014440"/><a data-type="indexterm" data-startref="ch09-lpo2" id="idm46177453013736"/><a data-type="indexterm" data-startref="ch09-lpo3" id="idm46177453013064"/></p>

<pre data-type="programlisting">$ <strong>mysql_config_editor set --login-path=scott</strong> \
<strong>--user=scott --port=3306 --host=192.168.122.1</strong> \
<strong>--password --skip-warn</strong>
Enter password:
$ <strong>mysql_config_editor print --login-path=scott</strong>
[scott]
user = scott
password = *****
host = 192.168.122.1
port = 3306</pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Persistent System Variables Configuration File"><div class="sect2" id="idm46177453059688">
<h2>Persistent System Variables Configuration File</h2>

<p>The second special file is <em>mysqld-auto.cnf</em>, which has<a data-type="indexterm" data-primary="option files" data-secondary="persistent system variables" id="idm46177453007832"/><a data-type="indexterm" data-primary="mysqld-auto.cnf" id="idm46177453006808"/><a data-type="indexterm" data-primary="system variables" data-secondary="persistent variables in option files" id="idm46177453006136"/><a data-type="indexterm" data-primary="SET command" data-secondary="persistent system variables" id="idm46177453005176"/> resided in the data directory since MySQL 8.0. It is a part of the new persisted system variables feature, which allows you to update MySQL options on disk using regular <code>SET</code> statements. Before, you could not change MySQL’s configuration from within a database connection. The usual flow was to change the option files on disk and then run a <code>SET GLOBAL</code> statement to change the configuration variables online. As you can imagine, this can lead to mistakes and to changes only being made online, for example. The new <code>SET PERSIST</code> statement takes care of both tasks: variables updated online are also updated on disk. It’s also possible to update a variable on disk only.</p>

<p>The file itself is, surprisingly, not like any other configuration file in MySQL at all. Whereas <em>.mylogin.cnf</em> was an encrypted but still regular option file, <em>mysqld-auto.cnf</em> uses a common but completely different format: JSON.<a data-type="indexterm" data-primary="JSON file format" id="idm46177453000792"/></p>

<p>Before you persist anything, <em>mysqld-auto.cnf</em> doesn’t exist. So, we’ll start by changing a system variable:</p>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">@</code><code class="o">@</code><code class="n">GLOBAL</code><code class="p">.</code><code class="n">max_connections</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------------+
| @@GLOBAL.max_connections |
+--------------------------+
|                      100 |
+--------------------------+
1 row in set (0.00 sec)</pre>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="kt">SET</code><code> </code><code class="n">PERSIST</code><code> </code><code class="n">max_connections</code><code> </code><code class="o">=</code><code> </code><code class="mi">256</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">Query OK, 0 rows affected (0.01 sec)</pre>

<pre data-type="programlisting" data-code-language="mysql"><code class="n">mysql</code><code class="o">&gt;</code><code> </code><strong><code class="k">SELECT</code><code> </code><code class="o">@</code><code class="o">@</code><code class="n">GLOBAL</code><code class="p">.</code><code class="n">max_connections</code><code class="p">;</code></strong></pre>

<pre data-type="programlisting">+--------------------------+
| @@GLOBAL.max_connections |
+--------------------------+
|                      256 |
+--------------------------+
1 row in set (0.00 sec)</pre>

<p>As expected, the variable was updated on a global scope online. Let’s now explore the resulting config file. Since we know that the contents are in JSON format, <a data-type="indexterm" data-primary="jq utility for JSON format files" id="idm46177452925880"/>we’ll use the <code>jq</code> utility to format it nicely. That’s not necessary, but makes the file easier to read:</p>

<pre data-type="programlisting">$ <strong>cat /var/lib/mysql/mysqld-auto.cnf | jq .</strong>
{
  "Version": 1,
  "mysql_server": {
    "max_connections": {
      "Value": "256",
      "Metadata": {
        "Timestamp": 1611728445802834,
        "User": "root",
        "Host": "localhost"
      }
    }
  }
}</pre>

<p>Just by looking at this file containing a single variable value, you can see why plain <em>.ini</em> is used for config files that are intended to be edited by humans. This is verbose! However, JSON is excellent for reading by computers, so it’s a good match for a configuration written and read by MySQL itself. As an added benefit, you get auditing of the changes: as you can see, the <code>max_connection</code> property has metadata containing the time when the change occurred and the author of the change.</p>

<p>Since this is a text file, unlike the login path config file, which is binary, it’s possible to edit <em>mysqld-auto.cnf</em> manually. However, it’s unlikely that there will be many cases where that’s needed.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Determining the Options in Effect"><div class="sect1" id="CH-OPTIONS-FILE-EFFECT">
<h1>Determining the Options in Effect</h1>

<p>The last routine task that pretty much anyone working with<a data-type="indexterm" data-primary="system variables" data-secondary="persistent variables in option files" data-tertiary="where set" id="ch09-vars"/><a data-type="indexterm" data-primary="option files" data-secondary="persistent system variables" data-tertiary="where set" id="ch09-vars2"/> MySQL will face is finding out values for the variables, and in what option files they are set (and why, but no amount of technology can help with human reasoning sometimes!).</p>

<p>At this point, we know what files MySQL programs read, in what order, and their precedence. We also know that command-line arguments override any other settings. Still, understanding where exactly some variable is set can be a daunting task. Multiple files scanned, potentially with nested inclusions, can make for a long investigation.</p>

<p>Let’s start by looking at how to determine the options currently used by a program. <a data-type="indexterm" data-primary="mysqld (daemon)" data-secondary="--print-defaults" data-secondary-sortas="print-defaults" id="idm46177452894632"/><a data-type="indexterm" data-primary="defaults" data-secondary="mysqld --print-defaults" id="idm46177452893032"/><a data-type="indexterm" data-primary="SHOW" data-secondary="VARIABLES" data-tertiary="GLOBAL VARIABLES" id="idm46177452892088"/><a data-type="indexterm" data-primary="variables" data-secondary="SHOW GLOBAL VARIABLES" id="idm46177452890872"/><a data-type="indexterm" data-primary="system variables" data-secondary="SHOW GLOBAL VARIABLES" id="idm46177452889928"/><a data-type="indexterm" data-primary="mysqld (daemon)" data-secondary="SHOW GLOBAL VARIABLES" id="idm46177452888984"/>For some, like MySQL Server (<code>mysqld</code>), that is easy. You can get the list of current values used by <code>mysqld</code> by running <code>SHOW GLOBAL VARIABLES</code>. It’s impossible to change an option value that <code>mysqld</code> uses and not see the effect reflected in the global variables’ state. For other programs, things get more complicated. To understand what options are used by <code>mysql</code>, you’d have to run it and then check the outputs of <code>SHOW VARIABLES</code> and <code>SHOW GLOBAL VARIABLES</code> to see which options are overridden on the session level. But even before a successful connection to the server is established, <code>mysql</code> must read or receive connection information.</p>

<p>There are two easy ways to determine the list of options in effect when the program starts:<a data-type="indexterm" data-primary="option files" data-secondary="persistent system variables" data-tertiary="options in effect at program start" id="idm46177452883800"/> by passing the <code>--print-defaults</code> argument to that program or by using the special <code>my_print_defaults</code> program. Let’s take a look at the former option as executed on Linux. You can ignore the <code>sed</code> part, but it makes the output slightly nicer for human eyes:</p>

<pre data-type="programlisting">$ <strong>mysql --print-defaults</strong>
mysql would have been started with the following arguments:
--user=root --password=*****
$ <strong>mysqld --print-defaults | sed 's/--/\n--/g'</strong>
/usr/sbin/mysqld would have been started with the following arguments:</pre>

<pre data-type="programlisting" class="less_space pagebreak-before">--datadir=/var/lib/mysql
--socket=/var/lib/mysql/mysql.sock
--log-error=/var/log/mysqld.log
--pid-file=/run/mysqld/mysqld.pid
--max_connections=100000
--core-file
--innodb_buffer_pool_in_core_file=OFF
--innodb_buffer_pool_size=256MiB</pre>

<p>The variables picked up here come from all the option files we discussed before. If a variable value was set multiple times, the last occurrence will take precedence. However, <code>--print-defaults</code> will actually output every option set. For example, the output could look like this—even though <code>innodb_buffer_pool_size</code> is set five times, the value in effect will be 384 M:</p>

<pre data-type="programlisting">$ <strong>mysqld --print-defaults | sed 's/--/\n--/g'</strong>
/usr/sbin/mysqld would have been started with the following arguments:

--datadir=/var/lib/mysql
--socket=/var/lib/mysql/mysql.sock
--log-error=/var/log/mysqld.log
--pid-file=/run/mysqld/mysqld.pid
--max_connections=100000
--core-file
--innodb_buffer_pool_in_core_file=OFF
--innodb_buffer_pool_size=268435456
--innodb_buffer_pool_size=256M
--innodb_buffer_pool_size=256MB
--innodb_buffer_pool_size=256MiB
--large-pages
--innodb_buffer_pool_size=384M</pre>

<p>You can also combine <code>--print-defaults</code> with other command-line arguments. For example, if you intend to run a program with command-line arguments, you can see whether they will override or repeat already set values for configuration options for a particular session:</p>

<pre data-type="programlisting">$ <strong>mysql --print-defaults --host=192.168.4.23 --user=bob | sed 's/--/\n--/g'</strong>
mysql would have been started with the following arguments:

--user=root
--password=*****
--host=192.168.4.23
--user=bob</pre>

<p>The other way to print variables is using the <code>my_print_defaults</code> program.<a data-type="indexterm" data-primary="my_print_defaults program" id="idm46177452871464"/> It takes one or more section headers as arguments and will print all options it finds in scanned files that fall into the requested groups. That can be better than using <code>--print-defaults</code> when you just need to review one option group. In MySQL 8.0, the <code>[mysqld]</code> program reads the following groups: <code>[mysqld]</code>, <code>[server]</code>, and <code>[mysqld-8.0]</code>. The combined output of options may be lengthy, but what if we only need to view options specifically set for 8.0? For this example, we’ve added the <code>[mysqld-8.0]</code> option group to the option file and put a couple of configuration parameter values there:</p>

<pre data-type="programlisting">$ <strong>my_print_defaults mysqld-8.0</strong>
--character_set_server=latin1
--collation_server=latin1_swedish_ci</pre>

<p>That can also help with other software, like PXC, or with the MariaDB flavor of MySQL, both of which include multiple configuration groups. In particular, you would likely want to review the <code>[wsrep]</code> section without any other options. <code>my_print_defaults</code> can, of course, be used to output a complete set of options too; it just needs to be passed all the section headers a program reads. For example, the <code>[mysql]</code> program reads the <code>[mysql]</code> and <code>[client]</code> option groups, so we could use:</p>

<pre data-type="programlisting">$ <strong>my_print_defaults mysql client</strong>
--user=root
--password=*****
--default-character-set=latin1</pre>

<p>The user and password definitions come from the client group in the login path config we set before, and the charset from the <code>[mysql]</code> option group in the regular <em>.my.cnf</em>. Note that we added that group and charset config manually; by default that option is not set.</p>

<p>You can see that while both ways to read options talk of <em>defaults</em>, they actually output the options that we have explicitly set, making them nondefault. This is an interesting tidbit, but it doesn’t change anything in the grand scheme of things.</p>

<p>Unfortunately, neither of these ways of reviewing options is perfect at determining the complete set of options in effect. The problem is they only read the configuration files listed in Tables <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_on_windows">9-1</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_one_fedora_linux">9-2</a>, but it’s possible for MySQL programs to read other config files or to be started with command-line arguments. Additionally, the variables persisted in <code><em>DATADIR</em></code> <em>/mysqld-auto.cnf</em> through <code>SET PERSIST</code> are not provided by defaults-printing routines.</p>

<p>We mentioned that MySQL programs do not read options from any other files than the ones that were listed in Tables <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_on_windows">9-1</a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#mysql_options_files_one_fedora_linux">9-2</a>. <a data-type="indexterm" data-primary="command line interface mysql" data-secondary="extra config file read" id="idm46177452851400"/><a data-type="indexterm" data-primary="mysql command line interface" data-secondary="extra config file read" id="idm46177452850360"/>However, those lists do include the “extra config file,” which can be in an arbitrary location. Unless you specify the same extra file when invoking <code>my_print_defaults</code> or another program with <code>--print-defaults</code>, options from that extra file won’t be read. The extra file is specified with the command-line argument, <code>--defaults-extra-file</code>, and can be specified for most if not all MySQL programs. The two defaults-printing routines only read predefined config files and will miss that file. You can, however, specify <code>--defaults-extra-file</code> both for <code>my_print_defaults</code> and for the program invoked with <code>--print-defaults</code>, and both will read the extra file then. The same applies to the <code>--defaults-file</code> option we mentioned earlier, which basically forces the MySQL program to only read the single file passed as a value for this option.</p>

<p>Both <code>--defaults-extra-file</code> and <code>--defaults-file</code> share a thing in common: they are command-line arguments. Command-line arguments passed to a MySQL program override any options read from configuration files, but at the same time you can miss them when you do <code>--print-defaults</code> or <code>my_print_defaults</code>, as they are coming from outside of any config files. To put it more concisely: a particular MySQL program, such as <code>mysqld</code>, can be started by someone with unknown and arbitrary command-line arguments. Thus, when we’re talking about options, in effect we must also consider the presence of such arguments.</p>

<p>On Linux and Unix-like systems, you can use the <code>ps</code> utility<a data-type="indexterm" data-primary="ps utility" id="idm46177452841736"/><a data-type="indexterm" data-primary="Linux" data-secondary="process viewer utility" id="idm46177452841000"/> (or an equivalent) to view information on currently running processes, including their full command lines. Let’s see an example on Linux where <code>mysqld</code> was started with <code>--no-defaults</code> and with all config options passed as arguments:</p>

<pre data-type="programlisting">$ <strong>ps auxf | grep mysqld | grep -v grep</strong>
root      397830  ... \_ sudo -u mysql bash -c mysqld ...
mysql     397832  ...   \_ mysqld --datadir=/var/lib/mysql ...</pre>

<p>Or, if we print just the command line for the <code>mysqld</code> process and make it cleaner with <code>sed</code>:</p>

<pre data-type="programlisting">$ <strong>ps -p 397832 -ocommand ww | sed 's/--/\n--/g'</strong>
COMMAND
mysqld
--datadir=/var/lib/mysql
--socket=/var/lib/mysql/mysql.sock
--log-error=/var/log/mysqld.log
--pid-file=/run/mysqld/mysqld.pid
...
--character_set_server=latin1
--collation_server=latin1_swedish_ci</pre>

<p>Note that for this example we started <code>mysqld</code> without using any of the provided scripts. You won’t often see this way of starting the MySQL server, but it’s possible.</p>

<p>You can pass any configuration option as an argument, so the output can be quite lengthy. However, when you’re not sure how exactly <code>mysqld</code> or another program was executed, that’s an important thing to check. <a data-type="indexterm" data-primary="Task Manager" data-secondary="command-line arguments" id="idm46177452833000"/><a data-type="indexterm" data-primary="Windows 10" data-secondary="command-line arguments" id="idm46177452832024"/><a data-type="indexterm" data-primary="Process Explorer" id="idm46177452831080"/>On Windows, you can view the command-line arguments of a running program either by opening the Task Manager and adding a Command Line column to the Processes tab (through the View menu) or by using the Process Explorer tool from the <code>sysinternals</code> package.</p>

<p class="pagebreak-before">If your MySQL program is started from within a script, you should inspect that script to find all the arguments used. While this is probably going to be a rare occasion for <code>mysqld</code>, it’s a common practice to run <code>mysql</code>, <code>mysqldump</code>, and <code>xtrabackup</code> from custom scripts.</p>

<p>Understanding the currently used options can be a daunting task, but it’s extremely important at times. Hopefully, these guidelines and hints will help you.<a data-type="indexterm" data-startref="ch09-vars" id="idm46177452826232"/><a data-type="indexterm" data-startref="ch09-vars2" id="idm46177452825528"/></p>
</div></section>







</div></section></div></body></html>