<html><head></head><body><section data-pdf-bookmark="Chapter 11. React Router" data-type="chapter" epub:type="chapter"><div class="chapter" id="react-router">&#13;
<h1><span class="label">Chapter 11. </span>React Router</h1>&#13;
&#13;
&#13;
<p>When<a data-primary="React Router" data-secondary="purpose of" data-type="indexterm" id="idm45901616945064"/> the web started, most websites consisted of a series of pages that users could navigate through by requesting and opening separate files. The location of the current file or resource was listed in the browser’s location bar. The browser’s forward and back buttons would work as expected. Bookmarking content deep within a website would allow users to save a reference to a specific file that could be reloaded at the user’s request. On a page-based, or server-rendered, website, the browser’s navigation and history features simply work as expected.</p>&#13;
&#13;
<p>In a single-page app, all of these features become problematic. Remember, in a single-page app, everything is happening on the same page. JavaScript is loading information and changing the UI. Features like browser history, bookmarks, and forward and back buttons will not work without a<a data-primary="routing" data-seealso="React Router" data-type="indexterm" id="idm45901616942664"/> routing solution. <em>Routing</em> is the process of defining endpoints for your client’s requests.<sup><a data-type="noteref" href="ch11.html#idm45901616941144" id="idm45901616941144-marker">1</a></sup> These endpoints work in conjunction with the browser’s location and history objects. They’re used to identify requested content so that JavaScript can load and render the appropriate user interface.</p>&#13;
&#13;
<p>Unlike Angular, Ember, or Backbone, React doesn’t come with a standard router. Recognizing the importance of a routing solution, engineers Michael Jackson and Ryan Florence created one named simply React Router. The React Router has been adopted by the community as a popular routing solution for React apps.<sup><a data-type="noteref" href="ch11.html#idm45901616937272" id="idm45901616937272-marker">2</a></sup> It’s used by companies including Uber, Zendesk, PayPal, and Vimeo.<sup><a data-type="noteref" href="ch11.html#idm45901616936008" id="idm45901616936008-marker">3</a></sup></p>&#13;
&#13;
<p>In this chapter, we’ll introduce React Router and leverage its features to handle routing on the client.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Incorporating the Router" data-type="sect1"><div class="sect1" id="incorporating-the-router">&#13;
<h1>Incorporating the Router</h1>&#13;
&#13;
<p>To<a data-primary="React Router" data-secondary="incorporating" data-type="indexterm" id="RRincorp11"/> demonstrate the capabilities of the React Router, we’ll build a classic starter website complete with About, Events, Products, and Contact Us sections. Although this website will feel as though it has multiple pages, there’s only one—it’s an SPA, a single-page application (see <a data-type="xref" href="#fig1101">Figure 11-1</a>).</p>&#13;
&#13;
<figure><div class="figure" id="fig1101">&#13;
<img alt="lrc2 1101" src="assets/lrc2_1101.png"/>&#13;
<h6><span class="label">Figure 11-1. </span>Simple website with link navigation</h6>&#13;
</div></figure>&#13;
&#13;
<p>The sitemap for this website consists of a home page, a page for each section, and an error page to handle 404 Not Found errors (see <a data-type="xref" href="#fig1102">Figure 11-2</a>).</p>&#13;
&#13;
<figure><div class="figure" id="fig1102">&#13;
<img alt="lrc2 1102" src="assets/lrc2_1102.png"/>&#13;
<h6><span class="label">Figure 11-2. </span>Sitemap with local links</h6>&#13;
</div></figure>&#13;
&#13;
<p>The router will allow us to set up routes for each section of the website. Each <em>route</em> is an endpoint that can be entered into the browser’s location bar. When a route is requested, we can render the appropriate content.</p>&#13;
&#13;
<p>To start, let’s install React Router and React Router DOM. React Router DOM is used for regular React applications that use the DOM. If you’re writing an app for React Native, you’ll use <code>react-router-native</code>. We’re going to install these packages at their experimental versions because React Router 6 is not officially out at the time of this printing. Once released, you can use the packages without that designation.</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">npm</code> <code class="n">install</code> <code class="n">react</code><code class="o">-</code><code class="n">router</code><code class="nd">@experimental</code> <code class="n">react</code><code class="o">-</code><code class="n">router</code><code class="o">-</code><code class="n">dom</code><code class="nd">@experimental</code></pre>&#13;
&#13;
<p>We’ll also need a few placeholder components for each section or page in the sitemap. We can export these components from a single file called <em>pages.js</em>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">Home</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">Company</code> <code class="nx">Website</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">About</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">About</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">Events</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">Events</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">Products</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">Products</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">Contact</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">Contact</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>With these pages stubbed out, we need to adjust the <em>index.js</em> file. Instead of rendering the <code>App</code> component, we’ll render the <code>Router</code> component. The <code>Router</code> component passes information about the current location to any children that are nested inside of it. The <code>Router</code> component should be used once and placed near the root of our component tree:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">render</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-dom"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="nx">App</code> <code class="nx">from</code> <code class="s2">"./App"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">BrowserRouter</code> <code class="nx">as</code> <code class="nx">Router</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="nx">render</code><code class="p">(</code>&#13;
  <code class="o">&lt;</code><code class="nx">Router</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">App</code> <code class="o">/&gt;</code>&#13;
  <code class="o">&lt;</code><code class="err">/Router&gt;,</code>&#13;
  <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>Notice that we’re importing <code>BrowserRouter as Router</code>. The next thing we need to do is set up our route configuration. We’re going to place this in the <em>App.js</em> file. The wrapper component for any routes we want to render is called <code>Routes</code>. Inside of <code>Routes</code>, we’ll use a <code>Route</code> component for each page we want to render. We also want to import all of the pages from the <em>./pages.js</em> file:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code> <code class="nx">Routes</code><code class="p">,</code> <code class="nx">Route</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
<code class="kr">import</code> <code class="p">{</code>&#13;
  <code class="nx">Home</code><code class="p">,</code>&#13;
  <code class="nx">About</code><code class="p">,</code>&#13;
  <code class="nx">Events</code><code class="p">,</code>&#13;
  <code class="nx">Products</code><code class="p">,</code>&#13;
  <code class="nx">Contact</code>&#13;
<code class="p">}</code> <code class="nx">from</code> <code class="s2">"./pages"</code><code class="p">;</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">App</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Routes</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Home</code> <code class="o">/&gt;</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/about"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">About</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/events"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Events</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/products"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Products</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/contact"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Contact</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/Routes&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>These routes tell the Router which component to render when the window’s location changes. Each <code>Route</code> component has <code>path</code> and <code>element</code> properties. When the browser’s location matches the <code>path</code>, the <code>element</code> will be displayed. When the location is <code>/</code>, the router will render the <code>Home</code> component. When the location is <code>/products</code>, the router will render the <code>Products</code> component.</p>&#13;
&#13;
<p>At this point, we can run the app and physically type the routes into the browser’s location bar to watch the content change. For example, type <em>http://localhost:3000/about</em> into the location bar and watch the <code>About</code> component render.</p>&#13;
&#13;
<p>It’s probably not realistic to expect our users to navigate the website by typing routes into the location bar. The <code>react-router-dom</code> provides a <code>Link</code> component that we can use to create browser links.</p>&#13;
&#13;
<p>Let’s modify the home page to contain a navigation menu with a link for each route:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">Link</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">Home</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">Company</code> <code class="nx">Website</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">nav</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"about"</code><code class="o">&gt;</code><code class="nx">About</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"events"</code><code class="o">&gt;</code><code class="nx">Events</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"products"</code><code class="o">&gt;</code><code class="nx">Products</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Link</code> <code class="nx">to</code><code class="o">=</code><code class="s2">"contact"</code><code class="o">&gt;</code><code class="nx">Contact</code> <code class="nx">Us</code><code class="o">&lt;</code><code class="err">/Link&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/nav&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now users can access every internal page from the home page by clicking on a link. The browser’s back button will take them back to the home page.<a data-primary="" data-startref="RRincorp11" data-type="indexterm" id="idm45901616352040"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Router Properties" data-type="sect1"><div class="sect1" id="router-properties">&#13;
<h1>Router Properties</h1>&#13;
&#13;
<p>The<a data-primary="React Router" data-secondary="router properties" data-type="indexterm" id="RRprop11"/> React Router passes properties to the components it renders. For instance, we can obtain the current location via a property. Let’s use the current location to help us create a 404 Not Found component. First, we’ll create the component:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">export</code> <code class="kd">function</code> <code class="nx">Whoops404</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Resource</code> <code class="nx">not</code> <code class="nx">found</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Then we’ll add this to our route configuration in <em>App.js</em>. If we visit a route that doesn’t exist, like <code>highway</code>, we want to display the <code>Whoops404</code> component. We’ll use the <code>*</code> as the path value and the component as the element:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">function</code> <code class="nx">App</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Routes</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Home</code> <code class="o">/&gt;</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/about"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">About</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/events"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Events</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/products"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Products</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/contact"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Contact</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"*"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Whoops404</code> <code class="o">/&gt;</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/Routes&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now if we visit <em>localhost:3000/highway</em>, we’ll see the 404 page component render. We also could display the value of the route that we’ve visited by using the location value. Since we’re living in a world with React Hooks, there’s a hook for that. In the <code>Whoops404</code> component, create a variable called <code>location</code> that returns the value of the current location (i.e., properties about which page you’re navigated to). Then use the value of <code>location.pathname</code> to display the route that’s being visited:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">export</code> <code class="kd">function</code> <code class="nx">Whoops404</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="kd">let</code> <code class="nx">location</code> <code class="o">=</code> <code class="nx">useLocation</code><code class="p">();</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">location</code><code class="p">);</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code>&#13;
        <code class="nx">Resource</code> <code class="nx">not</code> <code class="nx">found</code> <code class="nx">at</code> <code class="p">{</code><code class="nx">location</code><code class="p">.</code><code class="nx">pathname</code><code class="p">}</code>&#13;
      <code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>If you log the <code>location</code>, you can explore that object further.</p>&#13;
&#13;
<p>This section introduced the basics of implementing and working with the React Router. <code>Router</code> is used once and wraps all components that will use routing. All <code>Route</code> components need to be wrapped with a <code>Routes</code> component, which selects the component to render based on the window’s present location. <code>Link</code> components can be used to facilitate navigation. These basics can get you pretty far, but they just scratch the surface of the router’s capabilities.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Nesting Routes" data-type="sect2"><div class="sect2" id="nesting-routes">&#13;
<h2>Nesting Routes</h2>&#13;
&#13;
<p><code>Route</code> components<a data-primary="React Router" data-secondary="nesting routes" data-type="indexterm" id="idm45901616037656"/> are used with content that should be displayed only when specific URLs are matched. This feature allows us to organize our web apps into eloquent hierarchies that promote content reuse.</p>&#13;
&#13;
<p>Sometimes, as users navigate our apps, we want some of the UI to stay in place. In the past, solutions such as page templates and master pages have helped web developers reuse UI elements.</p>&#13;
&#13;
<p>Let’s consider the simple starter website. We might want to create subpages for the <code>About</code> page that will display additional content. When the user selects the About section, they should be defaulted to the Company page under that section. The outline looks like this:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Home Page</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><strong>About the Company</strong></p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><strong>Company (default)</strong></p>&#13;
</li>&#13;
<li>&#13;
<p><strong>History</strong></p>&#13;
</li>&#13;
<li>&#13;
<p><strong>Services</strong></p>&#13;
</li>&#13;
<li>&#13;
<p><strong>Location</strong></p>&#13;
</li>&#13;
</ul>&#13;
</li>&#13;
<li>&#13;
<p>Events</p>&#13;
</li>&#13;
<li>&#13;
<p>Products</p>&#13;
</li>&#13;
<li>&#13;
<p>Contact Us</p>&#13;
</li>&#13;
</ul>&#13;
</li>&#13;
<li>&#13;
<p>404 Error Page</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>The new routes that we need to create will reflect this hierarchy:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><em>http://localhost:3000/</em></p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><em>http://localhost:3000/about</em></p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><em>http://localhost:3000/about</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/about/history</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/about/services</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/about/location</em></p>&#13;
</li>&#13;
</ul>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/events</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/products</em></p>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/contact</em></p>&#13;
</li>&#13;
</ul>&#13;
</li>&#13;
<li>&#13;
<p><em>http://localhost:3000/hot-potato</em></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>We also need to remember to stub placeholder components for our new sections: <span class="keep-together"><code>Company</code></span>, <code>Services</code>, <code>History</code>, and <code>Location</code>. As an example, here’s some text for the <span class="keep-together"><code>Services</code></span> component that you can reuse for the other two:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">export</code> <code class="kd">function</code> <code class="nx">Services</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="o">&lt;</code><code class="nx">section</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">h2</code><code class="o">&gt;</code><code class="nx">Our</code> <code class="nx">Services</code><code class="o">&lt;</code><code class="err">/h2&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">p</code><code class="o">&gt;</code>&#13;
      <code class="nx">Lorem</code> <code class="nx">ipsum</code> <code class="nx">dolor</code> <code class="nx">sit</code> <code class="nx">amet</code><code class="p">,</code> <code class="nx">consectetur</code>&#13;
      <code class="nx">adipiscing</code> <code class="nx">elit</code><code class="p">.</code> <code class="nx">Integer</code> <code class="nx">nec</code> <code class="nx">odio</code><code class="p">.</code> <code class="nx">Praesent</code>&#13;
      <code class="nx">libero</code><code class="p">.</code> <code class="nx">Sed</code> <code class="nx">cursus</code> <code class="nx">ante</code> <code class="nx">dapibus</code> <code class="nx">diam</code><code class="p">.</code> <code class="nx">Sed</code>&#13;
      <code class="nx">nisi</code><code class="p">.</code> <code class="nx">Nulla</code> <code class="nx">quis</code> <code class="nx">sem</code> <code class="nx">at</code> <code class="nx">nibh</code> <code class="nx">elementum</code>&#13;
      <code class="nx">imperdiet</code><code class="p">.</code> <code class="nx">Duis</code> <code class="nx">sagittis</code> <code class="nx">ipsum</code><code class="p">.</code> <code class="nx">Praesent</code>&#13;
      <code class="nx">mauris</code><code class="p">.</code> <code class="nx">Fusce</code> <code class="nx">nec</code> <code class="nx">tellus</code> <code class="nx">sed</code> <code class="nx">augue</code> <code class="nx">semper</code>&#13;
      <code class="nx">porta</code><code class="p">.</code> <code class="nx">Mauris</code> <code class="nx">massa</code><code class="p">.</code> <code class="nx">Vestibulum</code> <code class="nx">lacinia</code> <code class="nx">arcu</code>&#13;
      <code class="nx">eget</code> <code class="nx">nulla</code><code class="p">.</code> <code class="nx">Class</code> <code class="nx">aptent</code> <code class="nx">taciti</code> <code class="nx">sociosqu</code> <code class="nx">ad</code>&#13;
      <code class="nx">litora</code> <code class="nx">torquent</code> <code class="nx">per</code> <code class="nx">conubia</code> <code class="nx">nostra</code><code class="p">,</code> <code class="nx">per</code>&#13;
      <code class="nx">inceptos</code> <code class="nx">himenaeos</code><code class="p">.</code> <code class="nx">Curabitur</code> <code class="nx">sodales</code> <code class="nx">ligula</code>&#13;
      <code class="k">in</code> <code class="nx">libero</code><code class="p">.</code>&#13;
    <code class="o">&lt;</code><code class="err">/p&gt;</code>&#13;
  <code class="o">&lt;</code><code class="err">/section&gt;;</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>With those components created, we can configure the router starting with the <em>App.js</em> file. If you want to create a page hierarchy with the routes, all you need to do is nest the <code>Route</code> components inside of each other:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code>&#13;
  <code class="nx">Home</code><code class="p">,</code>&#13;
  <code class="nx">About</code><code class="p">,</code>&#13;
  <code class="nx">Events</code><code class="p">,</code>&#13;
  <code class="nx">Products</code><code class="p">,</code>&#13;
  <code class="nx">Contact</code><code class="p">,</code>&#13;
  <code class="nx">Whoops404</code><code class="p">,</code>&#13;
  <code class="nx">Services</code><code class="p">,</code>&#13;
  <code class="nx">History</code><code class="p">,</code>&#13;
  <code class="nx">Location</code>&#13;
<code class="p">}</code> <code class="nx">from</code> <code class="s2">"./pages"</code><code class="p">;</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">App</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Routes</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Home</code> <code class="o">/&gt;</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"about"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">About</code> <code class="o">/&gt;</code><code class="p">}</code><code class="o">&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Route</code>&#13;
            <code class="nx">path</code><code class="o">=</code><code class="s2">"services"</code>&#13;
            <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Services</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
          <code class="o">/&gt;</code>&#13;
&#13;
          <code class="o">&lt;</code><code class="nx">Route</code>&#13;
            <code class="nx">path</code><code class="o">=</code><code class="s2">"history"</code>&#13;
            <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">History</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
          <code class="o">/&gt;</code>&#13;
          <code class="o">&lt;</code><code class="nx">Route</code>&#13;
            <code class="nx">path</code><code class="o">=</code><code class="s2">"location"</code>&#13;
            <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Location</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
          <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="err">/Route&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"events"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Events</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"products"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Products</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"contact"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Contact</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"*"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Whoops404</code> <code class="o">/&gt;</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/Routes&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Once you’ve wrapped the nested routes with the About <code>Route</code> component, you can visit these pages. If you open <em>http://localhost:3000/about/history</em>, you’ll just see the content from the <code>About</code> page, but the <code>History</code> component doesn’t display. In order to get that to display, we’ll use another feature of React Router DOM: the <code>Outlet</code> component. <code>Outlet</code> will let us render these nested components. We’ll just place it anywhere we want to render child content.</p>&#13;
&#13;
<p>In the <code>About</code> component in <em>pages.js</em>, we’ll add this under the <code>&lt;h1&gt;</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code>&#13;
  <code class="nx">Link</code><code class="p">,</code>&#13;
  <code class="nx">useLocation</code><code class="p">,</code>&#13;
  <code class="nx">Outlet</code>&#13;
<code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">About</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">[</code><code class="nx">About</code><code class="p">]</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Outlet</code> <code class="o">/&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Now this <code>About</code> component will be reused across the entire section and will display the nested components. The location will tell the app which subsection to render. For example, when the location is <em>http://localhost:3000/about/history</em>, the <code>History</code> component will be rendered inside of the <code>About</code> component.<a data-primary="" data-startref="RRprop11" data-type="indexterm" id="idm45901615461672"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using Redirects" data-type="sect1"><div class="sect1" id="idm45901616289112">&#13;
<h1>Using Redirects</h1>&#13;
&#13;
<p>Sometimes<a data-primary="React Router" data-secondary="using redirects" data-type="indexterm" id="RRredirect11"/><a data-primary="redirects" data-type="indexterm" id="redirect11"/> you want to redirect users from one route to another. For instance, we can make sure that if users try to access content via <em>http://localhost:3000/services</em>, they get redirected to the correct route: <em>http://localhost:3000/about/services</em>.</p>&#13;
&#13;
<p>Let’s modify our application to include redirects to ensure that our users can access the correct content:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code>&#13;
  <code class="nx">Routes</code><code class="p">,</code>&#13;
  <code class="nx">Route</code><code class="p">,</code>&#13;
  <code class="nx">Redirect</code>&#13;
<code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">App</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Routes</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code> <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code> <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">Home</code> <code class="o">/&gt;</code><code class="p">}</code> <code class="o">/&gt;</code>&#13;
        <code class="c1">// Other Routes</code>&#13;
        <code class="o">&lt;</code><code class="nx">Redirect</code>&#13;
          <code class="nx">from</code><code class="o">=</code><code class="s2">"services"</code>&#13;
          <code class="nx">to</code><code class="o">=</code><code class="s2">"about/services"</code>&#13;
        <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/Routes&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>The <code>Redirect</code> component allows us to redirect the user to a specific route.</p>&#13;
&#13;
<p>When routes are changed in a production application, users will still try to access old content via old routes. This typically happens because of bookmarks. The <code>Redirect</code> component provides us with a way to load the appropriate content for users, even if they’re accessing our site via an old bookmark.</p>&#13;
&#13;
<p>Throughout this section, we’ve created a route configuration using the <code>Route</code> component. If you love this structure, feel free to ignore this next section, but we wanted to make sure that you knew how to create a route configuration a different way. It’s also possible to use the hook <code>useRoutes</code> to configure your application’s routing.</p>&#13;
&#13;
<p>If we wanted to refactor our application to use <code>useRoutes</code>, we’d make the adjustments in the <code>App</code> component (or anywhere where the routes are set up). Let’s refactor it:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">useRoutes</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="kd">function</code> <code class="nx">App</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="kd">let</code> <code class="nx">element</code> <code class="o">=</code> <code class="nx">useRoutes</code><code class="p">([</code>&#13;
    <code class="p">{</code> <code class="nx">path</code><code class="o">:</code> <code class="s2">"/"</code><code class="p">,</code> <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Home</code> <code class="o">/&gt;</code> <code class="p">},</code>&#13;
    <code class="p">{</code>&#13;
      <code class="nx">path</code><code class="o">:</code> <code class="s2">"about"</code><code class="p">,</code>&#13;
      <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">About</code> <code class="o">/&gt;</code><code class="p">,</code>&#13;
      <code class="nx">children</code><code class="o">:</code> <code class="p">[</code>&#13;
        <code class="p">{</code>&#13;
          <code class="nx">path</code><code class="o">:</code> <code class="s2">"services"</code><code class="p">,</code>&#13;
          <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Services</code> <code class="o">/&gt;</code>&#13;
        <code class="p">},</code>&#13;
        <code class="p">{</code> <code class="nx">path</code><code class="o">:</code> <code class="s2">"history"</code><code class="p">,</code> <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">History</code> <code class="o">/&gt;</code> <code class="p">},</code>&#13;
        <code class="p">{</code>&#13;
          <code class="nx">path</code><code class="o">:</code> <code class="s2">"location"</code><code class="p">,</code>&#13;
          <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Location</code> <code class="o">/&gt;</code>&#13;
        <code class="p">}</code>&#13;
      <code class="p">]</code>&#13;
    <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="nx">path</code><code class="o">:</code> <code class="s2">"events"</code><code class="p">,</code> <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Events</code> <code class="o">/&gt;</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="nx">path</code><code class="o">:</code> <code class="s2">"products"</code><code class="p">,</code> <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Products</code> <code class="o">/&gt;</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="nx">path</code><code class="o">:</code> <code class="s2">"contact"</code><code class="p">,</code> <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Contact</code> <code class="o">/&gt;</code> <code class="p">},</code>&#13;
    <code class="p">{</code> <code class="nx">path</code><code class="o">:</code> <code class="s2">"*"</code><code class="p">,</code> <code class="nx">element</code><code class="o">:</code> <code class="o">&lt;</code><code class="nx">Whoops404</code> <code class="o">/&gt;</code> <code class="p">},</code>&#13;
    <code class="p">{</code>&#13;
      <code class="nx">path</code><code class="o">:</code> <code class="s2">"services"</code><code class="p">,</code>&#13;
      <code class="nx">redirectTo</code><code class="o">:</code> <code class="s2">"about/services"</code>&#13;
    <code class="p">}</code>&#13;
  <code class="p">]);</code>&#13;
  <code class="k">return</code> <code class="nx">element</code><code class="p">;</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>The official docs call the config <code>element</code>, but you can choose to call it whatever you like. It’s also totally optional to use this syntax. <code>Route</code> is a wrapper around <code>useRoutes</code>, so you’re actually using this either way. Choose whichever syntax and style works best for you!</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Routing Parameters" data-type="sect2"><div class="sect2" id="routing-parameters">&#13;
<h2>Routing Parameters</h2>&#13;
&#13;
<p>Another<a data-primary="React Router" data-secondary="routing parameters" data-type="indexterm" id="idm45901615187144"/> useful feature of the React Router is the ability to set up <em>routing parameters</em>. Routing parameters are variables that obtain their values from the URL. They’re extremely useful in data-driven web applications for filtering content or managing display preferences.</p>&#13;
&#13;
<p>Let’s revisit the color organizer and improve it by adding the ability to select and display one color at a time using React Router. When a user selects a color by clicking on it, the app should render that color and display its <code>title</code> and <code>hex</code> value.</p>&#13;
&#13;
<p>Using the router, we can obtain the color ID via the URL. For example, this is the URL we’ll use to display the color “lawn” because the ID for lawn is being passed within the URL:</p>&#13;
&#13;
<pre data-type="programlisting">http://localhost:3000/58d9caee-6ea6-4d7b-9984-65b145031979</pre>&#13;
&#13;
<p>To start, let’s set up the router in the <em>index.js</em> file. We’ll import the <code>Router</code> and wrap the <code>App</code> component:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">BrowserRouter</code> <code class="nx">as</code> <code class="nx">Router</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="nx">render</code><code class="p">(</code>&#13;
  <code class="o">&lt;</code><code class="nx">Router</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="nx">App</code> <code class="o">/&gt;</code>&#13;
  <code class="o">&lt;</code><code class="err">/Router&gt;,</code>&#13;
  <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"root"</code><code class="p">)</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>Wrapping the <code>App</code> passes all of the router’s properties to the component and any other components nested inside of it. From there, we can set up the route configuration. We’ll use the <code>Routes</code> and <code>Route</code> components instead of <code>useRoutes</code>, but remember that this is always an option if you prefer that syntax. Start by importing <code>Routes</code> and <code>Route</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">Routes</code><code class="p">,</code> <code class="nx">Route</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code></pre>&#13;
&#13;
<p>Then add to the <code>App</code>. This application will have two routes: the <code>ColorList</code> and the <code>ColorDetails</code>. We haven’t built <code>ColorDetails</code> yet, but let’s import it:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">ColorDetails</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"./ColorDetails"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="k">default</code> <code class="kd">function</code> <code class="nx">App</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">ColorProvider</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">AddColorForm</code> <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">Routes</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">"/"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">ColorList</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
        <code class="o">&lt;</code><code class="nx">Route</code>&#13;
          <code class="nx">path</code><code class="o">=</code><code class="s2">":id"</code>&#13;
          <code class="nx">element</code><code class="o">=</code><code class="p">{</code><code class="o">&lt;</code><code class="nx">ColorDetails</code> <code class="o">/&gt;</code><code class="p">}</code>&#13;
        <code class="o">/&gt;</code>&#13;
      <code class="o">&lt;</code><code class="err">/Routes&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/ColorProvider&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>The <code>ColorDetails</code> component will display dynamically based on the <code>id</code> of the color. Let’s create the <code>ColorDetails</code> component in a new file called <em>ColorDetails.js</em>. To start, it’ll be a placeholder:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="nx">React</code> <code class="nx">from</code> <code class="s2">"react"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">ColorDetails</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Details</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>How do we know if this is working? The easiest way to check is to open the React Developer tools and find the <code>id</code> of one of the colors that is being rendered. If you don’t have a color yet, then add one and take a look at its <code>id</code>. Once you have the <code>id</code>, you can append that to the <code>localhost:3000</code> URL. For example, <code>localhost:3000/00fdb4c5-c5bd-4087-a48f-4ff7a9d90af8</code>.</p>&#13;
&#13;
<p>Now, you should see the <code>ColorDetails</code> page appear. Now we know that the router and our routes are working, but we want this to be more dynamic. On the <code>ColorDetails</code> page, we want to display the correct color based on the <code>id</code> that’s found in the URL. To do that, we’ll use the <code>useParams</code> hook:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">useParams</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">ColorDetails</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="kd">let</code> <code class="nx">params</code> <code class="o">=</code> <code class="nx">useParams</code><code class="p">();</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">params</code><code class="p">);</code>&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Details</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>If we log <code>params</code>, we’ll see that this is an object that contains any parameters that are available on the router. We’ll destructure this object to grab the <code>id</code>, then we can use that <code>id</code> to find the correct color in the <code>colors</code> array. Let’s use our <code>useColors</code> hook to make this happen:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">useColors</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"./"</code><code class="p">;</code>&#13;
&#13;
<code class="kr">export</code> <code class="kd">function</code> <code class="nx">ColorDetails</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="kd">let</code> <code class="p">{</code> <code class="nx">id</code> <code class="p">}</code> <code class="o">=</code> <code class="nx">useParams</code><code class="p">();</code> <code class="c1">// destructure id</code>&#13;
&#13;
  <code class="kd">let</code> <code class="p">{</code> <code class="nx">colors</code> <code class="p">}</code> <code class="o">=</code> <code class="nx">useColors</code><code class="p">();</code>&#13;
&#13;
  <code class="kd">let</code> <code class="nx">foundColor</code> <code class="o">=</code> <code class="nx">colors</code><code class="p">.</code><code class="nx">find</code><code class="p">(</code>&#13;
    <code class="nx">color</code> <code class="o">=&gt;</code> <code class="nx">color</code><code class="p">.</code><code class="nx">id</code> <code class="o">===</code> <code class="nx">id</code>&#13;
  <code class="p">);</code>&#13;
  <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">foundColor</code><code class="p">);</code>&#13;
&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="nx">Details</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Logging <code>foundColor</code> shows us that we’ve found the correct color. Now all we need to do is display the data about that color in the component:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">export</code> <code class="kd">function</code> <code class="nx">ColorDetails</code><code class="p">()</code> <code class="p">{</code>&#13;
  <code class="kd">let</code> <code class="p">{</code> <code class="nx">id</code> <code class="p">}</code> <code class="o">=</code> <code class="nx">useParams</code><code class="p">();</code>&#13;
  <code class="kd">let</code> <code class="p">{</code> <code class="nx">colors</code> <code class="p">}</code> <code class="o">=</code> <code class="nx">useColors</code><code class="p">();</code>&#13;
&#13;
  <code class="kd">let</code> <code class="nx">foundColor</code> <code class="o">=</code> <code class="nx">colors</code><code class="p">.</code><code class="nx">find</code><code class="p">(</code>&#13;
    <code class="nx">color</code> <code class="o">=&gt;</code> <code class="nx">color</code><code class="p">.</code><code class="nx">id</code> <code class="o">===</code> <code class="nx">id</code>&#13;
  <code class="p">);</code>&#13;
&#13;
  <code class="k">return</code> <code class="p">(</code>&#13;
    <code class="o">&lt;</code><code class="nx">div</code><code class="o">&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">div</code>&#13;
        <code class="nx">style</code><code class="o">=</code><code class="p">{{</code>&#13;
          <code class="nx">backgroundColor</code><code class="o">:</code> <code class="nx">foundColor</code><code class="p">.</code><code class="nx">color</code><code class="p">,</code>&#13;
          <code class="nx">height</code><code class="o">:</code> <code class="mi">100</code><code class="p">,</code>&#13;
          <code class="nx">width</code><code class="o">:</code> <code class="mi">100</code>&#13;
        <code class="p">}}</code>&#13;
      <code class="o">&gt;&lt;</code><code class="err">/div&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">foundColor</code><code class="p">.</code><code class="nx">title</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
      <code class="o">&lt;</code><code class="nx">h1</code><code class="o">&gt;</code><code class="p">{</code><code class="nx">foundColor</code><code class="p">.</code><code class="nx">color</code><code class="p">}</code><code class="o">&lt;</code><code class="err">/h1&gt;</code>&#13;
    <code class="o">&lt;</code><code class="err">/div&gt;</code>&#13;
  <code class="p">);</code>&#13;
<code class="p">}</code></pre>&#13;
&#13;
<p>Another feature we want to add to the color organizer is the ability to navigate to the <code>ColorDetails</code> page by clicking on the color in the list. Let’s add this functionality to the <code>Color</code> component. We’re going to use another router hook called <code>useNavigate</code> to open the details page when we click on the component. We’ll import it first from <code>react-router-dom</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">useNavigate</code> <code class="p">}</code> <code class="nx">from</code> <code class="s2">"react-router-dom"</code><code class="p">;</code></pre>&#13;
&#13;
<p>Then we’ll call <code>useNavigate</code>, which will return a function we can use to navigate to another page:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">let</code> <code class="nx">navigate</code> <code class="o">=</code> <code class="nx">useNavigate</code><code class="p">();</code></pre>&#13;
&#13;
<p class="pagebreak-before">Now in the <code>section</code>, we’ll add an <code>onClick</code> handler to navigate to the route based on the color <code>id</code>:</p>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kd">let</code> <code class="nx">navigate</code> <code class="o">=</code> <code class="nx">useNavigate</code><code class="p">();</code>&#13;
&#13;
<code class="k">return</code> <code class="p">(</code>&#13;
  <code class="o">&lt;</code><code class="nx">section</code>&#13;
    <code class="nx">className</code><code class="o">=</code><code class="s2">"color"</code>&#13;
    <code class="nx">onClick</code><code class="o">=</code><code class="p">{()</code> <code class="o">=&gt;</code> <code class="nx">navigate</code><code class="p">(</code><code class="sb">`/</code><code class="si">${</code><code class="nx">id</code><code class="si">}</code><code class="sb">`</code><code class="p">)}</code>&#13;
  <code class="o">&gt;</code>&#13;
    <code class="c1">// Color component</code>&#13;
  <code class="o">&lt;</code><code class="err">/section&gt;</code>&#13;
<code class="p">);</code></pre>&#13;
&#13;
<p>Now, when we click on the <code>section</code>, we’ll be routed to the correct page.</p>&#13;
&#13;
<p>Routing parameters are an ideal tool to obtain data that affects the presentation of your user interface. However, they should only be used when you want users to capture these details in a URL. For example, in the case of the color organizer, users can send other users links to specific colors or all the colors sorted by a specific field. Users can also bookmark those links to return specific data.<a data-primary="" data-startref="RRredirect11" data-type="indexterm" id="idm45901614512072"/><a data-primary="" data-startref="redirect11" data-type="indexterm" id="idm45901614511192"/></p>&#13;
&#13;
<p>In this chapter, we reviewed the basic usage of the React Router. In the next chapter, we’ll learn how to use routing on the server.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45901616941144"><sup><a href="ch11.html#idm45901616941144-marker">1</a></sup> Express.js documentation, <a href="https://oreil.ly/jD1HC">“Basic routing”</a>.</p><p data-type="footnote" id="idm45901616937272"><sup><a href="ch11.html#idm45901616937272-marker">2</a></sup> The project has been starred over 20,000 times on <a href="https://oreil.ly/ThNG9">GitHub</a>.</p><p data-type="footnote" id="idm45901616936008"><sup><a href="ch11.html#idm45901616936008-marker">3</a></sup> See <a href="https://oreil.ly/staEF">“Sites Using React Router”</a>.</p></div></div></section></body></html>