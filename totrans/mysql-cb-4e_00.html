<html><head></head><body><div id="sbo-rt-content"><section data-type="preface" epub:type="preface" data-pdf-bookmark="Preface"><div class="preface" id="nch-preface"><h1>Preface</h1><p>The MySQL database management system is popular for many reasons. It’s
  fast, and it’s easy to set up, use, and administer. It runs under many
  varieties of Unix and Windows, and MySQL-based programs can be written in
  many languages.</p><p>MySQL’s popularity raises the need to address questions its users have
  about how to solve specific problems. That is the purpose of <em>MySQL
  Cookbook</em>: to serve as a handy resource to which you can turn for
  quick solutions or techniques for attacking particular types of questions
  that come up when you use MySQL. Naturally, because it’s a cookbook, it
  contains recipes: straightforward instructions you can follow rather than
  develop your own code from scratch. It’s written using a
  problem-and-solution format designed to be extremely practical and to make
  the contents easy to read and assimilate. It contains many short sections,
  each describing how to write a query, apply a technique, or develop a script
  to solve a problem of limited and specific scope. This book doesn’t develop
  full-fledged, complex applications. Instead, it assists you in developing
  such applications yourself by helping you get past problems that have you
  stumped.</p><p>For example, a common question is, <q>How can I deal with quotes
  and special characters in data values when I’m writing queries?</q>
  That’s not difficult, but figuring out how to do it is frustrating when
  you’re not sure where to start. This book demonstrates what to do; it shows
  you where to begin and how to proceed from there. This knowledge will serve
  you repeatedly because after you see what’s involved, you’ll be able to
  apply the technique to any kind of data, such as text, images, sound or
  video clips, news articles, compressed files, or PDF documents. Another
  common question is, <q>Can I access data from multiple tables at the
  same time?</q> The answer is <q>Yes,</q> and it’s easy to do
  because it’s just a matter of knowing the proper SQL syntax. But it’s not
  always clear how until you see examples, which this book gives you. Other
  techniques that you’ll learn from this book include how to:</p><ul><li><p>Use SQL to select, sort, and summarize rows</p></li><li><p>Find matches or mismatches between tables</p></li><li><p>Perform transactions</p></li><li><p>Determine intervals between dates or times, including age
      calculations</p></li><li><p>Identify or remove duplicate rows</p></li><li><p>Use <code>LOAD</code> <code>DATA</code> to read your datafiles properly or find
      which values in the file are invalid</p></li><li><p>Use <code>CHECK</code> constraints to prevent entry of bad data into your
      database</p></li><li><p>Generate sequence numbers to use as unique row identifiers</p></li><li><p>Use a view as a <q>virtual table</q></p></li><li><p>Write stored procedures and functions, set up triggers that
      activate to perform specific data-handling operations when you insert or
      update table rows, and use the Event Scheduler to run queries on a
      schedule</p></li><li><p>Setup replication</p></li><li><p>Manage user accounts</p></li><li><p>Control server logging</p></li></ul><p>One part of using MySQL is understanding how to communicate with the
  server—that is, how to use SQL, the language in which queries are
  formulated. Therefore, one major emphasis of this book is using SQL to
  formulate queries that answer particular kinds of questions. One helpful
  tool for learning and using SQL is the <span class="command"><em>mysql</em></span> client program that is included in MySQL
  distributions. You can use client interactively to send SQL statements to
  the server and see the results. This is extremely useful because it provides
  a direct interface to SQL; so useful, in fact, that the first chapter is
  devoted to <span class="command"><em>mysql</em></span>.</p><p>But the ability to issue SQL queries alone is not enough. Information
  extracted from a database often requires further processing or presentation
  in a particular way. What if you have queries with complex
  interrelationships, such as when you need to use the results of one query as
  the basis for others? What if you need to generate a specialized report with
  very specific formatting requirements? These problems bring us to the other
  major emphasis of the book—how to write programs that interact with the
  MySQL server through an application programming interface (API). When you
  know how to use MySQL from within the context of a programming language, you
  gain other ways to exploit MySQL’s capabilities:</p><ul><li><p>You can save query results and reuse them later.</p></li><li><p>You have full access to the expressive power of a general-purpose
      programming language. This enables you to make decisions based on
      success or failure of a query, or on the content of the rows that are
      returned, and then tailor the actions taken accordingly.</p></li><li><p>You can format and display query results however you like. If
      you’re writing a command-line script, you can generate plain text. If
      it’s a web-based script, you can generate an HTML table. If it’s an
      application that extracts information for transfer to some other system,
      you might generate a datafile expressed in XML or JSON.</p></li></ul><p>Combining SQL with a general-purpose programming language gives you an
  extremely flexible framework for issuing queries and processing their
  results. Programming languages increase your capability to perform complex
  database operations. But that doesn’t mean this book is complex. It keeps
  things simple, showing how to construct small building blocks using
  techniques that are easy to understand and easily mastered.</p><p>We’ll leave it to you to combine these techniques in your own programs,
  which you can do to produce arbitrarily complex applications. After all, the
  genetic code is based on only four nucleic acids, but these basic elements
  have been combined to produce the astonishing array of biological life we
  see all around us. Similarly, there are only 12 notes in the scale, but in
  the hands of skilled composers, they are interwoven to produce a rich and
  endless variety of music. In the same way, when you take a set of simple
  recipes, add your imagination, and apply them to the database programming
  problems you want to solve, you can produce applications that perhaps are
  not works of art, but are certainly useful and will help you and others be
  more productive.</p><section data-type="sect1" data-pdf-bookmark="Who This Book Is For"><div class="sect1" id="idm45820417356944"><h1>Who This Book Is For</h1><p>This book will be useful for anybody who uses MySQL, ranging from
    individuals who want to use a database for personal projects such as a
    blog or wiki, to professional database and web developers. The book is
    also intended for people who do not know how to use MySQL, but would like to.</p><p>If you’re new to MySQL, you’ll find lots of ways to use it here that
    may be new to you. If you’re more experienced, you’re probably already
    familiar with many of the problems addressed here, but may not have had to
    solve them before and should find the book a great time saver. Take
    advantage of the recipes given in the book and use them in your own
    programs rather than writing the code from scratch.</p><p>The material ranges from introductory to advanced, so if a recipe
    describes techniques that seem obvious to you, skip it. Conversely, if you
    don’t understand a recipe, set it aside and come back to it later, perhaps
    after reading some of the other recipes.</p></div></section><section data-type="sect1" data-pdf-bookmark="What’s in This Book"><div class="sect1" id="idm45820417382304"><h1>What’s in This Book</h1><p>It’s very likely when you use this book that you’re trying to
    develop an application but are not sure how to implement certain pieces of
    it. In this case, you already know what type of problem you want to solve;
    check the table of contents or the index for a recipe that shows how to do
    what you want. Ideally, the recipe will be just what you had in mind.
    Alternatively, you may be able to adapt a recipe for a similar problem to
    suit the issue at hand. We explain the principles involved in developing
    each technique so that you can modify it to fit the particular
    requirements of your own applications.</p><p>Another way to approach this book is to just read through it with no
    specific problem in mind. This can give you a broader understanding of the
    things MySQL can do, so we recommend that you page through the book
    occasionally. It’s a more effective tool if you know the kinds of problems
    it addresses.</p><p>As you get into later chapters, you’ll find recipes that assume a
    knowledge of topics covered in earlier chapters. This also applies within
    a chapter, where later sections often use techniques discussed earlier in
    the chapter. If you jump into a chapter and find a recipe that uses a
    technique with which you’re not familiar, check the table of contents or
    the index to find where the technique is explained earlier. For example,
    if a recipe sorts a query result using an <code>ORDER</code> <code>BY</code>
    clause that you don’t understand, turn to <a data-type="xref" href="ch09.xhtml#nch-sort">Chapter 9</a>,
    which discusses various sorting methods and explains how they work.</p><p>Here’s a summary of each chapter to give you an overview of the
    book’s contents.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch01.xhtml#nch-mysql">Chapter 1, “Using the mysql Client Program”</a>, describes
    how to use the standard MySQL command-line client. <span class="command"><em>mysql</em></span> is often the first or primary interface to
    MySQL that people use, and it’s important to know how to exploit its
    capabilities. This program enables you to issue queries and see their
    results interactively, so it’s good for quick experimentation. You can
    also use it in batch mode to execute canned SQL scripts or send its output
    into other programs. In addition, the chapter discusses other ways to use
    <span class="command"><em>mysql</em></span>, such as how to make long lines
    more readable or generate output in various formats.</p><p>
      <a data-type="xref" data-xrefstyle="chap-num-title" href="ch02.xhtml#nch-mysqlshell">Chapter 2, “Using MySQL Shell”</a>, introduces new MySQL command-line client, developed by the MySQL Team for versions 5.7 and newer. <span class="command"><em>mysqlsh</em></span> is compatible with <span class="command"><em>mysql</em></span> when is running is SQL mode but also supports NoSQL in JavaScript and Python programming interfaces. With MySQL Shell you can run SQL, NoSQL queries, and automate many administrative tasks easily.
    </p><p>
      <a data-type="xref" data-xrefstyle="chap-num-title" href="ch03.xhtml#nch-replication">Chapter 3, “MySQL Replication”</a>, describes how to setup and use replication. Some of content in this chapter is advanced. However, we decided to place it in the beginning of the book, because the replication is necessary for stable MySQL installations that can survive such disasters as corruptions or hardware failures. Practically, any production MySQL installation should use one of the replication setups. While setting up a replication is an administrative task, we believe that all MySQL users need to have knowledge of how the replication works and, as a result, write effective queries that would be performant on both source and replica servers.
    </p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch04.xhtml#nch-api">Chapter 4, “Writing MySQL-Based Programs”</a>, demonstrates
    the essential elements of MySQL programming: how to connect to the server,
    issue queries, retrieve the results, and handle errors. It also discusses
    how to handle special characters and <code>NULL</code> values in queries, how to write library
    files to encapsulate code for commonly used operations, and various ways
    to gather the parameters needed for making connections to the
    server.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch05.xhtml#nch-select">Chapter 5, “Selecting Data from Tables”</a>, covers
    several aspects of the <code>SELECT</code>
    statement, which is the primary vehicle for retrieving data from the MySQL
    server: specifying which columns and rows you want to retrieve, dealing
    with <code>NULL</code> values, and selecting one
    section of a query result. Later chapters cover some of these topics in
    more detail, but this chapter provides an overview of the concepts on
    which they depend if you need some introductory background on row
    selection or don’t yet know a lot about SQL.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch06.xhtml#nch-tblmgmt">Chapter 6, “Table Management”</a>, covers
    table cloning, copying results into other tables, using temporary tables,
    and checking or changing a table’s storage engine.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch07.xhtml#nch-strings">Chapter 7, “Working with Strings”</a>, describes
    how to deal with string data. It covers character sets and collations,
    string comparisons, dealing with case-sensitivity issues, pattern
    matching, breaking apart and combining strings, and performing <code>FULLTEXT</code> searches.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch08.xhtml#nch-dates">Chapter 8, “Working with Dates and Times”</a>, shows how
    to work with temporal data. It describes MySQL’s date format and how to
    display date values in other formats. It also covers how to use MySQL’s
    special <code>TIMESTAMP</code> data type, how to set
    the time zone, how to convert between different temporal units, how to
    perform date arithmetic to compute intervals or generate one date from
    another, and how to perform leap-year calculations.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch09.xhtml#nch-sort">Chapter 9, “Sorting Query Results”</a>, describes
    how to put the rows of a query result in the order you want. This includes
    specifying the sort direction, dealing with <code>NULL</code> values, accounting for string case
    sensitivity, and sorting by dates or partial column values. It also
    provides examples that show how to sort special kinds of values, such as
    domain names, IP numbers, and <code>ENUM</code>
    values.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch10.xhtml#nch-sum">Chapter 10, “Generating Summaries”</a>, shows
    techniques for assessing the general characteristics of a set of data,
    such as how many values it contains or its minimum, maximum, and average
    values.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch11.xhtml#nch-routines">Chapter 11, “Using Stored Routines, Triggers, and Scheduled Events”</a>,
    describes how to write stored functions and procedures that are stored on
    the server side, triggers that activate when tables are modified, and
    events that execute on a scheduled basis.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch12.xhtml#nch-meta">Chapter 12, “Working with Metadata”</a>, discusses
    how to get information <em>about</em> the data that a query
    returns, such as the number of rows or columns in the result, or the name
    and data type of each column. It also shows how to ask MySQL what
    databases and tables are available or determine the structure of a
    table.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch13.xhtml#nch-xfer">Chapter 13, “Importing and Exporting Data”</a>, describes
    how to transfer information between MySQL and other programs. This
    includes how to use <code>LOAD</code> <code>DATA</code>, convert files from one format to another,
    and determine table structure appropriate for a dataset.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch14.xhtml#nch-format">Chapter 14, “Validating and Reformatting Data”</a>, describes
    how to extract or rearrange columns in data files, check and validate data,
    and rewrite values such as dates that often come in a variety of
    formats.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch15.xhtml#nch-sequences">Chapter 15, “Generating and Using Sequences”</a>,
    discusses <code>AUTO_INCREMENT</code> columns,
    MySQL’s mechanism for producing sequence numbers. It shows how to generate
    new sequence values or determine the most recent value, how to resequence
    a column, and how to use sequences to generate counters. It also shows how
    to use <code>AUTO_INCREMENT</code> values to
    maintain a master-detail relationship between tables, including pitfalls
    to avoid.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch16.xhtml#nch-multi">Chapter 16, “Using Joins and Subqueries”</a>, shows how
    to perform operations that select rows from multiple tables. It
    demonstrates how to compare tables to find matches or mismatches, produce
    master-detail lists and summaries, and enumerate many-to-many
    relationships.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch17.xhtml#nch-stats">Chapter 17, “Statistical Techniques”</a>, illustrates
    how to produce descriptive statistics, frequency distributions,
    regressions, and correlations. It also covers how to randomize a set of
    rows or pick rows at random from the set.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch18.xhtml#nch-dups">Chapter 18, “Handling Duplicates”</a>, discusses
    how to identify, count, and remove duplicate rows—and how to prevent them
    from occurring in the first place.</p><p>
      <a data-type="xref" data-xrefstyle="chap-num-title" href="ch19.xhtml#nch-json">Chapter 19, “Working with JSON”</a>, illustrates how to use JSON in MySQL. It covers such topics as validation, searching, and manipulation of JSON data. The chapter also discusses how to use MySQL as a Document Store.
    </p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch20.xhtml#nch-xact">Chapter 20, “Performing Transactions”</a>, shows how to
    handle multiple SQL statements that must execute together as a unit. It
    discusses how to control MySQL’s auto-commit mode and how to commit or
    roll back transactions.</p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch22.xhtml#nch-admin">Chapter 22, “Server Administration”</a>, is written
    for database administrators. It covers server configuration, the plug-in
    interface, and log management.</p><p>
      <a data-type="xref" data-xrefstyle="chap-num-title" href="ch23.xhtml#nch-monitoring">Chapter 23, “Monitoring the MySQL Server”</a>, illustrates how to monitor and troubleshoot MySQL issues, such as startup or connection failures. It shows how to use MySQL log files, built-in instruments, and standard operating system utilities to get information about performance of MySQL queries and internal structures.
    </p><p><a data-type="xref" data-xrefstyle="chap-num-title" href="ch24.xhtml#nch-security">Chapter 24, “Security”</a>, is
    another administrative chapter. It discusses user account management,
    including creating accounts, setting passwords, and assigning privileges.
    It also describes how to implement password policy, find and fix insecure
    accounts, and expire or unexpire passwords.</p></div></section><section data-type="sect1" data-pdf-bookmark="MySQL APIs Used in This Book"><div class="sect1" id="idm45820416227408"><h1>MySQL APIs Used in This Book</h1><p>MySQL programming interfaces exist for many languages, including C,
    C++, Eiffel, Go, Java, Perl, PHP, Python, Ruby, and Tcl. Given this fact,
    writing a MySQL cookbook presents authors with a challenge. The book
    should provide recipes for doing many interesting and useful things with
    MySQL, but which API or APIs should the book use? Showing an
    implementation of every recipe in every language results either in
    covering very few recipes or in a very, very large book! It also results
    in redundancies when implementations in different languages bear a strong
    resemblance to each other. On the other hand, it’s worthwhile taking
    advantage of multiple languages, because one often is more suitable than
    another for solving a particular problem.</p><p>To resolve this dilemma, we’ve chosen a small number of APIs to write
    the recipes in this book. This makes its scope manageable while permitting
    latitude to choose from multiple APIs:</p><ul><li><p>The Perl DBI module</p></li><li><p>Ruby, using the the Mysql2 gem</p></li><li><p>PHP, using the PDO extension</p></li><li><p>Python, using the MySQL Connector/Python driver for the DB
        API</p></li><li><p>
          Go, using the Go-MySQL-Driver for the <code>sql</code> interface
        </p></li><li><p>Java, using the MySQL Connector/J driver for the JDBC
        interface</p></li></ul><p>Why these languages? Perl is a
    widely used language that was very popular for writing
    MySQL programs in time when the first edition of this book was published and still used in many applications in time of the fourth edition. 
    Ruby has an easy-to-use database-access module. PHP is widely deployed, especially on the Web.
    Go is getting very popular lately and replaces other languages, especially Perl, in many MySQL applications.
    Python and Java each
    has a significant number of followers.</p><p>We believe these languages taken together reflect pretty well the
    majority of the existing user base of MySQL programmers. If you prefer
    some language not shown here, be sure to pay careful attention to <a data-type="xref" href="ch04.xhtml#nch-api">Chapter 4</a>, to familiarize yourself with the book’s primary
    APIs. Knowing how to perform database operations with the programming
    interfaces used here will help you translate recipes for other
    languages.</p></div></section><section data-type="sect1" data-pdf-bookmark="Version and Platform Notes"><div class="sect1" id="idm45820416221760"><h1>Version and Platform Notes</h1><p>Development of the code in this book took place under MySQL 5.7, and 8.0. Because new features are added to MySQL on a regular basis,
    some examples will not work under older versions. For example, MySQL 5.7
    introduces group replication, and MySQL 8.0 introduces <code>CHECK</code> constraints and common table expressions.</p><p>We do not assume that you are using Unix, although that is our own
    preferred development platform. (In this book, <q>Unix</q> also
    refers to Unix-like systems such as Linux and macOS X.) Most of the
    material here is applicable both to Unix and Windows.</p></div></section><section data-type="sect1" data-pdf-bookmark="Conventions Used in This Book"><div class="sect1" id="idm45820417282928"><h1>Conventions Used in This Book</h1><p>This book uses the following font conventions:</p><dl><dt><code>Constant</code> <code>width</code></dt><dd><p>Used for program listings, as well as within paragraphs to
          refer to program elements such as variable or function names,
          databases, data types, environment variables, statements, and
          keywords.</p></dd><dt><strong><code>Constant</code></strong> <strong><code>width</code></strong> <strong><code>bold</code></strong></dt><dd><p>Used to indicate text that you type when running
          commands.</p></dd><dt><em><code>Constant</code></em>
        <em><code>width</code></em>
        <em><code>italic</code></em></dt><dd><p>Used to indicate variable input; you should substitute a value
          of your own choosing.</p></dd><dt><em>Italic</em></dt><dd><p>Used for URLs, hostnames, names of directories and files, Unix
          commands and options, programs, and occasionally for
          emphasis.</p></dd></dl><div data-type="tip"><h6>Tip</h6><p>This element signifies a tip or suggestion.</p></div><div data-type="caution"><h6>Caution</h6><p>This element indicates a warning or caution.</p></div><div data-type="note" epub:type="note"><h6>Note</h6><p>This element signifies a general note.</p></div><p>Commands often are shown with a prompt to illustrate the context in
    which they are used. Commands issued from the command line are shown with
    a <code>$</code> prompt:</p><pre data-type="programlisting">$ <strong><code>chmod 600 my.cnf</code></strong></pre><p>That prompt is one that Unix users are used to seeing, but it
    doesn’t necessarily signify that a command works only under Unix. Unless
    indicated otherwise, commands shown with a <code>$</code> prompt generally should work under Windows,
    too.</p><p>If you should run a command under Unix as the <code>root</code> user, the prompt is <code>#</code> instead:</p><pre data-type="programlisting"># <strong><code>perl -MCPAN -e shell</code></strong></pre><p>Commands that are specific to Windows use the <code>C:\&gt;</code> prompt:</p><pre data-type="programlisting">C:\&gt; <strong><code>"C:\Program Files\MySQL\MySQL Server 5.6\bin\mysql"</code></strong></pre><p>SQL statements that are issued from within the <span class="command"><em>mysql</em></span> client program are shown with a <code>mysql&gt;</code> prompt and terminated with a
    semicolon:</p><pre data-type="programlisting">mysql&gt; <strong><code>SELECT * FROM my_table;</code></strong></pre><p>For examples that show a query result as you would see it when using
    <span class="command"><em>mysql</em></span>, I sometimes truncate the output,
    using an ellipsis (<code>...</code>) to indicate
    that the result consists of more rows than are shown. The following query
    produces many rows of output, from which those in the middle have been
    omitted:</p><pre data-type="programlisting">mysql&gt; <strong><code>SELECT name, abbrev FROM states ORDER BY name;</code></strong>
+----------------+--------+
| name           | abbrev |
+----------------+--------+
| Alabama        | AL     |
| Alaska         | AK     |
| Arizona        | AZ     |
…
| West Virginia  | WV     |
| Wisconsin      | WI     |
| Wyoming        | WY     |
+----------------+--------+</pre><p>Examples that show only the syntax for SQL statements do not include
    the <code>mysql&gt;</code> prompt, but they do
    include semicolons as necessary to make it clearer where statements end.
    For example, this is a single statement:</p><pre data-type="programlisting" data-code-language="sql"><code class="k">CREATE</code> <code class="k">TABLE</code> <code class="n">t1</code> <code class="p">(</code><code class="n">i</code> <code class="nb">INT</code><code class="p">)</code>
<code class="k">SELECT</code> <code class="o">*</code> <code class="k">FROM</code> <code class="n">t2</code><code class="p">;</code></pre><p>But this example represents two statements:</p><pre data-type="programlisting" data-code-language="sql"><code class="k">CREATE</code> <code class="k">TABLE</code> <code class="n">t1</code> <code class="p">(</code><code class="n">i</code> <code class="nb">INT</code><code class="p">);</code>
<code class="k">SELECT</code> <code class="o">*</code> <code class="k">FROM</code> <code class="n">t2</code><code class="p">;</code></pre><p>The semicolon is a notational convenience used within <span class="command"><em>mysql</em></span> as a statement terminator. But it is not
    part of SQL itself, so when you issue SQL statements from within programs
    that you write (for example, using Perl or Java), don’t include
    terminating semicolons.</p><p>
      If a statement or a command output is too long and does not fit the book page, we use symbol <code>↩</code> to show that the line was indented to fit:
    </p><pre data-type="programlisting" data-code-language="sql">mysql&gt; <strong><code>SELECT 'Mysql: The Definitive Guide to Using, Programming,</code></strong>↩
    -&gt; <strong><code>and Administering Mysql 4 (Developer\'s Library)' AS book;</code></strong>
+-----------------------------------------------------+
| book                                                |
+-----------------------------------------------------+
| Mysql: The Definitive Guide to Using, Programming,↩
  and Administering Mysql 4 (Developer's Library)     |
+-----------------------------------------------------+
1 row in set (0,00 sec)</pre></div></section><section data-type="sect1" data-pdf-bookmark="The MySQL Cookbook Companion GitHub Repository"><div class="sect1" id="idm45820416483248"><h1>The MySQL Cookbook Companion GitHub Repository</h1><p><em>MySQL Cookbook</em> has a <a href="https://github.com/svetasmirnova/mysqlcookbook">companion GitHub repository</a>
    where you can obtain source code and sample data for examples developed
    throughout this book, and auxiliary documentation.</p><section data-type="sect2" data-pdf-bookmark="Recipe Source Code and Data"><div class="sect2" id="idm45820415038176"><h2>Recipe Source Code and Data</h2><p>The examples in this book are based on source code and sample data
      from a distribution named <code>recipes</code> available at the
      companion GitHub repository.</p><p>The <code>recipes</code> distribution is the
      primary source of examples, and references to it occur throughout the
      book. The distribution is also available as a compressed TAR file (<em class="filename">recipes.tar.gz</em>) or as a ZIP file (<em class="filename">recipes.zip</em>). Either distribution format when
      unpacked creates a directory named <em class="filename">mysqlcookbook-<em><code>VERSION</code></em>/recipes</em>.</p><p>Use the <code>recipes</code> distribution to
      save yourself a lot of typing. For example, when you see a <code>CREATE</code> <code>TABLE</code> statement in the book that describes
      what a database table looks like, you’ll usually find an SQL batch file
      in the <em class="filename">tables</em> directory that you
      can use to create the table instead of entering the definition manually.
      Change location into the <em class="filename">tables</em>
      directory and execute the following command, where
      <em><code>filename</code></em> is the name of the file containing
      the <code>CREATE</code> <code>TABLE</code> statement:</p><pre data-type="programlisting">$ <strong><code>mysql cookbook &lt;</code></strong> <em><code>filename</code></em></pre><p>If you need to specify MySQL username or password options, add
      them to the command line.</p><p>
        To import all the tables from the <code>recipes</code> distribution, use command:
        </p><pre data-type="programlisting">$ <strong><code>mysql cookbook &lt;</code></strong> cookbook.sql</pre><p>
      </p><p>The <code>recipes</code> distribution
      contains programs as shown in the book, but in many cases also includes
      implementations in additional languages. For example, a script shown in
      the book using Python may be available in the <code>recipes</code> distribution in Perl, Ruby, PHP, Go, or
      Java as well. This may save you translation effort should you wish to
      convert a program shown in the book to a different language.</p></div></section><section data-type="sect2" data-pdf-bookmark="Amazon Review Data (2018)"><div class="sect2" id="idm45820415038048"><h2>Amazon Review Data (2018)</h2><p> Amazon related review data used in <a data-type="xref" data-xrefstyle="chap-num-title" href="ch07.xhtml#nch-strings">Chapter 7, “Working with Strings”</a> can be found at <a href="http://deepyeti.ucsd.edu/jianmo/amazon/index.html"><em class="hyperlink">http://deepyeti.ucsd.edu/jianmo/amazon/index.html</em></a>
      and can be downloaded using this <a href="https://forms.gle/A8hBfPxKkKGFCP238">form.</a>
      Justifying recommendations using distantly-labeled reviews and fined-grained aspects
      Jianmo Ni, Jiacheng Li, Julian McAuley
      Empirical Methods in Natural Language Processing (EMNLP), 2019.
      </p></div></section><section data-type="sect2" data-pdf-bookmark="MySQL Cookbook Companion Documents"><div class="sect2" id="idm45820415058512"><h2>MySQL Cookbook Companion Documents</h2><p>Some appendixes included in previous <em>MySQL
      Cookbook</em> editions are now available in standalone form at the
      companion GitHub repository. They provide background information for topics
      covered in the book.</p><p><q>Executing Programs from the Command Line</q>
          provides instructions for executing commands at the command prompt
          and setting environment variables such as <code>PATH</code>.</p></div></section></div></section><section data-type="sect1" data-pdf-bookmark="Obtaining MySQL and Related Software"><div class="sect1" id="idm45820415075696"><h1>Obtaining MySQL and Related Software</h1><p>To run the examples in this book, you need access to MySQL, as well
    as the appropriate MySQL-specific interfaces for the programming languages
    that you want to use. The following notes describe what software is
    required and where to get it.</p><p>If you access a MySQL server run by somebody else, you need only the
    MySQL client software on your own machine. To run your own server, you
    need a full MySQL distribution.</p><p>To write your own MySQL-based programs, you communicate with the
    server through a language-specific API. The Perl and Ruby interfaces rely
    on the MySQL C API client library to handle the low-level client-server
    protocol. This is also true for the PHP interface, unless PHP is
    configured to use <code>mysqlnd</code>, the native
    protocol driver. For Perl and Ruby, you must install the C client library
    and header files first. PHP includes the required MySQL client support
    files, but must be compiled with MySQL support enabled or you won’t be
    able to use it. The Python, Go, and Java drivers for MySQL implement the
    client-server protocol directly, so they do not require the MySQL C client
    library.</p><p>You may not need to install the client software yourself—it might
    already be present on your system. This is a common situation if you have
    an account with an Internet service provider (ISP) that provides services
    such as a web server already enabled for access to MySQL.</p><section data-type="sect2" data-pdf-bookmark="MySQL"><div class="sect2" id="idm45820415073248"><h2>MySQL</h2><p>MySQL distributions and documentation, including the
      <em>MySQL Reference Manual</em> and <em>MySQL Shell</em>, are available from <a href="http://dev.mysql.com/downloads"><em class="hyperlink">http://dev.mysql.com/downloads</em></a>
      and <a href="http://dev.mysql.com/doc"><em class="hyperlink">http://dev.mysql.com/doc</em></a>.</p><p>If you need to install the MySQL C client library and header
      files, they’re included when you install MySQL from a source
      distribution, or when you install MySQL using a binary (precompiled)
      distribution other than an RPM or a DEB binary distribution. Under Linux, you
      have the option of installing MySQL using RPM or DEB files, but the client
      library and header files are not installed unless you install the
      development RPM or DEB. (There are separate RPM or DEB files for the server, the
      standard client programs, and the development libraries and header
      files.)</p></div></section><section data-type="sect2" data-pdf-bookmark="Perl Support"><div class="sect2" id="idm45820415068368"><h2>Perl Support</h2><p>General Perl information is available on the <a href="http://www.perl.org">Perl Programming Language
      website</a>.</p><p>You can obtain Perl software from the <a href="http://cpan.perl.org">Comprehensive Perl Archive Network
      (CPAN)</a>.</p><p>To write MySQL-based Perl programs, you need the DBI module and
      the MySQL-specific DBD module, DBD::mysql.</p><p>To install these modules under Unix, let Perl itself help you. For
      example, to install DBI and DBD::mysql, run the following commands
      (you’ll probably need to do this as <code>root</code>):</p><pre data-type="programlisting"># <strong><code>perl -MCPAN -e shell</code></strong>
cpan&gt; <strong><code>install DBI</code></strong>
cpan&gt; <strong><code>install DBD::mysql</code></strong></pre><p>If the last command complains about failed tests, use <code>force</code> <code>install</code> <code>DBD::mysql</code> instead. Under ActiveState Perl for
      Windows, use the <span class="command"><em>ppm</em></span> utility:</p><pre data-type="programlisting">C:\&gt; <strong><code>ppm</code></strong>
ppm&gt; <strong><code>install DBI</code></strong>
ppm&gt; <strong><code>install DBD-mysql</code></strong></pre><p>You can also use the CPAN shell or <span class="command"><em>ppm</em></span> to install other Perl modules mentioned in
      this book.</p><p>Once the DBI and DBD::mysql modules are installed, documentation
      is available from the command line:</p><pre data-type="programlisting">$ <strong><code>perldoc DBI</code></strong>
$ <strong><code>perldoc DBI::FAQ</code></strong>
$ <strong><code>perldoc DBD::mysql</code></strong></pre><p>Documentation is also available from the <a href="http://dbi.perl.org">Perl website</a>.</p></div></section><section data-type="sect2" data-pdf-bookmark="Ruby Support"><div class="sect2" id="idm45820404082736"><h2>Ruby Support</h2><p>The primary <a href="http://www.ruby-lang.org">Ruby website</a>
      provides access to Ruby distributions and documentation.</p><p>The Ruby MySQL2 gem is available from <a href="http://www.rubygems.org">RubyGems</a>.</p></div></section><section data-type="sect2" data-pdf-bookmark="PHP Support"><div class="sect2" id="idm45820404095792"><h2>PHP Support</h2><p>The primary <a href="http://www.php.net">PHP website</a>
      provides access to PHP distributions and documentation, including PDO
      documentation.</p><p>PHP source distributions include PDO support, so you need not
      obtain it separately. However, you must enable PDO support for MySQL
      when you configure the distribution. If you use a binary distribution,
      be sure that it includes PDO MySQL support.</p></div></section><section data-type="sect2" data-pdf-bookmark="Python Support"><div class="sect2" id="idm45820404093728"><h2>Python Support</h2><p>The primary <a href="http://www.python.org">Python website</a>
      provides access to Python distributions and documentation. General
      documentation for the DB API database access interface is on the <a href="http://bit.ly/py-wiki">Python Wiki</a>.</p><p>For MySQL Connector/Python, the driver module that provides MySQL
      connectivity for the DB API, distributions and documentation are
      available from <a href="http://bit.ly/py-connect"><em class="hyperlink">http://bit.ly/py-connect</em></a> and
      <a href="http://bit.ly/py-dev-guide"><em class="hyperlink">http://bit.ly/py-dev-guide</em></a>.</p></div></section><section data-type="sect2" data-pdf-bookmark="Go Support"><div class="sect2" id="idm45820415049072"><h2>Go Support</h2><p>
        The primary <a href="https://go.dev/">Go website</a> provides access to Go distributions and documentation, including sql package and documentation.
      </p><p>
        The Go-MySQL-Driver and its documentation, is available from <a href="https://github.com/go-sql-driver/mysql">GitHub go-sql-driver/mysql repository</a>.
      </p></div></section><section data-type="sect2" data-pdf-bookmark="Java Support"><div class="sect2" id="idm45820415046320"><h2>Java Support</h2><p>You need a Java compiler to build and run Java programs. The <span class="command"><em>javac</em></span> compiler is a part of the Java Development Kit (JDK). If no JDK
      is installed on your system, versions are available for macOS, Linux,
      and Windows at <a href="http://www.oracle.com/technetwork/java">Oracle’s Java site</a>.
      The same site provides access to documentation (including the
      specifications) for JDBC, servlets, JavaServer Pages (JSP), and the JSP
      Standard Tag Library (JSTL).</p><p>For MySQL Connector/J, the driver that provides MySQL connectivity
      for the JDBC interface, distributions and documentation are available
      from <a href="http://bit.ly/jconn-dl"><em class="hyperlink">http://bit.ly/jconn-dl</em></a> and <a href="http://bit.ly/j-dev-guide"><em class="hyperlink">http://bit.ly/j-dev-guide</em></a>.</p></div></section></div></section><section data-type="sect1" data-pdf-bookmark="Using Code Examples"><div class="sect1" id="idm45820415041296"><h1>Using Code Examples</h1><p>If you have a technical question or a problem using the code examples, please email <a class="email" href="mailto:bookquestions@oreilly.com"><em>bookquestions@oreilly.com</em></a>.</p><p>This book is here to help you get your job done. In general, if
    example code is offered with this book, you may use it in your programs
    and documentation. You do not need to contact us for permission unless
    you’re reproducing a significant portion of the code. For example, writing
    a program that uses several chunks of code from this book does not require
    permission. Selling or distributing examples from O’Reilly
    books does require permission. Answering a question by citing this book
    and quoting example code does not require permission. Incorporating a
    significant amount of example code from this book into your product’s
    documentation does require permission.</p><p>We appreciate, but do not require, attribution. An attribution
    usually includes the title, author, publisher, and ISBN. For example:
    “<em>MySQL Cookbook, Fourth Edition</em> by Sveta Smirnova, 
    Alkin Tezuysal (O’Reilly). Copyright 2022 Sveta Smirnova, 
    Alkin Tezuysal, 978-1-492-09309-1.”</p><p>If you feel your use of code examples falls outside fair use or the
    permission given above, feel free to contact us at
    <a class="email" href="mailto:permissions@oreilly.com"><em>permissions@oreilly.com</em></a>.</p></div></section><section data-type="sect1" data-pdf-bookmark="O’Reilly Online Learning"><div class="sect1" id="idm45820416590640"><h1>O’Reilly Online Learning</h1><div class="ormenabled" data-type="note" epub:type="note"><h6>Note</h6><p>For more than 40 years, <a href="http://oreilly.com" class="orm:hideurl">O’Reilly Media</a> has provided technology and business training, knowledge, and insight to help companies succeed.</p></div><p> Our unique network of experts and innovators share their knowledge and expertise through books, articles, and our online learning platform. O’Reilly’s online learning platform gives you on-demand access to live training courses, in-depth learning paths, interactive coding environments, and a vast collection of text and video from O’Reilly and 200+ other publishers. For more information, visit <a href="http://oreilly.com" class="orm:hideurl"><em>http://oreilly.com</em></a>.</p></div></section><section data-type="sect1" data-pdf-bookmark="How to Contact Us"><div class="sect1" id="idm45820416586560"><h1>How to Contact Us</h1><p>Please address comments and questions concerning this book to the
    publisher:</p><ul class="simplelist"><li>O’Reilly Media, Inc.</li><li>1005 Gravenstein Highway North</li><li>Sebastopol, CA 95472</li><li>800-998-9938 (in the United States or Canada)</li><li>707-829-0515 (international or local)</li><li>707-829-0104 (fax)</li></ul><p>We have a web page for this book, where we list errata, examples,
    and any additional information. You can access this page at <a href="/"><em class="hyperlink">https://www.oreilly.com/library/view/mysql-cookbook-4th/9781492093152/</em></a>.</p><p>Email
    <a class="email" href="mailto:bookquestions@oreilly.com"><em>bookquestions@oreilly.com</em></a> to comment or ask technical questions about this book.</p><p>For more information about our books, courses, conferences, and
    news, see our website at <a href="https://www.oreilly.com"><em class="hyperlink">https://www.oreilly.com</em></a>.</p><p>Find us on LinkedIn: <a href="https://linkedin.com/company/oreilly-media"><em class="hyperlink">https://linkedin.com/company/oreilly-media</em></a></p><p>Follow us on Twitter: <a href="https://twitter.com/oreillymedia"><em class="hyperlink">https://twitter.com/oreillymedia</em></a></p><p>Watch us on YouTube: <a href="https://www.youtube.com/oreillymedia"><em class="hyperlink">https://www.youtube.com/oreillymedia</em></a></p></div></section><section data-type="sect1" data-pdf-bookmark="Acknowledgments"><div class="sect1" id="idm45820416575344"><h1>Acknowledgments</h1><p>To each reader, thank you for reading our book. We hope that it serves
    you well and that you find it useful.</p><section data-type="sect2" data-pdf-bookmark="From Paul DuBois, for the Third Edition"><div class="sect2" id="idm45820416574336"><h2>From Paul DuBois, for the Third Edition</h2><p>Thanks to my technical reviewers, Johannes Schlüter, Geert
    Vanderkelen, and Ulf Wendel. They made several corrections and suggestions
    that improved the text in many ways, and I appreciate their help.</p><p>Andy Oram prodded me to begin the third edition and served as its
    editor, Nicole Shelby guided the book through production, and Kim Cofer
    and Lucie Haskins provided proofreading and indexing.</p><p>Thanks to my wife Karen, whose encouragement and support throughout
    the writing process means more than I can say.</p></div></section><section data-type="sect2" data-pdf-bookmark="From Sveta Smirnova and Alkin Tezuysal"><div class="sect2" id="idm45820416572704"><h2>From Sveta Smirnova and Alkin Tezuysal</h2><p>
        Many thanks to our technical reviewers for their invaluable contributions for this book.
      </p><p>
        Gillian Gunson not only provided comprehensive technical feedback. She also showed how our text could be read by people with different backgrounds. Her language suggestions helped us to make recipes easier to read. Her attentiveness to details helped us to identify inaccuracy and even potential risk areas that may show up when your database load grows. Gillian also reviewed all code examples and suggested how to make Ruby and Java code more aligned to current standards.
      </p><p>
        Ege Gunes reviewed all Go language examples, so they are aligned with Go standard style.
      </p><p>
        Karthik Appigatla, Timur Solodovnikov, Daniel Guzman Burgos, Vladmir Fedorkov reviewed selected chapters of the book. Their suggested corrections helped us to improve the book a lot.
      </p><p>
        Andy Kwan invited us to write fourth edition of this book. Amelia Blevins and Jeff Bleiel were our editors and helped to make the book easier to read. Rita Fernando reviewed few chapters and provided feedback that allowed us to make the book easier to read and be more aligned with O’Reilly standards.
      </p></div></section><section data-type="sect2" data-pdf-bookmark="From Sveta Smirnova"><div class="sect2" id="idm45820416570464"><h2>From Sveta Smirnova</h2><p>
        I want to thank my colleagues in Percona Support who understood that I need to work second shift on the book and allowed me to take time off when needed.
      </p><p>
        Many thanks to my husband Serguei Lassounov who always support me in my all professional endeavors.
      </p></div></section><section data-type="sect2" data-pdf-bookmark="From Alkin Tezuysal"><div class="sect2" id="idm45820416568944"><h2>From Alkin Tezuysal</h2><p>
       I want to thank my wife Aslihan and both daughters Ilayda and Lara, for their patience and support when I needed to focus and use their family time for this book.
       </p><p>
       Many thanks to my colleagues and team at PlanetScale, especially Deepthi Sigireddi, for her extra care and support. Special thanks go to the MySQL community, friends, and family members as well. 
       </p><p>
       I also want to take a moment to thank Sveta Smirnova for her endless support for coaching me throughout my first authoring book journey. 
      </p></div></section></div></section></div></section></div></body></html>