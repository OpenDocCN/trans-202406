["```\nCREATE TABLE `elem` (\n  `id` int unsigned NOT NULL,\n  `a`  char(2) NOT NULL,\n  `b`  char(2) NOT NULL,\n  `c`  char(2) NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `idx_a` (`a`)\n) ENGINE=InnoDB;\n\n+----+-----+----+----+\n| id | a   | b  | c  |\n+----+-----+----+----+\n|  2 | Au  | Be | Co |\n|  5 | Ar  | Br | C  |\n+----+-----+----+----+\n```", "```\nBEGIN;\nUPDATE elem SET c='' WHERE id BETWEEN 2 AND 5;\n\nSELECT index_name, lock_type, lock_mode, lock_status, lock_data\nFROM   performance_schema.data_locks\nWHERE  object_name = 'elem';\n```", "```\n+------------+-----------+---------------+-------------+-----------------------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data             |\n+------------+-----------+---------------+-------------+-----------------------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL                  |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2                     |\n| PRIMARY    | RECORD    | X             | GRANTED     | supremum pseudo-record|\n| PRIMARY    | RECORD    | X             | GRANTED     | 5                     |\n+------------+-----------+---------------+-------------+-----------------------+\n```", "```\nmysql> INSERT INTO elem VALUES (3, 'Au', 'B', 'C');\nERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction\n\n+------------+-----------+------------------------+-------------+-----------+\n| index_name | lock_type | lock_mode              | lock_status | lock_data |\n+------------+-----------+------------------------+-------------+-----------+\n| PRIMARY    | RECORD    | X,GAP,INSERT_INTENTION | WAITING     | 5         |\n....\n\nmysql> INSERT INTO elem VALUES (6, 'Au', 'B', 'C');\nERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction\n\n+------------+-----------+--------------------+-------------+--------------- ----+\n| index_name | lock_type | lock_mode          | lock_status | lock_data          |\n+------------+-----------+--------------------+-------------+--------------------+\n| PRIMARY    | RECORD    | X,INSERT_INTENTION | WAITING     | supremum pseudo... |\n...\n```", "```\nSET TRANSACTION ISOLATION LEVEL READ COMMITTED;\nBEGIN;\nUPDATE elem SET c='' WHERE id BETWEEN 2 AND 5;\n\nSELECT index_name, lock_type, lock_mode, lock_status, lock_data\nFROM   performance_schema.data_locks\nWHERE  object_name = 'elem';\n+------------+-----------+---------------+-------------+-----------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data |\n+------------+-----------+---------------+-------------+-----------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL      |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2         |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 5         |\n+------------+-----------+---------------+-------------+-----------+\n```", "```\nBEGIN;\nSELECT * FROM elem WHERE id = 3 FOR SHARE;\n\nSELECT index_name, lock_type, lock_mode, lock_status, lock_data\nFROM   performance_schema.data_locks\nWHERE  object_name = 'elem';\n+------------+-----------+-----------+-------------+-----------+\n| index_name | lock_type | lock_mode | lock_status | lock_data |\n+------------+-----------+-----------+-------------+-----------+\n| NULL       | TABLE     | IS        | GRANTED     | NULL      |\n| PRIMARY    | RECORD    | S,GAP     | GRANTED     | 5         |\n+------------+-----------+-----------+-------------+-----------+\n```", "```\nBEGIN;\nUPDATE elem SET c='' WHERE id BETWEEN 2 AND 5;\n\n+------------+-----------+---------------+-------------+------------------------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data              |\n+------------+-----------+---------------+-------------+------------------------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL                   |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2                      |\n| PRIMARY    | RECORD    | X             | GRANTED     | supremum pseudo-record |\n| PRIMARY    | RECORD    | X             | GRANTED     | 5                      |\n+------------+-----------+---------------+-------------+------------------------+\n```", "```\nBEGIN;\nUPDATE elem SET c='' WHERE id IN (2, 5);\n\n+------------+-----------+---------------+-------------+-----------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data |\n+------------+-----------+---------------+-------------+-----------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL      |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2         |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 5         |\n+------------+-----------+---------------+-------------+-----------+\n```", "```\nBEGIN;\nUPDATE elem SET c='' WHERE id IN (2, 3, 5);\n\n+------------+-----------+---------------+-------------+-----------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data |\n+------------+-----------+---------------+-------------+-----------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL      |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2         |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 5         |\n| PRIMARY    | RECORD    | X,GAP         | GRANTED     | 5         |\n+------------+-----------+---------------+-------------+-----------+\n```", "```\nBEGIN;\nUPDATE elem SET c='' WHERE a BETWEEN 'Ar' AND 'Au';\n\nSELECT   index_name, lock_type, lock_mode, lock_status, lock_data\nFROM     performance_schema.data_locks\nWHERE    object_name = 'elem'\nORDER BY index_name;\n+------------+-----------+---------------+-------------+------------------------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data              |\n+------------+-----------+---------------+-------------+------------------------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL                   |\n| a          | RECORD    | X             | GRANTED     | supremum pseudo-record |\n| a          | RECORD    | X             | GRANTED     | 'Au', 2                |\n| a          | RECORD    | X             | GRANTED     | 'Ar', 5                |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2                      |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 5                      |\n+------------+-----------+---------------+-------------+------------------------+\n```", "```\nBEGIN;\nUPDATE elem SET c='' WHERE a IN ('Ar', 'Au');\n\nSELECT   index_name, lock_type, lock_mode, lock_status, lock_data\nFROM     performance_schema.data_locks\nWHERE    object_name = 'elem'\nORDER BY index_name;\n+------------+-----------+---------------+-------------+------------------------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data              |\n+------------+-----------+---------------+-------------+------------------------+\n| a          | RECORD    | X,GAP         | GRANTED     | 'Au', 2                |\n...\n```", "```\nBEGIN;\nUPDATE elem SET a = 'Go' WHERE a = 'Au';\n\n+------------+-----------+---------------+-------------+------------------------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data              |\n+------------+-----------+---------------+-------------+------------------------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL                   |\n| a          | RECORD    | X             | GRANTED     | supremum pseudo-record |\n| a          | RECORD    | X             | GRANTED     | 'Au', 2                |\n| a          | RECORD    | X,GAP         | GRANTED     | 'Go', 2                |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2                      |\n+------------+-----------+---------------+-------------+------------------------+\n```", "```\nSET TRANSACTION ISOLATION LEVEL READ COMMITTED;\nBEGIN;\nUPDATE elem SET a = 'Go' WHERE a = 'Au';\n\n+------------+-----------+---------------+-------------+-----------+\n| index_name | lock_type | lock_mode     | lock_status | lock_data |\n+------------+-----------+---------------+-------------+-----------+\n| NULL       | TABLE     | IX            | GRANTED     | NULL      |\n| a          | RECORD    | X,REC_NOT_GAP | GRANTED     | 'Au', 2   |\n| PRIMARY    | RECORD    | X,REC_NOT_GAP | GRANTED     | 2         |\n+------------+-----------+---------------+-------------+-----------+\n```", "```\n-- First transaction\nBEGIN;\nUPDATE elem SET c='' WHERE id BETWEEN 2 AND 5;\n\n-- Second transaction\nBEGIN;\nINSERT INTO elem VALUES (3, 'As', 'B', 'C');\n\n+------------+-----------+------------------------+-------------+-----------+\n| index_name | lock_type | lock_mode              | lock_status | lock_data |\n+------------+-----------+------------------------+-------------+-----------+\n| PRIMARY    | RECORD    | X,GAP,INSERT_INTENTION | WAITING     | 5         |\n...\n```", "```\n-- First transaction\nCOMMIT;\n\n-- Second transaction\n-- INSERT executes\n\n+------------+-----------+------------------------+-------------+-----------+\n| index_name | lock_type | lock_mode              | lock_status | lock_data |\n+------------+-----------+------------------------+-------------+-----------+\n| NULL       | TABLE     | IX                     | GRANTED     | NULL      |\n| PRIMARY    | RECORD    | X,GAP,INSERT_INTENTION | GRANTED     | 5         |\n+------------+-----------+------------------------+-------------+-----------+\n```", "```\nBEGIN;\nINSERT INTO elem VALUES (9, 'As', 'B', 'C'); -- Does not block\n\n+------------+-----------+-----------+-------------+-----------+\n| index_name | lock_type | lock_mode | lock_status | lock_data |\n+------------+-----------+-----------+-------------+-----------+\n| NULL       | TABLE     | IX        | GRANTED     | NULL      |\n+------------+-----------+-----------+-------------+-----------+\n```", "```\nBEGIN;\n\nSELECT a FROM elem WHERE id = 2;\n\n-- Returns row version 1: 'Fe'\n```", "```\n-- autocommit enabled\nUPDATE elem SET a = 'Ti' WHERE id = 2;\nUPDATE elem SET a = 'Ag' WHERE id = 2;\nUPDATE elem SET a = 'Cf' WHERE id = 2;\nUPDATE elem SET a = 'Au' WHERE id = 2;\n```", "```\nCOMMIT;\n```", "```\nRollback segments\n└── Undo slots\n    └── Undo log segments\n        └── Undo logs\n            └── Undo log records\n```", "```\n# Query_time: 0.008527\n# InnoDB_pages_distinct: 366\n```", "```\nBEGIN;\nSELECT <row>\n--\n-- Time-consuming application logic based on the row\n--\nUPDATE <row>\nCOMMIT;\n```", "```\nSELECT\n  ROUND(trx.timer_wait/1000000000000,3) AS trx_runtime,\n  trx.thread_id AS thread_id,\n  trx.event_id AS trx_event_id,\n  trx.isolation_level,\n  trx.autocommit,\n  stm.current_schema AS db,\n  stm.sql_text AS query,\n  stm.rows_examined AS rows_examined,\n  stm.rows_affected AS rows_affected,\n  stm.rows_sent AS rows_sent,\n  IF(stm.end_event_id IS NULL, 'running', 'done') AS exec_state,\n  ROUND(stm.timer_wait/1000000000000,3) AS exec_time\nFROM\n       performance_schema.events_transactions_current trx\n  JOIN performance_schema.events_statements_current   stm USING (thread_id)\nWHERE\n      trx.state = 'ACTIVE'\n  AND trx.timer_wait > 1000000000000 * 1\\G\n```", "```\n*************************** 1\\. row ***************************\n    trx_runtime: 20729.094\n      thread_id: 60\n   trx_event_id: 1137\nisolation_level: REPEATABLE READ\n     autocommit: NO\n             db: test\n          query: SELECT * FROM elem\n  rows_examined: 10\n  rows_affected: 0\n      rows_sent: 10\n     exec_state: done\n      exec_time: 0.038\n```", "```\nSELECT\n  trx.thread_id AS thread_id,\n  MAX(trx.event_id) AS trx_event_id,\n  MAX(ROUND(trx.timer_wait/1000000000000,3)) AS trx_runtime,\n  SUM(ROUND(stm.timer_wait/1000000000000,3)) AS exec_time,\n  SUM(stm.rows_examined) AS rows_examined,\n  SUM(stm.rows_affected) AS rows_affected,\n  SUM(stm.rows_sent) AS rows_sent\nFROM\n       performance_schema.events_transactions_current trx\n  JOIN performance_schema.events_statements_history   stm\n    ON stm.thread_id = trx.thread_id AND stm.nesting_event_id = trx.event_id\nWHERE\n      stm.event_name LIKE 'statement/sql/%'\n  AND trx.state = 'ACTIVE'\n  AND trx.timer_wait > 1000000000000 * 1\nGROUP BY trx.thread_id\\G\n```", "```\nSELECT\n  stm.rows_examined AS rows_examined,\n  stm.rows_affected AS rows_affected,\n  stm.rows_sent AS rows_sent,\n  ROUND(stm.timer_wait/1000000000000,3) AS exec_time,\n  stm.sql_text AS query\nFROM\n  performance_schema.events_statements_history stm\nWHERE\n       stm.thread_id = 0\n  AND  stm.nesting_event_id = 0\nORDER BY stm.event_id;\n```", "```\n+---------------+---------------+-----------+-----------+---------------------+\n| rows_examined | rows_affected | rows_sent | exec_time | query               |\n+---------------+---------------+-----------+-----------+---------------------+\n|            10 |             0 |        10 |     0.000 | SELECT * FROM elem  |\n|             2 |             1 |         0 |     0.003 | UPDATE elem SET ... |\n|             0 |             0 |         0 |     0.002 | COMMIT              |\n+---------------+---------------+-----------+-----------+---------------------+\n```", "```\nSELECT\n  ROUND(MAX(trx.timer_wait)/1000000000,3) AS trx_time,\n  ROUND(SUM(stm.timer_end-stm.timer_start)/1000000000,3) AS query_time,\n  ROUND((MAX(trx.timer_wait)-SUM(stm.timer_end-stm.timer_start))/1000000000, 3)\n    AS idle_time,\n  COUNT(stm.event_id)-1 AS query_count,\n  SUM(stm.rows_examined) AS rows_examined,\n  SUM(stm.rows_affected) AS rows_affected,\n  SUM(stm.rows_sent) AS rows_sent\nFROM\n      performance_schema.events_transactions_history trx\n JOIN performance_schema.events_statements_history   stm\n   ON stm.nesting_event_id = trx.event_id\nWHERE\n      trx.state = 'COMMITTED'\n  AND trx.nesting_event_id IS NOT NULL\nGROUP BY\n  trx.thread_id, trx.event_id;\n```", "```\n+----------+----------+-----------+---------+-----------+-----------+-----------+\n| trx_time | qry_time | idle_time | qry_cnt | rows_exam | rows_affe | rows_sent |\n+----------+----------+-----------+---------+-----------+-----------+-----------+\n| 5647.892 |    1.922 |  5645.970 |       2 |        10 |         0 |        10 |\n|    0.585 |    0.403 |     0.182 |       2 |        10 |         0 |        10 |\n+----------+----------+-----------+---------+-----------+-----------+-----------+\n```", "```\nSELECT name, count\nFROM   information_schema.innodb_metrics\nWHERE  name = 'trx_rseg_history_len';\n```", "```\nBEGIN;\n\n--\n-- Execute one or several queries\n--\n\nSELECT index_name, lock_type, lock_mode, lock_status, lock_data\nFROM   performance_schema.data_locks\nWHERE  object_name = 'elem';\n```"]