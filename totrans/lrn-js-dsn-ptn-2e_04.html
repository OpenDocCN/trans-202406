<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 4. Anti-Patterns"><div class="chapter" id="anti-patterns">
<h1><span class="label">Chapter 4. </span>Anti-Patterns</h1>


<p>As engineers, we may run into situations when we are on a deadline to deliver a solution or where code gets included as a series of patches without a code review. The code in such cases may not always be well thought out and may propagate what we call <em>anti-patterns</em>. This chapter describes what anti-patterns are and why it is essential to understand and identify them. We also look at some typical anti-patterns in 
<span class="keep-together">JavaScript.</span></p>






<section data-type="sect1" data-pdf-bookmark="What Are Anti-Patterns?"><div class="sect1" id="idm45017718267136">
<h1>What Are Anti-Patterns?</h1>

<p>If a pattern represents a best practice,<a data-type="indexterm" data-primary="anti-patterns" id="idm45017718265056"/><a data-type="indexterm" data-primary="JavaScript" data-secondary="anti-patterns" id="idm45017718264352"/><a data-type="indexterm" data-primary="patterns" data-secondary="anti-patterns" id="idm45017718263408"/><a data-type="indexterm" data-primary="design patterns" data-secondary="anti-patterns" id="idm45017718262464"/><a data-type="indexterm" data-primary="Design Patterns: Elements of Reusable Object-Oriented Software (Gamma, Helm, Johnson, and Vlissides)" data-secondary="anti-pattern term inspired by" id="idm45017718261520"/><a data-type="indexterm" data-primary="Gamma, Erich" id="idm45017718260528"/><a data-type="indexterm" data-primary="Helm, Richard" id="idm45017718259856"/><a data-type="indexterm" data-primary="Johnson, Ralph" id="idm45017718259184"/><a data-type="indexterm" data-primary="Vlissides, John" id="idm45017718258512"/><a data-type="indexterm" data-primary="Koenig, Andrew" id="idm45017718257840"/><a data-type="indexterm" data-primary="resources online" data-secondary="anti-patterns article" id="idm45017718257168"/> an anti-pattern represents the lesson learned when a proposed pattern goes wrong. Inspired by the GoF’s book <em>Design Patterns</em>, Andrew Koenig first coined the term anti-pattern in 1995 in his article in the <a href="https://oreil.ly/Megyr"><em>Journal of Object-Oriented Programming</em>, Volume 8</a>. He described anti-patterns as:</p>
<blockquote>
<p>An antipattern is just like a pattern, except that instead of a solution, it gives something that looks superficially like a solution but isn’t one.</p></blockquote>

<p>He presented two notions of anti-patterns. Anti-patterns:</p>

<ul>
<li>
<p>Describe a <em>bad</em> solution to a particular problem that resulted in an unfavorable situation occurring</p>
</li>
<li>
<p>Describe <em>how</em> to get out of the said situation and go to a good solution</p>
</li>
</ul>

<p>On this topic, Alexander writes about the difficulties in achieving a good balance between good design structure and good context:</p>
<blockquote class="less_space pagebreak-before">
<p>These notes are about the process of design; the process of inventing physical things which display a new physical order, organization, form, in response to function. … Every design problem begins with an effort to achieve fitness between two entities: the form in question and its context. The form is the solution to the problem; the context defines the problem.</p></blockquote>

<p>Understanding anti-patterns is as essential as being aware of design patterns. Let us qualify the reason behind this. When creating an application, a project’s lifecycle begins with construction. At this stage, you are likely to choose from the available <em>good</em> design patterns as you see fit. However, after the initial release, it needs to be maintained.</p>

<p>Maintenance of an application already in production can be particularly challenging. Developers who haven’t worked on the application before may accidentally introduce a <em>bad</em> design into the project. If these <em>bad</em> practices have already been identified as anti-patterns, developers will recognize them in advance and avoid the known common mistakes. This is similar to how knowledge of design patterns allows us to recognize areas where we could apply <em>known</em> and <em>helpful</em> standard techniques.</p>

<p>The quality of the solution as it evolves will either be <em>good</em> or <em>bad</em>, depending on the skill level and time the team has invested in it. Here, <em>good</em> and <em>bad</em> are considered in context—a “perfect” design may qualify as an anti-pattern if applied in the wrong context.</p>

<p>To summarize, an anti-pattern is a bad design that is worthy of documenting.</p>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Anti-Patterns in JavaScript"><div class="sect1" id="idm45017718266576">
<h1>Anti-Patterns in JavaScript</h1>

<p>Developers sometimes knowingly opt<a data-type="indexterm" data-primary="anti-patterns" data-secondary="JavaScript anti-patterns" id="idm45017716312336"/><a data-type="indexterm" data-primary="patterns" data-secondary="anti-patterns" data-tertiary="JavaScript anti-patterns" id="idm45017716311296"/><a data-type="indexterm" data-primary="design patterns" data-secondary="anti-patterns" data-tertiary="JavaScript anti-patterns" id="idm45017716310064"/><a data-type="indexterm" data-primary="JavaScript" data-secondary="anti-patterns" id="idm45017716308832"/> for shortcuts and temporary solutions to expedite code deliveries. These tend to become permanent and accumulate as technical debt that is essentially made up of anti-patterns. JavaScript is a weakly typed or untyped language that makes taking certain shortcuts easier. Following are some examples of anti-patterns that you might come across in JavaScript:</p>

<ul>
<li>
<p>Polluting the global namespace by defining numerous variables in the global 
<span class="keep-together">context.</span></p>
</li>
<li>
<p>Passing strings rather than functions to either <code>setTimeout</code> or <code>setInterval</code>, as this triggers the use of <code>eval()</code> internally.</p>
</li>
<li>
<p>Modifying the <code>Object</code> class prototype (this is a particularly bad anti-pattern).</p>
</li>
<li>
<p>Using JavaScript in an inline form, as this is inflexible.</p>
</li>
</ul>

<ul class="less_space pagebreak-before">
<li>
<p>The use of <code>document.write</code> where native Document Object Model (DOM) alternatives such as <code>document.createElement</code> are more appropriate. <code>document.write</code> has been grossly misused over the years and has quite a few disadvantages. If it’s executed after the page has been loaded, it can overwrite the page we’re on, which makes <code>document.createElement</code> a far better choice. Visit <a href="https://oreil.ly/kc1c0">this link</a> for a live example of this in action. It also doesn’t work with XHTML, which is another reason opting for more DOM-friendly methods such as 
<span class="keep-together"><code>document.createElement</code></span> is favorable.</p>
</li>
</ul>

<p>Knowledge of anti-patterns is critical for success. Once we learn to recognize such anti-patterns, we can refactor our code to negate them so that the overall quality of our solutions improves instantly.</p>
</div></section>






<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idm45017716252080">
<h1>Summary</h1>

<p>This chapter covered patterns that could cause problems known as anti-patterns and examples of JavaScript anti-patterns. Before we cover JavaScript design patterns in detail, we must touch upon some critical modern JavaScript concepts that will prove relevant to our discussion on patterns. This is the subject of the next chapter, which introduces modern JavaScript features and syntax.</p>
</div></section>
</div></section></div></body></html>