<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 8. Navigation ui: Going Places"><div class="chapter" id="navigation_uicolon_going_places">
<h1><span class="label">Chapter 8. </span>Navigation ui: <em>Going Places</em></h1>
<figure class="informal"><div class="figure">
<img src="Images/f0293-01.png" alt="image" width="600" height="361"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="Navigation component" data-seealso="navigation UI" id="idm46053739820704"/><a data-type="indexterm" data-primary="navigation UI" data-seealso="recycler view navigation" id="idm46053739819520"/><a data-type="indexterm" data-primary="Secret Message app" data-secondary="fragments and navigation" data-see="Navigation component" id="idm46053739818448"/><strong>Most apps need to be able to navigate between destinations.</strong></p>
<p>And with Android’s Navigation component, building this UI became much simpler. Here, you’ll learn how to use some of Android’s navigation UI components so that <strong>your users can navigate your app more easily</strong>. You’ll see how to use <strong>themes</strong>, and replace your app’s default app bar with a <strong>toolbar</strong>, You’ll learn how to add <strong>menu items</strong> you can <strong>use for navigation</strong>. You’ll discover how to implement <strong>bottom bar navigation</strong>. Finally, you’ll create a swish <strong>navigation drawer</strong>: a panel that slides out from the side of your activity.</p>
<section data-type="sect1" data-pdf-bookmark="Different apps, different structures"><div class="sect1" id="different_appscomma_different_structures">
<h1>Different apps, different structures</h1>
<p>In the previous two chapters, you learned how to use Android’s Navigation component to navigate from fragment to fragment by clicking on a button. This approach worked well in the Secret Message app because we needed to navigate from one destination to another in a linear way:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0294-01.png" alt="image" width="600" height="243"/>
<h6/>
</div></figure>
<p>But not all apps follow this kind of structure. Many apps have screens you need to be able to navigate to from wherever you are in the app. An email app, for example, may have inbox, sent items, and help screens that must be available throughout the app:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0294-02.png" alt="image" width="600" height="201"/>
<h6/>
</div></figure>
<p>When you have an app with a looser navigation structure like this, how do you make sure you can always navigate to each screen?</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Android includes navigation UI components"><div class="sect1" id="android_includes_navigation_ui_component">
<h1>Android includes navigation UI components</h1>
<p><a data-type="indexterm" data-primary="app bar" id="idm46053739802976"/><a data-type="indexterm" data-primary="bottom navigation bar" id="idm46053739801856"/><a data-type="indexterm" data-primary="navigation drawer" id="idm46053739801024"/><a data-type="indexterm" data-primary="navigation UI" data-secondary="navigation drawer" data-see="navigation drawer" id="idm46053739800192"/>When you have screens you want to be able to access from anywhere in your app, you might want to use one of Android’s navigation UI components. They include:</p>
<section data-type="sect2" data-pdf-bookmark="An app bar"><div class="sect2" id="an_app_bar">
<h2>An app bar</h2>
<p>This is a bar that appears at the top of the screen, and Android Studio usually includes one for you by default. You can add items to the app bar which, when clicked, navigate to destinations.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0295-01.png" alt="image" width="343" height="208"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="The bottom navigation bar"><div class="sect2" id="the_bottom_navigation_bar">
<h2>The bottom navigation bar</h2>
<p>This appears at the bottom of the screen. It features a small number of items you can use for navigation.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0295-02.png" alt="image" width="471" height="144"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="A navigation drawer"><div class="sect2" id="a_navigation_drawer">
<h2>A navigation drawer</h2>
<p>This is a drawer that slides out from the edge of the screen. Many apps include one of these as it can be very flexible.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0295-03.png" alt="image" width="427" height="387"/>
<h6/>
</div></figure>
<p>In this chapter, we’re going to discover how to implement each of these three types of navigation UI by building a prototype email app named CatChat.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="brain_power">
<h5><span class="inlineimage"><img src="Images/brain.png" alt="Images" width="113" height="131"/></span> Brain Power</h5>
<p>Think about where you may have seen each of these navigation UI components in existing Android apps. What situations do you think each one is best for? Why?</p>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="How the CatChat app will work"><div class="sect1" id="how_the_catchat_app_will_work">
<h1>How the CatChat app will work</h1>
<p><a data-type="indexterm" data-primary="CatChat app" data-seealso="navigation UI" id="idm46053739782176"/><a data-type="indexterm" data-primary="fragments" data-secondary="CatChat app" id="idm46053739780592"/>The CatChat app will feature a single activity named <code>MainActivity</code>, and three fragments: <code>InboxFragment</code>, <code>SentItemsFragment</code>, and <code>HelpFragment</code>. Each fragment will be displayed in <code>MainActivity</code> as the user navigates to each one.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0296-01.png" alt="image" width="600" height="120"/>
<h6/>
</div></figure>
<p>The app will include an app bar that includes a Help menu item. When the user clicks on this, the app will navigate to <code>HelpFragment</code> by displaying it in <code>MainActivity</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0296-02.png" alt="image" width="600" height="148"/>
<h6/>
</div></figure>
<p>The app will also feature a navigation drawer that will be used to navigate between all three fragments. The drawer will include an item for each fragment, and clicking on each one will display the correct fragment:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0296-03.png" alt="image" width="600" height="334"/>
<h6/>
</div></figure>
<p>Let’s go through the steps we’ll take to create the CatChat app.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Here’s what we’re going to do"><div class="sect1" id="hereapostrophes_what_weapostroph-id00103">
<h1>Here’s what we’re going to do</h1>
<p>There are four main steps we’ll go through to create the CatChat app:</p>
<ol>
<li><p><strong>Replace the default app bar with a toolbar.</strong></p>
<p>A toolbar looks like an app’s default app bar, but it provides you with more flexibility, and includes the latest app bar features. Along the way, you’ll learn how to apply themes and styles.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0297-01.png" alt="image" width="344" height="142"/>
<h6/>
</div></figure></li>
<li><p><strong>Add a Help menu item to the toolbar.</strong></p>
<p>When clicked, the Help menu item will navigate to <code>HelpFragment</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0297-02.png" alt="image" width="600" height="124"/>
<h6/>
</div></figure></li>
<li><p><strong>Implement the bottom bar navigation.</strong></p>
<p>We’ll add a bottom bar to the app so that we can navigate between each of the app’s fragments.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0297-03.png" alt="image" width="600" height="134"/>
<h6/>
</div></figure></li>
<li><p><strong>Create the navigation drawer.</strong></p>
<p>Finally, we’ll replace the bottom navigation bar with a navigation drawer. The drawer will include a header image, and items for each of the app’s fragments, grouped into sections.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0297-04.png" alt="image" width="366" height="394"/>
<h6/>
</div></figure></li>
</ol>
<p>We’ll start by creating a new project for the CatChat app.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Create a new project"><div class="sect1" id="create_a_new_project-id00104">
<h1>Create a new project</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0298-01.png" alt="image" width="316" height="115"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="app bar" data-secondary="default" id="idm46053739749744"/><a data-type="indexterm" data-primary="CatChat app" data-secondary="toolbar" id="idm46053739748576"/><a data-type="indexterm" data-primary="navigation UI" data-secondary="theme" id="idm46053739747472"/><a data-type="indexterm" data-primary="themes" data-secondary="applying to project" id="idm46053739746368"/><a data-type="indexterm" data-primary="toolbar" data-secondary="creating" id="idm46053739745264"/>We’re going to use a new project for the CatChat app, so create a new Android Studio project using the same steps you used in the previous chapters. Choose the Empty Activity option, enter a name of “CatChat” and a package name of “com.hfad.catchat”, and accept the default save location. Make sure the language is set to Kotlin and the minimum SDK is API 21 so that it will run on most Android devices.</p>
<section data-type="sect2" data-pdf-bookmark="A default app bar gets added…"><div class="sect2" id="a_default_app_bar_gets_addedhellip">
<h2>A default app bar gets added…</h2>
<p>When you create a new project with an empty activity, Android Studio usually includes an app bar that displays the app’s name. You can see this app bar at the top of the screen when you run the app:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0298-02.png" alt="image" width="600" height="130"/>
<h6/>
</div></figure>
<p>Having an app bar is useful for a number of reasons:</p>
<ul style="list-style-type:none;">
<li><p><span class="inlineimage"><img src="Images/star.png" alt="Images" width="17" height="17"/></span> <strong>It makes key actions more prominent in a way that’s predictable, such as sharing content or performing searches.</strong></p></li>
<li><p><span class="inlineimage"><img src="Images/star.png" alt="Images" width="17" height="17"/></span> <strong>It can help the user know where they are in the app by displaying the app name, or a label for the current screen.</strong></p></li>
<li><p><span class="inlineimage"><img src="Images/star.png" alt="Images" width="17" height="17"/></span> <strong>You can use it to navigate to different destinations.</strong></p></li>
</ul>
<p>But how does the app bar get added?</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="…by applying a theme"><div class="sect2" id="hellipby_applying_a_theme">
<h2>…by applying a theme</h2>
<p>The default app bar gets added to the app by applying a <strong>theme</strong>. A theme gives your app a consistent look and feel across multiple screens. It controls the app’s general appearance, and whether it includes an app bar.</p>
<p>Android comes with a number of themes you can use in your apps, and by default, Android Studio applies one that includes an app bar.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The CatChat app will use a Material theme"><div class="sect1" id="the_catchat_app_will_use_a_material_them">
<h1>The CatChat app will use a Material theme</h1>
<p><a data-type="indexterm" data-primary="Material design system" data-seealso="navigation UI" id="idm46053739725568"/><a data-type="indexterm" data-primary="Material You" id="idm46053739724400"/>We’re going to apply a theme to the CatChat app that uses <strong>Material Design</strong>.</p>
<p>Material is a design system developed by Google that helps you build high-quality apps and websites with a consistent look and feel. The idea behind it is that a user can switch from a Google app like the Play Store to an app designed by a third-party developer and instantly feel comfortable and know what to do.</p>
<p>Material was originally inspired by print-based design principles and movement to reflect how real-world objects (such as index cards and pieces of paper) look and behave. Its latest evolution is known as <strong>Material You</strong>, which gives users a more fluid experience with a personalized color palette.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="serious_coding-id00105">
<h5><span class="inlineimage"><img src="Images/cap.png" alt="Images" width="91" height="93"/></span> Serious Coding</h5>
<p>Material Design includes a whole host of components, themes, tools, and guidelines. You’ll put some of these into practice over the next couple chapters, and you can learn more here:</p>
<p><em><a href="https://material.io">https://material.io</a></em></p>
</div></aside>
<section data-type="sect2" data-pdf-bookmark="The app build.gradle file needs a Material library dependency"><div class="sect2" id="the_app_builddotgradle_file_needs_a_mate">
<h2>The <u>app</u> build.gradle file needs a Material library dependency</h2>
<p>The Material themes are held in a separate library that you need to include in your app. You do this by adding a dependency to the <em>com.google.android.material</em> library in the app’s <em>build.gradle</em> file.</p>
<p>As we want to use a Material theme in the CatChat app, we need to make sure it includes this library. Open the file <em>CatChat/app/build.gradle</em>, and make sure it includes the following line (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0299-02.png" alt="image" width="600" height="150"/>
<h6/>
</div></figure>
<p>Android Studio may have already added this dependency to the file for you. If not, you’ll need to add it yourself, and click on the Sync Now option that appears at the top of the code editor to sync the change with the rest of your project.</p>
<p>We want to apply a Material theme to the CatChat app to control its app bar. Let’s find out how to do this.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Apply a theme in AndroidManifest.xml"><div class="sect1" id="apply_a_theme_in_androidmanifestdotxml">
<h1>Apply a theme in AndroidManifest.xml</h1>
<p><a data-type="indexterm" data-primary="AndroidManifest.xml file" data-secondary="theme in" id="idm46053739706784"/><a data-type="indexterm" data-primary="app bar" data-secondary="attributes in manifest file for" id="idm46053739708752"/><a data-type="indexterm" data-primary="app bar" data-secondary="label for" id="idm46053739705280"/><a data-type="indexterm" data-primary="app bar" data-secondary="themes required for" id="idm46053739704304"/><a data-type="indexterm" data-primary="label attribute" id="idm46053739703328"/><a data-type="indexterm" data-primary="label attribute" data-secondary="application" id="idm46053739702592"/><a data-type="indexterm" data-primary="theme attribute, navigation" id="idm46053739701616"/>You apply a theme in the app’s <em>AndroidManifest.xml</em> file. As you learned in <a data-type="xref" href="ch03.xhtml#layoutscolon_being_a_layout">Chapter 3</a>, this file provides information about the app’s configuration. It features attributes—including the theme—that have a direct impact on the app bar.</p>
<p>Here’s the <em>AndroidManifest.xml</em> code Android Studio created for us in the CatChat project (we’ve bolded the key areas):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0300-02.png" alt="image" width="600" height="388"/>
<h6/>
</div></figure>
<p>The <code><strong>android:label</strong></code> attribute refers to the text that’s displayed in the app bar, and it’s the name you specify when you first create the app. In the code above, it uses a <code>String</code> resource named <code>app_name</code>, which Android Studio has added to <em>strings.xml</em>.</p>
<p>The <code><strong>android:theme</strong></code> attribute specifies the theme. In the code above, it’s set using:</p>
<pre data-type="programlisting">android:theme="@style/Theme.CatChat"&gt;</pre>
<p>This specifies that the theme is defined as a style resource (denoted by <code>@style</code>) named <code>Theme.CatChat</code>.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Define styles in style resource files"><div class="sect1" id="define_styles_in_style_resource_files">
<h1>Define styles in style resource files</h1>
<p><a data-type="indexterm" data-primary="dark app bar" id="idm46053739689424"/><a data-type="indexterm" data-primary="name attribute" data-secondary="style" id="idm46053739688096"/><a data-type="indexterm" data-primary="parent attribute, style" id="idm46053739686992"/><a data-type="indexterm" data-primary="style element" id="idm46053739686160"/><a data-type="indexterm" data-primary="styles, defining in style resource files" id="idm46053739685328"/>Style resources are used to describe any themes and styles the app needs to use, and they’re held in one or more style resources files.</p>
<p>When we created the CatChat app, Android Studio created two style resource files for us. Both files are named <em>themes.xml</em>, and they’re located in the <em>app/src/main/res/values</em> and <em>app/src/main/res/values-night</em> folders. The one in the <em>values</em> folder is the app’s default style resource file, while the one in the <em>values-night</em> folder is used at night.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#9D9EA0;">Some versions of Android Studio name this file styles.xml instead.</span></p>
</div>
<p><em>themes.xml</em> in the <em>values</em> folder defines a style code like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0301-03.png" alt="image" width="600" height="279"/>
<h6/>
</div></figure>
<p>The <code><strong>&lt;style&gt;</strong></code> element tells Android that it’s a style resource.</p>
<p>Every style must have a name to identify it by, and you define this using the <code><strong>name</strong></code> attribute like so:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0301-04.png" alt="image" width="569" height="27"/>
<h6/>
</div></figure>
<p><em>AndroidManifest.xml</em>’s <code>theme</code> attribute uses this name to set the app’s theme, for example <code>"@style/Theme.CatChat"</code>.</p>
<p>The style also includes a <code><strong>parent</strong></code> attribute, which specifies which underlying theme the style should be based on. The above code uses:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0301-05.png" alt="image" width="600" height="54"/>
<h6/>
</div></figure>
<p>which is a theme with a dark app bar that lets the app transition between day and night themes. During the day, it uses the style defined in the <em>values</em> folder’s style resource file, and it switches to the one in the <em>values-night</em> folder at night:</p>
<p>The above style also includes <code>&lt;item&gt;</code> elements, which override some of the theme’s colors. Let’s look at this in more detail.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Styles can override theme colors"><div class="sect1" id="styles_can_override_theme_colors">
<h1>Styles can override theme colors</h1>
<p><a data-type="indexterm" data-primary="color resource file, toolbar theme" id="idm46053739669280"/><a data-type="indexterm" data-primary="item elements" data-secondary="styles" id="idm46053739662784"/><a data-type="indexterm" data-primary="themes" data-secondary="color resource file" id="idm46053739661808"/>If you want to override any properties in the parent theme, such as its color scheme, you can do so by adding <code>&lt;item&gt;</code> elements to the style. The CatChat app, for example, includes items that override the primary and secondary brand colors. The primary color is the app’s main color, and it’s used for things like the app bar. The secondary color provides a contrast, and it’s used by some views.</p>
<p>You can use multiple style resource files to apply a different color scheme in different situations. The CatChat app, for example, includes one style resource file in the <em>values</em> folder, and another in <em>values-night</em>. This arrangement—along with the <code>DayNight</code> theme each style is based on—lets you apply different color schemes during the day and at night.</p>
<p>Here’s the code the CatChat app uses to override the primary colors in its <em>themes.xml</em> file in the <em>values</em> folder:</p>
<pre data-type="programlisting">&lt;item name="colorPrimary"&gt;@color/purple_500&lt;/item&gt;
&lt;item name="colorPrimaryVariant"&gt;@color/purple_700&lt;/item&gt;
&lt;item name="colorOnPrimary"&gt;@color/white&lt;/item&gt;</pre>
<p>As you can see, each item has a name, and uses <code>@color</code> to refer to a color in a <strong>color resource file</strong>.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="serious_coding-id00106">
<h5><span class="inlineimage"><img src="Images/cap.png" alt="Images" width="91" height="93"/></span> Serious Coding</h5>
<p>You can find out more about how colors are used here:</p>
<p><em><a href="https://material.io/develop/android/theming/color">https://material.io/develop/android/theming/color</a></em></p>
<p>There’s also a color tool to help you choose your app’s color scheme:</p>
<p><em><a href="https://material.io/tools/color">https://material.io/tools/color</a></em></p>
</div></aside>
<section data-type="sect2" data-pdf-bookmark="Color resource files define a set of colors"><div class="sect2" id="color_resource_files_define_a_set_of_col">
<h2>Color resource files define a set of colors</h2>
<p>When you create a new project, Android Studio usually includes a default color resource file named <em>colors.xml</em>. It’s located in the <em>app/src/main/res/values</em> folder, and its colors can be used throughout your app.</p>
<p>A typical color resource file looks like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0302-02.png" alt="image" width="600" height="188"/>
<h6/>
</div></figure>
<p>To change your app’s color scheme, simply add the colors you want to the color resource file, and refer to them in its style resource files.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Replace the default app bar with a toolbar"><div class="sect1" id="replace_the_default_app_bar_with_a_toolb">
<h1>Replace the default app bar with a toolbar</h1>
<p><a data-type="indexterm" data-primary="app bar" data-secondary="removing with theme" id="idm46053739639696"/><a data-type="indexterm" data-primary="app bar" data-secondary="replacing with toolbar" id="idm46053739638240"/><a data-type="indexterm" data-primary="themes" data-secondary="removing default app bar using" id="idm46053739637136"/><a data-type="indexterm" data-primary="toolbar" data-secondary="replacing app bar with" id="idm46053739636064"/>So far, you’ve seen how Android Studio adds a default app bar to your app by applying a theme. Adding an app bar in this way is easy, but a more flexible approach is to <strong>replace it with a toolbar</strong>.</p>
<p>A basic toolbar looks just like the default app bar you’ve already seen, but it’s much more flexible. You can change its height, for example, and in the next chapter, you’ll learn how to make one expand or collapse when the user scrolls the device screen. It also includes all the latest app bar features, so applying a toolbar makes it easier to include these in your app.</p>
<p>You replace the default app bar by removing the original app bar, including a toolbar in your layout, and then telling the activity to use the toolbar as its app bar. We’ll show you how to do this over the next few pages.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0303-02.png" alt="image" width="379" height="219"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Remove the default app bar using a theme"><div class="sect2" id="remove_the_default_app_bar_using_a_theme">
<h2>Remove the default app bar using a theme</h2>
<p>You remove the default app bar by applying a theme to the app that doesn’t include an app bar.</p>
<p>The current version of the CatChat app, for example, uses the theme <code>Theme.MaterialComponents.DayNight.DarkActionBar</code>. We’re going to remove the default app bar by replacing it with <code>Theme.MaterialComponents.DayNight.NoActionBar</code>. These two themes have the same general appearance, except that the second has no app bar.</p>
<p>Change the theme now by updating the code in the <em>themes.xml</em> files in the <em>values</em> and <em>values-night</em> folders so that they include the change shown below (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0303-03.png" alt="image" width="347" height="279"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0303-04.png" alt="image" width="600" height="205"/>
<h6/>
</div></figure>
<p>That’s everything that we need to do to remove the default app bar. Next up, how to add the toolbar.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A toolbar is a type of View"><div class="sect1" id="a_toolbar_is_a_type_of_view">
<h1>A toolbar is a type of View</h1>
<p><a data-type="indexterm" data-primary="?attr reference" id="idm46053739625792"/><a data-type="indexterm" data-primary="Material design system" data-secondary="toolbar" id="idm46053739620528"/><a data-type="indexterm" data-primary="MaterialToolbar class" id="idm46053739618000"/><a data-type="indexterm" data-primary="views" data-secondary="toolbar as type of view" id="idm46053739617232"/>Unlike the default app bar, a toolbar is a type of view that you add to your layout. As it’s a view, this means you have full control over its size and position.</p>
<p>Different types of toolbars are available, and in the CatChat app we’re going to use a <strong>Material toolbar</strong>. This is a type of toolbar that works well with Material themes, such as the one we’re using in this app.</p>
<p>You add a Material toolbar using code like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0304-02.png" alt="image" width="600" height="126"/>
<h6/>
</div></figure>
<p>You start by defining the toolbar using:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0304-03.png" alt="image" width="600" height="40"/>
<h6/>
</div></figure>
<p>where <code>com.google.android.material.appbar.MaterialToolbar</code> is the fully qualified path of the <code>MaterialToolbar</code> class. You then use other view attributes to give it an ID, and specify its appearance. To make the toolbar as wide as its parent and as tall as the default app bar from the underlying theme, for example, you use:</p>
<pre data-type="programlisting">android:layout_width="match_parent"
android:layout_height="?attr/actionBarSize"</pre>
<p>The <code><strong>?attr</strong></code> prefix in the above code means that you want to use an attribute from the current theme. In this particular case, we’re using <code>?attr/actionBarSize</code> to refer to the height of the theme’s default app bar.</p>
<p>You can also style the toolbar so that it uses the app’s primary colors. This is done using the line:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0304-04.png" alt="image" width="600" height="67"/>
<h6/>
</div></figure>
<p>Now that you’ve learned what toolbar code looks like, let’s add one to <code>MainActivity</code>’s layout.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Add the toolbar to activity_main.xml"><div class="sect1" id="add_the_toolbar_to_activityunderscoremai">
<h1>Add the toolbar to activity_main.xml</h1>
<p><a data-type="indexterm" data-primary="navigation UI" data-secondary="toolbar" data-see="toolbar" id="idm46053739601184"/><a data-type="indexterm" data-primary="toolbar" id="idm46053739599600"/><a data-type="indexterm" data-primary="toolbar" data-secondary="code for" id="idm46053739598768"/>We’re going to add a toolbar to <code>MainActivity</code>’s layout so it appears at the top of the screen. Update the code in <em>activity_main.xml</em> so that it matches the code below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0305-02.png" alt="image" width="600" height="295"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="Where did the app name go?"><div class="sect2" id="where_did_the_app_name_goquestion_mark">
<h2>Where did the app name go?</h2>
<p>The above code adds a toolbar to <code>MainActivity</code>’s layout, but it doesn’t yet include any app bar functionality. If you were to run the app at this point, you’d find, for example, that the app name isn’t displayed in the toolbar as it was in the default app bar we had previously:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0305-03.png" alt="image" width="600" height="124"/>
<h6/>
</div></figure>
<p>To get the toolbar to behave like a proper app bar, we need to make some changes to the activity’s Kotlin code.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Set the toolbar as MainActivity’s app bar"><div class="sect1" id="set_the_toolbar_as_mainactivityapostroph">
<h1>Set the toolbar as MainActivity’s app bar</h1>
<p><a data-type="indexterm" data-primary="onCreate() method, activity" data-secondary="toolbar" id="idm46053739587376"/><a data-type="indexterm" data-primary="setSupportActionBar() method, toolbar" id="idm46053739585920"/>To make the toolbar behave like a proper app bar, you need to tell <code>MainActivity</code> to treat it as one. You do this by calling the <code><strong>setSupportActionBar()</strong></code> method in the activity’s Kotlin code, and passing it a reference to the toolbar like so:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0306-02.png" alt="image" width="600" height="102"/>
<h6/>
</div></figure>
<p>We’ll add this code to <code>MainActivity</code>’s <code>onCreate()</code> method so that it runs immediately after the activity gets created. Update the code for <em>MainActivity.kt</em> so that it includes the changes (in bold) shown below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0306-03.png" alt="image" width="600" height="297"/>
<h6/>
</div></figure>
<p>That’s everything we need to replace the app’s default app bar with a toolbar. Let’s take the app for a test drive and make sure it appears correctly.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark=" Test Drive"><div class="sect1" id="test_drive-id00107">
<h1><span class="inlineimage"><img src="Images/car.png" alt="Images" width="119" height="58"/></span> Test Drive</h1>
<p>When we run the app, <code>MainActivity</code> displays a toolbar at the top of the screen. The toolbar includes the name of the app.</p>
<p>Now that we’ve replaced the default app bar with a toolbar, let’s add some more functionality to it.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0306-04.png" alt="image" width="502" height="237"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Let’s use the toolbar to navigate"><div class="sect1" id="letapostrophes_use_the_toolbar_to_naviga">
<h1>Let’s use the toolbar to navigate</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0307-01.png" alt="image" width="316" height="120"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="CatChat app" data-secondary="toolbar navigation" id="idm46053739569008"/><a data-type="indexterm" data-primary="HelpFragment, CatChat app" id="idm46053739567536"/><a data-type="indexterm" data-primary="Help item, CatChat toolbar" id="idm46053739566736"/><a data-type="indexterm" data-primary="InboxFragment, CatChat app" id="idm46053739565936"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" id="idm46053739565136"/>At the beginning of the chapter, we said we wanted to be able to navigate to different screens in the CatChat app using Android’s navigation UI components. Now that we’ve added a toolbar to the app, let’s create a couple of screens, and use the toolbar to navigate between them.</p>
<section data-type="sect2" data-pdf-bookmark="How toolbar navigation will work"><div class="sect2" id="how_toolbar_navigation_will_work">
<h2>How toolbar navigation will work</h2>
<p>We’ll begin by creating two new fragments—<code>InboxFragment</code> and <code>HelpFragment</code>—which will be displayed in <code>MainActivity</code> when the user navigates to each one. <code>InboxFragment</code> will be displayed when the app is launched, and <code>HelpFragment</code> will be displayed when we navigate to it.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><span style="color:#9D9EA0;">We’re not going to add any email or help functionality to InboxFragment and HelpFragment. We’ll just display a piece of text in each one so we know which fragment is being displayed.</span></p>
</div>
<p>We’ll navigate to <code>HelpFragment</code> by adding a Help item to the toolbar so it looks like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0307-03.png" alt="image" width="600" height="109"/>
<h6/>
</div></figure>
<p>We’ll add the Help item using a menu; you’ll find out how to do this a few pages ahead.</p>
<p>When we click on the Help item, the app will navigate to <code>HelpFragment</code>. We’ll also update the toolbar’s title to indicate what the current screen is, and provide an Up button to make it easy to navigate back to <code>InboxFragment</code>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0307-04.png" alt="image" width="577" height="226"/>
<h6/>
</div></figure>
<p>So that’s how the toolbar navigation will work. Let’s start implementing it by adding <code>InboxFragment</code> and <code>HelpFragment</code> to the app.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00108">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Why is the method you use to set an app bar called <code><strong>setSupportActionBar()</strong></code>? Shouldn’t it be <code><strong>setSupportAppBar()</strong></code>?</strong></p>
<p><strong>A:</strong> In early versions of Android, the app bar was called an action bar, and behind the scenes, the default app bar uses a class named <code>ActionBar</code>. This is why the method is called <code>setSupportActionBar</code>.</p>
<p><strong>Q: Can styles only be used to override the default colors?</strong></p>
<p><strong>A:</strong> No, you can use them to override any of the theme’s properties. To stop the text on all buttons from being displayed as uppercase, for example, you can add an item with the name <code>"android:textAllCaps"</code>, which has the value <code>false</code>.</p>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Create InboxFragment"><div class="sect1" id="create_inboxfragment">
<h1>Create InboxFragment</h1>
<p><a data-type="indexterm" data-primary="InboxFragment, CatChat app" id="idm46053739539616"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="InboxFragment" id="idm46053739538720"/>We want to display <code>InboxFragment</code> in <code>MainActivity</code> when the app launches. Highlight the <em>com.hfad.catchat</em> package in the <em>app/src/main/java</em> folder, then go to File→New→Fragment→Fragment (Blank). Name the fragment “InboxFragment”, name its layout “fragment_inbox”, and make sure the language is set to Kotlin. Then update the code for <em>InboxFragment.kt</em> to match the code below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0308-02.png" alt="image" width="373" height="140"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0308-03.png" alt="image" width="600" height="294"/>
<h6/>
</div></figure>
<p>And here’s the code for <em>fragment_inbox.xml</em> (update the code for this file too):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0308-04.png" alt="image" width="600" height="269"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Create HelpFragment"><div class="sect1" id="create_helpfragment">
<h1>Create HelpFragment</h1>
<p><a data-type="indexterm" data-primary="HelpFragment, CatChat app" data-secondary="creating" id="idm46053739526784"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="HelpFragment" id="idm46053739525424"/>We’ll display <code>HelpFragment</code> in <code>MainActivity</code> when the user clicks on the Help item in the toolbar. Highlight the <em>com.hfad.catchat</em> package in the <em>app/src/main/java</em> folder, then go to File→New→Fragment→Fragment (Blank). Name the fragment “HelpFragment”, name its layout “fragment_help”, and make sure the language is set to Kotlin. Then make sure the code for <em>HelpFragment.kt</em> matches the code below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0309-02.png" alt="image" width="362" height="143"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0309-03.png" alt="image" width="600" height="288"/>
<h6/>
</div></figure>
<p>Then make sure the code for <em>fragment_help.xml</em> matches the layout below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0309-04.png" alt="image" width="600" height="257"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="We’ll use the Navigation component to navigate to HelpFragment"><div class="sect1" id="weapostrophell_use_the_navigation_compon">
<h1>We’ll use the Navigation component to navigate to HelpFragment</h1>
<p><a data-type="indexterm" data-primary="Navigation component" data-secondary="adding to CatChat project" id="idm46053739512448"/>In <a data-type="xref" href="ch06.xhtml#fragments_and_navigationcolon_finding_yo">Chapter 6</a>, you learned how to navigate between fragments using Android’s Navigation component. Even though we’re now going to use the toolbar to navigate to a new destination, we can still use the Navigation component for all our navigation needs.</p>
<p>We first need to add the Navigation component to the CatChat project using Gradle.</p>
<section data-type="sect2" data-pdf-bookmark="Add a version number to the project build.gradle file"><div class="sect2" id="add_a_version_number_to_the_proj-id00109">
<h2>Add a version number to the <u>project</u> build.gradle file</h2>
<p>Just as before, you need to add a new variable to the project’s <em>build.gradle</em> file that specifies the version of the Navigation component that should be added to the app.</p>
<p>Open the file <em>CatChat/build.gradle</em>, and add the following line (in bold) to the <code>buildscript</code> section:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0310-02.png" alt="image" width="493" height="144"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect2" data-pdf-bookmark="Add dependencies to the app build.gradle file"><div class="sect2" id="add_dependencies_to_the_app_builddotgrad">
<h2>Add dependencies to the <u>app</u> build.gradle file</h2>
<p>Next, you need to add two Navigation component dependencies to the app’s version of the <em>build.gradle</em> file.</p>
<p>Open the file <em>CatChat/app/build.gradle</em>, and add the following two lines (in bold) to the <code>dependencies</code> section:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0310-03.png" alt="image" width="600" height="212"/>
<h6/>
</div></figure>
<p>Once you’ve made these changes, click on the Sync Now option that appears at the top of the code editor to sync the changes with the rest of your project.</p>
<p>Now that you’ve added the Navigation component to your project, let’s use it to create a navigation graph after the following exercise.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00110">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Do I have to add the Navigation component to each app that includes navigation? Isn’t there a shortcut?</strong></p>
<p><strong>A:</strong> The Navigation component isn’t included in the main Android libraries, so you need to add it to your project before you can use it.</p>
<p>Some versions of Android Studio automatically add Navigation component dependencies when you create a navigation graph, but they might use a different version. We’re getting you to add them manually so that you know it’s there, and what version it is.</p>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="whatapostrophes_my_purposequesti-id00111">
<h5>What’s My Purpose?</h5>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="What’s My Purpose?" id="idm46053739492944"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="CatChat app exercise" id="idm46053739490160"/>We’re going to use the Navigation component to navigate between fragments in the CatChat app, but can you can remember what each part of the Navigation component does?</p>
<p>Draw a line from each part to its purpose. Hint: some things might have more than one purpose.</p>
<table class="border">
<tbody>
<tr>
<td><strong>Component part</strong></td>
<td><strong>Purpose</strong></td>
</tr>
<tr>
<td> </td>
<td>A place you can navigate to, usually a fragment.</td>
</tr>
<tr>
<td><strong>NavHostFragment</strong></td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>Holds navigation information such as destinations.</td>
</tr>
<tr>
<td><strong>Navigation graph</strong></td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>An empty container used to display destinations.</td>
</tr>
<tr>
<td><strong>Destination</strong></td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>Describes the possible navigation paths through an app.</td>
</tr>
<tr>
<td><strong>Navigation host</strong></td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>Controls which destination is displayed.</td>
</tr>
<tr>
<td><strong>Navigation controller</strong></td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>A default implementation of a navigation host.</td>
</tr>
</tbody>
</table>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="whatapostrophes_my_purpose_solut-id00112">
<h5>What’s My Purpose Solution?</h5>
<p>We’re going to use the Navigation component to navigate between fragments in the CatChat app, but can you can remember what each part of the Navigation component does?</p>
<p>Draw a line from each part to its purpose. Hint: some things might have more than one purpose.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0312-01.png" alt="image" width="600" height="604"/>
<h6/>
</div></figure>
</div></aside>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Add the fragments to a navigation graph"><div class="sect1" id="add_the_fragments_to_a_navigation_graph">
<h1>Add the fragments to a navigation graph</h1>
<p><a data-type="indexterm" data-primary="HelpFragment, CatChat app" data-secondary="navigation graph" id="idm46053739466432"/><a data-type="indexterm" data-primary="InboxFragment, CatChat app" id="idm46053739461968"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation graph" data-tertiary="toolbar" id="idm46053739461168"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="navigation graph" id="idm46053739459792"/>As you already know, your app’s navigation graph holds details of the destinations in your app and the possible paths you can take to navigate to them. As <code>InboxFragment</code> and <code>HelpFragment</code> are possible destinations in the CatChat app, we’ll create a new navigation graph, and add the two fragments to it.</p>
<p>To create the navigation graph, select the <em>CatChat/app/src/main/res</em> folder in the project explorer, and then choose File→New→Android Resource File. When prompted, enter a file name of “nav_graph”, choose a resource type of “Navigation”, and click on the OK button.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0313-02.png" alt="image" width="268" height="203"/>
<h6/>
</div></figure>
<p>Next, open the navigation graph (file <em>nav_graph.xml</em>), switch to the Code view, and update the file so that it matches the code below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0313-03.png" alt="image" width="600" height="395"/>
<h6/>
</div></figure>
<p>The above code adds <code>InboxFragment</code> and <code>HelpFragment</code> to the navigation graph, and assigns a user-friendly label to each one.</p>
<p>Those are all the changes we need to make to the navigation graph. Next, let’s update <code>MainActivity</code>’s layout so that it can display each fragment when we navigate to it.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Add a navigation host to activity_main.xml"><div class="sect1" id="add_a_navigation_host_to_activityundersc">
<h1>Add a navigation host to activity_main.xml</h1>
<p><a data-type="indexterm" data-primary="FragmentContainerView" data-secondary="navigation host" id="idm46053739446320"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation host" data-tertiary="FragmentContainerView" id="idm46053739444800"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="navigation host" id="idm46053739443424"/>As you learned in <a data-type="xref" href="ch06.xhtml#fragments_and_navigationcolon_finding_yo">Chapter 6</a>, you display each destination you navigate to by adding a navigation host to the activity’s layout. You do this using a <code>FragmentContainerView</code>, specifying the type of navigation host you want to use, and the name of the navigation graph.</p>
<p>The code to do this in the CatChat app is almost the same as the code that we added to the Secret Message app in <a data-type="xref" href="ch06.xhtml#fragments_and_navigationcolon_finding_yo">Chapter 6</a>. Update your code for <em>activity_main.xml</em> to include the changes below (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0314-02.png" alt="image" width="254" height="478"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0314-03.png" alt="image" width="600" height="463"/>
<h6/>
</div></figure>
<p>Now that we’ve added the navigation host, let’s add an item to the toolbar, which we can use to navigate to <code>HelpFragment</code>.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Specify items in the toolbar with a menu resource file"><div class="sect1" id="specify_items_in_the_toolbar_with_a_menu">
<h1>Specify items in the toolbar with a menu resource file</h1>
<p><a data-type="indexterm" data-primary="menu resource file" data-secondary="toolbar" id="idm46053739431808"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="menu resource file" id="idm46053739430544"/>You tell Android which items should appear on the toolbar by defining a <strong>menu</strong>. Each menu is defined in an XML menu resource file which specifies the items that you want to appear.</p>
<p>We’re going to create a new menu resource file named <em>menu_toolbar.xml</em> which we’ll use to add the Help item to the toolbar. Select the <em>app/src/main/res</em> folder, go to the File menu, choose New, and then select the option to create a new Android resource file. When prompted, give it a name of “menu_toolbar”, specify a resource type of “Menu”, and make sure that the directory name is <em>menu</em>. When you click on the OK button, Android Studio will create the file for you, and add it to the <em>app/src/main/res/menu</em> folder.</p>
<p>Just like navigation graphs and layout files, you can edit menu resource files by updating the XML code, or by using the built-in design editor. Here’s what the design editor looks like:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0315-01.png" alt="image" width="600" height="428"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00113">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Is it just toolbars that use menu resource files?</strong></p>
<p><strong>A:</strong> As you’ll find out later in the chapter, menu resource files are also used for bottom navigation bars and navigation drawers. You can create pop-up and context menus with them too. Find out more here:</p>
<p><em><a href="https://developer.android.com/guide/topics/ui/menus">https://developer.android.com/guide/topics/ui/menus</a></em></p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Let’s add a Help item to the menu"><div class="sect1" id="letapostrophes_add_a_help_item_to_the_me">
<h1>Let’s add a Help item to the menu</h1>
<p><a data-type="indexterm" data-primary="HelpFragment, CatChat app" data-secondary="adding to menu" id="idm46053739420304"/><a data-type="indexterm" data-primary="icon attribute, menu item" id="idm46053739416736"/><a data-type="indexterm" data-primary="id attribute" id="idm46053739415920"/><a data-type="indexterm" data-primary="id attribute" data-secondary="menu item" id="idm46053739415088"/><a data-type="indexterm" data-primary="item elements" id="idm46053739413984"/><a data-type="indexterm" data-primary="item elements" data-secondary="menu" id="idm46053739413152"/><a data-type="indexterm" data-primary="menu root element, menu resource file" id="idm46053739412048"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="ID attribute" id="idm46053739411248"/><a data-type="indexterm" data-primary="showAsAction attribute, toolbar" id="idm46053739410144"/><a data-type="indexterm" data-primary="title attribute, menu item" id="idm46053739409344"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="Help item for" id="idm46053739408544"/>We want to be able to navigate to <code>HelpFragment</code> from the toolbar, so we’ll add a Help item to the menu resource file. We’ll do this by directly editing the XML code.</p>
<p>Switch to the Code view of <em>menu_toolbar.xml</em>, then update the code so it matches the code below (the lines you need to add are in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0316-02.png" alt="image" width="600" height="253"/>
<h6/>
</div></figure>
<p>Every menu resource file, including the one above, has a <code><strong>&lt;menu&gt;</strong></code> root element. This is what tells Android that it defines a menu.</p>
<p>Inside the <code>&lt;menu&gt;</code> element, you typically have a number of <code>&lt;item&gt;</code> elements, each one describing a separate item. In this particular case, there’s a single Help item with the title “Help”.</p>
<p>The <code>&lt;item&gt;</code> element has a number of attributes that you can use to control the item’s appearance.</p>
<p>The <code>android:id</code> attribute assigns an ID to the item. This ID is used by the Navigation component to navigate to a destination, and <strong>it must have the same ID as the destination you want to navigate to in the navigation graph</strong>. You’ll find out how this works a few pages ahead.</p>
<p>The <code>android:icon</code> attribute specifies which icon (if any) should be displayed for the item. Android has many built-in icons, and the IDE presents you with a list of available ones when you start typing the icon name.</p>
<p>The <code>android:title</code> attribute defines the item’s text.</p>
<p>The <code>app:showAsAction</code> attribute specifies how you want the item to appear in the toolbar. Setting it to “always” means that it should always appear in the main area of the toolbar.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="watch_itexclamation_mark-id00114">
<h5><span class="inlineimage"><img src="Images/watch.png" alt="Images" width="89" height="84"/></span> Watch it!</h5>
<p><strong>The menu item’s ID must match the destination ID in the navigation graph.</strong></p>
<p><em>Navigation UI components—such as the toolbar—rely on these IDs being the same. If they’re different, your toolbar navigation won’t work properly.</em></p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="onCreateOptionsMenu() adds menu items to the toolbar"><div class="sect1" id="oncreateoptionsmenuleft_parenthesisright">
<h1>onCreateOptionsMenu() adds menu items to the toolbar</h1>
<p><a data-type="indexterm" data-primary="actions" id="idm46053739388960"/><a data-type="indexterm" data-primary="actions" data-secondary="in app bar" id="idm46053739387856"/><a data-type="indexterm" data-primary="HelpFragment, CatChat app" data-secondary="activity navigation to" id="idm46053739386720"/><a data-type="indexterm" data-primary="menu resource file" data-secondary="toolbar" id="idm46053739385648"/><a data-type="indexterm" data-primary="onCreateOptionsMenu() method, activity" id="idm46053739384544"/>Once you’ve defined the menu resource file, you add its items to the toolbar by implementing the <code><strong>onCreateOptionsMenu()</strong></code> method in your activity code. This method gets called when the activity is ready to add items to the toolbar. It inflates the menu resource file, and adds each item it describes to the toolbar.</p>
<p>In the CatChat app, we want to add the item defined in <em>menu_toolbar.xml</em> to <code>MainActivity</code>’s toolbar. The code to add this item is shown below in bold (you’ll update your code a few pages ahead):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0317-02.png" alt="image" width="600" height="296"/>
<h6/>
</div></figure>
<p>The line:</p>
<pre data-type="programlisting">menuInflater.inflate(R.menu.menu_toolbar, menu)</pre>
<p>inflates the menu resource file. Behind the scenes, it creates a <code>Menu</code> object that represents the menu resource file, and any items the menu resource file contains are translated to <code>MenuItem</code> objects. These are then added to the toolbar.</p>
<p>That’s everything that’s needed to add a menu to the toolbar. Next, we’ll make <code>MainActivity</code> navigate to <code>HelpFragment</code> when the user clicks the Help item.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0317-03.png" alt="image" width="405" height="172"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Respond to menu item clicks with onOptionsItemSelected()"><div class="sect1" id="respond_to_menu_item_clicks_with_onoptio">
<h1>Respond to menu item clicks with onOptionsItemSelected()</h1>
<p><a data-type="indexterm" data-primary="onCreateOptionsMenu() method, activity" id="idm46053739371984"/><a data-type="indexterm" data-primary="onOptionsItemSelected() method, activity" id="idm46053739370832"/>Once you’ve used the <code>onCreateOptionsMenu()</code> method to add menu items to the toolbar, you make them respond to clicks by implementing <code><strong>onOptionsItemSelected()</strong></code>. This method runs whenever an item in the toolbar is clicked:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0318-02.png" alt="image" width="600" height="74"/>
<h6/>
</div></figure>
<p>In the CatChat app, we want to navigate to <code>HelpFragment</code> when the user clicks the Help menu item, and we can achieve this with a little help from the Navigation component.</p>
<p>Here’s what the code looks like; we’ll add these changes to <em>MainActivity.kt</em> a few pages ahead:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0318-03.png" alt="image" width="600" height="386"/>
<h6/>
</div></figure>
<p>Each time the Help menu item is clicked, the navigation controller gets its ID and looks for a matching one in the navigation graph. It then passes the destination with this ID to the navigation host so that it’s displayed on the device screen.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="We need to configure the toolbar"><div class="sect1" id="we_need_to_configure_the_toolbar">
<h1>We need to configure the toolbar</h1>
<p><a data-type="indexterm" data-primary="InboxFragment, CatChat app" id="idm46053739362032"/><a data-type="indexterm" data-primary="toolbar" data-secondary="using to navigate" data-tertiary="configuring to show Help" id="idm46053739360752"/><a data-type="indexterm" data-primary="Up navigation versus Back navigation" id="idm46053739359104"/>We’ve now covered everything that’s needed to add the Help menu item to the toolbar and make it navigate to <code>HelpFragment</code>. Before we take the app for a test drive, however, there’s one more change we’re going to make.</p>
<p>When we defined the navigation graph <em>nav_graph.xml</em> earlier in the chapter, we added labels to each destination using code like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0319-02.png" alt="image" width="600" height="267"/>
<h6/>
</div></figure>
<p>To make it clear which screen is being displayed, we’re going to configure the toolbar so that each time we navigate to a new destination, its label is displayed in the toolbar. We’ll also add an Up button to the toolbar so that when the user navigates to <code>HelpFragment</code>, it provides an easy way of navigating back to <code>InboxFragment</code>:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0319-03.png" alt="image" width="600" height="168"/>
<h6/>
</div></figure>
<p>Up navigation may sound the same as using the device Back button, but it’s slightly different. The Back button allows users to work their way <em>back</em> through the back stack: the history of screens they’ve visited. The Up button, on the other hand, is based on the navigation graph hierarchy. It provides a quick way of going <em>up</em> this hierarchy.</p>
<p>We can configure the toolbar to update the text and include an Up button using the Navigation component. Let’s find out how.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Configure the toolbar using an AppBarConfiguration"><div class="sect1" id="configure_the_toolbar_using_an_appbarcon">
<h1>Configure the toolbar using an AppBarConfiguration</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0320-01.png" alt="image" width="316" height="116"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="Android Jetpack" data-secondary="Navigation" data-see="Navigation component" id="idm46053739343952"/><a data-type="indexterm" data-primary="AppBarConfiguration class" id="idm46053739342480"/><a data-type="indexterm" data-primary="menu" data-see="Navigation component" id="idm46053739341680"/><a data-type="indexterm" data-primary="multi-screen apps" data-see="Navigation component" id="idm46053739340576"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="AppBarConfiguration class" id="idm46053739339472"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation controller" data-tertiary="onCreate()" id="idm46053739338400"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation graph" data-tertiary="onCreate()" id="idm46053739337024"/><a data-type="indexterm" data-primary="onCreate() method, activity" data-secondary="Navigation component" id="idm46053739335648"/>We want to configure the toolbar so that the text it displays corresponds to the label of the current destination in the navigation graph, and so that it includes an Up button. We can do this by building an <code><strong>AppBarConfiguration</strong></code> object that’s based on the navigation graph, and linking it to the toolbar. The <code>AppBarConfiguration</code> class is part of the Navigation component, and it’s used to make app bars and toolbars play nicely with the navigation controller.</p>
<p>Here’s the code to build an <code>AppBarConfiguration</code> and link it to a toolbar (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0320-02.png" alt="image" width="600" height="223"/>
<h6/>
</div></figure>
<p>The above code first gets a reference to the navigation controller from the navigation host using the code:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0320-03.png" alt="image" width="600" height="112"/>
<h6/>
</div></figure>
<p>Code like this is necessary whenever you need to get a reference to the navigation controller from an activity’s <code>onCreate()</code> method.</p>
<p>The code then builds a configuration that links the toolbar to the navigation graph, and applies it to the toolbar.</p>
<p>When the code runs, it uses information in the navigation graph to display the current destination’s label. It also adds an Up button to the toolbar for all destinations except the navigation graph’s Start destination, which in this case is <code>InboxFragment</code>.</p>
<p>That’s everything that you need to know to implement toolbar navigation. We’ll show you the full <code>MainActivity</code> code on the next page.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for MainActivity.kt"><div class="sect1" id="the_full_code_for_mainactivitydo-id00115">
<h1>The full code for MainActivity.kt</h1>
<p><a data-type="indexterm" data-primary="toolbar" data-secondary="code for" id="idm46053739323904"/>Here’s the complete code for <em>MainActivity.kt</em>; update your code to include the changes below (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0321-02.png" alt="image" width="600" height="641"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="What happens when the app runs"><div class="sect1" id="what_happens_when_the_app_runs-id00116">
<h1>What happens when the app runs</h1>
<p><a data-type="indexterm" data-primary="onCreateOptionsMenu() method, activity" id="idm46053739318032"/>The following things happen when the app runs:</p>
<ol>
<li><p><strong>The app is launched and MainActivity gets created.</strong></p>
<p><code>InboxFragment</code> is added to the navigation host and displayed on the device screen.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0322-02.png" alt="image" width="516" height="179"/>
<h6/>
</div></figure></li>
<li><p><strong>MainActivity’s onCreateOptionsMenu method runs.</strong></p>
<p>It adds the Help menu item defined in <em>menu_toolbar.xml</em> to the toolbar.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0322-03.png" alt="image" width="600" height="222"/>
<h6/>
</div></figure></li>
<li><p><strong>The user clicks the Help item in the toolbar.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0322-04.png" alt="image" width="381" height="190"/>
<h6/>
</div></figure></li>
<li><p><strong>MainActivity’s onOptionsItemSelected() method runs.</strong></p>
<p>It passes navigation for the Help item to the navigation controller.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0323-02.png" alt="image" width="600" height="223"/>
<h6/>
</div></figure></li>
<li><p><strong>The navigation controller looks for the Help item’s ID in the navigation graph.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0323-03.png" alt="image" width="600" height="220"/>
<h6/>
</div></figure></li>
<li><p><strong>The navigation controller replaces InboxFragment with HelpFragment in the navigation host.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0323-04.png" alt="image" width="600" height="193"/>
<h6/>
</div></figure></li>
</ol>
</div></section>
<section data-type="sect1" data-pdf-bookmark=" Test Drive"><div class="sect1" id="test_drive-id00117">
<h1><span class="inlineimage"><img src="Images/car.png" alt="Images" width="119" height="58"/></span> Test Drive</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0324-01.png" alt="image" width="316" height="116"/>
<h6/>
</div></figure>
<p>When we run the CatChat app, <code>MainActivity</code> is launched, and <code>InboxFragment</code> is displayed in <code>MainActivity</code>’s layout.</p>
<p>A Help item is displayed in <code>MainActivity</code>’s toolbar. When we click on it, the app navigates to <code>HelpFragment</code>. The toolbar text is changed to “Help” and an Up button appears.</p>
<p>When we click on the Up button, the app navigates to <code>InboxFragment</code>. The Up button disappears and the text “Inbox” is displayed in the toolbar.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0324-02.png" alt="image" width="600" height="319"/>
<h6/>
</div></figure>
<p>Well done! You’ve now learned how to add a toolbar and use it for navigation.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00118">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Could we have added menu items and added an Up button using the default app bar?</strong></p>
<p><strong>A:</strong> Yes, but it would have required more Kotlin code to do so. To implement the Up button, for example, you’d need to override a separate method named <code>onSupportNavigateUp()</code>.</p>
<p><strong>Q: When does the Up button appear?</strong></p>
<p><strong>A:</strong> When any fragment is displayed in the navigation host that’s not the start destination in the navigation graph. In this example, it appears for any fragment except <code>InboxFragment</code>.</p>
<p><strong>Q: Can you add a toolbar to a fragment?</strong></p>
<p><strong>A:</strong> Yes. A toolbar is a type of <code>View</code>, so you can add it to activities or fragments.</p>
<p><strong>Q: How do I know whether to add it to an activity or a fragment?</strong></p>
<p><strong>A:</strong> If you want the toolbar’s layout to be the same for all fragments, add it to the activity that displays these fragments. If you want the toolbar’s layout to be significantly different, consider adding it to the fragment instead.</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark="BE the Menu"><div class="sect1" id="be_the_menu">
<h1>BE the Menu</h1>
<figure class="informal"><div class="figure">
<img src="Images/common04.png" alt="image" width="156" height="199"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="exercises" data-secondary="Be the . . ." id="idm46053739275088"/><strong>A menu resource file and navigation graph is shown below. The menu is added to a toolbar. Your job is to play like you’re the menu, and say which fragment is navigated to when each item in the menu is clicked.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0325-01.png" alt="image" width="600" height="562"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="BE the Menu Solution"><div class="sect1" id="be_the_menu_solution">
<h1>BE the Menu Solution</h1>
<figure class="informal"><div class="figure">
<img src="Images/common04.png" alt="image" width="156" height="199"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="menu resource file" data-secondary="exercise" id="idm46053739267600"/><strong>A menu resource file and navigation graph is shown below. The menu is added to a toolbar. Your job is to play like you’re the menu, and say which fragment is navigated to when each item in the menu is clicked.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0326-01.png" alt="image" width="600" height="558"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Most types of UI navigation work with the Navigation component"><div class="sect1" id="most_types_of_ui_navigation_work_with_th">
<h1>Most types of UI navigation work with the Navigation component</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0327-01.png" alt="image" width="316" height="119"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="bottom navigation bar" id="idm46053739259520"/><a data-type="indexterm" data-primary="CatChat app" data-secondary="bottom navigation bar" id="idm46053739258592"/><a data-type="indexterm" data-primary="navigation UI" data-secondary="bottom navigation bar" id="idm46053739257488"/>In the chapter so far, you’ve learned how to enable toolbar navigation by defining a menu resource file, using the Navigation component to navigate between fragments, and configuring the toolbar to change its appearance as you navigate through the app.</p>
<p>The great news is that other types of UI navigation—such as bottom navigation bars and navigation drawers—work in a similar way. Even though they look different from one another, you can take the techniques you’ve learned for toolbar navigation and apply them to other types of navigation.</p>
<p>To see how this works, we’re going to add a bottom navigation bar to the CatChat app’s <code>MainActivity</code>.</p>
<blockquote>
<p><strong>A bottom navigation bar can hold up to five items. It’s displayed at the bottom of the screen.</strong></p>
</blockquote>
<section data-type="sect2" data-pdf-bookmark="How the bottom navigation bar will work"><div class="sect2" id="how_the_bottom_navigation_bar_will_work">
<h2>How the bottom navigation bar will work</h2>
<p>As its name suggests, a bottom navigation bar is a type of navigation bar that’s positioned at the bottom of the device screen. You can use it to navigate to up to five destinations.</p>
<p>The CatChat app’s bottom navigation bar will look like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0327-02.png" alt="image" width="600" height="151"/>
<h6/>
</div></figure>
<p>As you can see, the bar contains three items: Inbox, Sent Items, and Help. When we click on each item, the app will navigate to the fragment associated with it. When we click on the Help item, for example, the app will navigate to <code>HelpFragment</code>, and when we click on Sent Items, it will navigate to a new fragment (which we need to create) named <code>SentItemsFragment</code>.</p>
<p>We’ll implement bottom bar navigation over the next few pages, and we’ll start by creating the new fragment: <code>SentItemsFragment</code>.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Create SentItemsFragment"><div class="sect1" id="create_sentitemsfragment">
<h1>Create SentItemsFragment</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="SentItems Fragment" id="idm46053739247568"/><a data-type="indexterm" data-primary="SentItemsFragment" id="idm46053739244144"/>We need to create a new fragment named <code>SentItemsFragment</code>.</p>
<p>Highlight the <em>com.hfad.catchat</em> package in the <em>app/src/main/java</em> folder, then go to File→New→Fragment→Fragment (Blank). Name the fragment “SentItemsFragment”, name its layout “fragment_sent_items”, and make sure the language is set to Kotlin. Then update the code for <em>SentItemsFragment.kt</em> to match the code below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0328-02.png" alt="image" width="232" height="184"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0328-03.png" alt="image" width="600" height="292"/>
<h6/>
</div></figure>
<p>And here’s the code for <em>fragment_sent_items.xml</em> (update your version of this code too):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0328-04.png" alt="image" width="600" height="247"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Add SentItemsFragment to the Navigation graph"><div class="sect1" id="add_sentitemsfragment_to_the_navigation">
<h1>Add SentItemsFragment to the Navigation graph</h1>
<p><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation graph" data-tertiary="SentItemsFragment" id="idm46053739231824"/><a data-type="indexterm" data-primary="SentItemsFragment" id="idm46053739230064"/>We want to be able to navigate to <code>SentItemsFragment</code> from the bottom navigation bar using the Navigation component. To do this, we need to add the fragment to the navigation graph as a new destination.</p>
<p>Open the navigation graph file <em>nav_graph.xml</em> (if it’s not already open), then update its code so that it matches the code below (our changes are in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0329-02.png" alt="image" width="600" height="458"/>
<h6/>
</div></figure>
<p>As you can see, the new destination has an ID of <code>sentItemsFragment</code>, and a label of “Sent Items”. We’ll use the ID in the bottom navigation bar’s menu resource file, which we’ll create next.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The bottom navigation bar needs a new menu resource file"><div class="sect1" id="the_bottom_navigation_bar_needs_a_new_me">
<h1>The bottom navigation bar needs a new menu resource file</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="menu resource file" id="idm46053739222880"/><a data-type="indexterm" data-primary="menu resource file" id="idm46053739221744"/><a data-type="indexterm" data-primary="menu resource file" data-secondary="bottom navigation bar" id="idm46053739220912"/><a data-type="indexterm" data-primary="resource files" data-secondary="menu resources" data-see="menu resource file" id="idm46053739219808"/>Earlier in the chapter, we created a menu resource file named <em>menu_toolbar.xml</em> to add a Help item to the toolbar. While it’s possible for different navigation UI components to share the same menu, we need to create a new one for the bottom navigation bar because it shows two extra items: Inbox and Sent Items.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0330-02.png" alt="image" width="393" height="271"/>
<h6/>
</div></figure>
<p>To create the new menu resource file, select the <em>app/src/main/res</em> folder, go to the File menu, choose New, and then select the option to create a new Android resource file. When prompted, give it a name of “menu_main”, specify a resource type of “Menu”, and make sure the directory name is <em>menu</em>. When you click on the OK button, Android Studio will create the file for you, and add it to the <em>app/src/main/res/menu</em> folder.</p>
<p>Next, open the file <em>menu_main.xml</em> (if it’s not already open), and update its code to add menu items for <code>InboxFragment</code>, <code>SentItemsFragment</code>, and <code>HelpFragment</code> (shown below in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0330-03.png" alt="image" width="600" height="300"/>
<h6/>
</div></figure>
<p>Now that we’ve created the new menu resource file, let’s add a bottom navigation bar to <code>MainActivity</code>.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A bottom navigation bar is a type of View"><div class="sect1" id="a_bottom_navigation_bar_is_a_type_of_vie">
<h1>A bottom navigation bar is a type of View</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="as view type" id="idm46053739208816"/><a data-type="indexterm" data-primary="BottomNavigationView class" id="idm46053739205024"/><a data-type="indexterm" data-primary="menu attribute" id="idm46053739204160"/><a data-type="indexterm" data-primary="menu attribute" data-secondary="BottomNavigationView" id="idm46053739203328"/><a data-type="indexterm" data-primary="views" data-secondary="bottom navigation bar as type of view" id="idm46053739202224"/>Just like a toolbar, a bottom navigation bar is a type of view that you add to your layout. The code to add a bottom navigation bar looks like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0331-02.png" alt="image" width="600" height="107"/>
<h6/>
</div></figure>
<p>You start by defining the bottom navigation bar using:</p>
<pre data-type="programlisting">&lt;com.google.android.material.bottomnavigation.BottomNavigationView
    ... /&gt;</pre>
<p>where <code>com.google.android.material.bottomnavigation.BottomNavigationView</code> is the fully qualified path of the <code>BottomNavigationView</code> class: the class that defines the bar. You then use extra attributes to give it an ID, and specify its appearance.</p>
<p>Unlike a toolbar, you don’t need to write Kotlin code to add menu items to a bottom navigation bar. You simply specify which menu resource file to add to the bar using the <code>app:menu</code> attribute like this:</p>
<pre data-type="programlisting">app:menu="@menu/menu_main"</pre>
<p>The above code attaches the <em>menu_main.xml</em> menu resource file to the bottom navigation bar, and its items are added to the bar at runtime like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0331-03.png" alt="image" width="600" height="160"/>
<h6/>
</div></figure>
<p>Now that you’ve seen what bottom navigation bar code looks like, let’s add one to <code>MainActivity</code>’s layout.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for activity_main.xml"><div class="sect1" id="the_full_code_for_activityunders-id00119">
<h1>The full code for activity_main.xml</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="activity code for" id="idm46053739190336"/>Here’s the full code for <em>activity_main.xml</em>: update your code to include the changes below (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0332-02.png" alt="image" width="600" height="630"/>
<h6/>
</div></figure>
<p>Now that we’ve added the bottom navigation bar to <code>MainActivity</code>’s layout, let’s get it to navigate between destinations.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Link the bottom navigation bar to the navigation controller"><div class="sect1" id="link_the_bottom_navigation_bar_to_the_na">
<h1>Link the bottom navigation bar to the navigation controller</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="linking to navigation controller" id="idm46053739182752"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation controller" data-tertiary="linking bottom navigation bar" id="idm46053739181520"/>The code to make a bottom navigation bar navigate between destinations is simpler than the code needed to implement toolbar navigation. All you need to do is get a reference to the <code>BottomNavigationView</code>, which defines the navigation bar, and call its <code>setupWithNavController()</code> method.</p>
<p>Here’s what the code looks like:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0333-02.png" alt="image" width="600" height="181"/>
<h6/>
</div></figure>
<p>Each time you click on an item in the navigation bar, the navigation controller fetches its ID and looks for a destination with a matching ID in the navigation graph. It then passes this destination to the navigation host so that it’s displayed on the device screen.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0333-03.png" alt="image" width="600" height="352"/>
<h6/>
</div></figure>
<p>Let’s add the bottom navigation bar code to <em>MainActivity.kt</em>, and take the app for a test drive.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The updated code for MainActivity.kt"><div class="sect1" id="the_updated_code_for_mainactivit-id00120">
<h1>The updated code for MainActivity.kt</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="activity code for" id="idm46053739172896"/>Here’s the updated code for <em>MainActivity.kt</em>; update the code to include the changes below (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0334-02.png" alt="image" width="600" height="590"/>
<h6/>
</div></figure>
<p>Let’s take the app for a test drive.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark=" Test Drive"><div class="sect1" id="test_drive-id00121">
<h1><span class="inlineimage"><img src="Images/car.png" alt="Images" width="119" height="58"/></span> Test Drive</h1>
<p>When we run the CatChat app, <code>MainActivity</code> is launched, and <code>InboxFragment</code> is displayed in <code>MainActivity</code>’s layout. A bottom navigtion bar is displayed that contains three items.</p>
<p>When we click on each item in the bottom navigation bar, the app navigates to the appropriate screen. When we click on Sent Items, for example, <code>SentItemsFragment</code> is displayed in <code>MainActivity</code>, and when we click on the Help item, <code>HelpFragment</code> is displayed instead.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0335-02.png" alt="image" width="600" height="516"/>
<h6/>
</div></figure>
<p>The bottom navigation bar is working exactly how we want it to.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="A navigation drawer lets you display many navigation items"><div class="sect1" id="a_navigation_drawer_lets_you_display_man">
<h1>A navigation drawer lets you display many navigation items</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0336-01.png" alt="image" width="316" height="115"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="CatChat app" data-secondary="navigation drawer" id="idm46053739154592"/><a data-type="indexterm" data-primary="navigation drawer" id="idm46053739153392"/>As you’ve learned, a bottom navigation bar is a good option if you have a small number of navigation items because it allows you to display up to five such items. But what if you have a larger number of menu items?</p>
<p>If you want users to be able to navigate through a large number of options, a better choice might be a <strong>navigation drawer</strong>. This is a slide-out, scrollable panel that contains links to other parts of the app that you can optionally group into different sections.</p>
<p>Navigation drawers are widely used across Android apps. The Gmail app, for example, uses a navigation drawer that lets you navigate to different screens in the app, and contains sections such as email categories, recent labels, and all labels:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0336-02.png" alt="image" width="600" height="492"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Let’s replace the bottom navigation bar with a navigation drawer"><div class="sect1" id="letapostrophes_replace_the_bottom_naviga">
<h1>Let’s replace the bottom navigation bar with a navigation drawer</h1>
<p><a data-type="indexterm" data-primary="bottom navigation bar" data-secondary="replacing with navigation drawer" id="idm46053739146592"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="replacing bottom navigation bar with" id="idm46053739145392"/>We’re going to replace the bottom navigation bar we added to the CatChat app with a navigation drawer. The navigation drawer will contain a header image and a set of options. The main options will let the user navigate to <code>InboxFragment</code> and <code>SentItemsFragment</code>, and we’ll put a <code>HelpFragment</code> item in a separate section labeled Support. Here’s what the drawer will look like:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0337-02.png" alt="image" width="600" height="541"/>
<h6/>
</div></figure>
<p>The navigation drawer is composed of several different components. We’ll go through these on the next page.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Navigation drawers deconstructed"><div class="sect1" id="navigation_drawers_deconstructed">
<h1>Navigation drawers deconstructed</h1>
<p><a data-type="indexterm" data-primary="navigation drawer" data-secondary="layout" id="idm46053739140256"/><a data-type="indexterm" data-primary="views" data-secondary="navigation drawer" id="idm46053739138368"/>You implement a navigation drawer by adding a <strong>drawer layout</strong> to the root of your activity’s layout. The drawer layout contains two views:</p>
<ol>
<li><p><strong>A view for the screen’s main content</strong></p>
<p>This is usually a layout containing a toolbar and a navigation host, which you use to display fragments.</p></li>
<li><p><strong>A navigation view for the drawer’s contents</strong></p>
<p>A navigation view is a type of frame layout that’s used to display a navigation menu. In this app, it will display a drawer header too.</p></li>
</ol>
<p>When the drawer is closed, the drawer layout looks just like a normal activity, except that the toolbar includes a drawer icon that’s used to open the drawer:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0338-02.png" alt="image" width="600" height="211"/>
<h6/>
</div></figure>
<p>When you open the drawer, the navigation view slides over the activity’s main content to display the drawer’s contents. When you click on an item, it uses the Navigation component to display the relevant destination, and the drawer closes:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0338-03.png" alt="image" width="600" height="371"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The drawer gets its items from a menu"><div class="sect1" id="the_drawer_gets_its_items_from_a_menu">
<h1>The drawer gets its items from a menu</h1>
<p><a data-type="indexterm" data-primary="icons" data-secondary="navigation drawer" id="idm46053739127056"/><a data-type="indexterm" data-primary="menu resource file" data-secondary="navigation drawer" id="idm46053739125344"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="menu items" id="idm46053739124240"/>Just like a toolbar and bottom navigation bar, a navigation drawer gets the items it needs to display from a menu resource file.</p>
<p>Instead of creating a new menu resource file for the drawer, we’re going to reuse <em>menu_main.xml</em>: the file that we used for the bottom navigation bar. Here’s a reminder of the current code in <em>menu_main.xml</em>:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0339-02.png" alt="image" width="600" height="365"/>
<h6/>
</div></figure>
<p>The above menu resource file, when added to the navigation drawer, produces a list of items with an icon against each one. We’re going to tweak the menu to add an extra highlight to the item the user selects, and split the menu into sections:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0339-03.png" alt="image" width="600" height="162"/>
<h6/>
</div></figure>
<p>Let’s find out how.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Add the support section…"><div class="sect1" id="add_the_support_sectionhellip">
<h1>Add the support section…</h1>
<p><a data-type="indexterm" data-primary="navigation drawer" data-secondary="support section" id="idm46053739114944"/><a data-type="indexterm" data-primary="submenu, creating" id="idm46053739113584"/><a data-type="indexterm" data-primary="support section, navigation drawer" id="idm46053739112752"/>We’ll first add the Support heading, which is done by defining a new item. Because it’s just a heading, we only need to give it a title: it doesn’t have an icon, and no ID is required as we won’t use it to navigate anywhere.</p>
<p>Here’s the code to add the Support heading:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0340-02.png" alt="image" width="600" height="63"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="…as a separate submenu"><div class="sect2" id="hellipas_a_separate_submenu">
<h2>…as a separate submenu</h2>
<p>We want the Help item to appear under the Support heading so that it forms a separate section. To do this, we’ll define a submenu inside the Support item, specified by a <code>&lt;menu&gt;</code> element. We’ll add the Help item to this submenu.</p>
<p>Here’s the code to add a submenu, which includes a Help item; we’ll update <em>menu_main.xml</em> with this code a couple pages ahead:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0340-03.png" alt="image" width="251" height="278"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0340-04.png" alt="image" width="600" height="307"/>
<h6/>
</div></figure>
<p>The above submenu just contains a single item. If you wanted it to contain multiple items, you’d simply include each item in the submenu.</p>
<p>That’s all the code we need to add a Support section to the drawer’s menu. Next, let’s find out how to add an extra highlight to the item the user selects.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Highlight the selected item with groups"><div class="sect1" id="highlight_the_selected_item_with_groups">
<h1>Highlight the selected item with groups</h1>
<p><a data-type="indexterm" data-primary="checkableBehavior attribute" id="idm46053739100512"/><a data-type="indexterm" data-primary="group element, navigation drawer" id="idm46053739098016"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="highlighting selected item" id="idm46053739097280"/>The current menu produces a navigation drawer that changes the text color of the current selected item. You can make it extra clear to the user which item has been selected by adding an extra highlight like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0341-02.png" alt="image" width="600" height="154"/>
<h6/>
</div></figure>
<p>You add this extra highlight by placing items in a group using the <code><strong>&lt;group&gt;</strong></code> element. You then use an attribute named <code>android:checkableBehavior</code> to specify the group’s behavior when an item is selected.</p>
<p>Here’s the code to do this (we’ll update <em>menu_main.xml</em> on the next page):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0341-03.png" alt="image" width="600" height="245"/>
<h6/>
</div></figure>
<p>As you can see, the above code sets the <code>android:checkableBehavior</code> attribute to <code>"single"</code>. This option means that only a single item in the group at a time will be highlighted—the option the user selects.</p>
<p>That’s everything we need to make the menu look and behave the way we want when it’s used by a navigation drawer. We’ll show you the full code on the next page.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for menu_main.xml"><div class="sect1" id="the_full_code_for_menuunderscoremaindotx">
<h1>The full code for menu_main.xml</h1>
<p>We’re going to update the navigation drawer’s menu so that the Help menu is shown in a Support section. We’ll also use groups to add an extra highlight to the item the user selects.</p>
<p>Here’s the complete code for <em>menu_main.xml</em>; update its code to include all the changes (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0342-02.png" alt="image" width="600" height="541"/>
<h6/>
</div></figure>
<p>That’s the menu sorted. Next, we’ll create the navigation drawer’s header.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Create the navigation drawer’s header"><div class="sect1" id="create_the_navigation_drawerapostrophes">
<h1>Create the navigation drawer’s header</h1>
<p><a data-type="indexterm" data-primary="header layout, navigation drawer" id="idm46053739085152"/><a data-type="indexterm" data-primary="image resources" data-secondary="ImageView" id="idm46053739079392"/><a data-type="indexterm" data-primary="image resources" data-secondary="navigation drawer" id="idm46053739078288"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="header" id="idm46053739077184"/>The navigation drawer’s header is a simple layout that we’ll add to a new layout file named <em>nav_header.xml</em>.</p>
<p>Create this file now by selecting the <em>app/src/main/res/layout</em> folder in Android Studio, and choosing File→New→Layout Resource File. When prompted, name the layout “nav_header”, and if prompted, choose a resource type of Layout.</p>
<section data-type="sect2" data-pdf-bookmark="Add the image file…"><div class="sect2" id="add_the_image_filehellip">
<h2>Add the image file…</h2>
<p>The layout is composed of a single image, which needs to be added to the <em>app/src/main/res/drawable</em> folder. Android Studio probably created this folder for you when you created the project. If it’s not there, create it by selecting the <em>app/src/main/res</em> folder, going to the File menu, choose the New option, and then clicking on the option to create a new Android resource directory. When prompted, choose a resource type of Drawable, name it “drawable”, and click on OK.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0343-02.png" alt="image" width="317" height="299"/>
<h6/>
</div></figure>
<p>Once you’ve created the <em>drawable</em> folder, download the file <em>kitten_small.webp</em> from <em>tinyurl.com/hfad3</em>, and add it to the <em>drawable</em> folder.</p>
</div></section>
<section data-type="sect2" data-pdf-bookmark="…and update the nav_header.xml code"><div class="sect2" id="hellipand_update_the_navunderscoreheader">
<h2>…and update the nav_header.xml code</h2>
<p>We’ll add the image to <em>nav_header.xml</em> using an <code>&lt;ImageView&gt;</code> element. You already know how to use this element, so update the code for <em>nav_header.xml</em> to match the code below:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0343-03.png" alt="image" width="600" height="225"/>
<h6/>
</div></figure>
<p>Now that we have a header for the navigation drawer, let’s add the drawer itself.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="How to create a navigation drawer"><div class="sect1" id="how_to_create_a_navigation_drawer">
<h1>How to create a navigation drawer</h1>
<p><a data-type="indexterm" data-primary="DrawerLayout" id="idm46053739061360"/><a data-type="indexterm" data-primary="headerLayout attribute, NavigationView" id="idm46053739058544"/><a data-type="indexterm" data-primary="menu attribute" data-secondary="NavigationView" id="idm46053739057744"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="adding to main activity" id="idm46053739056640"/><a data-type="indexterm" data-primary="NavigationView" id="idm46053739055536"/>You create a navigation drawer by adding a <code><strong>DrawerLayout</strong></code> to the activity’s layout as its root element. The <code>DrawerLayout</code> needs to contain two things: a view or view group for the activity’s content as its first element, and a navigation view that defines the drawer’s contents as its second.</p>
<p>Typical <code>DrawerLayout</code> code looks like this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0344-02.png" alt="image" width="600" height="486"/>
<h6/>
</div></figure>
<p>There are two key <code>&lt;NavigationView&gt;</code> attributes that you use to control the drawer’s appearance: <code><strong>app:headerLayout</strong></code> and <code><strong>app:menu</strong></code>.</p>
<p>The <code>app:headerLayout</code> attribute specifies the layout that should be used for the navigation drawer’s header (in this case <em>nav_header.xml</em>). This attribute is optional.</p>
<p>The <code>app:menu</code> attribute specifies which menu resource file contains the drawer’s options (in this case <em>menu_main.xml</em>). If you don’t include this attribute, your navigation drawer won’t include any items.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for activity_main.xml"><div class="sect1" id="the_full_code_for_activityunders-id00122">
<h1>The full code for activity_main.xml</h1>
<p><a data-type="indexterm" data-primary="navigation drawer" data-secondary="activity code" id="idm46053739045776"/><a data-type="indexterm" data-primary="navigation UI" data-secondary="activity code" id="idm46053739042352"/>We want to replace the <code>MainActivity</code>’s bottom navigation bar with a navigation drawer. The code to do this is shown below; update file <em>activity_main.xml</em> to include the changes (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0345-02.png" alt="image" width="600" height="626"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0346-01.png" alt="image" width="600" height="285"/>
<h6/>
</div></figure>
<section data-type="sect2" data-pdf-bookmark="We’ve added a navigation drawer to the layout"><div class="sect2" id="weapostropheve_added_a_navigation_drawer">
<h2>We’ve added a navigation drawer to the layout</h2>
<p><a data-type="indexterm" data-primary="icons" data-secondary="navigation drawer" id="idm46053739033776"/>We’ve now replaced the bottom navigation bar in <code>MainActivity</code>’s layout with a navigation drawer. It displays an image in its header, and includes all the items specified in the menu resource file <em>menu_main.xml</em>.</p>
<p>Before we run the app, however, we need to link the navigation drawer to the navigation controller so that clicking on an item navigates to the correct fragment.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0346-02.png" alt="image" width="417" height="568"/>
<h6/>
</div></figure>
<p>We also need to configure the toolbar so that it includes a drawer icon that, when clicked, will open or close the navigation drawer:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0346-03.png" alt="image" width="555" height="147"/>
<h6/>
</div></figure>
<p>Both of these changes are made by tweaking the code in <em>MainActivity.kt</em>. Let’s find out how.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Configure the toolbar’s drawer icon…"><div class="sect1" id="configure_the_toolbarapostrophes_drawer">
<h1>Configure the toolbar’s drawer icon…</h1>
<p><a data-type="indexterm" data-primary="AppBarConfiguration class" id="idm46053739023712"/><a data-type="indexterm" data-primary="DrawerLayout" id="idm46053739022592"/><a data-type="indexterm" data-primary="Navigation component" data-secondary="navigation controller" data-tertiary="linking navigation drawer" id="idm46053739021760"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="configuring toolbar icon" id="idm46053739020416"/><a data-type="indexterm" data-primary="navigation drawer" data-secondary="linking to navigation controller" id="idm46053739019344"/><a data-type="indexterm" data-primary="toolbar" data-secondary="navigation drawer icon" id="idm46053739018272"/>Earlier in the chapter, we configured the toolbar to display the current destination’s label and include an Up button. We did this by building an <code>AppBarConfiguration</code> object, and linking it to the toolbar.</p>
<p>We now want the toolbar to include a drawer icon, and we can add one by adding the navigation drawer to the <code>AppBarConfiguration</code>. Here’s the code to do this:</p>
<figure class="informal"><div class="figure">
<img src="Images/f0347-02.png" alt="image" width="600" height="134"/>
<h6/>
</div></figure>
<p>The above code adds the drawer layout to the <code>AppBarConfiguration</code> object. This allows the toolbar to interact with the drawer by including a drawer icon on every screen where there’s no Up button.</p>
<section data-type="sect2" data-pdf-bookmark="…and link the drawer to the navigation controller"><div class="sect2" id="hellipand_link_the_drawer_to_the_navigat">
<h2>…and link the drawer to the navigation controller</h2>
<p>Finally, we need to make the drawer navigate to the correct destination each time the user clicks on one of its items. Just like with the bottom navigation bar, we do this by setting the navigation drawer up with the navigation controller.</p>
<p>Here’s the code to do this:</p>
<pre data-type="programlisting">val navHostFragment = supportFragmentManager
    .findFragmentById(R.id.nav_host_fragment) as NavHostFragment
val navController = navHostFragment.navController
<strong>val navView = findViewById&lt;NavigationView&gt;(R.id.nav_view)</strong>
<strong>NavigationUI.setupWithNavController(navView, navController)</strong></pre>
<figure class="informal"><div class="figure">
<img src="Images/f0347-03.png" alt="image" width="408" height="373"/>
<h6/>
</div></figure>
<p>Each time the user clicks on an item in the navigation drawer, the navigation controller gets its ID from the menu resource file, and looks for a matching ID in the navigation graph. It then navigates to the destination with that ID.</p>
<p>That’s all the code we need to control the navigation drawer’s behavior. Let’s add it to <em>MainActivity.kt</em> and take the app for a test drive.</p>
</div></section>
</div></section>
<section data-type="sect1" data-pdf-bookmark="The full code for MainActivity.kt"><div class="sect1" id="the_full_code_for_mainactivitydo-id00123">
<h1>The full code for MainActivity.kt</h1>
<p><a data-type="indexterm" data-primary="navigation drawer" data-secondary="activity code" id="idm46053739004208"/><a data-type="indexterm" data-primary="navigation UI" data-secondary="activity code" id="idm46053739002384"/>We need to update <code>MainActivity</code> to replace the bottom navigation code with the code for the navigation drawer. Update <em>MainActivity.kt</em> with the changes below (in bold):</p>
<figure class="informal"><div class="figure">
<img src="Images/f0348-02.png" alt="image" width="600" height="651"/>
<h6/>
</div></figure>
<figure class="informal"><div class="figure">
<img src="Images/f0349-01.png" alt="image" width="600" height="203"/>
<h6/>
</div></figure>
<p>That’s all the code we need for the navigation drawer. Let’s take it for a test drive.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="there_are_no_dumb_questions-id00124">
<h5>there are no Dumb Questions</h5>
<p><strong>Q: Why did we remove the bottom navigation bar? Can’t an app have both a bottom navigation bar and a navigation drawer?</strong></p>
<p><strong>A:</strong> Apps can have bottom navigation bars and navigation drawers. We decided to replace the bottom navigation bar with a navigation drawer in order to make it clearer what code was needed just for the navigation drawer.</p>
<p><strong>Q: I’d heard that it took lots of activity code to create a navigation drawer. Did I hear wrong?</strong></p>
<p><strong>A:</strong> In the old days, adding a navigation drawer to your app took lots of effort.</p>
<p>Including a navigation drawer is now much easier thanks to the Navigation component. It handles most of the hard work for you, making your activity code much simpler.</p>
<p><strong>Q: How does the navigation drawer know which fragment to navigate to?</strong></p>
<p><strong>A:</strong> The activity code includes a call to the <code>setupWithNavController()</code> method, and this links the drawer’s navigation view to the navigation controller.</p>
<p>When an item in the drawer is clicked, the ID of this item is passed to the navigation controller. The navigation controller looks up this ID in the navigation graph, and navigates to the destination with a matching ID.</p>
<p><strong>Q: Can you remind me what a navigation view is?</strong></p>
<p><strong>A:</strong> It’s a type of frame layout that is used to display a standard navigation menu. It’s usually used inside a navigation drawer.</p>
<p><strong>Q: I tried clicking on one of the items, but the drawer didn’t navigate to the right fragment. Why not?</strong></p>
<p><strong>A:</strong> First, make sure that your activity code calls the <code>setupWithNavController()</code> method. This links the drawer to the navigation controller, so if it’s missing, your drawer won’t be able to use the Navigation component.</p>
<p>Next, make sure that you have matching IDs in the drawer’s menu resource file and the navigation graph. If the navigation controller can’t find a matching ID, it won’t be able to use it to navigate.</p>
</div></aside>
</div></section>
<section data-type="sect1" data-pdf-bookmark=" Test Drive"><div class="sect1" id="test_drive-id00125">
<h1><span class="inlineimage"><img src="Images/car.png" alt="Images" width="119" height="58"/></span> Test Drive</h1>
<figure class="informal"><div class="figure">
<img src="Images/f0350-01.png" alt="image" width="315" height="116"/>
<h6/>
</div></figure>
<p>When we run the app, a drawer icon is displayed in the toolbar. Clicking on this icon opens the navigation drawer. When we click on one of the items in the drawer, the fragment for that option is displayed in <code>MainActivity</code> and the drawer closes.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0350-02.png" alt="image" width="600" height="534"/>
<h6/>
</div></figure>
<p>Congratulations! You’ve now learned how to create a fully operational navigation drawer.</p>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Layout Magnets"><div class="sect1" id="layout_magnets-id00126">
<h1>Layout Magnets</h1>
<figure class="informal"><div class="figure">
<img src="Images/common02.png" alt="image" width="86" height="144"/>
<h6/>
</div></figure>
<p><a data-type="indexterm" data-primary="layouts" data-secondary="exercises" id="idm46053738972544"/>Somebody used fridge magnets to write the layout code for a navigation drawer, but some of them fell off overnight. Can you put the code back together again?</p>
<p>The activity uses a linear layout for its main content (we’ve left out most of the code for this). The drawer needs to display a header, defined in a layout file named <em>header.xml</em>. Its menu items are specified in the menu resource file <em>menu_drawer.xml</em>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0351-01.png" alt="image" width="600" height="534"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Layout Magnets Solution"><div class="sect1" id="layout_magnets_solution-id00127">
<h1>Layout Magnets Solution</h1>
<figure class="informal"><div class="figure">
<img src="Images/common02.png" alt="image" width="86" height="144"/>
<h6/>
</div></figure>
<p>Somebody used fridge magnets to write the layout code for a navigation drawer, but some of them fell off overnight. Can you put the code back together again?</p>
<p>The activity uses a linear layout for its main content (we’ve left out most of the code for this). The drawer needs to display a header, defined in a layout file named <em>header.xml</em>. Its menu items are specified in the menu resource file <em>menu_drawer.xml</em>.</p>
<figure class="informal"><div class="figure">
<img src="Images/f0352-01.png" alt="image" width="600" height="556"/>
<h6/>
</div></figure>
</div></section>
<section data-type="sect1" data-pdf-bookmark="Your Android Toolbox"><div class="sect1" id="your_android_toolbox-id00128">
<h1>Your Android Toolbox</h1>
<figure class="informal"><div class="figure">
<img src="Images/tools.png" alt="image" width="182" height="129"/>
<h6/>
</div></figure>
<p><strong>You’ve got <a data-type="xref" href="#navigation_uicolon_going_places">Chapter 8</a> under your belt and now you’ve added navigation UI to your toolbox.</strong></p>
<figure class="informal"><div class="figure">
<img src="Images/f0353-01.png" alt="image" width="233" height="211"/>
<h6/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="bullet_points-id00129">
<h5>Bullet Points</h5>
<ul>
<li><p>The default app bar is added using a theme.</p></li>
<li><p>The <code>android:theme</code> attribute in <em>AndroidManifest.xml</em> specifies which theme to apply.</p></li>
<li><p>You define styles as <code>&lt;style&gt;</code> elements in one or more resource files.</p></li>
<li><p>You can replace the default app bar with a toolbar that includes the latest Android features.</p></li>
<li><p>A Material toolbar is a toolbar that works well with Material themes.</p></li>
<li><p>A menu resource file adds items to toolbars, bottom navigation bars, and navigation drawers.</p></li>
<li><p>Make sure there are matching item and destination IDs in the menu resource file and navigation graph. The Navigation component depends on matching IDs for navigation.</p></li>
<li><p>Add items to a toolbar using <code>onCreateOptionsMenu()</code>.</p></li>
<li><p>Implement toolbar navigation using <code>onOptionsItemSelected()</code>.</p></li>
<li><p>Use an <code>AppBarConfiguration</code> object to configure the toolbar to work with the Navigation component.</p></li>
<li><p>A bottom navigation bar can hold up to five items.</p></li>
<li><p>A navigation drawer can hold many items, grouped into sections.</p></li>
<li><p>Create a navigation drawer by adding a drawer layout to your activity’s layout. The drawer layout’s first element needs to be a view that defines the activity’s main content. Its second element defines the contents of the drawer.</p></li>
</ul>
</div></aside>
</div></section>
</div></section></div></body></html>